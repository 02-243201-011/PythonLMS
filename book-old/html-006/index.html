<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html --> 
<meta name="src" content="cfbook.tex"> 
<meta name="date" content="2012-05-22 11:46:00"> 
<link rel="stylesheet" type="text/css" href="cfbook.css"> 
</head><body 
>

<!--l. 26--><p class="indent" >

<div  
class="centerline"><img 
src="cfbook0x.png" alt="PIC" class="graphics" width="367.56387pt" height="289.07999pt" ><!--tex4ht:graphics  
name="cfbook0x.png" src="cover/network-um-nsf-9-99-10-09.eps"  
--></div>
<!--l. 67--><p class="noindent" >

<!--l. 68--><p class="noindent" >

                                                                        <div class="flushright" 
>
<!--l. 78--><p class="noindent" >
<!--l. 82--><p class="noindent" ><span 
class="ptmr7t-x-x-207">Python for Informatics</span><br />
<span 
class="ptmr7t-x-x-144">Exploring Information</span>
<!--l. 88--><p class="noindent" >Version 0.0.6
<!--l. 94--><p class="noindent" ><span 
class="ptmr7t-x-x-144">Charles Severance</span><br />

<div  
class="centerline">                           <img 
src="cfbook1x.png" alt="PIC" class="graphics" width="72.26999pt" height="25.28284pt" ><!--tex4ht:graphics  
name="cfbook1x.png" src="figs2/by-sa.eps"  
-->                           </div>
</div>

<!--l. 111--><p class="noindent" ><span 
class="ptmr7t-x-x-90">Copyright </span><span 
class="ptmr8c-x-x-90">©</span><span 
class="ptmr7t-x-x-90">&#x00A0;2009-2011 Charles Severance.</span>
<!--l. 114--><p class="noindent" ><span 
class="ptmr7t-x-x-90">Printing history:</span>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-x-x-90">December 2009:</span> </dt><dd 
class="description"><span 
class="ptmr7t-x-x-90">Begin to produce </span><span 
class="ptmri7t-x-x-90">Python for Informatics: Exploring Information </span><span 
class="ptmr7t-x-x-90">by re-mixing </span><span 
class="ptmri7t-x-x-90">Think</span>
     <span 
class="ptmri7t-x-x-90">Python: How to Think Like a Computer Scientist</span>
     </dd><dt class="description">
<span 
class="ptmb7t-x-x-90">June 2008:</span> </dt><dd 
class="description"><span 
class="ptmr7t-x-x-90">Major revision, changed title to </span><span 
class="ptmri7t-x-x-90">Think Python: How to Think Like a Computer Scientist</span><span 
class="ptmr7t-x-x-90">.</span>
     </dd><dt class="description">
<span 
class="ptmb7t-x-x-90">August 2007:</span> </dt><dd 
class="description"><span 
class="ptmr7t-x-x-90">Major revision, changed title to </span><span 
class="ptmri7t-x-x-90">How to Think Like a (Python) Programmer</span><span 
class="ptmr7t-x-x-90">.</span>
     </dd><dt class="description">
<span 
class="ptmb7t-x-x-90">April 2002:</span> </dt><dd 
class="description"><span 
class="ptmr7t-x-x-90">First edition of </span><span 
class="ptmri7t-x-x-90">How to Think Like a Computer Scientist</span><span 
class="ptmr7t-x-x-90">.</span>
     </dd></dl>
<!--l. 145--><p class="noindent" ><span 
class="ptmr7t-x-x-90">This work is licensed under a Creative Commons Attribution-Share Alike 3.0 Unported License. This license is</span>
<span 
class="ptmr7t-x-x-90">available at </span><a 
href="creativecommons.org/licenses/by-sa/3.0/" class="url" ><span 
class="pcrr7tn-x-x-90">creativecommons.org/licenses/by-sa/3.0/</span></a><span 
class="ptmr7t-x-x-90">.</span>
<!--l. 150--><p class="noindent" ><span 
class="ptmr7t-x-x-90">The original form of this book is </span><span class="LATEX"><span 
class="ptmr7t-x-x-90">L</span><span class="A"><span 
class="ptmr7t-x-x-90">A</span></span><span class="TEX"><span 
class="ptmr7t-x-x-90">T</span><span 
class="E"><span 
class="ptmr7t-x-x-90">E</span></span><span 
class="ptmr7t-x-x-90">X</span></span></span><span 
class="ptmr7t-x-x-90">&#x00A0;source code. Compiling this </span><span class="LATEX"><span 
class="ptmr7t-x-x-90">L</span><span class="A"><span 
class="ptmr7t-x-x-90">A</span></span><span class="TEX"><span 
class="ptmr7t-x-x-90">T</span><span 
class="E"><span 
class="ptmr7t-x-x-90">E</span></span><span 
class="ptmr7t-x-x-90">X</span></span></span><span 
class="ptmr7t-x-x-90">&#x00A0;source has the effect of</span>
<span 
class="ptmr7t-x-x-90">generating a device-independent representation of a textbook, which can be converted to other formats and</span>
<span 
class="ptmr7t-x-x-90">printed.</span>
<!--l. 155--><p class="noindent" ><span 
class="ptmr7t-x-x-90">The </span><span class="LATEX"><span 
class="ptmr7t-x-x-90">L</span><span class="A"><span 
class="ptmr7t-x-x-90">A</span></span><span class="TEX"><span 
class="ptmr7t-x-x-90">T</span><span 
class="E"><span 
class="ptmr7t-x-x-90">E</span></span><span 
class="ptmr7t-x-x-90">X</span></span></span><span 
class="ptmr7t-x-x-90">&#x00A0;source for the </span><span 
class="ptmri7t-x-x-90">Think Python: How to Think Like a Computer Scientist </span><span 
class="ptmr7t-x-x-90">version of this book is</span>
<span 
class="ptmr7t-x-x-90">available from </span><a 
href="http://www.thinkpython.com" class="url" ><span 
class="pcrr7tn-x-x-90">http://www.thinkpython.com</span></a><span 
class="ptmr7t-x-x-90">.</span>
<!--l. 161--><p class="noindent" ><span 
class="ptmr7t-x-x-90">The cover image shows social connectivity of NSF grant investigators at the University of Michigan from</span>
<span 
class="ptmr7t-x-x-90">September 1999 through October 2010 and was provided by Eric Hofer and visualized using the GUESS software</span>
<span 
class="ptmr7t-x-x-90">developed by Eytan Adar, both of the University of Michigan. The cover design is by Terri Geitgey of the</span>
<span 
class="ptmr7t-x-x-90">University of Michigan Library.</span>

<!--l. 192--><p class="noindent" >

<h2 class="chapterHead"><a 
 id="x1-1000"></a>Preface</h2>
<span 
class="ptmb7t-x-x-144">Python for Informatics: Remixing an Open Book</span>
<!--l. 196--><p class="noindent" >It is quite natural for academics who are continuously told to &#8220;publish or perish&#8221; to want to always
create something from scratch that is their own fresh creation. This book is an experiment in not
starting from scratch, but instead &#8220;re-mixing&#8221; the book titled <span 
class="ptmri7t-">Think Python: How to Think Like a</span>
<span 
class="ptmri7t-">Computer Scientist </span>written by Allen B. Downey, Jeff Elkner and others.
<!--l. 205--><p class="noindent" >In December of 2009, I was preparing to teach <span 
class="ptmb7t-">SI502 - Networked Programming </span>at the University of
Michigan for the fifth semester in a row and decided it was time to write a Python textbook that
focused on exploring data instead of understanding algorithms and abstractions. My goal in SI502 is to
teach people life-long data handling skills using Python. Few of my students were planning to be be
professional computer programmers. Instead, they planned be librarians, managers, lawyers,
biologists, economists, etc. who happened to want to skillfully use technology in their chosen
field.
<!--l. 217--><p class="noindent" >I never seemed to find the perfect data-oriented Python book for my course so I set out to write just
such a book. Luckily at a faculty meeting three weeks before I was about to start my new book from
scratch over the holiday break, Dr. Atul Prakash showed me the <span 
class="ptmri7t-">Think Python </span>book which he had used
to teach his Python course that semester. It is a well-written Computer Science text with a focus on
short, direct explanations and ease of learning.
<!--l. 227--><p class="noindent" >The overall book structure has been changed to get to doing data analysis problems as quickly as
possible and have a series of running examples and exercises about data analysis from the very
beginning.
<!--l. 232--><p class="noindent" >The first 10 chapters are similar to the <span 
class="ptmri7t-">Think Python </span>book but there have been some changes. Nearly all
number-oriented exercises have been replaced with data-oriented exercises. Topics are presented in the
order to needed to build increasingly sophisticated data analysis solutions. Some topics like <span 
class="pcrr7tn-">try </span>and
<span 
class="pcrr7tn-">except </span>are pulled forward and presented as part of the chapter on conditionals while other
concepts like functions are left until they are needed to handle program complexity rather
introduced as an early lesson in abstraction. The word &#8220;recursion&#8221; does not appear in the book at
all.
<!--l. 243--><p class="noindent" >In chapters 11-15, nearly all of the material is brand new, focusing on real-world uses and simple
examples of Python for data analysis including regular expressions for searching and parsing,
automating tasks on your computer, retrieving data across the network, scraping web pages for data,
using web services, parsing XML data, and creating and using databases using Structured Query
Language.
<!--l. 251--><p class="noindent" >The ultimate goal of all of these changes is a shift from a Computer Science to an Informatics focus is
to only include topics into a first technology class that can be applied even if one chooses not to
become a professional programmer.
<!--l. 257--><p class="noindent" >Students who find this book interesting and want to further explore should look at Allen B. Downey&#8217;s
<span 
class="ptmri7t-">Think Python </span>book. Because there is a lot of overlap between the two books, students will quickly pick
up skills in the additional areas of computing in general and computational thinking that are covered in

<span 
class="ptmri7t-">Think Python</span>. And given that the books have a similar writing style and at times have identical text and
examples, you should be able to move quickly through <span 
class="ptmri7t-">Think Python </span>with a minimum of
effort.
<a 
 id="dx1-1001"></a>
<a 
 id="dx1-1002"></a>
<a 
 id="dx1-1003"></a>
<!--l. 270--><p class="noindent" >As the copyright holder of <span 
class="ptmri7t-">Think Python</span>, Allen has given me permission to change the book&#8217;s license
from the GNU Free Documentation License to the more recent Creative Commons Attribution &#8212;
Share Alike license. This follows a general shift in open documentation licenses moving from the
GFDL to the CC-BY-SA (i.e. Wikipedia). Using the CC-BY-SA license maintains the book&#8217;s strong
copyleft tradition while making it even more straightforward for new authors to reuse this material as
they see fit.
<!--l. 283--><p class="noindent" >I feel that this book serves an example of why open materials are so important to the future of
education, and want to thank Allen B. Downey and Cambridge University Press for their forward
looking decision to make the book available under an open Copyright. I hope they are pleased
with the results of my efforts and I hope that you the reader are pleased with <span 
class="ptmri7t-">our </span>collective
efforts.
<!--l. 291--><p class="noindent" >Charles Severance<br 
class="newline" />www.dr-chuck.com<br 
class="newline" />Ann Arbor, MI, USA<br 
class="newline" />July 25, 2010
<!--l. 296--><p class="noindent" >Charles Severance is a Clinical Associate Professor at the University of Michigan School of
Information.
<!--l. 300--><p class="noindent" >
<!--l. 300--><p class="noindent" ><span 
class="ptmb7t-x-x-144">Preface for &#8220;Think Python&#8221;</span>
<!--l. 302--><p class="noindent" >
<!--l. 302--><p class="noindent" ><span 
class="ptmb7t-x-x-120">The strange history of &#8220;Think Python&#8221;</span>
<!--l. 304--><p class="noindent" >(Allen B. Downey)
<!--l. 306--><p class="noindent" >In January 1999 I was preparing to teach an introductory programming class in Java. I had taught it
three times and I was getting frustrated. The failure rate in the class was too high and, even for students
who succeeded, the overall level of achievement was too low.
<!--l. 311--><p class="noindent" >One of the problems I saw was the books. They were too big, with too much unnecessary
detail about Java, and not enough high-level guidance about how to program. And they
all suffered from the trap door effect: they would start out easy, proceed gradually, and
then somewhere around Chapter 5 the bottom would fall out. The students would get too

much new material, too fast, and I would spend the rest of the semester picking up the
pieces.
<!--l. 319--><p class="noindent" >Two weeks before the first day of classes, I decided to write my own book. My goals were:
     <ul class="itemize1">
     <li class="itemize">Keep it short. It is better for students to read 10 pages than not read 50 pages.
     </li>
     <li class="itemize">Be careful with vocabulary. I tried to minimize the jargon and define each term at first
     use.
     </li>
     <li class="itemize">Build gradually. To avoid trap doors, I took the most difficult topics and split them into a
     series of small steps.
     </li>
     <li class="itemize">Focus on programming, not the programming language. I included the minimum useful
     subset of Java and left out the rest.
     </li></ul>
<!--l. 339--><p class="noindent" >I needed a title, so on a whim I chose <span 
class="ptmri7t-">How to Think Like a Computer Scientist</span>.
<!--l. 342--><p class="noindent" >My first version was rough, but it worked. Students did the reading, and they understood enough that I
could spend class time on the hard topics, the interesting topics and (most important) letting the
students practice.
<!--l. 347--><p class="noindent" >I released the book under the GNU Free Documentation License, which allows users to copy, modify,
and distribute the book.
<a 
 id="dx1-1004"></a>
<a 
 id="dx1-1005"></a>
<!--l. 353--><p class="noindent" >What happened next is the cool part. Jeff Elkner, a high school teacher in Virginia, adopted my book
and translated it into Python. He sent me a copy of his translation, and I had the unusual experience of
learning Python by reading my own book.
<!--l. 358--><p class="noindent" >Jeff and I revised the book, incorporated a case study by Chris Meyers, and in 2001 we released <span 
class="ptmri7t-">How</span>
<span 
class="ptmri7t-">to Think Like a Computer Scientist: Learning with Python</span>, also under the GNU Free Documentation
License. As Green Tea Press, I published the book and started selling hard copies through
Amazon.com and college book stores. Other books from Green Tea Press are available at
<a 
href="greenteapress.com" class="url" ><span 
class="pcrr7tn-">greenteapress.com</span></a>.
<!--l. 367--><p class="noindent" >In 2003 I started teaching at Olin College and I got to teach Python for the first time. The contrast with
Java was striking. Students struggled less, learned more, worked on more interesting projects, and
generally had a lot more fun.

<!--l. 372--><p class="noindent" >Over the last five years I have continued to develop the book, correcting errors, improving some of the
examples and adding material, especially exercises. In 2008 I started work on a major revision&#8212;at the
same time, I was contacted by an editor at Cambridge University Press who was interested in
publishing the next edition. Good timing!
<!--l. 379--><p class="noindent" >I hope you enjoy working with this book, and that it helps you learn to program and think, at least a
little bit, like a computer scientist.
<!--l. 383--><p class="noindent" >
<!--l. 383--><p class="noindent" ><span 
class="ptmb7t-x-x-120">Acknowledgements for &#8220;Think Python&#8221;</span>
<!--l. 385--><p class="noindent" >(Allen B. Downey)
<!--l. 387--><p class="noindent" >First and most importantly, I thank Jeff Elkner, who translated my Java book into Python,
which got this project started and introduced me to what has turned out to be my favorite
language.
<!--l. 392--><p class="noindent" >I also thank Chris Meyers, who contributed several sections to <span 
class="ptmri7t-">How to Think Like a Computer</span>
<span 
class="ptmri7t-">Scientist</span>.
<!--l. 395--><p class="noindent" >And I thank the Free Software Foundation for developing the GNU Free Documentation License,
which helped make my collaboration with Jeff and Chris possible.
<a 
 id="dx1-1006"></a>
<a 
 id="dx1-1007"></a>
<!--l. 402--><p class="noindent" >I also thank the editors at Lulu who worked on <span 
class="ptmri7t-">How to Think Like a Computer Scientist</span>.
<!--l. 405--><p class="noindent" >I thank all the students who worked with earlier versions of this book and all the contributors (listed in
an Appendix) who sent in corrections and suggestions.
<!--l. 409--><p class="noindent" >And I thank my wife, Lisa, for her work on this book, and Green Tea Press, and everything else,
too.
<!--l. 412--><p class="noindent" >Allen B. Downey <br 
class="newline" />Needham MA<br 
class="newline" />
<!--l. 415--><p class="noindent" >Allen Downey is an Associate Professor of Computer Science at the Franklin W. Olin College of
Engineering.


<!--l. 424--><p class="noindent" >

<h2 class="likechapterHead"><a 
 id="x1-2000"></a>Contents</h2> <div class="tableofcontents">
<span class="chapterToc" > <a 
href="#x1-1000" id="QQ2-1-1">Preface</a></span>
<br /><span class="chapterToc" >1 <a 
href="#x1-30001" id="QQ2-1-3">Why should you learn to write programs?</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-4">1.1                                               Creativity and motivation</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-5">1.2                                               Computer hardware architecture</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-6">1.3                                               Understanding programming</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-7">1.4                                               Words and sentences</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-8">1.5                                               Conversing with Python</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-9">1.6                                               Terminology: interpreter and compiler</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-10">1.7                                               Writing a program</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-11">1.8                                               What is a program?</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-12">1.9                                               The building blocks of programs</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-13">1.10                                             What could possibly go wrong?</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-14">1.11                                             The learning journey</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-15">1.12                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-16">1.13                                             Exercises</a></span>
<br /><span class="chapterToc" >2 <a 
href="#x1-40002" id="QQ2-1-17">Variables, expressions and statements</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-18">2.1                                               Values and types</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-19">2.2                                               Variables</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-20">2.3                                               Variable names and keywords</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-21">2.4                                               Statements</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-22">2.5                                               Operators and operands</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-23">2.6                                               Expressions</a></span>

<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-24">2.7                                               Order of operations</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-25">2.8                                               Modulus operator</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-26">2.9                                               String operations</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-27">2.10                                             Asking the user for input</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-28">2.11                                             Comments</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-29">2.12                                             Choosing mnemonic variable names</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-30">2.13                                             Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-31">2.14                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-32">2.15                                             Exercises</a></span>
<br /><span class="chapterToc" >3 <a 
href="#x1-50003" id="QQ2-1-33">Conditional execution</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-34">3.1                                               Boolean expressions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-35">3.2                                               Logical operators</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-36">3.3                                               Conditional execution</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-37">3.4                                               Alternative execution</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-38">3.5                                               Chained conditionals</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-39">3.6                                               Nested conditionals</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-40">3.7                                               Catching exceptions using try and except</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-41">3.8                                               Short circuit evaluation of logical expressions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-42">3.9                                               Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-43">3.10                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-44">3.11                                             Exercises</a></span>
<br /><span class="chapterToc" >4 <a 
href="#x1-60004" id="QQ2-1-45">Functions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-46">4.1                                               Function calls</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-47">4.2                                               Built-in functions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-48">4.3                                               Type conversion functions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-49">4.4                                               Random numbers</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-50">4.5                                               Math functions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-51">4.6                                               Adding new functions</a></span>

<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-52">4.7                                               Definitions and uses</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-53">4.8                                               Flow of execution</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-54">4.9                                               Parameters and arguments</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-55">4.10                                             Fruitful functions and void functions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-56">4.11                                             Why functions?</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-57">4.12                                             Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-58">4.13                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-59">4.14                                             Exercises</a></span>
<br /><span class="chapterToc" >5 <a 
href="#x1-70005" id="QQ2-1-60">Iteration</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-61">5.1                                               Updating variables</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-62">5.2                                               The <span 
class="pcrr7tn-">while </span>statement</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-63">5.3                                               Infinite loops</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-64">5.4                                               &#8220;Infinite loops&#8221; and <span 
class="pcrr7tn-">break</span></a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-65">5.5                                               Finishing iterations with <span 
class="pcrr7tn-">continue</span></a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-66">5.6                                               Definite loops using <span 
class="pcrr7tn-">for</span></a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-67">5.7                                               Loop patterns</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" ><a 
href="#Q1-1-68">5.7.1                                            Counting and summing loops</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" ><a 
href="#Q1-1-69">5.7.2                                            Maximum and minimum loops</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-70">5.8                                               Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-71">5.9                                               Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-72">5.10                                             Exercises</a></span>
<br /><span class="chapterToc" >6 <a 
href="#x1-80006" id="QQ2-1-73">Strings</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-74">6.1                                               A string is a sequence</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-75">6.2                                               Getting the length of a string using <span 
class="pcrr7tn-">len</span></a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-76">6.3                                               Traversal through a string with a loop</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-77">6.4                                               String slices</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-78">6.5                                               Strings are immutable</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-79">6.6                                               Looping and counting</a></span>

<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-80">6.7                                               The <span 
class="pcrr7tn-">in </span>operator</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-81">6.8                                               String comparison</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-82">6.9                                               <span 
class="pcrr7tn-">string </span>methods</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-83">6.10                                             Parsing strings</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-84">6.11                                             Format operator</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-85">6.12                                             Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-86">6.13                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-87">6.14                                             Exercises</a></span>
<br /><span class="chapterToc" >7 <a 
href="#x1-90007" id="QQ2-1-88">Files</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-89">7.1                                               Persistence</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-90">7.2                                               Opening files</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-91">7.3                                               Text files and lines</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-92">7.4                                               Reading files</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-93">7.5                                               Searching through a file</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-94">7.6                                               Letting the user choose the file name</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-95">7.7                                               Using <span 
class="pcrr7tn-">try, except, </span>and <span 
class="pcrr7tn-">open</span></a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-96">7.8                                               Writing files</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-97">7.9                                               Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-98">7.10                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-99">7.11                                             Exercises</a></span>
<br /><span class="chapterToc" >8 <a 
href="#x1-100008" id="QQ2-1-100">Lists</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-101">8.1                                               A list is a sequence</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-102">8.2                                               Lists are mutable</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-103">8.3                                               Traversing a list</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-104">8.4                                               List operations</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-105">8.5                                               List slices</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-106">8.6                                               List methods</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-107">8.7                                               Deleting elements</a></span>

<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-108">8.8                                               Lists and functions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-109">8.9                                               Lists and strings</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-110">8.10                                             Parsing lines</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-111">8.11                                             Objects and values</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-112">8.12                                             Aliasing</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-113">8.13                                             List arguments</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-114">8.14                                             Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-115">8.15                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-116">8.16                                             Exercises</a></span>
<br /><span class="chapterToc" >9 <a 
href="#x1-110009" id="QQ2-1-117">Dictionaries</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-118">9.1                                               Dictionary as a set of counters</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-119">9.2                                               Dictionaries and files</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-120">9.3                                               Looping and dictionaries</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-121">9.4                                               Advanced text parsing</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-122">9.5                                               Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-123">9.6                                               Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-124">9.7                                               Exercises</a></span>
<br /><span class="chapterToc" >10 <a 
href="#x1-1200010" id="QQ2-1-125">Tuples</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-126">10.1                                             Tuples are immutable</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-127">10.2                                             Comparing tuples</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-128">10.3                                             Tuple assignment</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-129">10.4                                             Dictionaries and tuples</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-130">10.5                                             Multiple assignment with dictionaries</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-131">10.6                                             The most common words</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-132">10.7                                             Using tuples as keys in dictionaries</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-133">10.8                                             Sequences: strings, lists, and tuples&#8211;Oh My!</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-134">10.9                                             Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-135">10.10                                           Glossary</a></span>

<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-136">10.11                                           Exercises</a></span>
<br /><span class="chapterToc" >11 <a 
href="#x1-1300011" id="QQ2-1-137">Regular expressions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-138">11.1                                             Character matching in regular expressions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-139">11.2                                             Extracting data using regular expressions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-140">11.3                                             Combining searching and extracting</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-141">11.4                                             Escape character</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-142">11.5                                             Summary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-143">11.6                                             Bonus section for UNIX users</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-144">11.7                                             Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-145">11.8                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-146">11.9                                             Exercises</a></span>
<br /><span class="chapterToc" >12 <a 
href="#x1-1400012" id="QQ2-1-147">Networked programs</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-148">12.1                                             HyperText Transport Protocol - HTTP</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-149">12.2                                             The World&#8217;s Simplest Web Browser</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-150">12.3                                             Retrieving web pages with <span 
class="pcrr7tn-">urllib</span></a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-151">12.4                                             Parsing HTML and scraping the web</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-152">12.5                                             Parsing HTML using Regular Expressions</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-153">12.6                                             Parsing HTML using BeautifulSoup</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-154">12.7                                             Reading binary files using urllib</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-155">12.8                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-156">12.9                                             Exercises</a></span>
<br /><span class="chapterToc" >13 <a 
href="#x1-1500013" id="QQ2-1-157">Using Web Services</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-158">13.1                                             eXtensible Markup Language - XML</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-159">13.2                                             Parsing XML</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-160">13.3                                             Looping through nodes</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-161">13.4                                             Application Programming Interfaces (API)</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-162">13.5                                             Twitter web services</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-163">13.6                                             Handling XML data from an API</a></span>

<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-164">13.7                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-165">13.8                                             Exercises</a></span>
<br /><span class="chapterToc" >14 <a 
href="#x1-1600014" id="QQ2-1-166">Using databases and Structured Query Language (SQL)</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-167">14.1                                             What is a database?</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-168">14.2                                             Database concepts</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-169">14.3                                             SQLite Database Browser</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-170">14.4                                             Creating a database table</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-171">14.5                                             Structured Query Language (SQL) summary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-172">14.6                                             Spidering Twitter using a database</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-173">14.7                                             Basic data modeling</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-174">14.8                                             Programming with multiple tables</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" ><a 
href="#Q1-1-175">14.8.1                                          Constraints in database tables</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" ><a 
href="#Q1-1-176">14.8.2                                          Retrieve and/or insert a record</a></span>
<br />&#x00A0;&#x00A0;<span class="subsectionToc" ><a 
href="#Q1-1-177">14.8.3                                          Storing the friend relationship</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-178">14.9                                             Three kinds of keys</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-179">14.10                                           Using JOIN to retrieve data</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-180">14.11                                           Summary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-181">14.12                                           Debugging</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-182">14.13                                           Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-183">14.14                                           Exercises</a></span>
<br /><span class="chapterToc" >15 <a 
href="#x1-1700015" id="QQ2-1-184">Automating common tasks on your computer</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-185">15.1                                             File names and paths</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-186">15.2                                             Example: Cleaning up a photo directory</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-187">15.3                                             Command line arguments</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-188">15.4                                             Pipes</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-189">15.5                                             Glossary</a></span>
<br />&#x00A0;<span class="sectionToc" ><a 
href="#Q1-1-190">15.6                                             Exercises</a></span>
<br /><span class="appendixToc" >A <a 
href="#x1-18000A" id="QQ2-1-191">Python Programming on Windows</a></span>

<br /><span class="appendixToc" >B <a 
href="#x1-19000B" id="QQ2-1-192">Python Programming on Macintosh</a></span>
<br /><span class="appendixToc" >C <a 
href="#x1-20000C" id="QQ2-1-193">Contributor List</a></span>
</div>


<!--l. 431--><p class="noindent" >


<!--l. 433--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;1</span><br /><a 
 id="x1-30001"></a>Why should you learn to write programs?</h2>
<!--l. 435--><p class="noindent" >Writing programs (or programming) is a very creative and rewarding activity. You can write programs
for many reasons ranging from making your living to solving a difficult data analysis problem to
having fun to helping someone else solve a problem. This book assumes that <span 
class="ptmri7t-">everyone </span>needs to know
how to program and that once you know how to program, you will figure out what you want to do with
your newfound skills.
<!--l. 444--><p class="noindent" >We are surrounded in our daily lives with computers ranging from laptops to cell phones. We can think
of these computers as our &#8220;personal assistants&#8221; who can take care of many things on our behalf. The
hardware in our current-day computers is essentially built to continuously ask us the question, &#8220;What
would you like me to do next?&#8221;.
<div  
class="centerline">                    <img 
src="cfbook2x.png" alt="PIC" class="graphics" width="143.78719pt" height="72.26999pt" ><!--tex4ht:graphics  
name="cfbook2x.png" src="figs2/pda.eps"  
-->                    </div>
<!--l. 455--><p class="noindent" >Programmers add an operating system and a set of applications to the hardware and we end up with
a Personal Digital Assistant that is quite helpful and capable of helping many different
things.
<!--l. 460--><p class="noindent" >Our computers are fast and have vast amounts of memory and could be very helpful to us if we only
knew the language to speak to explain to the computer what we would like it to &#8220;do next&#8221;. If we knew
this language we could tell the computer to do tasks on our behalf that were repetitive. Interestingly,
the kinds of things computers can do best are often the kinds of things that we humans find boring and
mind-numbing.
<!--l. 469--><p class="noindent" >For example, look at the first three paragraphs of this chapter and tell me the most commonly used
word and how many times the word is used. While you were able to read and understand the words
in a few seconds, counting them is almost painful because it is not the kind of problem
that human minds are designed to solve. For a computer the opposite is true, reading and
understanding text from a piece of paper is hard for a computer to do but counting the
words and telling you how many times the most used word was used is very easy for the
computer:

<div class="verbatim" id="verbatim-1">
python&#x00A0;words.py
&#x00A0;<br />Enter&#x00A0;file:words.txt
&#x00A0;<br />to&#x00A0;16</div>
<!--l. 486--><p class="nopar" > Our &#8220;personal information analysis assistant&#8221; quickly told us that the word &#8220;to&#8221; was used sixteen
times in the first three paragraphs of this chapter.
<!--l. 493--><p class="noindent" >This very fact that computers are good at things that humans are not is why you need to become
skilled at talking &#8220;computer language&#8221;. Once you learn this new language, you can delegate
mundane tasks to your partner (the computer), leaving more time for you to do the things
that you are uniquely suited for. You bring creativity, intuition, and inventiveness to this
partnership.
<a 
 id="x1-3001r1"></a>
<span 
class="ptmb7t-x-x-144">1.1</span>   <span 
class="ptmb7t-x-x-144">Creativity and motivation</span>
<a 
 id="Q1-1-4"></a>
<!--l. 505--><p class="noindent" >While this book is not intended for professional programmers, professional programming can be a
very rewarding job both financially and personally. Building useful, elegant, and clever
programs for others to use is a very creative activity. Your computer or Personal Digital
Assistant (PDA) usually contains many different programs from many different groups of
programmers, each competing for your attention and interest. They try their best to meet your
needs and give you a great user experience in the process. In some situations, when you
choose a piece of software, the programmers are directly compensated because of your
choice.
<!--l. 515--><p class="noindent" >If we think of programs as the creative output of groups of programmers, perhaps the following figure
is a more sensible version of our PDA:
<div  
class="centerline">                    <img 
src="cfbook3x.png" alt="PIC" class="graphics" width="143.78719pt" height="72.26999pt" ><!--tex4ht:graphics  
name="cfbook3x.png" src="figs2/pda2.eps"  
-->                    </div>
<!--l. 522--><p class="noindent" >For now, our primary motivation is not to make money or please end-users, but instead for us to be
more productive in handling the data and information that we will encounter in our lives. When you
first start, you will be both the programmer and end-user of your programs. As you gain skill as a
programmer and programming feels more creative to you, your thoughts may turn toward developing
programs for others.
<!--l. 530--><p class="noindent" >

<a 
 id="x1-3002r2"></a>
<!--l. 530--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.2</span>   <span 
class="ptmb7t-x-x-144">Computer hardware architecture</span>
<a 
 id="Q1-1-5"></a>
<a 
 id="dx1-3003"></a>
<a 
 id="dx1-3004"></a>
<!--l. 534--><p class="noindent" >Before we start learning the language we speak to give instructions to computers to develop
software, we need to learn a small amount about how computers are built. If you were to
take apart your computer or cell phone and look deep inside, you would find the following
parts:
<div  
class="centerline">     <img 
src="cfbook4x.png" alt="PIC" class="graphics" width="307.71878pt" height="180.67499pt" ><!--tex4ht:graphics  
name="cfbook4x.png" src="figs2/arch.eps"  
-->     </div>
<!--l. 545--><p class="noindent" >The high-level definitions of these parts are as follows:
     <ul class="itemize1">
     <li class="itemize">The <span 
class="ptmb7t-">Central Processing Unit </span>(or CPU) is that part of the computer that is built to be
     obsessed with &#8220;what is next?&#8221;. If your computer is rated at 3.0 Gigahertz, it means that
     the CPU will ask &#8220;What next?&#8221; three billion times per second. You are going to have to
     learn how to talk fast to keep up with the CPU.
     </li>
     <li class="itemize">The <span 
class="ptmb7t-">Main Memory </span>is used to store information that the CPU needs in a hurry. The main
     memory is nearly as fast as the CPU. But the information stored in the main memory
     vanishes when the computer is turned off.
     </li>
     <li class="itemize">The <span 
class="ptmb7t-">Secondary Memory </span>is also used to store information, but it is much slower than the

     main memory. The advantage of the secondary memory is that it can store information
     even when there is no power to the computer. Examples of secondary memory are disk
     drives or flash memory (typically found in USB sticks and portable music players).
     </li>
     <li class="itemize">The <span 
class="ptmb7t-">Input and Output Devices </span>are simply our screen, keyboard, mouse, microphone,
     speaker, touchpad, etc. They are all of the ways we interact with the computer.
     </li>
     <li class="itemize">These days, most computers also have a <span 
class="ptmb7t-">Network Connection </span>to retrieve information
     over a network. We can think of the network as a very slow place to store and retrieve
     data that might not always be &#8220;up&#8221;. So in a sense, the network is a slower and at times
     unreliable form of <span 
class="ptmb7t-">Secondary Memory</span>
     </li></ul>
<!--l. 582--><p class="noindent" >While most of the detail of how these components work is best left to computer builders, it
helps to have some terminology so we can talk about these different parts as we write our
programs.
<!--l. 586--><p class="noindent" >As a programmer, your job is to use and orchestrate each of these resources to solve the problem that
you need solving and analyze the data you need. As a programmer you will mostly be &#8220;talking&#8221; to the
CPU and telling it what to do next. Sometimes you will tell the CPU to use the main memory,
secondary memory, network, or the input/output devices.
<div  
class="centerline">     <img 
src="cfbook5x.png" alt="PIC" class="graphics" width="307.71878pt" height="180.67499pt" ><!--tex4ht:graphics  
name="cfbook5x.png" src="figs2/arch2.eps"  
-->     </div>
<!--l. 597--><p class="noindent" >You need to be the person who answers the CPU&#8217;s &#8220;What next?&#8221; question. But it would be very
uncomfortable to shrink you down to 5mm tall and insert you into the computer just so you could issue
a command three billion times per second. So instead, you must write down your instructions in
advance. We call these stored instructions a <span 
class="ptmb7t-">program </span>and the act of writing these instructions down
and getting the instructions to be correct <span 
class="ptmb7t-">programming</span>.

<!--l. 606--><p class="noindent" >
<a 
 id="x1-3005r3"></a>
<!--l. 606--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.3</span>   <span 
class="ptmb7t-x-x-144">Understanding programming</span>
<a 
 id="Q1-1-6"></a>
<!--l. 608--><p class="noindent" >In the rest of this book, we will try to turn you into a person who is skilled in the art of programming.
In the end you will be a <span 
class="ptmb7t-">programmer </span>&#8212; perhaps not a professional programmer but at least you will
have the skills to look at a data/information analysis problem and develop a program to solve the
problem.
<a 
 id="dx1-3006"></a>
<!--l. 616--><p class="noindent" >In a sense, you need two skills to be a programmer:
     <ul class="itemize1">
     <li class="itemize">First  you  need  to  know  the  programming  language  (Python)  -  you  need  to  know  the
     vocabulary and the grammar. You need to be able spell the words in this new language
     properly and how to construct well-formed &#8220;sentences&#8221; in this new languages.
     </li>
     <li class="itemize">Second you need to &#8220;tell a story&#8221;. In writing a story, you combine words and sentences
     to  convey  an  idea  to  the  reader.  There  is  a  skill  and  art  in  constructing  the  story  and
     skill in story writing is improved by doing some writing and getting some feedback. In
     programming, our program is the &#8220;story&#8221; and the problem you are trying to solve is the
     &#8220;idea&#8221;.
     </li></ul>
<!--l. 634--><p class="noindent" >Once you learn one programming language such as Python, you will find it much easier to learn a
second programming language such as JavaScript or C++. The new programming language has very
different vocabulary and grammar but once you learn problem solving skills, they will be the same
across all programming languages.
<!--l. 640--><p class="noindent" >You will learn the &#8220;vocabulary&#8221; and &#8220;sentences&#8221; of Python pretty quickly. It will take longer for you to
be able to write a coherent program to solve a brand new problem. We teach programming much like
we teach writing. We start reading and explaining programs and then we write simple programs and
then write increasingly complex programs over time. At some point you &#8220;get your muse&#8221; and see the
patterns on your own and can see more naturally how to take a problem and write a program that solves
that problem. And once you get to that point, programming becomes a very pleasant and creative
process.
<!--l. 650--><p class="noindent" >We start with the vocabulary and structure of Python programs. Be patient as the simple examples
remind you of when you started reading for the first time.
<!--l. 654--><p class="noindent" >

<a 
 id="x1-3007r4"></a>
<!--l. 654--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.4</span>   <span 
class="ptmb7t-x-x-144">Words and sentences</span>
<a 
 id="Q1-1-7"></a>
<a 
 id="dx1-3008"></a>
<a 
 id="dx1-3009"></a>
<!--l. 658--><p class="noindent" >Unlike human languages, the Python vocabulary is actually pretty small. We call this &#8220;vocabulary&#8221; the
&#8220;reserved words&#8221;. These are words that have very special meaning to Python. When Python sees these
words in a Python program, they have one and only one meaning to Python. Later as you write
programs you will make your own words that have meaning to you called <span 
class="ptmb7t-">variables</span>. You will have
great latitude in choosing your names for your variables, but you cannot use any of Python&#8217;s reserved
words as a name for a variable.
<!--l. 667--><p class="noindent" >In a sense, when we train a dog, we would use special words like, &#8220;sit&#8221;, &#8220;stay&#8221;, and &#8220;fetch&#8221;. Also when
you talk to a dog and don&#8217;t use any of the reserved words, they just look at you with a quizzical
look on their faces until you say a reserved word. For example, if you say, &#8220;I wish more
people would walk to improve their overall health.&#8221;, what most dogs likely hear is, &#8220;blah
blah blah <span 
class="ptmb7t-">walk </span>blah blah blah blah.&#8221; That is because &#8220;walk&#8221; is a reserved word in dog
language. Many might suggest that the language between humans and cats has no reserved
words<span class="footnote-mark"><a 
href="cfbook2.html#fn1x2"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-3010f1"></a>.
<!--l. 679--><p class="noindent" >The reserved words in the language where humans talk to Python incudes the following:

<div class="verbatim" id="verbatim-2">
and&#x00A0;&#x00A0;&#x00A0;del&#x00A0;&#x00A0;&#x00A0;for&#x00A0;&#x00A0;&#x00A0;is&#x00A0;&#x00A0;&#x00A0;raise
&#x00A0;<br />assert&#x00A0;&#x00A0;&#x00A0;elif&#x00A0;&#x00A0;&#x00A0;from&#x00A0;&#x00A0;&#x00A0;lambda&#x00A0;&#x00A0;&#x00A0;return
&#x00A0;<br />break&#x00A0;&#x00A0;&#x00A0;else&#x00A0;&#x00A0;&#x00A0;global&#x00A0;&#x00A0;&#x00A0;not&#x00A0;&#x00A0;&#x00A0;try
&#x00A0;<br />class&#x00A0;&#x00A0;&#x00A0;except&#x00A0;&#x00A0;&#x00A0;if&#x00A0;&#x00A0;&#x00A0;or&#x00A0;&#x00A0;&#x00A0;while
&#x00A0;<br />continue&#x00A0;&#x00A0;&#x00A0;exec&#x00A0;&#x00A0;&#x00A0;import&#x00A0;&#x00A0;&#x00A0;pass&#x00A0;&#x00A0;&#x00A0;yield
&#x00A0;<br />def&#x00A0;&#x00A0;&#x00A0;nally&#x00A0;&#x00A0;&#x00A0;in&#x00A0;&#x00A0;&#x00A0;print</div>
<!--l. 690--><p class="nopar" > That is it, and unlike a dog, Python is already completely trained. When you say &#8220;try&#8221;, Python will try
every time you say it without fail.
<!--l. 697--><p class="noindent" >We will learn these reserved words and how they are used in good time, but for now we will focus
on the Python equivalent of &#8220;speak&#8221; (in human to dog language). The nice thing about
telling Python to speak is that we can even tell it what to say by giving it a message in
quotes:

<div class="verbatim" id="verbatim-3">
print&#x00A0;&#8217;Hello&#x00A0;world!&#8217;</div>
<!--l. 705--><p class="nopar" >
<!--l. 708--><p class="noindent" >And we have even written our first syntactically correct Python sentence. Our sentence starts with
the reserved word <span 
class="ptmb7t-">print </span>followed by a string of text of our choosing enclosed in single
quotes.
<a 
 id="x1-3011r5"></a>
<!--l. 712--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.5</span>   <span 
class="ptmb7t-x-x-144">Conversing with Python</span>
<a 
 id="Q1-1-8"></a>
<!--l. 714--><p class="noindent" >Now that we have a word and a simple sentence that we know in Python, we need to know how to start
a conversation with Python to test our new language skills.
<!--l. 718--><p class="noindent" >Before you can converse with Python, you must first install the Python software on your computer and
learn how to start Python on your computer. That is too much detail for this chapter so I
suggest that you consult <a 
href="www.pythonlearn.com" class="url" ><span 
class="pcrr7tn-">www.pythonlearn.com</span></a> where I have detailed instructions and
screencasts of setting up and starting Python on Macintosh and Windows systems. At some
point, you will be in a terminal or command window and you will type <span 
class="ptmb7t-">python </span>and the
Python interpreter will start executing in interactive mode: and appear somewhat as follows:
<a 
 id="dx1-3012"></a>

<div class="verbatim" id="verbatim-4">
Python&#x00A0;2.6.1&#x00A0;(r261:67515,&#x00A0;Jun&#x00A0;24&#x00A0;2010,&#x00A0;21:47:49)
&#x00A0;<br />[GCC&#x00A0;4.2.1&#x00A0;(Apple&#x00A0;Inc.&#x00A0;build&#x00A0;5646)]&#x00A0;on&#x00A0;darwin
&#x00A0;<br />Type&#x00A0;"help",&#x00A0;"copyright",&#x00A0;"credits"&#x00A0;or&#x00A0;"license"&#x00A0;for&#x00A0;more&#x00A0;information.
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 735--><p class="nopar" > The <span 
class="pcrr7tn-">&#x003E;&#x003E;&#x003E; </span>prompt is the Python interpreter&#8217;s way of asking you, &#8220;What do you want me to do next?&#8221;.
Python is ready to have a conversation with you. All you have to know is how to speak the Python
language and you can have a conversation.
<!--l. 743--><p class="noindent" >Lets say for example that you did not know even the simplest Python language words or sentences.
You might want to use the standard line that astronauts use when they land on a far away planet and try
to speak with the inhabitants of the planet:

<div class="verbatim" id="verbatim-5">
&#x003E;&#x003E;&#x003E;&#x00A0;I&#x00A0;come&#x00A0;in&#x00A0;peace,&#x00A0;please&#x00A0;take&#x00A0;me&#x00A0;to&#x00A0;your&#x00A0;leader
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;I&#x00A0;come&#x00A0;in&#x00A0;peace,&#x00A0;please&#x00A0;take&#x00A0;me&#x00A0;to&#x00A0;your&#x00A0;leader
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;^
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 756--><p class="nopar" > This is not going so well. Unless you think of something quickly, the inhabitants of the planet are
likely to stab you with their spears, put you on a spit, roast you over a fire, and eat you for
dinner.
<!--l. 763--><p class="noindent" >Luckily you brought a copy of this book on your travels and you thumb to this very page and try
again:

<div class="verbatim" id="verbatim-6">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;&#8217;Hello&#x00A0;world!&#8217;
&#x00A0;<br />Hello&#x00A0;world!</div>
<!--l. 770--><p class="nopar" > This is looking much better so you try to communicate some more:

<div class="verbatim" id="verbatim-7">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;&#8217;You&#x00A0;must&#x00A0;be&#x00A0;the&#x00A0;legendary&#x00A0;god&#x00A0;that&#x00A0;comes&#x00A0;from&#x00A0;the&#x00A0;sky&#8217;
&#x00A0;<br />You&#x00A0;must&#x00A0;be&#x00A0;the&#x00A0;legendary&#x00A0;god&#x00A0;that&#x00A0;comes&#x00A0;from&#x00A0;the&#x00A0;sky
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;&#8217;We&#x00A0;have&#x00A0;been&#x00A0;waiting&#x00A0;for&#x00A0;you&#x00A0;for&#x00A0;a&#x00A0;long&#x00A0;time&#8217;
&#x00A0;<br />We&#x00A0;have&#x00A0;been&#x00A0;waiting&#x00A0;for&#x00A0;you&#x00A0;for&#x00A0;a&#x00A0;long&#x00A0;time
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;&#8217;Our&#x00A0;legend&#x00A0;says&#x00A0;you&#x00A0;will&#x00A0;be&#x00A0;very&#x00A0;tasty&#x00A0;with&#x00A0;mustard&#8217;
&#x00A0;<br />Our&#x00A0;legend&#x00A0;says&#x00A0;you&#x00A0;will&#x00A0;be&#x00A0;very&#x00A0;tasty&#x00A0;with&#x00A0;mustard
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;&#8217;We&#x00A0;will&#x00A0;have&#x00A0;a&#x00A0;feast&#x00A0;tonight&#x00A0;unless&#x00A0;you&#x00A0;say
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;We&#x00A0;will&#x00A0;have&#x00A0;a&#x00A0;feast&#x00A0;tonight&#x00A0;unless&#x00A0;you&#x00A0;say
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;^
&#x00A0;<br />SyntaxError:&#x00A0;EOL&#x00A0;while&#x00A0;scanning&#x00A0;string&#x00A0;literal
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 790--><p class="nopar" > The conversation was going so well for a while and then you made the tiniest mistake using the
Python language and Python brought the spears back out.
<!--l. 797--><p class="noindent" >At this point, you should also realize that while Python is amazingly complex and powerful and very
picky about the syntax you use to communicate with it, Python is <span 
class="ptmri7t-">not </span>intelligent. You are having a
conversation with yourself but using proper syntax.
<!--l. 803--><p class="noindent" >In a sense when you use a program written by someone else the conversation is between you and those
other programmers with Python acting as an intermediary. Python is a way for the creators of
programs to express how the conversation is supposed to proceed. And in just a few more
chapters, you will be one of those programmers using Python to talk to the users of your
program.
<!--l. 811--><p class="noindent" >Before we leave our first conversation with the Python interpreter, you should probably
know the proper way to say &#8220;good-bye&#8221; when interacting with the inhabitants of Planet
Python:

<div class="verbatim" id="verbatim-8">
&#x003E;&#x003E;&#x003E;&#x00A0;good-bye
&#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
&#x00A0;<br />NameError:&#x00A0;name&#x00A0;&#8217;good&#8217;&#x00A0;is&#x00A0;not&#x00A0;defined
&#x00A0;<br />
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;if&#x00A0;you&#x00A0;don&#8217;t&#x00A0;mind,&#x00A0;I&#x00A0;need&#x00A0;to&#x00A0;leave
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;you&#x00A0;don&#8217;t&#x00A0;mind,&#x00A0;I&#x00A0;need&#x00A0;to&#x00A0;leave
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;^
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax
&#x00A0;<br />
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;quit()</div>
<!--l. 830--><p class="nopar" > You will notice that the error is different for the first two incorrect attempts. The second error is
different because <span 
class="ptmb7t-">if </span>is a reserved word and Python saw the reserved word and thought we were trying
to say something but got the syntax of the sentence wrong.
<!--l. 839--><p class="noindent" >The proper way to say &#8220;good-bye&#8221; to Python is to enter <span 
class="ptmb7t-">quit() </span>at the interactive chevron <span 
class="pcrr7tn-">&#x003E;&#x003E;&#x003E; </span>prompt. It
would have probably taken you quite a while to guess that one so having a book handy probably will
turn out to be helpful.
<!--l. 845--><p class="noindent" >
<a 
 id="x1-3013r6"></a>
<!--l. 845--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.6</span>   <span 
class="ptmb7t-x-x-144">Terminology: interpreter and compiler</span>
<a 
 id="Q1-1-9"></a>
<!--l. 847--><p class="noindent" >Python is a <span 
class="ptmb7t-">high-level </span>language intended to be relatively straightforward for humans to read and write
and for computers to read and process. Other high-level languages include: Java, C++, PHP, Ruby,
Basic, Perl, JavaScript, and many more. The actual hardware inside the Central Processing Unit (CPU)
does not understand any of these high level languages.
<!--l. 854--><p class="noindent" >The CPU understands a language we call <span 
class="ptmb7t-">machine-language</span>. Machine language is very simple and
frankly very tiresome to write because it is represented all in zeros and ones:

<div class="verbatim" id="verbatim-9">
01010001110100100101010000001111
&#x00A0;<br />11100110000011101010010101101101
&#x00A0;<br />...</div>
<!--l. 863--><p class="nopar" > Machine language seems quite simple on the surface given that there are only zeros and ones, but its
syntax is even more complex and far more intricate than Python. So very few programmers ever write
machine language. Instead we build various translators to allow programmers to write in high level
languages like Python or JavaScript and these translators convert the programs to machine language for
actual execution by the CPU.
<!--l. 874--><p class="noindent" >Since machine language is tied to the computer hardware, machine language is not <span 
class="ptmb7t-">portable </span>across
different types of hardware. Programs written in high-level languages can be moved between different
computers by using a different interpreter on the new machine or re-compiling the code to create a
machine language version of the program for the new machine.
<!--l. 880--><p class="noindent" >These programming language translators fall into two general categories: (1) interpreters and (2)
compilers.
<!--l. 883--><p class="noindent" >An <span 
class="ptmb7t-">interpreter </span>reads the source code of the program as written by the programmer, parses the source
code, and interprets the instructions on-the-fly. Python is an interpreter and when we are running
Python interactively, we can type a line of Python (a sentence) and Python processes it immediately
and is ready for us to type another line of Python.
<!--l. 889--><p class="noindent" >Some of the lines of Python tell Python that you want it to remember some value for later. We need to
pick a name for that value to be remembered and we can use that symbolic name to retrieve the
value later. We use the term <span 
class="ptmb7t-">variable </span>to refer to the labels we use to refer to this stored
data.

<div class="verbatim" id="verbatim-10">
&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;6
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;x
&#x00A0;<br />6
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y&#x00A0;=&#x00A0;x&#x00A0;&#x22C6;&#x00A0;7
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;y
&#x00A0;<br />42
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 903--><p class="nopar" > In this example, we ask Python to remember the value six and use the label <span 
class="ptmb7t-">x </span>so we can retrieve the
value later. We verify that Python has actually remembered the value using <span 
class="ptmb7t-">print</span>. Then we ask Python
to retrieve <span 
class="ptmb7t-">x </span>and multiply it by seven and put the newly-computed value in <span 
class="ptmb7t-">y</span>. Then we ask Python to
print out the value currently in <span 
class="ptmb7t-">y</span>.
<!--l. 912--><p class="noindent" >Even though we are typing these commands into Python one line at a time, Python is treating them as
an ordered sequence of statements with later statements able to retrieve data created in earlier
statements. We are writing our first simple paragraph with four sentences in a logical and meaningful
order.
<!--l. 917--><p class="noindent" >It is the nature of an <span 
class="ptmb7t-">interpreter </span>to be able to have an interactive conversation as shown above. A
<span 
class="ptmb7t-">compiler </span>needs to be handed the entire program in a file, and then it runs a process to translate the high
level source code into machine language and then the compiler puts the resulting machine language
into a file for later execution.
<!--l. 923--><p class="noindent" >If you have a Windows system, often these executable machine language programs have a suffix of
&#8220;.exe&#8221; or &#8220;.dll&#8221; which stand for &#8220;executable&#8221; and &#8220;dynamically loadable library&#8221; respectively. In Linux
and Macintosh there is no suffix that uniquely marks a file as executable.
<!--l. 928--><p class="noindent" >If you were to open an executable file in a text editor, it would look completely crazy and be
unreadable:

<div class="verbatim" id="verbatim-11">
^?ELF^A^A^A^@^@^@^@^@^@^@^@^@^B^@^C^@^A^@^@^@\xa0\x82
&#x00A0;<br />^D^H4^@^@^@\x90^]^@^@^@^@^@^@4^@&#x00A0;^@^G^@(^@$^@!^@^F^@
&#x00A0;<br />^@^@4^@^@^@4\x80^D^H4\x80^D^H\xe0^@^@^@\xe0^@^@^@^E
&#x00A0;<br />^@^@^@^D^@^@^@^C^@^@^@^T^A^@^@^T\x81^D^H^T\x81^D^H^S
&#x00A0;<br />^@^@^@^S^@^@^@^D^@^@^@^A^@^@^@^A\^D^HQVhT\x83^D^H\xe8
&#x00A0;<br />....</div>
<!--l. 939--><p class="nopar" > It is not easy to read or write machine language so it is nice that we have <span 
class="ptmb7t-">interpreters </span>and <span 
class="ptmb7t-">compilers</span>
that allow us to write in a high-level language like Python or C.
<!--l. 946--><p class="noindent" >Now at this point in our discussion of compilers and interpreters, you should be wondering a bit about
the Python interpreter itself. What language is it written in? Is it written in a compiled language? When
we type &#8220;python&#8221;, what exactly is happening?
<!--l. 951--><p class="noindent" >The Python interpreter is written in a high level language called &#8220;C&#8221;. You can look at the actual source
code for the Python interpreter by going to <a 
href="www.python.org" class="url" ><span 
class="pcrr7tn-">www.python.org</span></a> and working your way to their source
code. So Python is a program itself and it is compiled into machine code and when you installed
Python on your computer (or the vendor installed it), you copied a machine-code copy of the translated
Python program onto your system. In Windows the executable machine code for Python itself is likely
in a file with a name like:

<div class="verbatim" id="verbatim-12">
C:\Python26\python.exe</div>
<!--l. 963--><p class="nopar" > That is more than you really need to know to be a Python programmer, but sometimes it pays to
answer those little nagging questions right at the beginning.
<!--l. 970--><p class="noindent" >
<a 
 id="x1-3014r7"></a>
<!--l. 970--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.7</span>   <span 
class="ptmb7t-x-x-144">Writing a program</span>
<a 
 id="Q1-1-10"></a>
<!--l. 972--><p class="noindent" >Typing commands into the Python interpreter is a great way to experiment with Pythons features, but it
is not recommended for solving more complex problems.
<!--l. 975--><p class="noindent" >When we want to write a program, we use a text editor to write the Python instructions into
a file, which is called a <span 
class="ptmb7t-">script</span>. By convention, Python scripts have names that end with
<span 
class="pcrr7tn-">.py</span>.
<a 
 id="dx1-3015"></a>
<!--l. 982--><p class="noindent" >To execute the script, you have to tell the Python interpreter the name of the file. In a UNIX or
Windows command window, you would type <span 
class="pcrr7tn-">python hello.py </span>as follows:

<div class="verbatim" id="verbatim-13">
csev$&#x00A0;cat&#x00A0;hello.py
&#x00A0;<br />print&#x00A0;&#8217;Hello&#x00A0;world!&#8217;
&#x00A0;<br />csev$&#x00A0;python&#x00A0;hello.py
&#x00A0;<br />Hello&#x00A0;world!
&#x00A0;<br />csev$</div>
<!--l. 993--><p class="nopar" > The &#8220;csev<span 
class="ptmr8c-">$</span>&#8221; is the operating system prompt, and the &#8220;cat hello.py&#8221; is showing us that the file
&#8220;hello.py&#8221; has a one line Python program to print a string.
<!--l. 1000--><p class="noindent" >We call the Python interpreter and tell it to read its source code from the file &#8220;hello.py&#8221; instead of
prompting us for lines of Python code interactively.
<!--l. 1004--><p class="noindent" >You will notice that there was no need to have <span 
class="ptmb7t-">quit() </span>at the end of the Python program in the file. When
Python is reading your source code form a file, it knows to stop when it reaches the end of the
file.
<!--l. 1008--><p class="noindent" >
<a 
 id="x1-3016r8"></a>
<!--l. 1008--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.8</span>   <span 
class="ptmb7t-x-x-144">What is a program?</span>
<a 
 id="Q1-1-11"></a>
<!--l. 1010--><p class="noindent" >The definition of a <span 
class="ptmb7t-">program </span>at its most basic is a sequence of Python statements that have been crafted
to do something. Even our simple <span 
class="ptmb7t-">hello.py </span>script is a program. It is a one-line program and is not
particularly useful, but in the strictest definition, it is a Python program.
<!--l. 1016--><p class="noindent" >It might be easiest to understand what a program is by thinking about a problem that a program might
be built to solve, and then looking at a program that would solve that problem.
<!--l. 1020--><p class="noindent" >Lets say you are doing Social Computing research on Facebook posts and you are interested
in the most frequently used word in a series of posts. You could print out the stream of
facebook posts and pore over the text looking for the most common word, but that would take a
long time and be very mistake prone. You would be smart to write a Python program to
handle the task quickly and accurately so you can spend the weekend doing something
fun.
<!--l. 1028--><p class="noindent" >For example look at the following text about a clown and a car. Look at the text and figure out the most
common word and how many times it occurs.

<div class="verbatim" id="verbatim-14">
the&#x00A0;clown&#x00A0;ran&#x00A0;after&#x00A0;the&#x00A0;car&#x00A0;and&#x00A0;the&#x00A0;car&#x00A0;ran&#x00A0;into&#x00A0;the&#x00A0;tent
&#x00A0;<br />and&#x00A0;the&#x00A0;tent&#x00A0;fell&#x00A0;down&#x00A0;on&#x00A0;the&#x00A0;clown&#x00A0;and&#x00A0;the&#x00A0;car</div>
<!--l. 1035--><p class="nopar" > Then imagine that you are doing this task looking at millions of lines of text. Frankly it would be
quicker for you to learn Python and write a Python program to count the words than it would be to
manually scan the words.
<!--l. 1043--><p class="noindent" >The even better news is that I already came up with a simple program to find the most common word in
a text file. I wrote it, tested it, and now I am giving it to you to use so you can save some
time.

<div class="verbatim" id="verbatim-15">
name&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;file:&#8217;)
&#x00A0;<br />handle&#x00A0;=&#x00A0;open(name,&#x00A0;&#8217;r&#8217;)
&#x00A0;<br />text&#x00A0;=&#x00A0;handle.read()
&#x00A0;<br />words&#x00A0;=&#x00A0;text.split()
&#x00A0;<br />counts&#x00A0;=&#x00A0;dict()
&#x00A0;<br />
&#x00A0;<br />for&#x00A0;word&#x00A0;in&#x00A0;words:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;counts[word]&#x00A0;=&#x00A0;counts.get(word,0)&#x00A0;+&#x00A0;1
&#x00A0;<br />
&#x00A0;<br />bigcount&#x00A0;=&#x00A0;None
&#x00A0;<br />bigword&#x00A0;=&#x00A0;None
&#x00A0;<br />for&#x00A0;word,count&#x00A0;in&#x00A0;counts.items():
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;bigcount&#x00A0;is&#x00A0;None&#x00A0;or&#x00A0;count&#x00A0;&#x003E;&#x00A0;bigcount:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;bigword&#x00A0;=&#x00A0;word
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;bigcount&#x00A0;=&#x00A0;count
&#x00A0;<br />
&#x00A0;<br />print&#x00A0;bigword,&#x00A0;bigcount</div>
<!--l. 1066--><p class="nopar" > You don&#8217;t even need to know Python to use this program. You will need to get through Chapter 10 of
this book to fully understand the awesome Python techniques that were used to make the program. You
are the end user, you simply use the program and marvel at its cleverness and how it saved you
so much manual effort. You simply type the code into a file called <span 
class="ptmb7t-">words.py </span>and run it
or you download the source code from <a 
href="http://www.pythonlearn.com/code/" class="url" ><span 
class="pcrr7tn-">http://www.pythonlearn.com/code/</span></a> and run
it.
<a 
 id="dx1-3017"></a>
<!--l. 1078--><p class="noindent" >This is a good example of how Python and the Python language are acting as an intermediary between
you (the end-user) and me (the programmer). Python is a way for us to exchange useful instruction
sequences (i.e. programs) in a common language that can be used by anyone who installs Python on
their computer. So neither of us are talking <span 
class="ptmri7t-">to Python</span>, instead we are communicating with each other
<span 
class="ptmri7t-">through </span>Python.
<!--l. 1084--><p class="noindent" >
<a 
 id="x1-3018r9"></a>
<!--l. 1084--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.9</span>   <span 
class="ptmb7t-x-x-144">The building blocks of programs</span>
<a 
 id="Q1-1-12"></a>
<!--l. 1086--><p class="noindent" >In the next few chapters, we will learn more about the vocabulary, sentence structure, paragraph
structure, and story structure of Python. We will learn about the powerful capabilities of Python and
how to compose those capabilities together to create useful programs.

<!--l. 1091--><p class="noindent" >There are some low-level conceptual patterns that we use to construct programs. These constructs are
not just for Python programs, they are part of every programming language from machine language up
to the high-level languages.
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">input:</span> </dt><dd 
class="description">Get data from the the &#8220;outside world&#8221;. This might be reading data from a file, or even
     some kind of sensor like a microphone or GPS. In our initial programs, our input will
     come from the user typing data on the keyboard.
     </dd><dt class="description">
<span 
class="ptmb7t-">output:</span> </dt><dd 
class="description">Display the results of the program on a screen or store them in a file or perhaps write
     them to a device like a speaker to play music or speak text.
     </dd><dt class="description">
<span 
class="ptmb7t-">sequential execution:</span> </dt><dd 
class="description">Perform statements one after another in the order they are encountered
     in the script.
     </dd><dt class="description">
<span 
class="ptmb7t-">conditional execution:</span> </dt><dd 
class="description">Check  for  certain  conditions  and  execute  or  skip  a  sequence  of
     statements.
     </dd><dt class="description">
<span 
class="ptmb7t-">repeated execution:</span> </dt><dd 
class="description">Perform some set of statements repeatedly, usually with some variation.
     </dd><dt class="description">
<span 
class="ptmb7t-">reuse:</span> </dt><dd 
class="description">Write a set of instructions once and give them a name and then reuse those instructions
     as needed throughout your program.
     </dd></dl>
<!--l. 1121--><p class="noindent" >It sounds almost too simple to be true and of course it is never so simple. It is like saying that walking
is simply &#8220;putting one foot in front of the other&#8221;. The &#8220;art&#8221; of writing a program is composing and
weaving these basic elements together many times over to produce something that is useful to its
users.
<!--l. 1128--><p class="noindent" >The word counting program above directly uses all of these patterns except for one.
<!--l. 1131--><p class="noindent" >
<a 
 id="x1-3019r10"></a>
<!--l. 1131--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.10</span>   <span 
class="ptmb7t-x-x-144">What could possibly go wrong?</span>
<a 
 id="Q1-1-13"></a>
<!--l. 1133--><p class="noindent" >As we saw in our earliest conversations with Python, we must communicate very precisely when we
write Python code. The smallest deviation or mistake will cause Python to give up looking at your
program.

<!--l. 1138--><p class="noindent" >Beginning programmers often take the fact that Python leaves no room for errors as evidence that
Python is mean, hateful and cruel. While Python seems to like everyone else, Python knows them
personally and holds a grudge against them. Because of this grudge, Python takes our perfectly written
programs and rejects them as &#8220;unfit&#8221; just to torment us.

<div class="verbatim" id="verbatim-16">
&#x003E;&#x003E;&#x003E;&#x00A0;primt&#x00A0;&#8217;Hello&#x00A0;world!&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;primt&#x00A0;&#8217;Hello&#x00A0;world!&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;^
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;primt&#x00A0;&#8217;Hello&#x00A0;world&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;primt&#x00A0;&#8217;Hello&#x00A0;world&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;^
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;I&#x00A0;hate&#x00A0;you&#x00A0;Python!
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;I&#x00A0;hate&#x00A0;you&#x00A0;Python!
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;^
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;if&#x00A0;you&#x00A0;come&#x00A0;out&#x00A0;of&#x00A0;there,&#x00A0;I&#x00A0;would&#x00A0;teach&#x00A0;you&#x00A0;a&#x00A0;lesson
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;you&#x00A0;come&#x00A0;out&#x00A0;of&#x00A0;there,&#x00A0;I&#x00A0;would&#x00A0;teach&#x00A0;you&#x00A0;a&#x00A0;lesson
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;^
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 1168--><p class="nopar" > There is little to be gained by arguing with Python. It is a tool, it has no emotion and it is happy and
ready to serve you whenever you need it. Its error messages sound harsh, but they are just Python&#8217;s call
for help. It has looked at what you typed, and it simply cannot understand what you have
entered.
<!--l. 1177--><p class="noindent" >Python is much more like a dog, loving you unconditionally, having a few key words that it
understands, looking you with a sweet look on its face (<span 
class="pcrr7tn-">&#x003E;&#x003E;&#x003E;</span>) and waiting for you to say something it
understands. When Python says &#8220;SyntaxError: invalid syntax&#8221;, it is simply wagging its tail and saying,
&#8220;You seemed to say something but I just don&#8217;t understand what you meant, but please keep talking to
me (<span 
class="pcrr7tn-">&#x003E;&#x003E;&#x003E;</span>).&#8221;
<!--l. 1184--><p class="noindent" >As your programs become increasingly sophisticated, you will encounter three general types of
errors:
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">Syntax errors:</span> </dt><dd 
class="description">These are the first errors you will make and the easiest to fix. A syntax error
     means that you have violated the &#8220;grammar&#8221; rules of Python. Python does its best to

     point right at the line and character where it noticed it was confused. The only tricky bit
     of syntax errors is that sometimes the mistake that needs fixing is actually earlier in the
     program than where Python <span 
class="ptmri7t-">noticed </span>it was confused. So the line and character that Python
     indicates in a syntax error may just be a starting point for your investigation.
     </dd><dt class="description">
<span 
class="ptmb7t-">Logic errors:</span> </dt><dd 
class="description">A logic error is when your program has good syntax but there is a mistake in the
     order of the statements or perhaps a mistake in how the statements relate to one another.
     A good example of a logic error might be, &#8220;take a drink from your water bottle, put it in
     your backpack, walk to the library, and then put the top back on the bottle.&#8221;
     </dd><dt class="description">
<span 
class="ptmb7t-">Semantic errors:</span> </dt><dd 
class="description">A semantic error is when your description of the steps to take is syntactically
     perfect and in the right order, but there is simply a mistake in the program. The program
     is perfectly correct but it does not do what you <span 
class="ptmri7t-">intended </span>for it to do. A simple example
     would be if you were giving a person directions to a restaurant and said, &#8220;... when you
     reach the intersection with the gas station, turn left and go one mile and the restaurant is
     a red building on your left.&#8221;. Your friend is very late and calls you to tell you that they are
     on a farm and walking around behind a barn, with no sign of a restaurant. The you say
     &#8220;did you turn left or right gas station?&#8221; and they say, &#8220;I followed your directions perfectly,
     I have them written down, it says turn left and go one mile at the gas station.&#8221;. Then you
     say, &#8220;I am very sorry, because while my instructions were syntactically correct, they sadly
     contained a small but undetected semantic error.&#8221;.
     </dd></dl>
<!--l. 1218--><p class="noindent" >Again in all three types of errors, Python is merely trying its hardest to do exactly what you have
asked.
<!--l. 1221--><p class="noindent" >
<a 
 id="x1-3020r11"></a>
<!--l. 1221--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.11</span>   <span 
class="ptmb7t-x-x-144">The learning journey</span>
<a 
 id="Q1-1-14"></a>
<!--l. 1223--><p class="noindent" >As you progress through the rest of the book, don&#8217;t be afraid if the concepts don&#8217;t seem to fit together
well the first time. When you were learning to speak, it was not a problem for your first few years you
just made cute gurgling noises. And it was OK if it took six months for you to move from
simple vocabulary to simple sentences and took 5-6 more years to move from sentences to
paragraphs, and a few more years to be able to write an interesting complete short story on your
own.
<!--l. 1230--><p class="noindent" >We want you to learn Python much more rapidly, so we teach it all at the same time over the next few
chapters. But it is like learning a new language that takes time to absorb and understand before it feels
natural. That leads to some confusion as we visit and revisit topics to try to get you to see the big
picture while we are defining the tiny fragments that make up the big picture. While the

book is written linearly and if you are taking a course, it will progress in a linear fashion,
don&#8217;t hesitate to be very non-linear in how you approach the material. Look forwards and
backwards and read with a light touch. By skimming more advanced material without fully
understanding the details, you can get a better understanding of the &#8220;why?&#8221; of programming. By
reviewing previous material and even re-doing earlier exercises, you will realize that you
actually learned a lot of material even if the material you are currently staring at seems a bit
impenetrable.
<!--l. 1245--><p class="noindent" >Usually when you are learning your first programming language, there are a few wonderful &#8220;Ah-Hah!&#8221;
moments where you can look up from pounding away at some rock with a hammer and chisel and step
away and see that you are indeed building a beautiful sculpture.
<!--l. 1250--><p class="noindent" >If something seems particularly hard, there is usually no value in staying up all night and
staring at it. Take a break, take a nap, have a snack, explain what you are having a problem
with to someone (or perhaps your dog), and then come back it with fresh eyes. I assure
you that once you learn the programming concepts in the book you will look back and
see that it was all really easy and elegant and it simply took you a bit of time to absorb
it.
<!--l. 1257--><p class="noindent" >
<a 
 id="x1-3021r12"></a>
<!--l. 1257--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.12</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-15"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">bug:</span> </dt><dd 
class="description">An error in a program. <a 
 id="dx1-3022"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">central processing unit:</span> </dt><dd 
class="description">The heart of any computer. It is what runs the software that we write;
     also called &#8220;CPU&#8221; or &#8220;the processor&#8221;. <a 
 id="dx1-3023"></a><a 
 id="dx1-3024"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">compile:</span> </dt><dd 
class="description">To translate a program written in a high-level language into a low-level language all
     at once, in preparation for later execution. <a 
 id="dx1-3025"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">high-level language:</span> </dt><dd 
class="description">A  programming  language  like  Python  that  is  designed  to  be  easy  for
     humans to read and write. <a 
 id="dx1-3026"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">interactive mode:</span> </dt><dd 
class="description">A way of using the Python interpreter by typing commands and expressions
     at the prompt. <a 
 id="dx1-3027"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">interpret:</span> </dt><dd 
class="description">To execute a program in a high-level language by translating it one line at a time. <a 
 id="dx1-3028"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">low-level language:</span> </dt><dd 
class="description">A programming language that is designed to be easy for a computer to
     execute; also called &#8220;machine code&#8221; or &#8220;assembly language.&#8221; <a 
 id="dx1-3029"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">machine code:</span> </dt><dd 
class="description">The lowest level language for software which is the language that is directly
     executed by the central processing unit (CPU). <a 
 id="dx1-3030"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">main memory:</span> </dt><dd 
class="description">Stores programs and data. Main memory loses its information when the power
     is turned off. <a 
 id="dx1-3031"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">parse:</span> </dt><dd 
class="description">To examine a program and analyze the syntactic structure. <a 
 id="dx1-3032"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">portability:</span> </dt><dd 
class="description">A property of a program that can run on more than one kind of computer. <a 
 id="dx1-3033"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">print statement:</span> </dt><dd 
class="description">An instruction that causes the Python interpreter to display a value on the
     screen. <a 
 id="dx1-3034"></a><a 
 id="dx1-3035"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">problem solving:</span> </dt><dd 
class="description">The process of formulating a problem, finding a solution, and expressing the
     solution. <a 
 id="dx1-3036"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">program:</span> </dt><dd 
class="description">A set of instructions that specifies a computation. <a 
 id="dx1-3037"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">prompt:</span> </dt><dd 
class="description">When a program displays a message and pauses for the user to type some input to the
     program. <a 
 id="dx1-3038"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">secondary memory:</span> </dt><dd 
class="description">Stores programs and data and retains its information even when the power
     is  turned  off.  Generally  slower  than  main  memory.  Examples  of  secondary  memory
     include disk drives and flash memory in USB sticks. <a 
 id="dx1-3039"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">semantics:</span> </dt><dd 
class="description">The meaning of a program. <a 
 id="dx1-3040"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">semantic error:</span> </dt><dd 
class="description">An  error  in  a  program  that  makes  it  do  something  other  than  what  the
     programmer intended. <a 
 id="dx1-3041"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">source code:</span> </dt><dd 
class="description">A program in a high-level language. <a 
 id="dx1-3042"></a>
     </dd></dl>
<!--l. 1341--><p class="noindent" >
<a 
 id="x1-3043r13"></a>
<!--l. 1341--><p class="noindent" ><span 
class="ptmb7t-x-x-144">1.13</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-16"></a>
<div class="newtheorem">
<!--l. 1344--><p class="noindent" ><span class="head">
<a 
 id="x1-3044r1"></a>
<span 
class="ptmb7t-">Exercise 1.1</span>  </span>What is the function of the secondary memory in a computer?
<!--l. 1347--><p class="noindent" >a) Execute all of the computation and logic of the program<br 
class="newline" />b) Retrieve web pages over the Internet<br 
class="newline" />c) Store information for the long term - even beyond a power cycle<br 
class="newline" />d) Take input from the user
</div>
<div class="newtheorem">
<!--l. 1353--><p class="noindent" ><span class="head">
<a 
 id="x1-3045r2"></a>
<span 
class="ptmb7t-">Exercise 1.2</span>  </span>What is a program?
</div>
<div class="newtheorem">
<!--l. 1357--><p class="noindent" ><span class="head">
<a 
 id="x1-3046r3"></a>
<span 
class="ptmb7t-">Exercise 1.3</span>  </span>What is is the difference between a compiler and an interpreter?

</div>
<div class="newtheorem">
<!--l. 1361--><p class="noindent" ><span class="head">
<a 
 id="x1-3047r4"></a>
<span 
class="ptmb7t-">Exercise 1.4</span>  </span>Which of the following contains &#8221;machine code&#8221;?
<!--l. 1364--><p class="noindent" >a) The Python interpreter<br 
class="newline" />b) The keyboard<br 
class="newline" />c) Python source file<br 
class="newline" />d) A word processing document
</div>
<div class="newtheorem">
<!--l. 1370--><p class="noindent" ><span class="head">
<a 
 id="x1-3048r5"></a>
<span 
class="ptmb7t-">Exercise 1.5</span>  </span>What is wrong with the following code:

<div class="verbatim" id="verbatim-17">
&#x003E;&#x003E;&#x003E;&#x00A0;primt&#x00A0;&#8217;Hello&#x00A0;world!&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;primt&#x00A0;&#8217;Hello&#x00A0;world!&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;^
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 1381--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 1386--><p class="noindent" ><span class="head">
<a 
 id="x1-3049r6"></a>
<span 
class="ptmb7t-">Exercise 1.6</span>  </span>Where in the computer is a variable such as &#8221;X&#8221; stored after the following Python
line finishes?

<div class="verbatim" id="verbatim-18">
x&#x00A0;=&#x00A0;123</div>
<!--l. 1393--><p class="nopar" > a) Central processing unit<br 
class="newline" />b) Main Memory<br 
class="newline" />c) Secondary Memory<br 
class="newline" />d) Input Devices<br 
class="newline" />e) Output Devices
</div>
<div class="newtheorem">
<!--l. 1403--><p class="noindent" ><span class="head">
<a 
 id="x1-3050r7"></a>
<span 
class="ptmb7t-">Exercise 1.7</span>  </span>What will the following program print out:

<div class="verbatim" id="verbatim-19">
x&#x00A0;=&#x00A0;43
&#x00A0;<br />x&#x00A0;=&#x00A0;x&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;x</div>
<!--l. 1411--><p class="nopar" > a) 43<br 
class="newline" />b) 44<br 
class="newline" />c) x + 1<br 
class="newline" />d) Error because x = x + 1 is not possible mathematically
</div>
<div class="newtheorem">
<!--l. 1420--><p class="noindent" ><span class="head">
<a 
 id="x1-3051r8"></a>
<span 
class="ptmb7t-">Exercise 1.8</span>  </span>Explain each of the following using an example of a human capability: (1) Central
processing unit, (2) Main Memory, (3) Secondary Memory, (4) Input Device, and (5) Output
Device. For example, &#8221;What is the human equivalent to a Central Processing Unit&#8221;?
</div>
<div class="newtheorem">
<!--l. 1428--><p class="noindent" ><span class="head">
<a 
 id="x1-3052r9"></a>
<span 
class="ptmb7t-">Exercise 1.9</span>  </span>How do you fix a &#8221;Syntax Error&#8221;?
</div>

<!--l. 12--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;2</span><br /><a 
 id="x1-40002"></a>Variables, expressions and statements</h2>
<a 
 id="x1-4001r1"></a>
<span 
class="ptmb7t-x-x-144">2.1</span>   <span 
class="ptmb7t-x-x-144">Values and types</span>
<a 
 id="Q1-1-18"></a>
<a 
 id="dx1-4002"></a>
<a 
 id="dx1-4003"></a>
<a 
 id="dx1-4004"></a>
<!--l. 19--><p class="noindent" >A <span 
class="ptmb7t-">value </span>is one of the basic things a program works with, like a letter or a number. The values we have
seen so far are <span 
class="pcrr7tn-">1</span>, <span 
class="pcrr7tn-">2</span>, and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">Hello,</span><span 
class="pcrr7tn-">&#x00A0;World!</span><span 
class="pcrr8c-">&#8217;</span></span></span>.
<!--l. 25--><p class="noindent" >These values belong to different <span 
class="ptmb7t-">types</span>: <span 
class="pcrr7tn-">2 </span>is an integer, and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">Hello,</span><span 
class="pcrr7tn-">&#x00A0;World!</span><span 
class="pcrr8c-">&#8217;</span></span></span> is a <span 
class="ptmb7t-">string</span>, so-called
because it contains a &#8220;string&#8221; of letters. You (and the interpreter) can identify strings because they are
enclosed in quotation marks.
<a 
 id="dx1-4005"></a>
<!--l. 33--><p class="noindent" >The <span 
class="pcrr7tn-">print </span>statement also works for integers. We use the <span 
class="pcrr7tn-">python </span>command to start the
interpreter.

<div class="verbatim" id="verbatim-20">
python
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;4
&#x00A0;<br />4</div>
<!--l. 41--><p class="nopar" > If you are not sure what type a value has, the interpreter can tell you.

<div class="verbatim" id="verbatim-21">
&#x003E;&#x003E;&#x003E;&#x00A0;type(&#8217;Hello,&#x00A0;World!&#8217;)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;str&#8217;&#x003E;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;type(17)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;int&#8217;&#x003E;</div>
<!--l. 52--><p class="nopar" > Not surprisingly, strings belong to the type <span 
class="pcrr7tn-">str </span>and integers belong to the type <span 
class="pcrr7tn-">int</span>. Less obviously,
numbers with a decimal point belong to a type called <span 
class="pcrr7tn-">float</span>, because these numbers are represented in
a format called <span 
class="ptmb7t-">floating-point</span>.
<a 
 id="dx1-4006"></a>
<a 
 id="dx1-4007"></a>
<a 
 id="dx1-4008"></a>
<a 
 id="dx1-4009"></a>
<a 
 id="dx1-4010"></a>
<a 
 id="dx1-4011"></a>
<a 
 id="dx1-4012"></a>

<div class="verbatim" id="verbatim-22">
&#x003E;&#x003E;&#x003E;&#x00A0;type(3.2)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;float&#8217;&#x003E;</div>
<!--l. 73--><p class="nopar" > What about values like <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">17</span><span 
class="pcrr8c-">&#8217;</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">3.2</span><span 
class="pcrr8c-">&#8217;</span></span></span>? They look like numbers, but they are in quotation marks
like strings.
<a 
 id="dx1-4013"></a>

<div class="verbatim" id="verbatim-23">
&#x003E;&#x003E;&#x003E;&#x00A0;type(&#8217;17&#8217;)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;str&#8217;&#x003E;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;type(&#8217;3.2&#8217;)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;str&#8217;&#x003E;</div>
<!--l. 88--><p class="nopar" > They&#8217;re strings.
<!--l. 93--><p class="noindent" >When you type a large integer, you might be tempted to use commas between groups of three digits, as
in <span 
class="pcrr7tn-">1,000,000</span>. This is not a legal integer in Python, but it is legal:

<div class="verbatim" id="verbatim-24">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;1,000,000
&#x00A0;<br />1&#x00A0;0&#x00A0;0</div>
<!--l. 101--><p class="nopar" > Well, that&#8217;s not what we expected at all! Python interprets <span 
class="pcrr7tn-">1,000,000 </span>as a comma-separated sequence
of integers, which it prints with spaces between.
<a 
 id="dx1-4014"></a>
<a 
 id="dx1-4015"></a>
<a 
 id="dx1-4016"></a>
<!--l. 112--><p class="noindent" >This is the first example we have seen of a semantic error: the code runs without producing an error
message, but it doesn&#8217;t do the &#8220;right&#8221; thing.
<!--l. 117--><p class="noindent" >
<a 
 id="x1-4017r2"></a>
<!--l. 117--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.2</span>   <span 
class="ptmb7t-x-x-144">Variables</span>
<a 
 id="Q1-1-19"></a>
<a 
 id="dx1-4018"></a>
<a 
 id="dx1-4019"></a>
<a 
 id="dx1-4020"></a>
<!--l. 122--><p class="noindent" >One of the most powerful features of a programming language is the ability to manipulate <span 
class="ptmb7t-">variables</span>. A
variable is a name that refers to a value.
<!--l. 126--><p class="noindent" >An <span 
class="ptmb7t-">assignment statement </span>creates new variables and gives them values:

<div class="verbatim" id="verbatim-25">
&#x003E;&#x003E;&#x003E;&#x00A0;message&#x00A0;=&#x00A0;&#8217;And&#x00A0;now&#x00A0;for&#x00A0;something&#x00A0;completely&#x00A0;different&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;n&#x00A0;=&#x00A0;17
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;pi&#x00A0;=&#x00A0;3.1415926535897931</div>
<!--l. 134--><p class="nopar" > This example makes three assignments. The first assigns a string to a new variable named <span 
class="pcrr7tn-">message</span>;
the second assigns the integer <span 
class="pcrr7tn-">17 </span>to <span 
class="pcrr7tn-">n</span>; the third assigns the (approximate) value of <span 
class="zptmcmrm-">&#x03C0; </span>to
<span 
class="pcrr7tn-">pi</span>.
<a 
 id="dx1-4021"></a>
<a 
 id="dx1-4022"></a>
<!--l. 145--><p class="noindent" >A common way to represent variables on paper is to write the name with an arrow pointing to the
variable&#8217;s value. This kind of figure is called a <span 
class="ptmb7t-">state diagram </span>because it shows what state each of the
variables is in (think of it as the variable&#8217;s state of mind). This diagram shows the result of the previous
example:
<div  
class="centerline">    <img 
src="cfbook6x.png" alt="PIC" class="graphics" width="313.17pt" height="60.22499pt" ><!--tex4ht:graphics  
name="cfbook6x.png" src="figs/state2.eps"  
-->    </div>
<!--l. 155--><p class="noindent" >To display the value of a variable, you can use a print statement:

<div class="verbatim" id="verbatim-26">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;n
&#x00A0;<br />17
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;pi
&#x00A0;<br />3.14159265359</div>
<!--l. 163--><p class="nopar" > The type of a variable is the type of the value it refers to.

<div class="verbatim" id="verbatim-27">
&#x003E;&#x003E;&#x003E;&#x00A0;type(message)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;str&#8217;&#x003E;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;type(n)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;int&#8217;&#x003E;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;type(pi)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;float&#8217;&#x003E;</div>
<!--l. 176--><p class="nopar" >
<!--l. 180--><p class="noindent" >
<a 
 id="x1-4023r3"></a>
<!--l. 180--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.3</span>   <span 
class="ptmb7t-x-x-144">Variable names and keywords</span>
<a 
 id="Q1-1-20"></a>
<a 
 id="dx1-4024"></a>
<!--l. 183--><p class="noindent" >Programmers generally choose names for their variables that are meaningful&#8212;they document what the
variable is used for.
<!--l. 186--><p class="noindent" >Variable names can be arbitrarily long. They can contain both letters and numbers, but they have to
begin with a letter. It is legal to use uppercase letters, but it is a good idea to begin variable names with
a lowercase letter (you&#8217;ll see why later).
<!--l. 192--><p class="noindent" >The underscore character (<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">_</span></span></span>) can appear in a name. It is often used in names with multiple words, such
as <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">my_name</span></span></span> or <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">airspeed_of_unladen_swallow</span></span></span>.
<a 
 id="dx1-4025"></a>
<!--l. 198--><p class="noindent" >If you give a variable an illegal name, you get a syntax error:

<div class="verbatim" id="verbatim-28">
&#x003E;&#x003E;&#x003E;&#x00A0;76trombones&#x00A0;=&#x00A0;&#8217;big&#x00A0;parade&#8217;
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;more@&#x00A0;=&#x00A0;1000000
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;class&#x00A0;=&#x00A0;&#8217;Advanced&#x00A0;Theoretical&#x00A0;Zymurgy&#8217;
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax</div>
<!--l. 208--><p class="nopar" ><span 
class="pcrr7tn-">76trombones </span>is illegal because it does not begin with a letter. <span 
class="pcrr7tn-">more@ </span>is illegal because it contains an
illegal character, <span 
class="pcrr7tn-">@</span>. But what&#8217;s wrong with <span 
class="pcrr7tn-">class</span>?
<!--l. 215--><p class="noindent" >It turns out that <span 
class="pcrr7tn-">class </span>is one of Python&#8217;s <span 
class="ptmb7t-">keywords</span>. The interpreter uses keywords to recognize the
structure of the program, and they cannot be used as variable names.
<a 
 id="dx1-4026"></a>
<!--l. 221--><p class="noindent" >Python reserves 31 keywords<span class="footnote-mark"><a 
href="cfbook3.html#fn1x3"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-4027f1"></a>
for its use:

<div class="verbatim" id="verbatim-29">
and&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;del&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;from&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;not&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;while
&#x00A0;<br />as&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;elif&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;global&#x00A0;&#x00A0;&#x00A0;&#x00A0;or&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;with
&#x00A0;<br />assert&#x00A0;&#x00A0;&#x00A0;&#x00A0;else&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;pass&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;yield
&#x00A0;<br />break&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except&#x00A0;&#x00A0;&#x00A0;&#x00A0;import&#x00A0;&#x00A0;&#x00A0;&#x00A0;print
&#x00A0;<br />class&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;exec&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;in&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;raise
&#x00A0;<br />continue&#x00A0;&#x00A0;finally&#x00A0;&#x00A0;&#x00A0;is&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return
&#x00A0;<br />def&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lambda&#x00A0;&#x00A0;&#x00A0;&#x00A0;try</div>
<!--l. 233--><p class="nopar" > You might want to keep this list handy. If the interpreter complains about one of your variable names
and you don&#8217;t know why, see if it is on this list.
<a 
 id="x1-4028r4"></a>
<!--l. 240--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.4</span>   <span 
class="ptmb7t-x-x-144">Statements</span>
<a 
 id="Q1-1-21"></a>
<!--l. 242--><p class="noindent" >A <span 
class="ptmb7t-">statement </span>is a unit of code that the Python interpreter can execute. We have seen two kinds of
statements: print and assignment.
<a 
 id="dx1-4029"></a>
<a 
 id="dx1-4030"></a>
<a 
 id="dx1-4031"></a>
<!--l. 250--><p class="noindent" >When you type a statement in interactive mode, the interpreter executes it and displays the result, if
there is one.
<!--l. 253--><p class="noindent" >A script usually contains a sequence of statements. If there is more than one statement, the results
appear one at a time as the statements execute.
<!--l. 257--><p class="noindent" >For example, the script

<div class="verbatim" id="verbatim-30">
print&#x00A0;1
&#x00A0;<br />x&#x00A0;=&#x00A0;2
&#x00A0;<br />print&#x00A0;x</div>
<!--l. 264--><p class="nopar" > produces the output

<div class="verbatim" id="verbatim-31">
1
&#x00A0;<br />2</div>
<!--l. 273--><p class="nopar" > The assignment statement produces no output.
<!--l. 279--><p class="noindent" >
<a 
 id="x1-4032r5"></a>
<!--l. 279--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.5</span>   <span 
class="ptmb7t-x-x-144">Operators and operands</span>
<a 
 id="Q1-1-22"></a>
<a 
 id="dx1-4033"></a>
<a 
 id="dx1-4034"></a>
<a 
 id="dx1-4035"></a>
<a 
 id="dx1-4036"></a>
<!--l. 285--><p class="noindent" ><span 
class="ptmb7t-">Operators </span>are special symbols that represent computations like addition and multiplication. The
values the operator is applied to are called <span 
class="ptmb7t-">operands</span>.
<!--l. 289--><p class="noindent" >The operators <span 
class="pcrr7tn-">+</span>, <span 
class="pcrr7tn-">-</span>, <span 
class="pcrr7tn-">&#x22C6;</span>, <span 
class="pcrr7tn-">/ </span>and <span 
class="pcrr7tn-">&#x22C6;&#x22C6; </span>perform addition, subtraction, multiplication, division and
exponentiation, as in the following examples:

<div class="verbatim" id="verbatim-32">
20+32&#x00A0;&#x00A0;&#x00A0;hour-1&#x00A0;&#x00A0;&#x00A0;hour&#x22C6;60+minute&#x00A0;&#x00A0;&#x00A0;minute/60&#x00A0;&#x00A0;&#x00A0;5&#x22C6;&#x22C6;2&#x00A0;&#x00A0;&#x00A0;(5+9)&#x22C6;(15-7)</div>
<!--l. 296--><p class="nopar" > The division operator might not do what you expect:

<div class="verbatim" id="verbatim-33">
&#x003E;&#x003E;&#x003E;&#x00A0;minute&#x00A0;=&#x00A0;59
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;minute/60
&#x00A0;<br />0</div>
<!--l. 306--><p class="nopar" > The value of <span 
class="pcrr7tn-">minute </span>is 59, and in conventional arithmetic 59 divided by 60 is
0.98333, not 0. The reason for the discrepancy is that Python is performing <span 
class="ptmb7t-">floor</span>
<span 
class="ptmb7t-">division</span><span class="footnote-mark"><a 
href="cfbook4.html#fn2x3"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-4037f2"></a>.
<a 
 id="dx1-4038"></a>
<a 
 id="dx1-4039"></a>
<a 
 id="dx1-4040"></a>
<a 
 id="dx1-4041"></a>
<a 
 id="dx1-4042"></a>
<!--l. 322--><p class="noindent" >When both of the operands are integers, the result is also an integer; floor division chops off the
fraction part, so in this example it rounds down to zero.
<!--l. 326--><p class="noindent" >If either of the operands is a floating-point number, Python performs floating-point division, and the
result is a <span 
class="pcrr7tn-">float</span>:

<div class="verbatim" id="verbatim-34">
&#x003E;&#x003E;&#x003E;&#x00A0;minute/60.0
&#x00A0;<br />0.98333333333333328</div>
<!--l. 333--><p class="nopar" >
<a 
 id="x1-4043r6"></a>
<!--l. 337--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.6</span>   <span 
class="ptmb7t-x-x-144">Expressions</span>
<a 
 id="Q1-1-23"></a>
<!--l. 339--><p class="noindent" >An <span 
class="ptmb7t-">expression </span>is a combination of values, variables, and operators. A value all by itself is considered
an expression, and so is a variable, so the following are all legal expressions (assuming that the
variable <span 
class="pcrr7tn-">x </span>has been assigned a value):
<a 
 id="dx1-4044"></a>
<a 
 id="dx1-4045"></a>

<div class="verbatim" id="verbatim-35">
17
&#x00A0;<br />x
&#x00A0;<br />x&#x00A0;+&#x00A0;17</div>
<!--l. 352--><p class="nopar" > If you type an expression in interactive mode, the interpreter <span 
class="ptmb7t-">evaluates </span>it and displays the
result:

<div class="verbatim" id="verbatim-36">
&#x003E;&#x003E;&#x003E;&#x00A0;1&#x00A0;+&#x00A0;1
&#x00A0;<br />2</div>
<!--l. 362--><p class="nopar" > But in a script, an expression all by itself doesn&#8217;t do anything! This is a common source of confusion
for beginners.
<div class="newtheorem">
<!--l. 369--><p class="noindent" ><span class="head">
<a 
 id="x1-4046r1"></a>
<span 
class="ptmb7t-">Exercise 2.1</span>  </span>Type the following statements in the Python interpreter to see what they do:

<div class="verbatim" id="verbatim-37">
5
&#x00A0;<br />x&#x00A0;=&#x00A0;5
&#x00A0;<br />x&#x00A0;+&#x00A0;1</div>
<!--l. 378--><p class="nopar" >
</div>
<!--l. 384--><p class="noindent" >
<a 
 id="x1-4047r7"></a>
<!--l. 384--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.7</span>   <span 
class="ptmb7t-x-x-144">Order of operations</span>
<a 
 id="Q1-1-24"></a>
<a 
 id="dx1-4048"></a>
<a 
 id="dx1-4049"></a>
<a 
 id="dx1-4050"></a>
<!--l. 389--><p class="noindent" >When more than one operator appears in an expression, the order of evaluation depends on the <span 
class="ptmb7t-">rules of</span>
<span 
class="ptmb7t-">precedence</span>. For mathematical operators, Python follows mathematical convention. The acronym
<span 
class="ptmb7t-">PEMDAS </span>is a useful way to remember the rules:
<a 
 id="dx1-4051"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="ptmb7t-">P</span>arentheses  have  the  highest  precedence  and  can  be  used  to  force  an  expression  to
     evaluate in the order you want. Since expressions in parentheses are evaluated first, <span 
class="pcrr7tn-">2 &#x22C6;</span>
     <span 
class="pcrr7tn-">(3-1) </span>is 4, and <span 
class="pcrr7tn-">(1+1)&#x22C6;&#x22C6;(5-2) </span>is 8. You can also use parentheses to make an expression
     easier to read, as in <span 
class="pcrr7tn-">(minute &#x22C6; 100) / 60</span>, even if it doesn&#8217;t change the result.
     </li>
     <li class="itemize"><span 
class="ptmb7t-">E</span>xponentiation has the next highest precedence, so <span 
class="pcrr7tn-">2&#x22C6;&#x22C6;1+1 </span>is 3, not 4, and <span 
class="pcrr7tn-">3&#x22C6;1&#x22C6;&#x22C6;3 </span>is 3,
     not 27.
     </li>
     <li class="itemize"><span 
class="ptmb7t-">M</span>ultiplication and <span 
class="ptmb7t-">D</span>ivision have the same precedence, which is higher than <span 
class="ptmb7t-">A</span>ddition and
     <span 
class="ptmb7t-">S</span>ubtraction, which also have the same precedence. So <span 
class="pcrr7tn-">2&#x22C6;3-1 </span>is 5, not 4, and <span 
class="pcrr7tn-">6+4/2 </span>is 8,
     not 5.
     </li>
     <li class="itemize">Operators with the same precedence are evaluated from left to right. So in the expression
     <span 
class="pcrr7tn-">5-3-1 </span>is 1, not 3 because the <span 
class="pcrr7tn-">5-3 </span>happens first and then <span 
class="pcrr7tn-">1 </span>is subtracted from <span 
class="pcrr7tn-">2</span>.

     </li></ul>
<!--l. 420--><p class="noindent" >When in doubt always put parentheses in your expressions to make sure the computations are
performed in the order you intend.
<!--l. 423--><p class="noindent" >
<a 
 id="x1-4052r8"></a>
<!--l. 423--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.8</span>   <span 
class="ptmb7t-x-x-144">Modulus operator</span>
<a 
 id="Q1-1-25"></a>
<a 
 id="dx1-4053"></a>
<a 
 id="dx1-4054"></a>
<!--l. 428--><p class="noindent" >The <span 
class="ptmb7t-">modulus operator </span>works on integers and yields the remainder when the first operand is divided
by the second. In Python, the modulus operator is a percent sign (<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">%</span></span></span>). The syntax is the same as for
other operators:

<div class="verbatim" id="verbatim-38">
&#x003E;&#x003E;&#x003E;&#x00A0;quotient&#x00A0;=&#x00A0;7&#x00A0;/&#x00A0;3
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;quotient
&#x00A0;<br />2
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;remainder&#x00A0;=&#x00A0;7&#x00A0;%&#x00A0;3
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;remainder
&#x00A0;<br />1</div>
<!--l. 441--><p class="nopar" > So 7 divided by 3 is 2 with 1 left over.
<!--l. 446--><p class="noindent" >The modulus operator turns out to be surprisingly useful. For example, you can check whether one
number is divisible by another&#8212;if <span 
class="pcrr7tn-">x % y </span>is zero, then <span 
class="pcrr7tn-">x </span>is divisible by <span 
class="pcrr7tn-">y</span>.
<a 
 id="dx1-4055"></a>
<!--l. 452--><p class="noindent" >Also, you can extract the right-most digit or digits from a number. For example, <span 
class="pcrr7tn-">x % 10 </span>yields the
right-most digit of <span 
class="pcrr7tn-">x </span>(in base 10). Similarly <span 
class="pcrr7tn-">x % 100 </span>yields the last two digits.
<!--l. 459--><p class="noindent" >
<a 
 id="x1-4056r9"></a>
<!--l. 459--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.9</span>   <span 
class="ptmb7t-x-x-144">String operations</span>
<a 
 id="Q1-1-26"></a>
<a 
 id="dx1-4057"></a>
<a 
 id="dx1-4058"></a>
<!--l. 463--><p class="noindent" >The <span 
class="pcrr7tn-">+ </span>operator works with strings, but it is not addition in the mathematical sense. Instead it
performs <span 
class="ptmb7t-">concatenation</span>, which means joining the strings by linking them end-to-end. For
example:
<a 
 id="dx1-4059"></a>

<div class="verbatim" id="verbatim-39">
&#x003E;&#x003E;&#x003E;&#x00A0;first&#x00A0;=&#x00A0;10
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;second&#x00A0;=&#x00A0;15
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;first+second
&#x00A0;<br />25
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;first&#x00A0;=&#x00A0;&#8217;100&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;second&#x00A0;=&#x00A0;&#8217;150&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;first&#x00A0;+&#x00A0;second
&#x00A0;<br />100150</div>
<!--l. 480--><p class="nopar" > The output of this program is <span 
class="pcrr7tn-">throatwarbler</span>.
<!--l. 485--><p class="noindent" >
<a 
 id="x1-4060r10"></a>
<!--l. 485--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.10</span>   <span 
class="ptmb7t-x-x-144">Asking the user for input</span>
<a 
 id="Q1-1-27"></a>
<a 
 id="dx1-4061"></a>
<!--l. 488--><p class="noindent" >Sometimes we would like to take the value for a variable from the user via their
keyboard. Python provides a built-in function called <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">raw_input</span></span></span> that gets input from the
keyboard<span class="footnote-mark"><a 
href="cfbook5.html#fn3x3"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-4062f3"></a>.
When this function is called, the program stops and waits for the user to type something. When the
user presses <span 
class="phvr7t-x-x-90">Return </span>or <span 
class="phvr7t-x-x-90">Enter</span>, the program resumes and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">raw_input</span></span></span> returns what the user typed as a
string.
<a 
 id="dx1-4063"></a>
<a 
 id="dx1-4064"></a>
<a 
 id="dx1-4065"></a>

<div class="verbatim" id="verbatim-40">
&#x003E;&#x003E;&#x003E;&#x00A0;input&#x00A0;=&#x00A0;raw_input()
&#x00A0;<br />Some&#x00A0;silly&#x00A0;stuff
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;input
&#x00A0;<br />Some&#x00A0;silly&#x00A0;stuff</div>
<!--l. 507--><p class="nopar" > Before getting input from the user, it is a good idea to print a prompt telling the user what to
input. You can pass a string to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">raw_input</span></span></span> to be displayed to the user before pausing for
input:
<a 
 id="dx1-4066"></a>

<div class="verbatim" id="verbatim-41">
&#x003E;&#x003E;&#x003E;&#x00A0;name&#x00A0;=&#x00A0;raw_input(&#8217;What&#x00A0;is&#x00A0;your&#x00A0;name?\n&#8217;)
&#x00A0;<br />What&#x00A0;is&#x00A0;your&#x00A0;name?
&#x00A0;<br />Chuck
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;name
&#x00A0;<br />Chuck</div>
<!--l. 524--><p class="nopar" > The sequence <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span> at the end of the prompt represents a <span 
class="ptmb7t-">newline</span>, which is a special character that
causes a line break. That&#8217;s why the user&#8217;s input appears below the prompt.
<a 
 id="dx1-4067"></a>
<!--l. 533--><p class="noindent" >If you expect the user to type an integer, you can try to convert the return value to <span 
class="pcrr7tn-">int </span>using the <span 
class="pcrr7tn-">int()</span>
function:

<div class="verbatim" id="verbatim-42">
&#x003E;&#x003E;&#x003E;&#x00A0;prompt&#x00A0;=&#x00A0;&#8217;What...is&#x00A0;the&#x00A0;airspeed&#x00A0;velocity&#x00A0;of&#x00A0;an&#x00A0;unladen&#x00A0;swallow?\n&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;speed&#x00A0;=&#x00A0;raw_input(prompt)
&#x00A0;<br />What...is&#x00A0;the&#x00A0;airspeed&#x00A0;velocity&#x00A0;of&#x00A0;an&#x00A0;unladen&#x00A0;swallow?
&#x00A0;<br />17
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;int(speed)
&#x00A0;<br />17
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;int(speed)&#x00A0;+&#x00A0;5
&#x00A0;<br />22</div>
<!--l. 546--><p class="nopar" > But if the user types something other than a string of digits, you get an error:

<div class="verbatim" id="verbatim-43">
&#x003E;&#x003E;&#x003E;&#x00A0;speed&#x00A0;=&#x00A0;raw_input(prompt)
&#x00A0;<br />What...is&#x00A0;the&#x00A0;airspeed&#x00A0;velocity&#x00A0;of&#x00A0;an&#x00A0;unladen&#x00A0;swallow?
&#x00A0;<br />What&#x00A0;do&#x00A0;you&#x00A0;mean,&#x00A0;an&#x00A0;African&#x00A0;or&#x00A0;a&#x00A0;European&#x00A0;swallow?
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;int(speed)
&#x00A0;<br />ValueError:&#x00A0;invalid&#x00A0;literal&#x00A0;for&#x00A0;int()</div>
<!--l. 559--><p class="nopar" > We will see how to handle this kind of error later.
<a 
 id="dx1-4068"></a>
<a 
 id="dx1-4069"></a>
<a 
 id="x1-4070r11"></a>
<!--l. 568--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.11</span>   <span 
class="ptmb7t-x-x-144">Comments</span>
<a 
 id="Q1-1-28"></a>
<a 
 id="dx1-4071"></a>
<!--l. 571--><p class="noindent" >As programs get bigger and more complicated, they get more difficult to read. Formal languages are
dense, and it is often difficult to look at a piece of code and figure out what it is doing, or
why.
<!--l. 575--><p class="noindent" >For this reason, it is a good idea to add notes to your programs to explain in natural language
what the program is doing. These notes are called <span 
class="ptmb7t-">comments</span>, and they start with the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">#</span></span></span>
symbol:

<div class="verbatim" id="verbatim-44">
#&#x00A0;compute&#x00A0;the&#x00A0;percentage&#x00A0;of&#x00A0;the&#x00A0;hour&#x00A0;that&#x00A0;has&#x00A0;elapsed
&#x00A0;<br />percentage&#x00A0;=&#x00A0;(minute&#x00A0;&#x22C6;&#x00A0;100)&#x00A0;/&#x00A0;60</div>
<!--l. 583--><p class="nopar" > In this case, the comment appears on a line by itself. You can also put comments at the end of a
line:

<div class="verbatim" id="verbatim-45">
percentage&#x00A0;=&#x00A0;(minute&#x00A0;&#x22C6;&#x00A0;100)&#x00A0;/&#x00A0;60&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;percentage&#x00A0;of&#x00A0;an&#x00A0;hour</div>
<!--l. 592--><p class="nopar" > Everything from the <span 
class="pcrr7tn-"># </span>to the end of the line is ignored&#8212;it has no effect on the program.
<!--l. 598--><p class="noindent" >Comments are most useful when they document non-obvious features of the code. It is reasonable to
assume that the reader can figure out <span 
class="ptmri7t-">what </span>the code does; it is much more useful to explain
<span 
class="ptmri7t-">why</span>.
<!--l. 602--><p class="noindent" >This comment is redundant with the code and useless:

<div class="verbatim" id="verbatim-46">
v&#x00A0;=&#x00A0;5&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;assign&#x00A0;5&#x00A0;to&#x00A0;v</div>
<!--l. 607--><p class="nopar" > This comment contains useful information that is not in the code:

<div class="verbatim" id="verbatim-47">
v&#x00A0;=&#x00A0;5&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;velocity&#x00A0;in&#x00A0;meters/second.</div>
<!--l. 615--><p class="nopar" > Good variable names can reduce the need for comments, but long names can make complex
expressions hard to read, so there is a tradeoff.
<!--l. 622--><p class="noindent" >
<a 
 id="x1-4072r12"></a>
<!--l. 622--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.12</span>   <span 
class="ptmb7t-x-x-144">Choosing mnemonic variable names</span>
<a 
 id="Q1-1-29"></a>
<a 
 id="dx1-4073"></a>
<!--l. 626--><p class="noindent" >As long as you follow the simple rules of variable naming, and avoid reserved words, you have a lot of
choice when you name your variables. In the beginning, this choice can be confusing both when you
read a program and when you write your own programs. For example, the following three programs are
identical in terms of what they accomplish, but very different when you read them and try to
understand them.

<div class="verbatim" id="verbatim-48">
a&#x00A0;=&#x00A0;35.0
&#x00A0;<br />b&#x00A0;=&#x00A0;12.50
&#x00A0;<br />c&#x00A0;=&#x00A0;a&#x00A0;&#x22C6;&#x00A0;b
&#x00A0;<br />print&#x00A0;c
&#x00A0;<br />
&#x00A0;<br />hours&#x00A0;=&#x00A0;35.0
&#x00A0;<br />rate&#x00A0;=&#x00A0;12.50
&#x00A0;<br />pay&#x00A0;=&#x00A0;hours&#x00A0;&#x22C6;&#x00A0;rate
&#x00A0;<br />print&#x00A0;pay
&#x00A0;<br />
&#x00A0;<br />x1q3z9ahd&#x00A0;=&#x00A0;35.0
&#x00A0;<br />x1q3z9afd&#x00A0;=&#x00A0;12.50
&#x00A0;<br />x1q3p9afd&#x00A0;=&#x00A0;x1q3z9ahd&#x00A0;&#x22C6;&#x00A0;x1q3z9afd
&#x00A0;<br />print&#x00A0;x1q3p9afd</div>
<!--l. 649--><p class="nopar" > The Python interpreter sees all three of these programs as <span 
class="ptmri7t-">exactly the same </span>but humans see and
understand these programs quite differently. Humans will most quickly understand the <span 
class="ptmb7t-">intent </span>of the
second program because the programmer has chosen variable names that reflect the intent of the
programmer regarding what data will be stored in each variable.
<!--l. 659--><p class="noindent" >We call these wisely-chosen variable names &#8220;mnemonic variable names&#8221;. The word
<span 
class="ptmri7t-">mnemonic</span><span class="footnote-mark"><a 
href="cfbook6.html#fn4x3"><sup class="textsuperscript">4</sup></a></span><a 
 id="x1-4074f4"></a>
means &#8220;memory aid&#8221;. We choose mnemonic variable names to help us remember why we created the
variable in the first place.
<!--l. 667--><p class="noindent" >While this all sounds great, and it is a very good idea to use mnemonic variable names,
mnemonic variable names can get in the way of a beginning programmer&#8217;s ability to parse
and understand code. This is because beginning programmers have not yet memorized the
reserved words (there are only 31 of them) and sometimes variables which have names that
are too descriptive start to look like part of the language and not just well-chosen variable
names.
<!--l. 674--><p class="noindent" >Take a quick look at the following Python sample code which loops through some data. We will cover
loops soon, but for now try to just puzzle through what this means:

<div class="verbatim" id="verbatim-49">
for&#x00A0;word&#x00A0;in&#x00A0;words:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;word</div>
<!--l. 681--><p class="nopar" > What is happening here? Which of the tokens (for, word, in, etc.) are reserved words and
which are just variable names? Does Python understand at a fundamental level the notion
of words? Beginning programmers have trouble separating what parts of the code <span 
class="ptmri7t-">must</span>
be the same as this example and what parts of the code are simply choices made by the
programmer.
<!--l. 691--><p class="noindent" >The following code is equivalent to the above code:

<div class="verbatim" id="verbatim-50">
for&#x00A0;slice&#x00A0;in&#x00A0;pizza:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;slice</div>
<!--l. 697--><p class="nopar" > It is easier for the beginning programmer to look at this code and know which parts are reserved words
defined by Python and which parts are simply variable names chosen by the programmer. It is pretty
clear that Python has no fundamental understanding of pizza and slices and the fact that a pizza
consists of a set of one or more slices.
<!--l. 706--><p class="noindent" >But if our program is truly about reading data and looking for words in the data, <span 
class="pcrr7tn-">pizza </span>and <span 
class="pcrr7tn-">slice </span>are
very un-mnemonic variable names. Choosing them as variable names distracts from the meaning of the
program.
<!--l. 710--><p class="noindent" >After a pretty short period of time, you will know the most common reserved words and you will start
to see the reserved words jumping out at you:
<!--l. 713--><p class="noindent" ><span 
class="ptmb7t-">for  </span><span 
class="pcrr7tn-">word </span><span 
class="ptmb7t-">in  </span><span 
class="pcrr7tn-">words</span><span 
class="ptmb7t-">:</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span></span></span><span 
class="ptmb7t-">print  </span><span 
class="pcrr7tn-">word</span>
<!--l. 716--><p class="noindent" >The parts of the code that are defined by Python (<span 
class="pcrr7tn-">for</span>, <span 
class="pcrr7tn-">in</span>, <span 
class="pcrr7tn-">print</span>, and <span 
class="pcrr7tn-">:</span>) are in bold and the
programmer chosen variables (<span 
class="pcrr7tn-">word </span>and <span 
class="pcrr7tn-">words</span>) are not in bold. Many text editors are aware of Python
syntax and will color reserved words differently to give you clues to keep your variables and reserved
words separate. After a while you will begin to read Python and quickly determine what is a variable
and what is a reserved word.
<a 
 id="x1-4075r13"></a>
<!--l. 725--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.13</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-30"></a>
<a 
 id="dx1-4076"></a>
<!--l. 728--><p class="noindent" >At this point the syntax error you are most likely to make is an illegal variable name, like <span 
class="pcrr7tn-">class </span>and
<span 
class="pcrr7tn-">yield</span>, which are keywords, or <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">odd~job</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">US$</span></span></span>, which contain illegal characters.
<a 
 id="dx1-4077"></a>
<a 
 id="dx1-4078"></a>
<!--l. 736--><p class="noindent" >If you put a space in a variable name, Python thinks it is two operands without an operator:

<div class="verbatim" id="verbatim-51">
&#x003E;&#x003E;&#x003E;&#x00A0;bad&#x00A0;name&#x00A0;=&#x00A0;5
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax</div>
<!--l. 743--><p class="nopar" > For syntax errors, the error messages don&#8217;t help much. The most common messages are
<span 
class="pcrr7tn-">SyntaxError: invalid syntax </span>and <span 
class="pcrr7tn-">SyntaxError: invalid token</span>, neither of which is very
informative.
<a 
 id="dx1-4079"></a>
<a 
 id="dx1-4080"></a>
<a 
 id="dx1-4081"></a>
<a 
 id="dx1-4082"></a>
<a 
 id="dx1-4083"></a>
<!--l. 756--><p class="noindent" >The runtime error you are most likely to make is a &#8220;use before def;&#8221; that is, trying to use a
variable before you have assigned a value. This can happen if you spell a variable name
wrong:

<div class="verbatim" id="verbatim-52">
&#x003E;&#x003E;&#x003E;&#x00A0;principal&#x00A0;=&#x00A0;327.68
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;interest&#x00A0;=&#x00A0;principle&#x00A0;&#x22C6;&#x00A0;rate
&#x00A0;<br />NameError:&#x00A0;name&#x00A0;&#8217;principle&#8217;&#x00A0;is&#x00A0;not&#x00A0;defined</div>
<!--l. 765--><p class="nopar" > Variables names are case sensitive, so <span 
class="pcrr7tn-">LaTeX </span>is not the same as <span 
class="pcrr7tn-">latex</span>.
<a 
 id="dx1-4084"></a>
<a 
 id="dx1-4085"></a>
<a 
 id="dx1-4086"></a>
<!--l. 775--><p class="noindent" >At this point the most likely cause of a semantic error is the order of operations. For example, to
evaluate <img 
src="cfbook7x.png" alt="21&#x03C0;"  class="frac" align="middle">, you might be tempted to write

<div class="verbatim" id="verbatim-53">
&#x003E;&#x003E;&#x003E;&#x00A0;1.0&#x00A0;/&#x00A0;2.0&#x00A0;&#x22C6;&#x00A0;pi</div>
<!--l. 782--><p class="nopar" > But the division happens first, so you would get <span 
class="zptmcmrm-">&#x03C0;&#x2215;</span><span 
class="zptmcmr-">2</span>, which is not the same thing! There is no way for
Python to know what you meant to write, so in this case you don&#8217;t get an error message; you just get
the wrong answer.
<a 
 id="dx1-4087"></a>
<!--l. 793--><p class="noindent" >
<a 
 id="x1-4088r14"></a>
<!--l. 793--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.14</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-31"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">assignment:</span> </dt><dd 
class="description">A statement that assigns a value to a variable. <a 
 id="dx1-4089"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">concatenate:</span> </dt><dd 
class="description">To join two operands end-to-end. <a 
 id="dx1-4090"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">comment:</span> </dt><dd 
class="description">Information in a program that is meant for other programmers (or anyone reading
     the source code) and has no effect on the execution of the program. <a 
 id="dx1-4091"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">evaluate:</span> </dt><dd 
class="description">To simplify an expression by performing the operations in order to yield a single
     value.
     </dd><dt class="description">
<span 
class="ptmb7t-">expression:</span> </dt><dd 
class="description">A combination of variables, operators, and values that represents a single result
     value. <a 
 id="dx1-4092"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">floating-point:</span> </dt><dd 
class="description">A type that represents numbers with fractional parts. <a 
 id="dx1-4093"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">floor division:</span> </dt><dd 
class="description">The operation that divides two numbers and chops off the fraction part. <a 
 id="dx1-4094"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">integer:</span> </dt><dd 
class="description">A type that represents whole numbers. <a 
 id="dx1-4095"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">keyword:</span> </dt><dd 
class="description">A reserved word that is used by the compiler to parse a program; you cannot use
     keywords like <span 
class="pcrr7tn-">if</span>, <span 
class="pcrr7tn-">def</span>, and <span 
class="pcrr7tn-">while </span>as variable names. <a 
 id="dx1-4096"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">mnemonic:</span> </dt><dd 
class="description">A memory aid. We often give variables mnemonic names to help us remember
     what is stored in the variable. <a 
 id="dx1-4097"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">modulus operator:</span> </dt><dd 
class="description">An operator, denoted with a percent sign (<span 
class="pcrr7tn-">%</span>), that works on integers and
     yields the remainder when one number is divided by another. <a 
 id="dx1-4098"></a><a 
 id="dx1-4099"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">operand:</span> </dt><dd 
class="description">One of the values on which an operator operates. <a 
 id="dx1-4100"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">operator:</span> </dt><dd 
class="description">A special symbol that represents a simple computation like addition, multiplication,
     or string concatenation. <a 
 id="dx1-4101"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">rules of precedence:</span> </dt><dd 
class="description">The  set  of  rules  governing  the  order  in  which  expressions  involving
     multiple operators and operands are evaluated. <a 
 id="dx1-4102"></a><a 
 id="dx1-4103"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">state diagram:</span> </dt><dd 
class="description">A graphical representation of a set of variables and the values they refer to. <a 
 id="dx1-4104"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">statement:</span> </dt><dd 
class="description">A section of code that represents a command or action. So far, the statements we
     have seen are assignments and print statements. <a 
 id="dx1-4105"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">string:</span> </dt><dd 
class="description">A type that represents sequences of characters. <a 
 id="dx1-4106"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">type:</span> </dt><dd 
class="description">A category of values. The types we have seen so far are integers (type <span 
class="pcrr7tn-">int</span>), floating-point
     numbers (type <span 
class="pcrr7tn-">float</span>), and strings (type <span 
class="pcrr7tn-">str</span>). <a 
 id="dx1-4107"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">value:</span> </dt><dd 
class="description">One of the basic units of data, like a number or string, that a program manipulates. <a 
 id="dx1-4108"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">variable:</span> </dt><dd 
class="description">A name that refers to a value. <a 
 id="dx1-4109"></a>
     </dd></dl>
<!--l. 878--><p class="noindent" >

<a 
 id="x1-4110r15"></a>
<!--l. 878--><p class="noindent" ><span 
class="ptmb7t-x-x-144">2.15</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-32"></a>
<div class="newtheorem">
<!--l. 880--><p class="noindent" ><span class="head">
<a 
 id="x1-4111r2"></a>
<span 
class="ptmb7t-">Exercise 2.2</span>  </span>Write a program that uses <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">raw_input</span></span></span> to prompt a user for their name and then
welcomes them.

<div class="verbatim" id="verbatim-54">
Enter&#x00A0;your&#x00A0;name:&#x00A0;Chuck
&#x00A0;<br />Hello&#x00A0;Chuck</div>
<!--l. 887--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 891--><p class="noindent" ><span class="head">
<a 
 id="x1-4112r3"></a>
<span 
class="ptmb7t-">Exercise 2.3</span>  </span>Write a program to prompt the user for hours and rate per hour to compute gross
pay.

<div class="verbatim" id="verbatim-55">
Enter&#x00A0;Hours:&#x00A0;35
&#x00A0;<br />Enter&#x00A0;Rate:&#x00A0;2.75
&#x00A0;<br />Pay:&#x00A0;96.25</div>
<!--l. 898--><p class="nopar" >
</div>
<!--l. 901--><p class="noindent" >We won&#8217;t worry about making sure our pay has exactly two digits after the decimal place for now. If
you want, you can play with the built-in Python <span 
class="pcrr7tn-">round </span>function to properly round the resulting pay to
two decimal places.
<div class="newtheorem">
<!--l. 906--><p class="noindent" ><span class="head">
<a 
 id="x1-4113r4"></a>
<span 
class="ptmb7t-">Exercise 2.4</span>  </span>Assume that we execute the following assignment statements:

<div class="verbatim" id="verbatim-56">
width&#x00A0;=&#x00A0;17
&#x00A0;<br />height&#x00A0;=&#x00A0;12.0</div>
<!--l. 912--><p class="nopar" >
<!--l. 914--><p class="noindent" >For each of the following expressions, write the value of the expression and the type (of the value of
the expression).
<!--l. 917--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-4115x1"><span 
class="pcrr7tn-">width/2</span>
     </li>
     <li 
  class="enumerate" id="x1-4117x2"><span 
class="pcrr7tn-">width/2.0</span>
     </li>
     <li 
  class="enumerate" id="x1-4119x3"><span 
class="pcrr7tn-">height/3</span>
     </li>
     <li 
  class="enumerate" id="x1-4121x4"><span 
class="pcrr7tn-">1 + 2 &#x22C6; 5</span>
     </li></ol>
<!--l. 929--><p class="noindent" >Use the Python interpreter to check your answers.
</div>
<div class="newtheorem">
<!--l. 932--><p class="noindent" ><span class="head">
<a 
 id="x1-4122r5"></a>
<span 
class="ptmb7t-">Exercise 2.5</span>  </span>Write a program which prompts the user for a Celsius temperature, convert the
temperature to Fahrenheit and print out the converted temperature.
</div>

<!--l. 939--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;3</span><br /><a 
 id="x1-50003"></a>Conditional execution</h2>
<a 
 id="x1-5001r1"></a>
<span 
class="ptmb7t-x-x-144">3.1</span>   <span 
class="ptmb7t-x-x-144">Boolean expressions</span>
<a 
 id="Q1-1-34"></a>
<a 
 id="dx1-5002"></a>
<a 
 id="dx1-5003"></a>
<a 
 id="dx1-5004"></a>
<a 
 id="dx1-5005"></a>
<!--l. 947--><p class="noindent" >A <span 
class="ptmb7t-">boolean expression </span>is an expression that is either true or false. The following examples use the
operator <span 
class="pcrr7tn-">==</span>, which compares two operands and produces <span 
class="pcrr7tn-">True </span>if they are equal and <span 
class="pcrr7tn-">False</span>
otherwise:

<div class="verbatim" id="verbatim-57">
&#x003E;&#x003E;&#x003E;&#x00A0;5&#x00A0;==&#x00A0;5
&#x00A0;<br />True
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;5&#x00A0;==&#x00A0;6
&#x00A0;<br />False</div>
<!--l. 958--><p class="nopar" ><span 
class="pcrr7tn-">True </span>and <span 
class="pcrr7tn-">False </span>are special values that belong to the type <span 
class="pcrr7tn-">bool</span>; they are not strings:
<a 
 id="dx1-5006"></a>
<a 
 id="dx1-5007"></a>
<a 
 id="dx1-5008"></a>
<a 
 id="dx1-5009"></a>
<a 
 id="dx1-5010"></a>
<a 
 id="dx1-5011"></a>

<div class="verbatim" id="verbatim-58">
&#x003E;&#x003E;&#x003E;&#x00A0;type(True)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;bool&#8217;&#x003E;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;type(False)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;bool&#8217;&#x003E;</div>
<!--l. 977--><p class="nopar" > The <span 
class="pcrr7tn-">== </span>operator is one of the <span 
class="ptmb7t-">comparison operators</span>; the others are:

<div class="verbatim" id="verbatim-59">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;!=&#x00A0;y&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;x&#x00A0;is&#x00A0;not&#x00A0;equal&#x00A0;to&#x00A0;y
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;&#x003E;&#x00A0;y&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;x&#x00A0;is&#x00A0;greater&#x00A0;than&#x00A0;y
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;&#x003C;&#x00A0;y&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;x&#x00A0;is&#x00A0;less&#x00A0;than&#x00A0;y
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;&#x003E;=&#x00A0;y&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;x&#x00A0;is&#x00A0;greater&#x00A0;than&#x00A0;or&#x00A0;equal&#x00A0;to&#x00A0;y
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;&#x003C;=&#x00A0;y&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;x&#x00A0;is&#x00A0;less&#x00A0;than&#x00A0;or&#x00A0;equal&#x00A0;to&#x00A0;y
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;is&#x00A0;y&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;x&#x00A0;is&#x00A0;the&#x00A0;same&#x00A0;as&#x00A0;y
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;is&#x00A0;not&#x00A0;y&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;x&#x00A0;is&#x00A0;not&#x00A0;the&#x00A0;same&#x00A0;as&#x00A0;y</div>
<!--l. 992--><p class="nopar" > Although these operations are probably familiar to you, the Python symbols are different from the
mathematical symbols. A common error is to use a single equal sign (<span 
class="pcrr7tn-">=</span>) instead of a double equal sign
(<span 
class="pcrr7tn-">==</span>). Remember that <span 
class="pcrr7tn-">= </span>is an assignment operator and <span 
class="pcrr7tn-">== </span>is a comparison operator. There is no such
thing as <span 
class="pcrr7tn-">=&#x003C; </span>or <span 
class="pcrr7tn-">=&#x003E;</span>.
<a 
 id="dx1-5012"></a>
<a 
 id="dx1-5013"></a>
<!--l. 1006--><p class="noindent" >
<a 
 id="x1-5014r2"></a>
<!--l. 1006--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.2</span>   <span 
class="ptmb7t-x-x-144">Logical operators</span>
<a 
 id="Q1-1-35"></a>
<a 
 id="dx1-5015"></a>
<a 
 id="dx1-5016"></a>
<!--l. 1010--><p class="noindent" >There are three <span 
class="ptmb7t-">logical operators</span>: <span 
class="pcrr7tn-">and</span>, <span 
class="pcrr7tn-">or</span>, and <span 
class="pcrr7tn-">not</span>. The semantics (meaning) of these operators is
similar to their meaning in English. For example,
<!--l. 1014--><p class="noindent" ><span 
class="pcrr7tn-">x &#x003E; 0 and x &#x003C; 10</span>
<!--l. 1016--><p class="noindent" >is true only if <span 
class="pcrr7tn-">x </span>is greater than 0 <span 
class="ptmri7t-">and </span>less than 10.
<a 
 id="dx1-5017"></a>
<a 
 id="dx1-5018"></a>
<a 
 id="dx1-5019"></a>
<a 
 id="dx1-5020"></a>
<a 
 id="dx1-5021"></a>
<a 
 id="dx1-5022"></a>
<!--l. 1026--><p class="noindent" ><span 
class="pcrr7tn-">n%2 == 0 or n%3 == 0 </span>is true if <span 
class="ptmri7t-">either </span>of the conditions is true, that is, if the number is divisible by
2 <span 
class="ptmri7t-">or </span>3.
<!--l. 1029--><p class="noindent" >Finally, the <span 
class="pcrr7tn-">not </span>operator negates a boolean expression, so <span 
class="pcrr7tn-">not (x &#x003E; y) </span>is true if <span 
class="pcrr7tn-">x &#x003E; y </span>is false, that
is, if <span 
class="pcrr7tn-">x </span>is less than or equal to <span 
class="pcrr7tn-">y</span>.

<!--l. 1033--><p class="noindent" >Strictly speaking, the operands of the logical operators should be boolean expressions, but Python is
not very strict. Any nonzero number is interpreted as &#8220;true.&#8221;

<div class="verbatim" id="verbatim-60">
&#x003E;&#x003E;&#x003E;&#x00A0;17&#x00A0;and&#x00A0;True
&#x00A0;<br />True</div>
<!--l. 1041--><p class="nopar" > This flexibility can be useful, but there are some subtleties to it that might be confusing. You might
want to avoid it (unless you know what you are doing).
<!--l. 1048--><p class="noindent" >
<a 
 id="x1-5023r3"></a>
<!--l. 1048--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.3</span>   <span 
class="ptmb7t-x-x-144">Conditional execution</span>
<a 
 id="Q1-1-36"></a>
<a 
 id="dx1-5024"></a>
<a 
 id="dx1-5025"></a>
<a 
 id="dx1-5026"></a>
<a 
 id="dx1-5027"></a>
<a 
 id="dx1-5028"></a>
<!--l. 1057--><p class="noindent" >In order to write useful programs, we almost always need the ability to check conditions and change
the behavior of the program accordingly. <span 
class="ptmb7t-">Conditional statements </span>give us this ability. The simplest
form is the <span 
class="pcrr7tn-">if </span>statement:

<div class="verbatim" id="verbatim-61">
if&#x00A0;x&#x00A0;&#x003E;&#x00A0;0&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;is&#x00A0;positive&#8217;</div>
<!--l. 1066--><p class="nopar" > The boolean expression after the <span 
class="pcrr7tn-">if </span>statement is called the <span 
class="ptmb7t-">condition</span>. We end the <span 
class="pcrr7tn-">if </span>statement with a
colon character (:) and the line(s) after the if statement are indented.
<div  
class="centerline">             <img 
src="cfbook8x.png" alt="PIC" class="graphics" width="221.43144pt" height="126.47249pt" ><!--tex4ht:graphics  
name="cfbook8x.png" src="figs2/if.eps"  
-->             </div>
<!--l. 1078--><p class="noindent" >If the logical condition is true, then the indented statement gets executed. If the logical condition is
false, the indented statement is skipped.
<a 
 id="dx1-5029"></a>
<a 
 id="dx1-5030"></a>
<a 
 id="dx1-5031"></a>
<!--l. 1086--><p class="noindent" ><span 
class="pcrr7tn-">if </span>statements have the same structure as function definitions or <span 
class="pcrr7tn-">for </span>loops. The statement
consists of a header line that ends with the colon character (:) followed by an indented block.
Statements like this are called <span 
class="ptmb7t-">compound statements </span>because they stretch across more than one
line.
<!--l. 1093--><p class="noindent" >There is no limit on the number of statements that can appear in the body, but there has to be at least
one. Occasionally, it is useful to have a body with no statements (usually as a place keeper for
code you haven&#8217;t written yet). In that case, you can use the <span 
class="pcrr7tn-">pass </span>statement, which does
nothing.
<a 
 id="dx1-5032"></a>
<a 
 id="dx1-5033"></a>

<div class="verbatim" id="verbatim-62">
if&#x00A0;x&#x00A0;&#x003C;&#x00A0;0&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;pass&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;need&#x00A0;to&#x00A0;handle&#x00A0;negative&#x00A0;values!</div>
<!--l. 1106--><p class="nopar" > If you enter an if statement in the Python interpreter, the prompt will change from three
chevrons to three dots to indicate you are in the middle of a block of statements as shown
below:

<div class="verbatim" id="verbatim-63">
&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;3
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;if&#x00A0;x&#x00A0;&#x003C;&#x00A0;10:
&#x00A0;<br />...&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Small&#8217;
&#x00A0;<br />...
&#x00A0;<br />Small
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 1121--><p class="nopar" >
<!--l. 1125--><p class="noindent" >
<a 
 id="x1-5034r4"></a>
<!--l. 1125--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.4</span>   <span 
class="ptmb7t-x-x-144">Alternative execution</span>
<a 
 id="Q1-1-37"></a>
<a 
 id="dx1-5035"></a>
<a 
 id="dx1-5036"></a>
<a 
 id="dx1-5037"></a>
<!--l. 1132--><p class="noindent" >A second form of the <span 
class="pcrr7tn-">if </span>statement is <span 
class="ptmb7t-">alternative execution</span>, in which there are two possibilities and
the condition determines which one gets executed. The syntax looks like this:

<div class="verbatim" id="verbatim-64">
if&#x00A0;x%2&#x00A0;==&#x00A0;0&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;is&#x00A0;even&#8217;
&#x00A0;<br />else&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;is&#x00A0;odd&#8217;</div>
<!--l. 1142--><p class="nopar" > If the remainder when <span 
class="pcrr7tn-">x </span>is divided by 2 is 0, then we know that <span 
class="pcrr7tn-">x </span>is even, and the program
displays a message to that effect. If the condition is false, the second set of statements is
executed.
<div  
class="centerline">  <img 
src="cfbook9x.png" alt="PIC" class="graphics" width="334.50722pt" height="126.47249pt" ><!--tex4ht:graphics  
name="cfbook9x.png" src="figs2/if-else.eps"  
-->  </div>
<!--l. 1154--><p class="noindent" >Since the condition must be true or false, exactly one of the alternatives will be executed. The
alternatives are called <span 
class="ptmb7t-">branches</span>, because they are branches in the flow of execution.
<a 
 id="dx1-5038"></a>
<!--l. 1162--><p class="noindent" >
<a 
 id="x1-5039r5"></a>
<!--l. 1162--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.5</span>   <span 
class="ptmb7t-x-x-144">Chained conditionals</span>
<a 
 id="Q1-1-38"></a>
<a 
 id="dx1-5040"></a>
<a 
 id="dx1-5041"></a>
<!--l. 1166--><p class="noindent" >Sometimes there are more than two possibilities and we need more than two branches. One way to
express a computation like that is a <span 
class="ptmb7t-">chained conditional</span>:

<div class="verbatim" id="verbatim-65">
if&#x00A0;x&#x00A0;&#x003C;&#x00A0;y:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;is&#x00A0;less&#x00A0;than&#x00A0;y&#8217;
&#x00A0;<br />elif&#x00A0;x&#x00A0;&#x003E;&#x00A0;y:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;is&#x00A0;greater&#x00A0;than&#x00A0;y&#8217;
&#x00A0;<br />else:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;and&#x00A0;y&#x00A0;are&#x00A0;equal&#8217;</div>
<!--l. 1178--><p class="nopar" ><span 
class="pcrr7tn-">elif </span>is an abbreviation of &#8220;else if.&#8221; Again, exactly one branch will be executed.
<div  
class="centerline">             <img 
src="cfbook10x.png" alt="PIC" class="graphics" width="225.0814pt" height="216.81pt" ><!--tex4ht:graphics  
name="cfbook10x.png" src="figs2/elif.eps"  
-->             </div>
<!--l. 1188--><p class="noindent" >There is no limit on the number of <span 
class="pcrr7tn-">elif </span>statements. If there is an <span 
class="pcrr7tn-">else </span>clause, it has to be at the end,
but there doesn&#8217;t have to be one.
<a 
 id="dx1-5042"></a>
<a 
 id="dx1-5043"></a>

<div class="verbatim" id="verbatim-66">
if&#x00A0;choice&#x00A0;==&#x00A0;&#8217;a&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Bad&#x00A0;guess&#8217;
&#x00A0;<br />elif&#x00A0;choice&#x00A0;==&#x00A0;&#8217;b&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Good&#x00A0;guess&#8217;
&#x00A0;<br />elif&#x00A0;choice&#x00A0;==&#x00A0;&#8217;c&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Close,&#x00A0;but&#x00A0;not&#x00A0;correct&#8217;</div>
<!--l. 1204--><p class="nopar" > Each condition is checked in order. If the first is false, the next is checked, and so on. If one of them is
true, the corresponding branch executes, and the statement ends. Even if more than one condition is
true, only the first true branch executes.
<!--l. 1214--><p class="noindent" >
<a 
 id="x1-5044r6"></a>
<!--l. 1214--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.6</span>   <span 
class="ptmb7t-x-x-144">Nested conditionals</span>
<a 
 id="Q1-1-39"></a>
<a 
 id="dx1-5045"></a>
<a 
 id="dx1-5046"></a>
<!--l. 1218--><p class="noindent" >One conditional can also be nested within another. We could have written the trichotomy example like
this:

<div class="verbatim" id="verbatim-67">
if&#x00A0;x&#x00A0;==&#x00A0;y:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;and&#x00A0;y&#x00A0;are&#x00A0;equal&#8217;
&#x00A0;<br />else:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;x&#x00A0;&#x003C;&#x00A0;y:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;is&#x00A0;less&#x00A0;than&#x00A0;y&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;else:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;is&#x00A0;greater&#x00A0;than&#x00A0;y&#8217;</div>
<!--l. 1230--><p class="nopar" > The outer conditional contains two branches. The first branch contains a simple statement. The
second branch contains another <span 
class="pcrr7tn-">if </span>statement, which has two branches of its own. Those two
branches are both simple statements, although they could have been conditional statements as
well.
<div  
class="centerline"><img 
src="cfbook11x.png" alt="PIC" class="graphics" width="378.76907pt" height="180.67499pt" ><!--tex4ht:graphics  
name="cfbook11x.png" src="figs2/nested.eps"  
--></div>
<!--l. 1243--><p class="noindent" >Although the indentation of the statements makes the structure apparent, <span 
class="ptmb7t-">nested conditionals</span>
become difficult to read very quickly. In general, it is a good idea to avoid them when you
can.
<!--l. 1247--><p class="noindent" >Logical operators often provide a way to simplify nested conditional statements. For example, we can
rewrite the following code using a single conditional:

<div class="verbatim" id="verbatim-68">
if&#x00A0;0&#x00A0;&#x003C;&#x00A0;x:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;x&#x00A0;&#x003C;&#x00A0;10:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;is&#x00A0;a&#x00A0;positive&#x00A0;single-digit&#x00A0;number.&#8217;</div>
<!--l. 1256--><p class="nopar" > The <span 
class="pcrr7tn-">print </span>statement is executed only if we make it past both conditionals, so we can get the same
effect with the <span 
class="pcrr7tn-">and </span>operator:

<div class="verbatim" id="verbatim-69">
if&#x00A0;0&#x00A0;&#x003C;&#x00A0;x&#x00A0;and&#x00A0;x&#x00A0;&#x003C;&#x00A0;10:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;x&#x00A0;is&#x00A0;a&#x00A0;positive&#x00A0;single-digit&#x00A0;number.&#8217;</div>
<!--l. 1266--><p class="nopar" >
<!--l. 1270--><p class="noindent" >
<a 
 id="x1-5047r7"></a>
<!--l. 1270--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.7</span>   <span 
class="ptmb7t-x-x-144">Catching exceptions using try and except</span>
<a 
 id="Q1-1-40"></a>
<!--l. 1273--><p class="noindent" >Earlier we saw a code segment where we used the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">raw_input</span></span></span> and <span 
class="pcrr7tn-">int </span>functions to read and
parse an integer number entered by the user. We also saw how treacherous doing this could
be:

<div class="verbatim" id="verbatim-70">
&#x003E;&#x003E;&#x003E;&#x00A0;speed&#x00A0;=&#x00A0;raw_input(prompt)
&#x00A0;<br />What...is&#x00A0;the&#x00A0;airspeed&#x00A0;velocity&#x00A0;of&#x00A0;an&#x00A0;unladen&#x00A0;swallow?
&#x00A0;<br />What&#x00A0;do&#x00A0;you&#x00A0;mean,&#x00A0;an&#x00A0;African&#x00A0;or&#x00A0;a&#x00A0;European&#x00A0;swallow?
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;int(speed)
&#x00A0;<br />ValueError:&#x00A0;invalid&#x00A0;literal&#x00A0;for&#x00A0;int()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 1285--><p class="nopar" > When we are executing these statements in the Python interpreter, we get a new prompt from the
interpreter, think &#8220;oops&#8221; and move on to our next statement.
<!--l. 1292--><p class="noindent" >However if this code is placed in a Python script and this error occurs, your script immediately stops in
its tracks with a traceback. It does not execute the following statement. <a 
 id="dx1-5048"></a>
<!--l. 1298--><p class="noindent" >Here is a sample program to convert a Fahrenheit temperature to a Celsius temperature: <a 
 id="dx1-5049"></a><a 
 id="dx1-5050"></a>
<a 
 id="dx1-5051"></a>

<div class="verbatim" id="verbatim-71">
inp&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;Fahrenheit&#x00A0;Temperature:&#8217;)
&#x00A0;<br />fahr&#x00A0;=&#x00A0;float(inp)
&#x00A0;<br />cel&#x00A0;=&#x00A0;(fahr&#x00A0;-&#x00A0;32.0)&#x00A0;&#x22C6;&#x00A0;5.0&#x00A0;/&#x00A0;9.0
&#x00A0;<br />print&#x00A0;cel</div>
<!--l. 1310--><p class="nopar" > If we execute this code and give it invalid input, it simply fails with an unfriendly error
message:

<div class="verbatim" id="verbatim-72">
python&#x00A0;fahren.py
&#x00A0;<br />Enter&#x00A0;Fahrenheit&#x00A0;Temperature:72
&#x00A0;<br />22.2222222222
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;fahren.py
&#x00A0;<br />Enter&#x00A0;Fahrenheit&#x00A0;Temperature:fred
&#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"fahren.py",&#x00A0;line&#x00A0;2,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;fahr&#x00A0;=&#x00A0;float(inp)
&#x00A0;<br />ValueError:&#x00A0;invalid&#x00A0;literal&#x00A0;for&#x00A0;float():&#x00A0;fred</div>
<!--l. 1328--><p class="nopar" > There is a conditional execution structure built into Python to handle these types of expected and
unexpected errors called &#8220;try / except&#8221;. The idea of <span 
class="pcrr7tn-">try </span>and <span 
class="pcrr7tn-">except </span>is that you know that some
sequence of instruction(s) may have a problem and you want to add some statements to be
executed if an error occurs. These extra statements (the except block) are ignored if there is no
error.
<!--l. 1340--><p class="noindent" >You can think of the <span 
class="pcrr7tn-">try </span>and <span 
class="pcrr7tn-">except </span>feature in Python as an &#8220;insurance policy&#8221; on a sequence of
statements.
<!--l. 1344--><p class="noindent" >We can rewrite our temperature converter as follows:

<div class="verbatim" id="verbatim-73">
inp&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;Fahrenheit&#x00A0;Temperature:&#8217;)
&#x00A0;<br />try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;fahr&#x00A0;=&#x00A0;float(inp)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;cel&#x00A0;=&#x00A0;(fahr&#x00A0;-&#x00A0;32.0)&#x00A0;&#x22C6;&#x00A0;5.0&#x00A0;/&#x00A0;9.0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;cel
&#x00A0;<br />except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Please&#x00A0;enter&#x00A0;a&#x00A0;number&#8217;</div>
<!--l. 1355--><p class="nopar" >
<!--l. 1359--><p class="noindent" >Python starts by executing the sequence of statements in the <span 
class="pcrr7tn-">try </span>block. If all goes well, it skips the
<span 
class="pcrr7tn-">except </span>block and proceeds. If an exception occurs in the <span 
class="pcrr7tn-">try </span>block, Python jumps out of the <span 
class="pcrr7tn-">try</span>
block and executes the sequence of statements in the <span 
class="pcrr7tn-">except </span>block.

<div class="verbatim" id="verbatim-74">
python&#x00A0;fahren2.py
&#x00A0;<br />Enter&#x00A0;Fahrenheit&#x00A0;Temperature:72
&#x00A0;<br />22.2222222222
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;fahren2.py
&#x00A0;<br />Enter&#x00A0;Fahrenheit&#x00A0;Temperature:fred
&#x00A0;<br />Please&#x00A0;enter&#x00A0;a&#x00A0;number</div>
<!--l. 1376--><p class="nopar" >
<!--l. 1380--><p class="noindent" >Handling an exception with a <span 
class="pcrr7tn-">try </span>statement is called <span 
class="ptmb7t-">catching </span>an exception. In this example, the
<span 
class="pcrr7tn-">except </span>clause prints an error message. In general, catching an exception gives you a chance to fix the
problem, or try again, or at least end the program gracefully.
<!--l. 1386--><p class="noindent" >
<a 
 id="x1-5052r8"></a>
<!--l. 1386--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.8</span>   <span 
class="ptmb7t-x-x-144">Short circuit evaluation of logical expressions</span>
<a 
 id="Q1-1-41"></a>
<a 
 id="dx1-5053"></a>
<!--l. 1389--><p class="noindent" >When Python is processing a logical expression such as <span 
class="pcrr7tn-">x &#x003E;= 2 and (x/y) &#x003E; 2</span>, it evaluates the
expression from left-to-right. Because of the definition of <span 
class="pcrr7tn-">and</span>, if <span 
class="pcrr7tn-">x </span>is less than 2, the expression <span 
class="pcrr7tn-">x &#x003E;=</span>
<span 
class="pcrr7tn-">2 </span>is <span 
class="pcrr7tn-">False </span>and so the whole expression is <span 
class="pcrr7tn-">False </span>regardless of whether <span 
class="pcrr7tn-">(x/y) &#x003E; 2 </span>evaluates to <span 
class="pcrr7tn-">True</span>
or <span 
class="pcrr7tn-">False</span>.
<!--l. 1396--><p class="noindent" >When Python detects that there is nothing to be gained by evaluating the rest of a logical expression, it
stops its evaluation and does not do the computations in the rest of the logical expression. When the
evaluation of a logical expression stops because the overall value is already known, it is called
<span 
class="ptmb7t-">short-circuiting </span>the evaluation.
<a 
 id="dx1-5054"></a>
<a 
 id="dx1-5055"></a>
<!--l. 1405--><p class="noindent" >While this may seem like a fine point, the short circuit behavior leads to a clever technique called the
<span 
class="ptmb7t-">guardian pattern</span>. Consider the following code sequence in the Python interpreter:

<div class="verbatim" id="verbatim-75">
&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;6
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y&#x00A0;=&#x00A0;2
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;&#x003E;=&#x00A0;2&#x00A0;and&#x00A0;(x/y)&#x00A0;&#x003E;&#x00A0;2
&#x00A0;<br />True
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;1
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;&#x003E;=&#x00A0;2&#x00A0;and&#x00A0;(x/y)&#x00A0;&#x003E;&#x00A0;2
&#x00A0;<br />False
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;6
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;&#x003E;=&#x00A0;2&#x00A0;and&#x00A0;(x/y)&#x00A0;&#x003E;&#x00A0;2
&#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
&#x00A0;<br />ZeroDivisionError:&#x00A0;integer&#x00A0;division&#x00A0;or&#x00A0;modulo&#x00A0;by&#x00A0;zero
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 1426--><p class="nopar" > The third calculation failed because Python was evaluating <span 
class="pcrr7tn-">(x/y) </span>and <span 
class="pcrr7tn-">y </span>was zero which causes a
runtime error. But the second example did <span 
class="ptmri7t-">not </span>fail because the first part of the expression <span 
class="pcrr7tn-">x &#x003E;= 2</span>
evaluated to <span 
class="pcrr7tn-">False </span>so the <span 
class="pcrr7tn-">(x/y) </span>was not ever executed due to the <span 
class="ptmb7t-">short circuit </span>rule and there was no
error.
<!--l. 1435--><p class="noindent" >We can construct the logical expression to strategically place a <span 
class="ptmb7t-">guard </span>evaluation just before the
evaluation that might cause an error as follows:

<div class="verbatim" id="verbatim-76">
&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;1
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;&#x003E;=&#x00A0;2&#x00A0;and&#x00A0;y&#x00A0;!=&#x00A0;0&#x00A0;and&#x00A0;(x/y)&#x00A0;&#x003E;&#x00A0;2
&#x00A0;<br />False
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;6
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;&#x003E;=&#x00A0;2&#x00A0;and&#x00A0;y&#x00A0;!=&#x00A0;0&#x00A0;and&#x00A0;(x/y)&#x00A0;&#x003E;&#x00A0;2
&#x00A0;<br />False
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;&#x003E;=&#x00A0;2&#x00A0;and&#x00A0;(x/y)&#x00A0;&#x003E;&#x00A0;2&#x00A0;and&#x00A0;y&#x00A0;!=&#x00A0;0
&#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
&#x00A0;<br />ZeroDivisionError:&#x00A0;integer&#x00A0;division&#x00A0;or&#x00A0;modulo&#x00A0;by&#x00A0;zero
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 1453--><p class="nopar" > In the first logical expression, <span 
class="pcrr7tn-">x &#x003E;= 2 </span>is <span 
class="pcrr7tn-">False </span>so the evaluation stops at the <span 
class="pcrr7tn-">and</span>. In the second
logical expression <span 
class="pcrr7tn-">x &#x003E;= 2 </span>is <span 
class="pcrr7tn-">True </span>but <span 
class="pcrr7tn-">y != 0 </span>is <span 
class="pcrr7tn-">False </span>so we never reach <span 
class="pcrr7tn-">(x/y)</span>.
<!--l. 1460--><p class="noindent" >In the third logical expression, the <span 
class="pcrr7tn-">y != 0 </span>is <span 
class="ptmri7t-">after </span>the <span 
class="pcrr7tn-">(x/y) </span>calculation so the expression fails with
an error.
<!--l. 1463--><p class="noindent" >In the second expression, we say that <span 
class="pcrr7tn-">y != 0 </span>acts as a <span 
class="ptmb7t-">guard </span>to insure that we only execute <span 
class="pcrr7tn-">(x/y) </span>if <span 
class="pcrr7tn-">y</span>
is non-zero.
<!--l. 1467--><p class="noindent" >
<a 
 id="x1-5056r9"></a>
<!--l. 1467--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.9</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-42"></a>
<a 
 id="dx1-5057"></a>
<a 
 id="dx1-5058"></a>
<!--l. 1472--><p class="noindent" >The traceback Python displays when an error occurs contains a lot of information, but it can be
overwhelming, especially when there are many frames on the stack. The most useful parts are
usually:
     <ul class="itemize1">
     <li class="itemize">What kind of error it was, and

     </li>
     <li class="itemize">Where it occurred.
     </li></ul>
<!--l. 1485--><p class="noindent" >Syntax errors are usually easy to find, but there are a few gotchas. Whitespace errors can be tricky
because spaces and tabs are invisible and we are used to ignoring them.
<a 
 id="dx1-5059"></a>

<div class="verbatim" id="verbatim-77">
&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;5
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;&#x00A0;y&#x00A0;=&#x00A0;6
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;y&#x00A0;=&#x00A0;6
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;^
&#x00A0;<br />SyntaxError:&#x00A0;invalid&#x00A0;syntax</div>
<!--l. 1499--><p class="nopar" > In this example, the problem is that the second line is indented by one space. But the error message
points to <span 
class="pcrr7tn-">y</span>, which is misleading. In general, error messages indicate where the problem
was discovered, but the actual error might be earlier in the code, sometimes on a previous
line.
<a 
 id="dx1-5060"></a>
<a 
 id="dx1-5061"></a>
<!--l. 1511--><p class="noindent" >The same is true of runtime errors. Suppose you are trying to compute a signal-to-noise ratio in
decibels. The formula is <span 
class="zptmcmrm-">SNR</span><sub><span 
class="zptmcmrm-x-x-74">db</span></sub> <span 
class="zptmcmr-">= 10</span><span 
class="zptmcmr-">log</span><sub><span 
class="zptmcmr-x-x-74">10</span></sub><span 
class="zptmcmr-">(</span><span 
class="zptmcmrm-">P</span><sub><span 
class="zptmcmrm-x-x-74">signal</span></sub><span 
class="zptmcmrm-">&#x2215;P</span><sub><span 
class="zptmcmrm-x-x-74">noise</span></sub><span 
class="zptmcmr-">)</span>. In Python, you might write something like
this:

<div class="verbatim" id="verbatim-78">
import&#x00A0;math
&#x00A0;<br />signal_power&#x00A0;=&#x00A0;9
&#x00A0;<br />noise_power&#x00A0;=&#x00A0;10
&#x00A0;<br />ratio&#x00A0;=&#x00A0;signal_power&#x00A0;/&#x00A0;noise_power
&#x00A0;<br />decibels&#x00A0;=&#x00A0;10&#x00A0;&#x22C6;&#x00A0;math.log10(ratio)
&#x00A0;<br />print&#x00A0;decibels</div>
<!--l. 1524--><p class="nopar" > But when you run it, you get an error message<span class="footnote-mark"><a 
href="cfbook7.html#fn1x4"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-5062f1"></a>:
<a 
 id="dx1-5063"></a>
<a 
 id="dx1-5064"></a>

<div class="verbatim" id="verbatim-79">
Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"snr.py",&#x00A0;line&#x00A0;5,&#x00A0;in&#x00A0;?
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;decibels&#x00A0;=&#x00A0;10&#x00A0;&#x22C6;&#x00A0;math.log10(ratio)
&#x00A0;<br />OverflowError:&#x00A0;math&#x00A0;range&#x00A0;error</div>
<!--l. 1540--><p class="nopar" > The error message indicates line 5, but there is nothing wrong with that line. To find the real error, it
might be useful to print the value of <span 
class="pcrr7tn-">ratio</span>, which turns out to be 0. The problem is in line 4, because
dividing two integers does floor division. The solution is to represent signal power and noise power
with floating-point values.
<a 
 id="dx1-5065"></a>
<a 
 id="dx1-5066"></a>
<!--l. 1553--><p class="noindent" >In general, error messages tell you where the problem was discovered, but that is often not where it
was caused.
<a 
 id="x1-5067r10"></a>
<!--l. 1557--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.10</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-43"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">body:</span> </dt><dd 
class="description">The sequence of statements within a compound statement. <a 
 id="dx1-5068"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">boolean expression:</span> </dt><dd 
class="description">An expression whose value is either <span 
class="pcrr7tn-">True </span>or <span 
class="pcrr7tn-">False</span>. <a 
 id="dx1-5069"></a><a 
 id="dx1-5070"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">branch:</span> </dt><dd 
class="description">One of the alternative sequences of statements in a conditional statement. <a 
 id="dx1-5071"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">chained conditional:</span> </dt><dd 
class="description">A conditional statement with a series of alternative branches. <a 
 id="dx1-5072"></a><a 
 id="dx1-5073"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">comparison operator:</span> </dt><dd 
class="description">One of the operators that compares its operands: <span 
class="pcrr7tn-">==</span>, <span 
class="pcrr7tn-">!=</span>, <span 
class="pcrr7tn-">&#x003E;</span>, <span 
class="pcrr7tn-">&#x003C;</span>, <span 
class="pcrr7tn-">&#x003E;=</span>, and
     <span 
class="pcrr7tn-">&#x003C;=</span>.
     </dd><dt class="description">
<span 
class="ptmb7t-">conditional statement:</span> </dt><dd 
class="description">A statement that controls the flow of execution depending on some
     condition. <a 
 id="dx1-5074"></a><a 
 id="dx1-5075"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">condition:</span> </dt><dd 
class="description">The boolean expression in a conditional statement that determines which branch is
     executed. <a 
 id="dx1-5076"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">compound statement:</span> </dt><dd 
class="description">A statement that consists of a header and a body. The header ends with
     a colon (:). The body is indented relative to the header. <a 
 id="dx1-5077"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">guardian pattern:</span> </dt><dd 
class="description">Where we construct a logical expression with additional comparisons to
     take advantage of the short circuit behavior. <a 
 id="dx1-5078"></a><a 
 id="dx1-5079"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">logical operator:</span> </dt><dd 
class="description">One of the operators that combines boolean expressions: <span 
class="pcrr7tn-">and</span>, <span 
class="pcrr7tn-">or</span>, and <span 
class="pcrr7tn-">not</span>.
     </dd><dt class="description">
<span 
class="ptmb7t-">nested conditional:</span> </dt><dd 
class="description">A conditional statement that appears in one of the branches of another
     conditional statement. <a 
 id="dx1-5080"></a><a 
 id="dx1-5081"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">traceback:</span> </dt><dd 
class="description">A list of the functions that are executing, printed when an exception occurs. <a 
 id="dx1-5082"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">short circuit:</span> </dt><dd 
class="description">When Python is part-way through evaluating a logical expression and stops the
     evaluation because Python knows the final value for the expression without needing to
     evaluate the rest of the expression. <a 
 id="dx1-5083"></a>
     </dd></dl>
<!--l. 1621--><p class="noindent" >
<a 
 id="x1-5084r11"></a>
<!--l. 1621--><p class="noindent" ><span 
class="ptmb7t-x-x-144">3.11</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-44"></a>
<div class="newtheorem">
<!--l. 1623--><p class="noindent" ><span class="head">
<a 
 id="x1-5085r1"></a>
<span 
class="ptmb7t-">Exercise 3.1</span>  </span>Rewrite your pay computation to give the employee 1.5 times the hourly rate for
hours worked above 40 hours.

<div class="verbatim" id="verbatim-80">
Enter&#x00A0;Hours:&#x00A0;45
&#x00A0;<br />Enter&#x00A0;Rate:&#x00A0;10
&#x00A0;<br />Pay:&#x00A0;475.0</div>
<!--l. 1632--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 1635--><p class="noindent" ><span class="head">
<a 
 id="x1-5086r2"></a>
<span 
class="ptmb7t-">Exercise 3.2</span>  </span>Rewrite your pay program using <span 
class="pcrr7tn-">try </span>and <span 
class="pcrr7tn-">except </span>so that your program handles
non-numeric input gracefully by printing a message and exiting the program. The following
shows two executions of the program:

<div class="verbatim" id="verbatim-81">
Enter&#x00A0;Hours:&#x00A0;20
&#x00A0;<br />Enter&#x00A0;Rate:&#x00A0;nine
&#x00A0;<br />Error,&#x00A0;please&#x00A0;enter&#x00A0;numeric&#x00A0;input
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;Hours:&#x00A0;forty
&#x00A0;<br />Error,&#x00A0;please&#x00A0;enter&#x00A0;numeric&#x00A0;input</div>
<!--l. 1648--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 1651--><p class="noindent" ><span class="head">
<a 
 id="x1-5087r3"></a>
<span 
class="ptmb7t-">Exercise 3.3</span>  </span>Write a program to prompt for a score between 0.0 and 1.0. If the score is out of
range print an error. If the score is between 0.0 and 1.0, print a grade using the following table:

<div class="verbatim" id="verbatim-82">
Score&#x00A0;&#x00A0;&#x00A0;Grade
&#x00A0;<br />&#x003E;=&#x00A0;0.9&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;A
&#x00A0;<br />&#x003E;=&#x00A0;0.8&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;B
&#x00A0;<br />&#x003E;=&#x00A0;0.7&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;C
&#x00A0;<br />&#x003E;=&#x00A0;0.6&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;D
&#x00A0;<br />&#x003C;&#x00A0;0.6&#x00A0;&#x00A0;&#x00A0;&#x00A0;F
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;0.95
&#x00A0;<br />A
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;perfect
&#x00A0;<br />Bad&#x00A0;score
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;10.0
&#x00A0;<br />Bad&#x00A0;score
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;0.75
&#x00A0;<br />C
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;0.5
&#x00A0;<br />F</div>
<!--l. 1679--><p class="nopar" >
<!--l. 1681--><p class="noindent" >Run the program repeatedly as shown above to test the various different values for input.
</div>

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;4</span><br /><a 
 id="x1-60004"></a>Functions</h2>
<a 
 id="x1-6001r1"></a>
<span 
class="ptmb7t-x-x-144">4.1</span>   <span 
class="ptmb7t-x-x-144">Function calls</span>
<a 
 id="Q1-1-46"></a>
<a 
 id="dx1-6002"></a>
<!--l. 1692--><p class="noindent" >In the context of programming, a <span 
class="ptmb7t-">function </span>is a named sequence of statements that performs a
computation. When you define a function, you specify the name and the sequence of statements. Later,
you can &#8220;call&#8221; the function by name. We have already seen one example of a <span 
class="ptmb7t-">function</span>
<span 
class="ptmb7t-">call</span>:

<div class="verbatim" id="verbatim-83">
&#x003E;&#x003E;&#x003E;&#x00A0;type(32)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;int&#8217;&#x003E;</div>
<!--l. 1702--><p class="nopar" > The name of the function is <span 
class="pcrr7tn-">type</span>. The expression in parentheses is called the <span 
class="ptmb7t-">argument </span>of the
function. The argument is a value or variable that we are passing into the function as input to the
function. The result, for the <span 
class="pcrr7tn-">type </span>function, is the type of the argument.
<a 
 id="dx1-6003"></a>
<!--l. 1713--><p class="noindent" >It is common to say that a function &#8220;takes&#8221; an argument and &#8220;returns&#8221; a result. The result is called the
<span 
class="ptmb7t-">return value</span>.
<a 
 id="dx1-6004"></a>
<a 
 id="dx1-6005"></a>
<!--l. 1719--><p class="noindent" >
<a 
 id="x1-6006r2"></a>
<!--l. 1719--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.2</span>   <span 
class="ptmb7t-x-x-144">Built-in functions</span>
<a 
 id="Q1-1-47"></a>
<!--l. 1721--><p class="noindent" >Python provides a number of important built-in functions that we can use without needing to provide
the function definition. The creators of Python wrote a set of functions to solve common problems and
included them in Python for us to use.
<!--l. 1726--><p class="noindent" >The <span 
class="pcrr7tn-">max </span>and <span 
class="pcrr7tn-">min </span>functions give us the largest and smallest values in a list, respectively:

<div class="verbatim" id="verbatim-84">
&#x003E;&#x003E;&#x003E;&#x00A0;max(&#8217;Hello&#x00A0;world&#8217;)
&#x00A0;<br />&#8217;w&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;min(&#8217;Hello&#x00A0;world&#8217;)
&#x00A0;<br />&#8217;&#x00A0;&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 1736--><p class="nopar" > The <span 
class="pcrr7tn-">max </span>function tells us the &#8220;largest character&#8221; in the string (which turns out to be the
letter &#8220;w&#8221;) and the <span 
class="pcrr7tn-">min </span>function shows us the smallest character which turns out to be a
space.
<!--l. 1744--><p class="noindent" >Another very common built-in function is the <span 
class="pcrr7tn-">len </span>function which tells us how many items are in
its argument. If the argument to <span 
class="pcrr7tn-">len </span>is a string, it returns the number of characters in the
string.

<div class="verbatim" id="verbatim-85">
&#x003E;&#x003E;&#x003E;&#x00A0;len(&#8217;Hello&#x00A0;world&#8217;)
&#x00A0;<br />11
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 1754--><p class="nopar" > These functions are not limited to looking at strings, they can operate on any set of values as we will
see in later chapters.
<!--l. 1760--><p class="noindent" >You should treat the names of built-in functions as reserved words (i.e. avoid using &#8220;max&#8221; as a variable
name).
<!--l. 1763--><p class="noindent" >
<a 
 id="x1-6007r3"></a>
<!--l. 1763--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.3</span>   <span 
class="ptmb7t-x-x-144">Type conversion functions</span>
<a 
 id="Q1-1-48"></a>
<a 
 id="dx1-6008"></a>
<a 
 id="dx1-6009"></a>
<!--l. 1775--><p class="noindent" >Python also provides built-in functions that convert values from one type to another. The <span 
class="pcrr7tn-">int </span>function
takes any value and converts it to an integer, if it can, or complains otherwise:
<a 
 id="dx1-6010"></a>
<a 
 id="dx1-6011"></a>

<div class="verbatim" id="verbatim-86">
&#x003E;&#x003E;&#x003E;&#x00A0;int(&#8217;32&#8217;)
&#x00A0;<br />32
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;int(&#8217;Hello&#8217;)
&#x00A0;<br />ValueError:&#x00A0;invalid&#x00A0;literal&#x00A0;for&#x00A0;int():&#x00A0;Hello</div>
<!--l. 1788--><p class="nopar" ><span 
class="pcrr7tn-">int </span>can convert floating-point values to integers, but it doesn&#8217;t round off; it chops off the fraction
part:

<div class="verbatim" id="verbatim-87">
&#x003E;&#x003E;&#x003E;&#x00A0;int(3.99999)
&#x00A0;<br />3
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;int(-2.3)
&#x00A0;<br />-2</div>
<!--l. 1800--><p class="nopar" ><span 
class="pcrr7tn-">float </span>converts integers and strings to floating-point numbers:
<a 
 id="dx1-6012"></a>
<a 
 id="dx1-6013"></a>

<div class="verbatim" id="verbatim-88">
&#x003E;&#x003E;&#x003E;&#x00A0;float(32)
&#x00A0;<br />32.0
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;float(&#8217;3.14159&#8217;)
&#x00A0;<br />3.14159</div>
<!--l. 1815--><p class="nopar" > Finally, <span 
class="pcrr7tn-">str </span>converts its argument to a string:
<a 
 id="dx1-6014"></a>
<a 
 id="dx1-6015"></a>

<div class="verbatim" id="verbatim-89">
&#x003E;&#x003E;&#x003E;&#x00A0;str(32)
&#x00A0;<br />&#8217;32&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;str(3.14159)
&#x00A0;<br />&#8217;3.14159&#8217;</div>
<!--l. 1829--><p class="nopar" >
<!--l. 1833--><p class="noindent" >
<a 
 id="x1-6016r4"></a>
<!--l. 1833--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.4</span>   <span 
class="ptmb7t-x-x-144">Random numbers</span>
<a 
 id="Q1-1-49"></a>
<a 
 id="dx1-6017"></a>
<a 
 id="dx1-6018"></a>
<a 
 id="dx1-6019"></a>
<a 
 id="dx1-6020"></a>
<!--l. 1840--><p class="noindent" >Given the same inputs, most computer programs generate the same outputs every time, so they are said
to be <span 
class="ptmb7t-">deterministic</span>. Determinism is usually a good thing, since we expect the same calculation to
yield the same result. For some applications, though, we want the computer to be unpredictable.
Games are an obvious example, but there are more.
<!--l. 1847--><p class="noindent" >Making a program truly nondeterministic turns out to be not so easy, but there are ways to make it at
least seem nondeterministic. One of them is to use <span 
class="ptmb7t-">algorithms </span>that generate <span 
class="ptmb7t-">pseudorandom </span>numbers.
Pseudorandom numbers are not truly random because they are generated by a deterministic
computation, but just by looking at the numbers it is all but impossible to distinguish them from
random.
<a 
 id="dx1-6021"></a>
<a 
 id="dx1-6022"></a>
<!--l. 1857--><p class="noindent" >The <span 
class="pcrr7tn-">random </span>module provides functions that generate pseudorandom numbers (which I will simply call
&#8220;random&#8221; from here on).
<a 
 id="dx1-6023"></a>
<a 
 id="dx1-6024"></a>
<!--l. 1864--><p class="noindent" >The function <span 
class="pcrr7tn-">random </span>returns a random float between 0.0 and 1.0 (including 0.0 but not 1.0). Each
time you call <span 
class="pcrr7tn-">random</span>, you get the next number in a long series. To see a sample, run this
loop:

<div class="verbatim" id="verbatim-90">
import&#x00A0;random
&#x00A0;<br />
&#x00A0;<br />for&#x00A0;i&#x00A0;in&#x00A0;range(10):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;=&#x00A0;random.random()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;x</div>
<!--l. 1876--><p class="nopar" > This program produces the following list of 10 random numbers between 0.0 and up to but not
including 1.0.

<div class="verbatim" id="verbatim-91">
0.301927091705
&#x00A0;<br />0.513787075867
&#x00A0;<br />0.319470430881
&#x00A0;<br />0.285145917252
&#x00A0;<br />0.839069045123
&#x00A0;<br />0.322027080731
&#x00A0;<br />0.550722110248
&#x00A0;<br />0.366591677812
&#x00A0;<br />0.396981483964
&#x00A0;<br />0.838116437404</div>
<!--l. 1893--><p class="nopar" >
<div class="newtheorem">
<!--l. 1896--><p class="noindent" ><span class="head">
<a 
 id="x1-6025r1"></a>
<span 
class="ptmb7t-">Exercise 4.1</span>  </span>Run the program on your system and see what numbers you get. Run the program
more than once and see what numbers you get.
</div>
<!--l. 1901--><p class="noindent" >The <span 
class="pcrr7tn-">random </span>function is only one of many functions which handle random numbers. The function
<span 
class="pcrr7tn-">randint </span>takes parameters <span 
class="pcrr7tn-">low </span>and <span 
class="pcrr7tn-">high </span>and returns an integer between <span 
class="pcrr7tn-">low </span>and <span 
class="pcrr7tn-">high </span>(including
both).
<a 
 id="dx1-6026"></a>
<a 
 id="dx1-6027"></a>

<div class="verbatim" id="verbatim-92">
&#x003E;&#x003E;&#x003E;&#x00A0;random.randint(5,&#x00A0;10)
&#x00A0;<br />5
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;random.randint(5,&#x00A0;10)
&#x00A0;<br />9</div>
<!--l. 1916--><p class="nopar" > To choose an element from a sequence at random, you can use <span 
class="pcrr7tn-">choice</span>:
<a 
 id="dx1-6028"></a>
<a 
 id="dx1-6029"></a>

<div class="verbatim" id="verbatim-93">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[1,&#x00A0;2,&#x00A0;3]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;random.choice(t)
&#x00A0;<br />2
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;random.choice(t)
&#x00A0;<br />3</div>
<!--l. 1932--><p class="nopar" > The <span 
class="pcrr7tn-">random </span>module also provides functions to generate random values from continuous distributions
including Gaussian, exponential, gamma, and a few more.
<!--l. 1939--><p class="noindent" >
<a 
 id="x1-6030r5"></a>
<!--l. 1939--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.5</span>   <span 
class="ptmb7t-x-x-144">Math functions</span>
<a 
 id="Q1-1-50"></a>
<a 
 id="dx1-6031"></a>
<a 
 id="dx1-6032"></a>
<!--l. 1943--><p class="noindent" >Python has a math <span 
class="ptmb7t-">module </span>that provides most of the familiar mathematical functions. Before we can
use the module, we have to import it:
<a 
 id="dx1-6033"></a>
<a 
 id="dx1-6034"></a>

<div class="verbatim" id="verbatim-94">
&#x003E;&#x003E;&#x003E;&#x00A0;import&#x00A0;math</div>
<!--l. 1952--><p class="nopar" > This statement creates a <span 
class="ptmb7t-">module object </span>named math. If you print the module object, you get some
information about it:

<div class="verbatim" id="verbatim-95">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;math
&#x00A0;<br />&#x003C;module&#x00A0;&#8217;math&#8217;&#x00A0;from&#x00A0;&#8217;/usr/lib/python2.5/lib-dynload/math.so&#8217;&#x003E;</div>
<!--l. 1962--><p class="nopar" > The module object contains the functions and variables defined in the module. To access one of the
functions, you have to specify the name of the module and the name of the function, separated by a dot
(also known as a period). This format is called <span 
class="ptmb7t-">dot notation</span>.
<a 
 id="dx1-6035"></a>

<div class="verbatim" id="verbatim-96">
&#x003E;&#x003E;&#x003E;&#x00A0;ratio&#x00A0;=&#x00A0;signal_power&#x00A0;/&#x00A0;noise_power
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;decibels&#x00A0;=&#x00A0;10&#x00A0;&#x22C6;&#x00A0;math.log10(ratio)
&#x00A0;<br />
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;radians&#x00A0;=&#x00A0;0.7
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;height&#x00A0;=&#x00A0;math.sin(radians)</div>
<!--l. 1979--><p class="nopar" > The first example computes the logarithm base 10 of the signal-to-noise ratio. The math module also
provides a function called <span 
class="pcrr7tn-">log </span>that computes logarithms base <span 
class="pcrr7tn-">e</span>.
<a 
 id="dx1-6036"></a>
<a 
 id="dx1-6037"></a>
<a 
 id="dx1-6038"></a>
<a 
 id="dx1-6039"></a>
<a 
 id="dx1-6040"></a>
<a 
 id="dx1-6041"></a>
<!--l. 1993--><p class="noindent" >The second example finds the sine of <span 
class="pcrr7tn-">radians</span>. The name of the variable is a hint that <span 
class="pcrr7tn-">sin </span>and the
other trigonometric functions (<span 
class="pcrr7tn-">cos</span>, <span 
class="pcrr7tn-">tan</span>, etc.) take arguments in radians. To convert from degrees to
radians, divide by 360 and multiply by <span 
class="zptmcmr-">2</span><span 
class="zptmcmrm-">&#x03C0;</span>:

<div class="verbatim" id="verbatim-97">
&#x003E;&#x003E;&#x003E;&#x00A0;degrees&#x00A0;=&#x00A0;45
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;radians&#x00A0;=&#x00A0;degrees&#x00A0;/&#x00A0;360.0&#x00A0;&#x22C6;&#x00A0;2&#x00A0;&#x22C6;&#x00A0;math.pi
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;math.sin(radians)
&#x00A0;<br />0.707106781187</div>
<!--l. 2005--><p class="nopar" > The expression <span 
class="pcrr7tn-">math.pi </span>gets the variable <span 
class="pcrr7tn-">pi </span>from the math module. The value of this variable is an
approximation of <span 
class="zptmcmrm-">&#x03C0;</span>, accurate to about 15 digits.
<a 
 id="dx1-6042"></a>
<!--l. 2014--><p class="noindent" >If you know your trigonometry, you can check the previous result by comparing it to the square root of
two divided by two:
<a 
 id="dx1-6043"></a>
<a 
 id="dx1-6044"></a>

<div class="verbatim" id="verbatim-98">
&#x003E;&#x003E;&#x003E;&#x00A0;math.sqrt(2)&#x00A0;/&#x00A0;2.0
&#x00A0;<br />0.707106781187</div>
<!--l. 2025--><p class="nopar" >
<!--l. 2030--><p class="noindent" >
<a 
 id="x1-6045r6"></a>
<!--l. 2030--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.6</span>   <span 
class="ptmb7t-x-x-144">Adding new functions</span>
<a 
 id="Q1-1-51"></a>
<!--l. 2032--><p class="noindent" >So far, we have only been using the functions that come with Python, but it is also possible to add new
functions. A <span 
class="ptmb7t-">function definition </span>specifies the name of a new function and the sequence of statements
that execute when the function is called. Once we define a function, we can reuse the function over and
over throughout our program.
<a 
 id="dx1-6046"></a>
<a 
 id="dx1-6047"></a>
<a 
 id="dx1-6048"></a>
<!--l. 2043--><p class="noindent" >Here is an example:

<div class="verbatim" id="verbatim-99">
def&#x00A0;print_lyrics():
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;"I&#8217;m&#x00A0;a&#x00A0;lumberjack,&#x00A0;and&#x00A0;I&#8217;m&#x00A0;okay."
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;I&#x00A0;sleep&#x00A0;all&#x00A0;night&#x00A0;and&#x00A0;I&#x00A0;work&#x00A0;all&#x00A0;day.&#8217;</div>
<!--l. 2050--><p class="nopar" > <span 
class="pcrr7tn-">def </span>is a keyword that indicates that this is a function definition. The name of the function is
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">print_lyrics</span></span></span>. The rules for function names are the same as for variable names: letters, numbers and
some punctuation marks are legal, but the first character can&#8217;t be a number. You can&#8217;t use a keyword as
the name of a function, and you should avoid having a variable and a function with the same
name.
<a 
 id="dx1-6049"></a>
<a 
 id="dx1-6050"></a>
<a 
 id="dx1-6051"></a>
<!--l. 2065--><p class="noindent" >The empty parentheses after the name indicate that this function doesn&#8217;t take any arguments. Later we
will build functions that take arguments as their inputs.
<a 
 id="dx1-6052"></a>
<a 
 id="dx1-6053"></a>
<a 
 id="dx1-6054"></a>
<a 
 id="dx1-6055"></a>
<a 
 id="dx1-6056"></a>
<!--l. 2075--><p class="noindent" >The first line of the function definition is called the <span 
class="ptmb7t-">header</span>; the rest is called the <span 
class="ptmb7t-">body</span>.
The header has to end with a colon and the body has to be indented. By convention, the
indentation is always four spaces (see Section&#x00A0;<a 
href="#x1-6086r12">4.12<!--tex4ht:ref: editor --></a>). The body can contain any number of
statements.
<!--l. 2081--><p class="noindent" >The strings in the print statements are enclosed in double quotes. Single quotes and double quotes do
the same thing; most people use single quotes except in cases like this where a single quote (which is
also an apostrophe) appears in the string.
<a 
 id="dx1-6057"></a>
<!--l. 2088--><p class="noindent" >If you type a function definition in interactive mode, the interpreter prints ellipses (<span 
class="ptmri7t-">...</span>) to let you know
that the definition isn&#8217;t complete:

<div class="verbatim" id="verbatim-100">
&#x003E;&#x003E;&#x003E;&#x00A0;def&#x00A0;print_lyrics():
&#x00A0;<br />...&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;"I&#8217;m&#x00A0;a&#x00A0;lumberjack,&#x00A0;and&#x00A0;I&#8217;m&#x00A0;okay."
&#x00A0;<br />...&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;I&#x00A0;sleep&#x00A0;all&#x00A0;night&#x00A0;and&#x00A0;I&#x00A0;work&#x00A0;all&#x00A0;day.&#8217;
&#x00A0;<br />...</div>
<!--l. 2098--><p class="nopar" > To end the function, you have to enter an empty line (this is not necessary in a script).
<!--l. 2104--><p class="noindent" >Defining a function creates a variable with the same name.

<div class="verbatim" id="verbatim-101">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;print_lyrics
&#x00A0;<br />&#x003C;function&#x00A0;print_lyrics&#x00A0;at&#x00A0;0xb7e99e9c&#x003E;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;type(print_lyrics)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;function&#8217;&#x003E;</div>
<!--l. 2112--><p class="nopar" > The value of <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">print_lyrics</span></span></span> is a <span 
class="ptmb7t-">function object</span>, which has type <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">function</span><span 
class="pcrr8c-">&#8217;</span></span></span>.
<a 
 id="dx1-6058"></a>
<a 
 id="dx1-6059"></a>
<!--l. 2121--><p class="noindent" >The syntax for calling the new function is the same as for built-in functions:

<div class="verbatim" id="verbatim-102">
&#x003E;&#x003E;&#x003E;&#x00A0;print_lyrics()
&#x00A0;<br />I&#8217;m&#x00A0;a&#x00A0;lumberjack,&#x00A0;and&#x00A0;I&#8217;m&#x00A0;okay.
&#x00A0;<br />I&#x00A0;sleep&#x00A0;all&#x00A0;night&#x00A0;and&#x00A0;I&#x00A0;work&#x00A0;all&#x00A0;day.</div>
<!--l. 2129--><p class="nopar" > Once you have defined a function, you can use it inside another function. For example, to repeat the
previous refrain, we could write a function called <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">repeat_lyrics</span></span></span>:

<div class="verbatim" id="verbatim-103">
def&#x00A0;repeat_lyrics():
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print_lyrics()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print_lyrics()</div>
<!--l. 2141--><p class="nopar" > And then call <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">repeat_lyrics</span></span></span>:

<div class="verbatim" id="verbatim-104">
&#x003E;&#x003E;&#x003E;&#x00A0;repeat_lyrics()
&#x00A0;<br />I&#8217;m&#x00A0;a&#x00A0;lumberjack,&#x00A0;and&#x00A0;I&#8217;m&#x00A0;okay.
&#x00A0;<br />I&#x00A0;sleep&#x00A0;all&#x00A0;night&#x00A0;and&#x00A0;I&#x00A0;work&#x00A0;all&#x00A0;day.
&#x00A0;<br />I&#8217;m&#x00A0;a&#x00A0;lumberjack,&#x00A0;and&#x00A0;I&#8217;m&#x00A0;okay.
&#x00A0;<br />I&#x00A0;sleep&#x00A0;all&#x00A0;night&#x00A0;and&#x00A0;I&#x00A0;work&#x00A0;all&#x00A0;day.</div>
<!--l. 2153--><p class="nopar" > But that&#8217;s not really how the song goes.
<!--l. 2159--><p class="noindent" >
<a 
 id="x1-6060r7"></a>
<!--l. 2159--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.7</span>   <span 
class="ptmb7t-x-x-144">Definitions and uses</span>
<a 
 id="Q1-1-52"></a>
<a 
 id="dx1-6061"></a>
<!--l. 2162--><p class="noindent" >Pulling together the code fragments from the previous section, the whole program looks like
this:

<div class="verbatim" id="verbatim-105">
def&#x00A0;print_lyrics():
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;"I&#8217;m&#x00A0;a&#x00A0;lumberjack,&#x00A0;and&#x00A0;I&#8217;m&#x00A0;okay."
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;I&#x00A0;sleep&#x00A0;all&#x00A0;night&#x00A0;and&#x00A0;I&#x00A0;work&#x00A0;all&#x00A0;day.&#8217;
&#x00A0;<br />
&#x00A0;<br />def&#x00A0;repeat_lyrics():
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print_lyrics()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print_lyrics()
&#x00A0;<br />
&#x00A0;<br />repeat_lyrics()</div>
<!--l. 2176--><p class="nopar" > This program contains two function definitions: <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">print_lyrics</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">repeat_lyrics</span></span></span>. Function
definitions get executed just like other statements, but the effect is to create function objects. The
statements inside the function do not get executed until the function is called, and the function
definition generates no output.
<a 
 id="dx1-6062"></a>
<!--l. 2187--><p class="noindent" >As you might expect, you have to create a function before you can execute it. In other words, the
function definition has to be executed before the first time it is called.
<div class="newtheorem">
<!--l. 2191--><p class="noindent" ><span class="head">
<a 
 id="x1-6063r2"></a>
<span 
class="ptmb7t-">Exercise 4.2</span>  </span>Move the last line of this program to the top, so the function call appears before
the definitions. Run the program and see what error message you get.
</div>
<div class="newtheorem">
<!--l. 2198--><p class="noindent" ><span class="head">
<a 
 id="x1-6064r3"></a>
<span 
class="ptmb7t-">Exercise 4.3</span>  </span>Move   the   function   call   back   to   the   bottom   and   move   the   definition   of
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">print_lyrics</span></span></span> after  the  definition  of  <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">repeat_lyrics</span></span></span>.  What  happens  when  you  run  this
program?
</div>
<!--l. 2205--><p class="noindent" >

<a 
 id="x1-6065r8"></a>
<!--l. 2205--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.8</span>   <span 
class="ptmb7t-x-x-144">Flow of execution</span>
<a 
 id="Q1-1-53"></a>
<a 
 id="dx1-6066"></a>
<!--l. 2208--><p class="noindent" >In order to ensure that a function is defined before its first use, you have to know the order in which
statements are executed, which is called the <span 
class="ptmb7t-">flow of execution</span>.
<!--l. 2212--><p class="noindent" >Execution always begins at the first statement of the program. Statements are executed one at a time, in
order from top to bottom.
<!--l. 2215--><p class="noindent" >Function <span 
class="ptmri7t-">definitions </span>do not alter the flow of execution of the program, but remember that statements
inside the function are not executed until the function is called.
<!--l. 2219--><p class="noindent" >A function call is like a detour in the flow of execution. Instead of going to the next statement, the flow
jumps to the body of the function, executes all the statements there, and then comes back to pick up
where it left off.
<!--l. 2224--><p class="noindent" >That sounds simple enough, until you remember that one function can call another. While in
the middle of one function, the program might have to execute the statements in another
function. But while executing that new function, the program might have to execute yet another
function!
<!--l. 2230--><p class="noindent" >Fortunately, Python is good at keeping track of where it is, so each time a function completes, the
program picks up where it left off in the function that called it. When it gets to the end of the program,
it terminates.
<!--l. 2235--><p class="noindent" >What&#8217;s the moral of this sordid tale? When you read a program, you don&#8217;t always want to read from
top to bottom. Sometimes it makes more sense if you follow the flow of execution.
<!--l. 2240--><p class="noindent" >
<a 
 id="x1-6067r9"></a>
<!--l. 2240--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.9</span>   <span 
class="ptmb7t-x-x-144">Parameters and arguments</span>
<a 
 id="Q1-1-54"></a>
<a 
 id="dx1-6068"></a>
<a 
 id="dx1-6069"></a>
<a 
 id="dx1-6070"></a>
<a 
 id="dx1-6071"></a>
<!--l. 2247--><p class="noindent" >Some of the built-in functions we have seen require arguments. For example, when you call <span 
class="pcrr7tn-">math.sin</span>
you pass a number as an argument. Some functions take more than one argument: <span 
class="pcrr7tn-">math.pow </span>takes two,
the base and the exponent.
<!--l. 2252--><p class="noindent" >Inside the function, the arguments are assigned to variables called <span 
class="ptmb7t-">parameters</span>. Here is an example of
a user-defined function that takes an argument:
<a 
 id="dx1-6072"></a>

<div class="verbatim" id="verbatim-106">
def&#x00A0;print_twice(bruce):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;bruce
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;bruce</div>
<!--l. 2263--><p class="nopar" > This function assigns the argument to a parameter named <span 
class="pcrr7tn-">bruce</span>. When the function is called, it prints
the value of the parameter (whatever it is) twice.
<!--l. 2270--><p class="noindent" >This function works with any value that can be printed.

<div class="verbatim" id="verbatim-107">
&#x003E;&#x003E;&#x003E;&#x00A0;print_twice(&#8217;Spam&#8217;)
&#x00A0;<br />Spam
&#x00A0;<br />Spam
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print_twice(17)
&#x00A0;<br />17
&#x00A0;<br />17
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print_twice(math.pi)
&#x00A0;<br />3.14159265359
&#x00A0;<br />3.14159265359</div>
<!--l. 2283--><p class="nopar" > The same rules of composition that apply to built-in functions also apply to user-defined functions, so
we can use any kind of expression as an argument for <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">print_twice</span></span></span>:
<a 
 id="dx1-6073"></a>

<div class="verbatim" id="verbatim-108">
&#x003E;&#x003E;&#x003E;&#x00A0;print_twice(&#8217;Spam&#x00A0;&#8217;&#x22C6;4)
&#x00A0;<br />Spam&#x00A0;Spam&#x00A0;Spam&#x00A0;Spam
&#x00A0;<br />Spam&#x00A0;Spam&#x00A0;Spam&#x00A0;Spam
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print_twice(math.cos(math.pi))
&#x00A0;<br />-1.0
&#x00A0;<br />-1.0</div>
<!--l. 2300--><p class="nopar" > The argument is evaluated before the function is called, so in the examples the expressions
<span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">Spam</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">&#x22C6;4</span></span></span> and <span 
class="pcrr7tn-">math.cos(math.pi) </span>are only evaluated once.
<a 
 id="dx1-6074"></a>
<!--l. 2309--><p class="noindent" >You can also use a variable as an argument:

<div class="verbatim" id="verbatim-109">
&#x003E;&#x003E;&#x003E;&#x00A0;michael&#x00A0;=&#x00A0;&#8217;Eric,&#x00A0;the&#x00A0;half&#x00A0;a&#x00A0;bee.&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print_twice(michael)
&#x00A0;<br />Eric,&#x00A0;the&#x00A0;half&#x00A0;a&#x00A0;bee.
&#x00A0;<br />Eric,&#x00A0;the&#x00A0;half&#x00A0;a&#x00A0;bee.</div>
<!--l. 2317--><p class="nopar" > The name of the variable we pass as an argument (<span 
class="pcrr7tn-">michael</span>) has nothing to do with the name of the
parameter (<span 
class="pcrr7tn-">bruce</span>). It doesn&#8217;t matter what the value was called back home (in the caller); here in
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">print_twice</span></span></span>, we call everybody <span 
class="pcrr7tn-">bruce</span>.
<!--l. 2325--><p class="noindent" >
<a 
 id="x1-6075r10"></a>
<!--l. 2325--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.10</span>   <span 
class="ptmb7t-x-x-144">Fruitful functions and void functions</span>
<a 
 id="Q1-1-55"></a>
<a 
 id="dx1-6076"></a>
<a 
 id="dx1-6077"></a>
<a 
 id="dx1-6078"></a>
<a 
 id="dx1-6079"></a>
<!--l. 2332--><p class="noindent" >Some of the functions we are using, such as the math functions, yield results; for lack of a better name,
I call them <span 
class="ptmb7t-">fruitful functions</span>. Other functions, like <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">print_twice</span></span></span>, perform an action but don&#8217;t return a
value. They are called <span 
class="ptmb7t-">void functions</span>.
<!--l. 2338--><p class="noindent" >When you call a fruitful function, you almost always want to do something with the result; for
example, you might assign it to a variable or use it as part of an expression:

<div class="verbatim" id="verbatim-110">
x&#x00A0;=&#x00A0;math.cos(radians)
&#x00A0;<br />golden&#x00A0;=&#x00A0;(math.sqrt(5)&#x00A0;+&#x00A0;1)&#x00A0;/&#x00A0;2</div>
<!--l. 2346--><p class="nopar" > When you call a function in interactive mode, Python displays the result:

<div class="verbatim" id="verbatim-111">
&#x003E;&#x003E;&#x003E;&#x00A0;math.sqrt(5)
&#x00A0;<br />2.2360679774997898</div>
<!--l. 2356--><p class="nopar" > But in a script, if you call a fruitful function and do not store the result of the function in a variable,
the return value vanishes into the mist!

<div class="verbatim" id="verbatim-112">
math.sqrt(5)</div>
<!--l. 2366--><p class="nopar" > This script computes the square root of 5, but since it doesn&#8217;t store the result in a variable or display
the result, it is not very useful.
<a 
 id="dx1-6080"></a>
<a 
 id="dx1-6081"></a>
<!--l. 2375--><p class="noindent" >Void functions might display something on the screen or have some other effect, but they don&#8217;t have
a return value. If you try to assign the result to a variable, you get a special value called
<span 
class="pcrr7tn-">None</span>.
<a 
 id="dx1-6082"></a>
<a 
 id="dx1-6083"></a>

<div class="verbatim" id="verbatim-113">
&#x003E;&#x003E;&#x003E;&#x00A0;result&#x00A0;=&#x00A0;print_twice(&#8217;Bing&#8217;)
&#x00A0;<br />Bing
&#x00A0;<br />Bing
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;result
&#x00A0;<br />None</div>
<!--l. 2390--><p class="nopar" > The value <span 
class="pcrr7tn-">None </span>is not the same as the string <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">None</span><span 
class="pcrr8c-">&#8217;</span></span></span>. It is a special value that has its own
type:

<div class="verbatim" id="verbatim-114">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;type(None)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;NoneType&#8217;&#x003E;</div>
<!--l. 2400--><p class="nopar" > To return a result from a function, we use the <span 
class="pcrr7tn-">return </span>statement in our function. For example, we
could make a very simple function called <span 
class="pcrr7tn-">addtwo </span>that adds two numbers together and return a
result.

<div class="verbatim" id="verbatim-115">
def&#x00A0;addtwo(a,&#x00A0;b):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;added&#x00A0;=&#x00A0;a&#x00A0;+&#x00A0;b
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;added
&#x00A0;<br />
&#x00A0;<br />x&#x00A0;=&#x00A0;addtwo(3,&#x00A0;5)
&#x00A0;<br />print&#x00A0;x</div>
<!--l. 2416--><p class="nopar" > When this script executes, the <span 
class="pcrr7tn-">print </span>statement will print out &#8220;8&#8221; because the <span 
class="pcrr7tn-">addtwo </span>function was
called with 3 and 5 as arguments. Within the function the parameters <span 
class="pcrr7tn-">a </span>and <span 
class="pcrr7tn-">b </span>were 3 and 5 respectively.
The function computed the sum of the two numbers and placed it in the local function
variable named <span 
class="pcrr7tn-">added </span>and used the <span 
class="pcrr7tn-">return </span>statement to send the computed value back to
the calling code as the function result which was assigned to the variable <span 
class="pcrr7tn-">x </span>and printed
out.
<!--l. 2430--><p class="noindent" >
<a 
 id="x1-6084r11"></a>
<!--l. 2430--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.11</span>   <span 
class="ptmb7t-x-x-144">Why functions?</span>
<a 
 id="Q1-1-56"></a>
<a 
 id="dx1-6085"></a>
<!--l. 2433--><p class="noindent" >It may not be clear why it is worth the trouble to divide a program into functions. There are several
reasons:
     <ul class="itemize1">
     <li class="itemize">Creating a new function gives you an opportunity to name a group of statements, which
     makes your program easier to read, understand and debug.
     </li>
     <li class="itemize">Functions can make a program smaller by eliminating repetitive code. Later, if you make
     a change, you only have to make it in one place.
     </li>
     <li class="itemize">Dividing a long program into functions allows you to debug the parts one at a time and
     then assemble them into a working whole.
     </li>
     <li class="itemize">Well-designed functions are often useful for many programs. Once you write and debug
     one, you can reuse it.
     </li></ul>

<!--l. 2454--><p class="noindent" >Throughout the rest of the book, often we will use a function definition to explain a concept. Part of the
skill of creating and using functions is to have a function properly capture an idea such as &#8220;find the
smallest value in a list of values&#8221;. Later we will show you code that finds the smallest in a list of values
and we will present it to you as a function named <span 
class="pcrr7tn-">min </span>which takes a list of values as its argument and
returns the smallest value in the list.
<!--l. 2463--><p class="noindent" >
<a 
 id="x1-6086r12"></a>
<!--l. 2463--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.12</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-57"></a>
<a 
 id="dx1-6087"></a>
<!--l. 2467--><p class="noindent" >If you are using a text editor to write your scripts, you might run into problems with spaces and tabs.
The best way to avoid these problems is to use spaces exclusively (no tabs). Most text editors that
know about Python do this by default, but some don&#8217;t.
<a 
 id="dx1-6088"></a>
<!--l. 2475--><p class="noindent" >Tabs and spaces are usually invisible, which makes them hard to debug, so try to find an editor that
manages indentation for you.
<!--l. 2479--><p class="noindent" >Also, don&#8217;t forget to save your program before you run it. Some development environments do this
automatically, but some don&#8217;t. In that case the program you are looking at in the text editor is not the
same as the program you are running.
<!--l. 2484--><p class="noindent" >Debugging can take a long time if you keep running the same, incorrect, program over and
over!
<!--l. 2487--><p class="noindent" >Make sure that the code you are looking at is the code you are running. If you&#8217;re not sure, put
something like <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">print</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">hello</span><span 
class="pcrr8c-">&#8217;</span></span></span> at the beginning of the program and run it again. If you don&#8217;t see
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">hello</span></span></span>, you&#8217;re not running the right program!
<!--l. 2495--><p class="noindent" >
<a 
 id="x1-6089r13"></a>
<!--l. 2495--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.13</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-58"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">algorithm:</span> </dt><dd 
class="description">A general process for solving a category of problems. <a 
 id="dx1-6090"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">argument:</span> </dt><dd 
class="description">A value provided to a function when the function is called. This value is assigned
     to the corresponding parameter in the function. <a 
 id="dx1-6091"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">body:</span> </dt><dd 
class="description">The sequence of statements inside a function definition. <a 
 id="dx1-6092"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">composition:</span> </dt><dd 
class="description">Using an expression as part of a larger expression, or a statement as part of a
     larger statement. <a 
 id="dx1-6093"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">deterministic:</span> </dt><dd 
class="description">Pertaining to a program that does the same thing each time it runs, given the
     same inputs. <a 
 id="dx1-6094"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">dot notation:</span> </dt><dd 
class="description">The syntax for calling a function in another module by specifying the module
     name followed by a dot (period) and the function name. <a 
 id="dx1-6095"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">flow of execution:</span> </dt><dd 
class="description">The order in which statements are executed during a program run. <a 
 id="dx1-6096"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">fruitful function:</span> </dt><dd 
class="description">A function that returns a value. <a 
 id="dx1-6097"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">function:</span> </dt><dd 
class="description">A  named  sequence  of  statements  that  performs  some  useful  operation.  Functions
     may or may not take arguments and may or may not produce a result. <a 
 id="dx1-6098"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">function call:</span> </dt><dd 
class="description">A statement that executes a function. It consists of the function name followed
     by an argument list. <a 
 id="dx1-6099"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">function definition:</span> </dt><dd 
class="description">A statement that creates a new function, specifying its name, parameters,
     and the statements it executes. <a 
 id="dx1-6100"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">function object:</span> </dt><dd 
class="description">A value created by a function definition. The name of the function is a variable
     that refers to a function object. <a 
 id="dx1-6101"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">header:</span> </dt><dd 
class="description">The first line of a function definition. <a 
 id="dx1-6102"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">import statement:</span> </dt><dd 
class="description">A statement that reads a module file and creates a module object. <a 
 id="dx1-6103"></a><a 
 id="dx1-6104"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">module object:</span> </dt><dd 
class="description">A value created by an <span 
class="pcrr7tn-">import </span>statement that provides access to the data and
     code defined in a module. <a 
 id="dx1-6105"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">parameter:</span> </dt><dd 
class="description">A name used inside a function to refer to the value passed as an argument. <a 
 id="dx1-6106"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">pseudorandom:</span> </dt><dd 
class="description">Pertaining  to  a  sequence  of  numbers  that  appear  to  be  random,  but  are
     generated by a deterministic program. <a 
 id="dx1-6107"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">return value:</span> </dt><dd 
class="description">The result of a function. If a function call is used as an expression, the return
     value is the value of the expression. <a 
 id="dx1-6108"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">void function:</span> </dt><dd 
class="description">A function that doesn&#8217;t return a value. <a 
 id="dx1-6109"></a>
     </dd></dl>
<!--l. 2580--><p class="noindent" >
<a 
 id="x1-6110r14"></a>
<!--l. 2580--><p class="noindent" ><span 
class="ptmb7t-x-x-144">4.14</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-59"></a>
<div class="newtheorem">
<!--l. 2582--><p class="noindent" ><span class="head">
<a 
 id="x1-6111r4"></a>
<span 
class="ptmb7t-">Exercise 4.4</span>  </span>What is the purpose of the &#8221;def&#8221; keyword in Python?
<!--l. 2585--><p class="noindent" >a) It is slang that means &#8221;the following code is really cool&#8221;<br 
class="newline" />b) It indicates the start of a function<br 
class="newline" />c) It indicates that the following indented section of code is to be stored for later<br 
class="newline" />d) b and c are both true<br 
class="newline" />e) None of the above
</div>
<div class="newtheorem">
<!--l. 2592--><p class="noindent" ><span class="head">
<a 
 id="x1-6112r5"></a>
<span 
class="ptmb7t-">Exercise 4.5</span>  </span>What will the following Python program print out?

<div class="verbatim" id="verbatim-116">
def&#x00A0;fred():
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;"Zap"
&#x00A0;<br />
&#x00A0;<br />def&#x00A0;jane():
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;"ABC"
&#x00A0;<br />
&#x00A0;<br />jane()
&#x00A0;<br />fred()
&#x00A0;<br />jane()</div>
<!--l. 2606--><p class="nopar" > a) Zap ABC jane fred jane<br 
class="newline" />b) Zap ABC Zap<br 
class="newline" />c) ABC Zap jane<br 
class="newline" />d) ABC Zap ABC<br 
class="newline" />e) Zap Zap Zap
</div>
<div class="newtheorem">
<!--l. 2616--><p class="noindent" ><span class="head">
<a 
 id="x1-6113r6"></a>
<span 
class="ptmb7t-">Exercise 4.6</span>  </span>Rewrite  your  pay  computation  with  time-and-a-half  for  overtime  and  create  a
function called <span 
class="pcrr7tn-">computepay </span>which takes two parameters (<span 
class="pcrr7tn-">hours </span>and <span 
class="pcrr7tn-">rate</span>).

<div class="verbatim" id="verbatim-117">
Enter&#x00A0;Hours:&#x00A0;45
&#x00A0;<br />Enter&#x00A0;Rate:&#x00A0;10
&#x00A0;<br />Pay:&#x00A0;475.0</div>
<!--l. 2625--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 2628--><p class="noindent" ><span class="head">
<a 
 id="x1-6114r7"></a>
<span 
class="ptmb7t-">Exercise 4.7</span>  </span>Rewrite  the  grade  program  from  the  previous  chapter  using  a  function  called
<span 
class="pcrr7tn-">computegrade </span>that takes a score as its parameter and returns a grade as a string.

<div class="verbatim" id="verbatim-118">
Score&#x00A0;&#x00A0;&#x00A0;Grade
&#x00A0;<br />&#x003E;&#x00A0;0.9&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;A
&#x00A0;<br />&#x003E;&#x00A0;0.8&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;B
&#x00A0;<br />&#x003E;&#x00A0;0.7&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;C
&#x00A0;<br />&#x003E;&#x00A0;0.6&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;D
&#x00A0;<br />&#x003C;=&#x00A0;0.6&#x00A0;&#x00A0;&#x00A0;&#x00A0;F
&#x00A0;<br />
&#x00A0;<br />Program&#x00A0;Execution:
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;0.95
&#x00A0;<br />A
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;perfect
&#x00A0;<br />Bad&#x00A0;score
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;10.0
&#x00A0;<br />Bad&#x00A0;score
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;0.75
&#x00A0;<br />C
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;score:&#x00A0;0.5
&#x00A0;<br />F</div>
<!--l. 2657--><p class="nopar" >
<!--l. 2659--><p class="noindent" >Run the program repeatedly to test the various different values for input.
</div>

<!--l. 2666--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;5</span><br /><a 
 id="x1-70005"></a>Iteration</h2> <a 
 id="dx1-7001"></a>
<a 
 id="x1-7002r1"></a>
<span 
class="ptmb7t-x-x-144">5.1</span>   <span 
class="ptmb7t-x-x-144">Updating variables</span>
<a 
 id="Q1-1-61"></a>
<a 
 id="dx1-7003"></a>
<a 
 id="dx1-7004"></a>
<!--l. 2676--><p class="noindent" >A common pattern in assignment statements is an assignment statement that updates a variable - where
the new value of the variable depends on the old.

<div class="verbatim" id="verbatim-119">
x&#x00A0;=&#x00A0;x+1</div>
<!--l. 2683--><p class="nopar" > This means &#8220;get the current value of <span 
class="pcrr7tn-">x</span>, add one, and then update <span 
class="pcrr7tn-">x </span>with the new value.&#8221;
<!--l. 2689--><p class="noindent" >If you try to update a variable that doesn&#8217;t exist, you get an error, because Python evaluates the right
side before it assigns a value to <span 
class="pcrr7tn-">x</span>:

<div class="verbatim" id="verbatim-120">
&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;x+1
&#x00A0;<br />NameError:&#x00A0;name&#x00A0;&#8217;x&#8217;&#x00A0;is&#x00A0;not&#x00A0;defined</div>
<!--l. 2697--><p class="nopar" > Before you can update a variable, you have to <span 
class="ptmb7t-">initialize </span>it, usually with a simple assignment:
<a 
 id="dx1-7005"></a>

<div class="verbatim" id="verbatim-121">
&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;x+1</div>
<!--l. 2709--><p class="nopar" > Updating a variable by adding 1 is called an <span 
class="ptmb7t-">increment</span>; subtracting 1 is called a <span 
class="ptmb7t-">decrement</span>.
<a 
 id="dx1-7006"></a>
<a 
 id="dx1-7007"></a>
<!--l. 2718--><p class="noindent" >
<a 
 id="x1-7008r2"></a>
<!--l. 2718--><p class="noindent" ><span 
class="ptmb7t-x-x-144">5.2</span>   <span 
class="ptmb7t-x-x-144">The </span><span 
class="pcrr7tn-x-x-144">while </span><span 
class="ptmb7t-x-x-144">statement</span>
<a 
 id="Q1-1-62"></a>
<a 
 id="dx1-7009"></a>
<a 
 id="dx1-7010"></a>
<a 
 id="dx1-7011"></a>
<a 
 id="dx1-7012"></a>
<!--l. 2725--><p class="noindent" >Computers are often used to automate repetitive tasks. Repeating identical or similar tasks without
making errors is something that computers do well and people do poorly. Because iteration is so
common, Python provides several language features to make it easier.
<!--l. 2731--><p class="noindent" >One form of iteration in Python is the <span 
class="pcrr7tn-">while </span>statement. Here is a simple program that counts down
from five and then says &#8220;Blastoff!&#8221;.

<div class="verbatim" id="verbatim-122">
n&#x00A0;=&#x00A0;5
&#x00A0;<br />while&#x00A0;n&#x00A0;&#x003E;&#x00A0;0:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;n
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;n&#x00A0;=&#x00A0;n-1
&#x00A0;<br />print&#x00A0;&#8217;Blastoff!&#8217;</div>
<!--l. 2741--><p class="nopar" > You can almost read the <span 
class="pcrr7tn-">while </span>statement as if it were English. It means, &#8220;While <span 
class="pcrr7tn-">n </span>is greater than 0,
display the value of <span 
class="pcrr7tn-">n </span>and then reduce the value of <span 
class="pcrr7tn-">n </span>by 1. When you get to 0, exit the while statement
and display the word <span 
class="pcrr7tn-">Blastoff!</span>&#8221;
<a 
 id="dx1-7013"></a>
<!--l. 2752--><p class="noindent" >More formally, here is the flow of execution for a <span 
class="pcrr7tn-">while </span>statement:
<!--l. 2754--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-7015x1">Evaluate the condition, yielding <span 
class="pcrr7tn-">True </span>or <span 
class="pcrr7tn-">False</span>.
     </li>
     <li 
  class="enumerate" id="x1-7017x2">If  the  condition  is  false,  exit  the  <span 
class="pcrr7tn-">while </span>statement  and  continue  execution  at  the  next
     statement.
     </li>
     <li 
  class="enumerate" id="x1-7019x3">If the condition is true, execute the body and then go back to step 1.
     </li></ol>
<!--l. 2766--><p class="noindent" >This type of flow is called a <span 
class="ptmb7t-">loop </span>because the third step loops back around to the top. Each time
we execute the body of the loop, we call it an <span 
class="ptmb7t-">iteration</span>. For the above loop, we would
say, &#8220;It had five iterations&#8221; which means that the body of of the loop was executed five
times.
<a 
 id="dx1-7020"></a>
<a 
 id="dx1-7021"></a>
<a 
 id="dx1-7022"></a>
<!--l. 2776--><p class="noindent" >The body of the loop should change the value of one or more variables so that eventually the condition
becomes false and the loop terminates. We call the variable that changes each time the loop executes
and controls when the loop finishes the <span 
class="ptmb7t-">iteration variable</span>. If there is no iteration variable, the loop
will repeat forever, resulting in an <span 
class="ptmb7t-">infinite loop</span>.
<!--l. 2785--><p class="noindent" >

<a 
 id="x1-7023r3"></a>
<!--l. 2785--><p class="noindent" ><span 
class="ptmb7t-x-x-144">5.3</span>   <span 
class="ptmb7t-x-x-144">Infinite loops</span>
<a 
 id="Q1-1-63"></a>
<!--l. 2787--><p class="noindent" >An endless source of amusement for programmers is the observation that the directions on shampoo,
&#8220;Lather, rinse, repeat,&#8221; are an infinite loop because there is no <span 
class="ptmb7t-">iteration variable </span>telling you how many
times to execute the loop.
<a 
 id="dx1-7024"></a>
<a 
 id="dx1-7025"></a>
<!--l. 2796--><p class="noindent" >In the case of <span 
class="pcrr7tn-">countdown</span>, we can prove that the loop terminates because we know that the value of <span 
class="pcrr7tn-">n </span>is
finite, and we can see that the value of <span 
class="pcrr7tn-">n </span>gets smaller each time through the loop, so eventually we have
to get to 0. Other times a loop is obviously infinite because it has no iteration variable at
all.
<!--l. 2802--><p class="noindent" >
<a 
 id="x1-7026r4"></a>
<!--l. 2802--><p class="noindent" ><span 
class="ptmb7t-x-x-144">5.4</span>   <span 
class="ptmb7t-x-x-144">&#8220;Infinite loops&#8221; and </span><span 
class="pcrr7tn-x-x-144">break</span>
<a 
 id="Q1-1-64"></a>
<a 
 id="dx1-7027"></a>
<a 
 id="dx1-7028"></a>
<!--l. 2806--><p class="noindent" >Sometimes you don&#8217;t know it&#8217;s time to end a loop until you get half way through the body. In that case
you can write an infinite loop on purpose and then use the <span 
class="pcrr7tn-">break </span>statement to jump out of the
loop.
<!--l. 2810--><p class="noindent" >This loop is obviously an <span 
class="ptmb7t-">infinite loop </span>because the logical expression on the <span 
class="pcrr7tn-">while </span>statement is simply
the logical constant <span 
class="pcrr7tn-">True</span>:

<div class="verbatim" id="verbatim-123">
n&#x00A0;=&#x00A0;10
&#x00A0;<br />while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;n,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;n&#x00A0;=&#x00A0;n&#x00A0;-&#x00A0;1
&#x00A0;<br />print&#x00A0;&#8217;Done!&#8217;</div>
<!--l. 2820--><p class="nopar" > If you make the mistake and run this code, you will learn quickly how to stop a runaway Python
process on your system or find where the power-off button is on your computer. This program
will run forever or until your battery runs out because the logical expression at the top
of the loop is always true by virtue of the fact that the expression is the constant value
<span 
class="pcrr7tn-">True</span>.
<!--l. 2832--><p class="noindent" >While this is a dysfunctional infinite loop, we can still use this pattern to build useful loops as long as
we carefully add code to the body of the loop to explicitly exit the loop using <span 
class="pcrr7tn-">break </span>when we have
reached the exit condition.
<!--l. 2838--><p class="noindent" >For example, suppose you want to take input from the user until they type <span 
class="pcrr7tn-">done</span>. You could
write:

<div class="verbatim" id="verbatim-124">
while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;raw_input(&#8217;&#x003E;&#x00A0;&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line&#x00A0;==&#x00A0;&#8217;done&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line
&#x00A0;<br />print&#x00A0;&#8217;Done!&#8217;</div>
<!--l. 2849--><p class="nopar" > The loop condition is <span 
class="pcrr7tn-">True</span>, which is always true, so the loop runs repeatedly until it hits the break
statement.
<!--l. 2855--><p class="noindent" >Each time through, it prompts the user with an angle bracket. If the user types <span 
class="pcrr7tn-">done</span>, the <span 
class="pcrr7tn-">break</span>
statement exits the loop. Otherwise the program echoes whatever the user types and goes back to the
top of the loop. Here&#8217;s a sample run:

<div class="verbatim" id="verbatim-125">
&#x003E;&#x00A0;hello&#x00A0;there
&#x00A0;<br />hello&#x00A0;there
&#x00A0;<br />&#x003E;&#x00A0;finished
&#x00A0;<br />finished
&#x00A0;<br />&#x003E;&#x00A0;done
&#x00A0;<br />Done!</div>
<!--l. 2868--><p class="nopar" > This way of writing <span 
class="pcrr7tn-">while </span>loops is common because you can check the condition anywhere in the
loop (not just at the top) and you can express the stop condition affirmatively (&#8220;stop when this
happens&#8221;) rather than negatively (&#8220;keep going until that happens.&#8221;).
<!--l. 2877--><p class="noindent" >
<a 
 id="x1-7029r5"></a>
<!--l. 2877--><p class="noindent" ><span 
class="ptmb7t-x-x-144">5.5</span>   <span 
class="ptmb7t-x-x-144">Finishing iterations with </span><span 
class="pcrr7tn-x-x-144">continue</span>
<a 
 id="Q1-1-65"></a>
<a 
 id="dx1-7030"></a>
<a 
 id="dx1-7031"></a>
<!--l. 2881--><p class="noindent" >Sometimes you are in an iteration of a loop and want to finish the current iteration and immediately
jump to the next iteration. In that case you can use the <span 
class="pcrr7tn-">continue </span>statement to skip to the next iteration
without finishing the body of the loop for the current iteration.
<!--l. 2887--><p class="noindent" >Here is an example of a loop that copies its input until the user types &#8220;done&#8221;, but treats lines that start
with the hash character as lines not to be printed (kind of like Python comments).

<div class="verbatim" id="verbatim-126">
while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;raw_input(&#8217;&#x003E;&#x00A0;&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line[0]&#x00A0;==&#x00A0;&#8217;#&#8217;&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line&#x00A0;==&#x00A0;&#8217;done&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line
&#x00A0;<br />print&#x00A0;&#8217;Done!&#8217;</div>
<!--l. 2901--><p class="nopar" > Here is a sample run of this new program with <span 
class="pcrr7tn-">continue </span>added.

<div class="verbatim" id="verbatim-127">
&#x003E;&#x00A0;hello&#x00A0;there
&#x00A0;<br />hello&#x00A0;there
&#x00A0;<br />&#x003E;&#x00A0;#&#x00A0;don&#8217;t&#x00A0;print&#x00A0;this
&#x00A0;<br />&#x003E;&#x00A0;print&#x00A0;this!
&#x00A0;<br />print&#x00A0;this!
&#x00A0;<br />&#x003E;&#x00A0;done
&#x00A0;<br />Done!</div>
<!--l. 2915--><p class="nopar" > All the lines are printed except the one that starts with the hash sign because when the <span 
class="pcrr7tn-">continue </span>is
executed, it ends the current iteration and jumps back to the <span 
class="pcrr7tn-">while </span>statement to start the next iteration,
thus skipping the <span 
class="pcrr7tn-">print </span>statement.
<!--l. 2924--><p class="noindent" >
<a 
 id="x1-7032r6"></a>
<!--l. 2924--><p class="noindent" ><span 
class="ptmb7t-x-x-144">5.6</span>   <span 
class="ptmb7t-x-x-144">Definite loops using </span><span 
class="pcrr7tn-x-x-144">for</span>
<a 
 id="Q1-1-66"></a>
<a 
 id="dx1-7033"></a>
<a 
 id="dx1-7034"></a>
<!--l. 2928--><p class="noindent" >Sometimes we want to loop through a <span 
class="ptmb7t-">set </span>of things such as a list of words, the lines in a file or a list of
numbers. When we have a list of things to loop through, we can construct a <span 
class="ptmri7t-">definite </span>loop using a <span 
class="pcrr7tn-">for</span>
statement. We call the <span 
class="pcrr7tn-">while </span>statement an <span 
class="ptmri7t-">indefinite </span>loop because it simply loops until some condition
becomes <span 
class="pcrr7tn-">False </span>whereas the <span 
class="pcrr7tn-">for </span>loop is looping through a known set of items so it runs through as
many iterations as there are items in the set.
<!--l. 2938--><p class="noindent" >The syntax of a <span 
class="pcrr7tn-">for </span>loop is similar to the <span 
class="pcrr7tn-">while </span>loop in that there is a <span 
class="pcrr7tn-">for </span>statement and a loop
body:

<div class="verbatim" id="verbatim-128">
friends&#x00A0;=&#x00A0;[&#8217;Joseph&#8217;,&#x00A0;&#8217;Glenn&#8217;,&#x00A0;&#8217;Sally&#8217;]
&#x00A0;<br />for&#x00A0;friend&#x00A0;in&#x00A0;friends:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Happy&#x00A0;New&#x00A0;Year:&#8217;,&#x00A0;friend
&#x00A0;<br />print&#x00A0;&#8217;Done!&#8217;</div>
<!--l. 2947--><p class="nopar" > In Python terms, the variable <span 
class="pcrr7tn-">friends </span>is a list<span class="footnote-mark"><a 
href="cfbook8.html#fn1x6"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-7035f1"></a>
of three strings and the <span 
class="pcrr7tn-">for </span>loop goes through the list and executes the body once for each of the three
strings in the list resulting in this output:

<div class="verbatim" id="verbatim-129">
Happy&#x00A0;New&#x00A0;Year:&#x00A0;Joseph
&#x00A0;<br />Happy&#x00A0;New&#x00A0;Year:&#x00A0;Glenn
&#x00A0;<br />Happy&#x00A0;New&#x00A0;Year:&#x00A0;Sally
&#x00A0;<br />Done!</div>
<!--l. 2963--><p class="nopar" >
<!--l. 2967--><p class="noindent" >Translating this <span 
class="pcrr7tn-">for </span>loop to English is not as direct as the <span 
class="pcrr7tn-">while</span>, but if you think of friends as a <span 
class="ptmb7t-">set</span>, it
goes like this: &#8220;Run the statements in the body of the for loop once for each friend <span 
class="ptmri7t-">in </span>the set named
friends.&#8221;.
<!--l. 2972--><p class="noindent" >Looking at the <span 
class="pcrr7tn-">for </span>loop, <span 
class="ptmb7t-">for </span>and <span 
class="ptmb7t-">in </span>are reserved Python keywords, and <span 
class="pcrr7tn-">friend </span>and <span 
class="pcrr7tn-">friends </span>are
variables.
<!--l. 2975--><p class="noindent" ><span 
class="ptmb7t-">for  </span><span 
class="pcrr7tn-">friend </span><span 
class="ptmb7t-">in  </span><span 
class="pcrr7tn-">friends</span><span 
class="ptmb7t-">:</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span></span></span><span 
class="ptmb7t-">print  </span><span 
class="pcrr7tn-">'Happy New Year', friend</span>
<!--l. 2978--><p class="noindent" >In particular, <span 
class="pcrr7tn-">friend </span>is the <span 
class="ptmb7t-">iteration variable </span>for the for loop. The variable <span 
class="pcrr7tn-">friend </span>changes for each
iteration of the loop and controls when the <span 
class="pcrr7tn-">for </span>loop completes. The <span 
class="ptmb7t-">iteration variable </span>steps
successively through the three strings stored in the <span 
class="pcrr7tn-">friends </span>variable.
<a 
 id="x1-7036r7"></a>
<!--l. 2985--><p class="noindent" ><span 
class="ptmb7t-x-x-144">5.7</span>   <span 
class="ptmb7t-x-x-144">Loop patterns</span>
<a 
 id="Q1-1-67"></a>
<!--l. 2987--><p class="noindent" >Often we use a for or while loop to go through a list of items or the contents of a file and we are
looking for something such as the largest or smallest value of the data we scan through.
<!--l. 2991--><p class="noindent" >These loops are generally constructed by:
     <ul class="itemize1">
     <li class="itemize">Initializing one or more variables before the loop starts.
     </li>
     <li class="itemize">Performing  some  computation  on  each  item  in  the  loop  body,  possibly  changing  the
     variables in the body of the loop.
     </li>
     <li class="itemize">Looking at the resulting variables when the loop completes.
     </li></ul>

<!--l. 3004--><p class="noindent" >We will use a list of numbers to demonstrate the concepts and construction of these loop
patterns.
<!--l. 3007--><p class="noindent" >
<a 
 id="x1-7037r1"></a>
<!--l. 3007--><p class="noindent" ><span 
class="ptmb7t-x-x-120">5.7.1</span>  <span 
class="ptmb7t-x-x-120">Counting and summing loops</span>
<a 
 id="Q1-1-68"></a>
<!--l. 3009--><p class="noindent" >For example, to count the number of items in a list, we would write the following <span 
class="pcrr7tn-">for</span>
loop:

<div class="verbatim" id="verbatim-130">
count&#x00A0;=&#x00A0;0
&#x00A0;<br />for&#x00A0;itervar&#x00A0;in&#x00A0;[3,&#x00A0;41,&#x00A0;12,&#x00A0;9,&#x00A0;74,&#x00A0;15]:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;&#8217;Count:&#x00A0;&#8217;,&#x00A0;count</div>
<!--l. 3018--><p class="nopar" > We set the variable <span 
class="pcrr7tn-">count </span>to zero before the loop starts, then we write a <span 
class="pcrr7tn-">for </span>loop to run through the
list of numbers. Our <span 
class="ptmb7t-">iteration </span>variable is named <span 
class="pcrr7tn-">itervar </span>and while we do not use <span 
class="pcrr7tn-">itervar </span>in the
loop, it does control the loop and cause the loop body to be executed once for each of the values in the
list.
<!--l. 3027--><p class="noindent" >In the body of the loop, we add one to the current value of <span 
class="pcrr7tn-">count </span>for each of the values in the list.
While the loop is executing, the value of <span 
class="pcrr7tn-">count </span>is the number of values we have seen &#8220;so
far&#8221;.
<!--l. 3031--><p class="noindent" >Once the loop completes, the value of <span 
class="pcrr7tn-">count </span>is the total number of items. The total number &#8220;falls in
our lap&#8221; at the end of the loop. We construct the loop so that we have what we want when the loop
finishes.
<!--l. 3036--><p class="noindent" >Another similar loop that computes the total of a set of numbers is as follows:

<div class="verbatim" id="verbatim-131">
total&#x00A0;=&#x00A0;0
&#x00A0;<br />for&#x00A0;itervar&#x00A0;in&#x00A0;[3,&#x00A0;41,&#x00A0;12,&#x00A0;9,&#x00A0;74,&#x00A0;15]:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;total&#x00A0;=&#x00A0;total&#x00A0;+&#x00A0;itervar
&#x00A0;<br />print&#x00A0;&#8217;Total:&#x00A0;&#8217;,&#x00A0;total</div>
<!--l. 3045--><p class="nopar" > In this loop we <span 
class="ptmri7t-">do </span>use the <span 
class="ptmb7t-">iteration variable</span>. Instead of simply adding one to the <span 
class="pcrr7tn-">count </span>as in the
previous loop, we add the actual number (3, 41, 12, etc.) to the running total during each loop iteration.
If you think about the variable <span 
class="pcrr7tn-">total</span>, it contains the &#8220;running total of the values so far&#8221;. So before the
loop starts <span 
class="pcrr7tn-">total </span>is zero because we have not yet seen any values, during the loop <span 
class="pcrr7tn-">total </span>is the
running total, and at the end of the loop <span 
class="pcrr7tn-">total </span>is the overall total of all the values in the
list.
<!--l. 3059--><p class="noindent" >As the loop executes, <span 
class="pcrr7tn-">total </span>accumulates the sum of the elements; a variable used this way is
sometimes called an <span 
class="ptmb7t-">accumulator</span>. <a 
 id="dx1-7038"></a>
<!--l. 3064--><p class="noindent" >Neither the counting loop nor the summing loop are particularly useful in practice because there are
built-in functions <span 
class="pcrr7tn-">len() </span>and <span 
class="pcrr7tn-">sum() </span>that compute the number of items in a list and the total of the items
in the list respectively.
<!--l. 3070--><p class="noindent" >
<a 
 id="x1-7039r2"></a>
<!--l. 3070--><p class="noindent" ><span 
class="ptmb7t-x-x-120">5.7.2</span>  <span 
class="ptmb7t-x-x-120">Maximum and minimum loops</span>
<a 
 id="Q1-1-69"></a>
<a 
 id="dx1-7040"></a>
<a 
 id="dx1-7041"></a>
<!--l. 3075--><p class="noindent" >To find the largest value in a list or sequence, we construct the following loop:
<a 
 id="dx1-7042"></a>
<a 
 id="dx1-7043"></a>

<div class="verbatim" id="verbatim-132">
largest&#x00A0;=&#x00A0;None
&#x00A0;<br />print&#x00A0;&#8217;Before:&#8217;,&#x00A0;largest
&#x00A0;<br />for&#x00A0;itervar&#x00A0;in&#x00A0;[3,&#x00A0;41,&#x00A0;12,&#x00A0;9,&#x00A0;74,&#x00A0;15]:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;largest&#x00A0;is&#x00A0;None&#x00A0;or&#x00A0;itervar&#x00A0;&#x003E;&#x00A0;largest&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;largest&#x00A0;=&#x00A0;itervar
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Loop:&#8217;,&#x00A0;itervar,&#x00A0;largest
&#x00A0;<br />print&#x00A0;&#8217;Largest:&#8217;,&#x00A0;largest</div>
<!--l. 3089--><p class="nopar" > When the program executes, the output is as follows:

<div class="verbatim" id="verbatim-133">
Before:&#x00A0;None
&#x00A0;<br />Loop:&#x00A0;3&#x00A0;3
&#x00A0;<br />Loop:&#x00A0;41&#x00A0;41
&#x00A0;<br />Loop:&#x00A0;12&#x00A0;41
&#x00A0;<br />Loop:&#x00A0;9&#x00A0;41
&#x00A0;<br />Loop:&#x00A0;74&#x00A0;74
&#x00A0;<br />Loop:&#x00A0;15&#x00A0;74
&#x00A0;<br />Largest:&#x00A0;74</div>
<!--l. 3104--><p class="nopar" > The variable <span 
class="pcrr7tn-">largest </span>is best thought of as the &#8220;largest value we have seen so far&#8221;. Before the loop, we
set <span 
class="pcrr7tn-">largest </span>to the constant <span 
class="pcrr7tn-">None</span>. <span 
class="pcrr7tn-">None </span>is a special constant value which we can store in a variable to
mark the variable as &#8220;empty&#8221;.
<!--l. 3114--><p class="noindent" >Before the loop starts, the largest value we have seen so far is <span 
class="pcrr7tn-">None </span>since we have not yet seen any
values. While the loop is executing, if <span 
class="pcrr7tn-">largest </span>is <span 
class="pcrr7tn-">None </span>then we take the first value we see as the
largest so far. You can see in the first iteration when the value of <span 
class="pcrr7tn-">itervar </span>is 3, since <span 
class="pcrr7tn-">largest </span>is <span 
class="pcrr7tn-">None</span>,
we immediately set <span 
class="pcrr7tn-">largest </span>to be 3.
<!--l. 3122--><p class="noindent" >After the first iteration, <span 
class="pcrr7tn-">largest </span>is no longer <span 
class="pcrr7tn-">None</span>, so the second part of the compound logical
expression that checks <span 
class="pcrr7tn-">itervar &#x003E; largest </span>triggers only when we see a value that is larger
than the &#8220;largest so far&#8221;. When we see a new &#8220;even larger&#8221; value we take that new value
for <span 
class="pcrr7tn-">largest</span>. You can see in the program output that <span 
class="pcrr7tn-">largest </span>progresses from 3 to 41 to
74.
<!--l. 3129--><p class="noindent" >At the end of the loop, we have scanned all of the values and the variable <span 
class="pcrr7tn-">largest </span>now does contain
the largest value in the list.
<!--l. 3133--><p class="noindent" >To compute the smallest number, the code is very similar with one small change:

<div class="verbatim" id="verbatim-134">
smallest&#x00A0;=&#x00A0;None
&#x00A0;<br />print&#x00A0;&#8217;Before:&#8217;,&#x00A0;smallest
&#x00A0;<br />for&#x00A0;itervar&#x00A0;in&#x00A0;[3,&#x00A0;41,&#x00A0;12,&#x00A0;9,&#x00A0;74,&#x00A0;15]:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;smallest&#x00A0;is&#x00A0;None&#x00A0;or&#x00A0;itervar&#x00A0;&#x003C;&#x00A0;smallest:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;smallest&#x00A0;=&#x00A0;itervar
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Loop:&#8217;,&#x00A0;itervar,&#x00A0;smallest
&#x00A0;<br />print&#x00A0;&#8217;Smallest:&#8217;,&#x00A0;smallest</div>
<!--l. 3145--><p class="nopar" > Again, <span 
class="pcrr7tn-">smallest </span>is the &#8220;smallest so far&#8221; before, during, and after the loop executes. When the loop
has completed, <span 
class="pcrr7tn-">smallest </span>contains the minimum value in the list.
<!--l. 3152--><p class="noindent" >Again as in counting and summing, the built-in functions <span 
class="pcrr7tn-">max() </span>and <span 
class="pcrr7tn-">min() </span>make writing these exact
loops unnecessary.
<!--l. 3156--><p class="noindent" >The following is a simple version of the Python built-in <span 
class="pcrr7tn-">min() </span>function:

<div class="verbatim" id="verbatim-135">
def&#x00A0;min(values):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;smallest&#x00A0;=&#x00A0;None
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;value&#x00A0;in&#x00A0;values:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;smallest&#x00A0;is&#x00A0;None&#x00A0;or&#x00A0;value&#x00A0;&#x003C;&#x00A0;smallest:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;smallest&#x00A0;=&#x00A0;value
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;smallest</div>
<!--l. 3167--><p class="nopar" > In the function version of the smallest code, we removed all of the <span 
class="pcrr7tn-">print </span>statements so as to be
equivalent to the <span 
class="pcrr7tn-">min </span>function which is already built-in to Python.
<!--l. 3174--><p class="noindent" >
<a 
 id="x1-7044r8"></a>
<!--l. 3174--><p class="noindent" ><span 
class="ptmb7t-x-x-144">5.8</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-70"></a>
<!--l. 3176--><p class="noindent" >As you start writing bigger programs, you might find yourself spending more time debugging. More
code means more chances to make an error and more places for bugs to hide.
<a 
 id="dx1-7045"></a>
<a 
 id="dx1-7046"></a>
<!--l. 3183--><p class="noindent" >One way to cut your debugging time is &#8220;debugging by bisection.&#8221; For example, if there are 100 lines in
your program and you check them one at a time, it would take 100 steps.
<!--l. 3187--><p class="noindent" >Instead, try to break the problem in half. Look at the middle of the program, or near it, for an
intermediate value you can check. Add a <span 
class="pcrr7tn-">print </span>statement (or something else that has a verifiable
effect) and run the program.
<!--l. 3192--><p class="noindent" >If the mid-point check is incorrect, the problem must be in the first half of the program. If it is correct,
the problem is in the second half.
<!--l. 3196--><p class="noindent" >Every time you perform a check like this, you halve the number of lines you have to search. After six
steps (which is much less than 100), you would be down to one or two lines of code, at least in
theory.
<!--l. 3201--><p class="noindent" >In practice it is not always clear what the &#8220;middle of the program&#8221; is and not always possible to check
it. It doesn&#8217;t make sense to count lines and find the exact midpoint. Instead, think about places in the
program where there might be errors and places where it is easy to put a check. Then choose a
spot where you think the chances are about the same that the bug is before or after the
check.
<!--l. 3210--><p class="noindent" >

<a 
 id="x1-7047r9"></a>
<!--l. 3210--><p class="noindent" ><span 
class="ptmb7t-x-x-144">5.9</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-71"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">accumulator:</span> </dt><dd 
class="description">A variable used in a loop to add up or accumulate a result. <a 
 id="dx1-7048"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">counter:</span> </dt><dd 
class="description">A variable used in a loop to count the number of times something happened.  We
     initialize a counter to zero and then increment the counter each time we want to &#8220;count&#8221;
     something. <a 
 id="dx1-7049"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">decrement:</span> </dt><dd 
class="description">An update that decreases the value of a variable. <a 
 id="dx1-7050"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">initialize:</span> </dt><dd 
class="description">An assignment that gives an initial value to a variable that will be updated.
     </dd><dt class="description">
<span 
class="ptmb7t-">increment:</span> </dt><dd 
class="description">An update that increases the value of a variable (often by one). <a 
 id="dx1-7051"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">infinite loop:</span> </dt><dd 
class="description">A loop in which the terminating condition is never satisfied or for which there is
     no termination condition. <a 
 id="dx1-7052"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">iteration:</span> </dt><dd 
class="description">Repeated execution of a set of statements using either a recursive function call or a
     loop. <a 
 id="dx1-7053"></a>
     </dd></dl>
<!--l. 3245--><p class="noindent" >
<a 
 id="x1-7054r10"></a>
<!--l. 3245--><p class="noindent" ><span 
class="ptmb7t-x-x-144">5.10</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-72"></a>
<div class="newtheorem">
<!--l. 3247--><p class="noindent" ><span class="head">
<a 
 id="x1-7055r1"></a>

<span 
class="ptmb7t-">Exercise 5.1</span>  </span>Write a program which repeatedly reads numbers until the user enters &#8220;done&#8221;.
Once &#8220;done&#8221; is entered, print out the total, count, and average of the numbers. If the user enters
anything other than a number, detect their mistake using <span 
class="pcrr7tn-">try </span>and <span 
class="pcrr7tn-">except </span>and print an error
message and skip to the next number.

<div class="verbatim" id="verbatim-136">
Enter&#x00A0;a&#x00A0;number:&#x00A0;4
&#x00A0;<br />Enter&#x00A0;a&#x00A0;number:&#x00A0;5
&#x00A0;<br />Enter&#x00A0;a&#x00A0;number:&#x00A0;bad&#x00A0;data
&#x00A0;<br />Invalid&#x00A0;input
&#x00A0;<br />Enter&#x00A0;a&#x00A0;number:&#x00A0;7
&#x00A0;<br />Enter&#x00A0;a&#x00A0;number:&#x00A0;done
&#x00A0;<br />16&#x00A0;3&#x00A0;5.33333333333</div>
<!--l. 3263--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 3266--><p class="noindent" ><span class="head">
<a 
 id="x1-7056r2"></a>
<span 
class="ptmb7t-">Exercise 5.2</span>  </span>Write another program that prompts for a list of numbers as above and at the end
prints out both the maximum and minimum of the numbers instead of the average.
</div>

<!--l. 3272--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;6</span><br /><a 
 id="x1-80006"></a>Strings</h2>
<a 
 id="x1-8001r1"></a>
<span 
class="ptmb7t-x-x-144">6.1</span>   <span 
class="ptmb7t-x-x-144">A string is a sequence</span>
<a 
 id="Q1-1-74"></a>
<a 
 id="dx1-8002"></a>
<a 
 id="dx1-8003"></a>
<a 
 id="dx1-8004"></a>
<a 
 id="dx1-8005"></a>
<!--l. 3282--><p class="noindent" >A string is a <span 
class="ptmb7t-">sequence </span>of characters. You can access the characters one at a time with the bracket
operator:

<div class="verbatim" id="verbatim-137">
&#x003E;&#x003E;&#x003E;&#x00A0;fruit&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;letter&#x00A0;=&#x00A0;fruit[1]</div>
<!--l. 3290--><p class="nopar" ><a 
 id="dx1-8006"></a> The second statement extracts the character at index position 1 from the <span 
class="pcrr7tn-">fruit </span>variable and assigns it
to <span 
class="pcrr7tn-">letter </span>variable.
<!--l. 3297--><p class="noindent" >The expression in brackets is called an <span 
class="ptmb7t-">index</span>. The index indicates which character in the sequence you
want (hence the name).
<!--l. 3301--><p class="noindent" >But you might not get what you expect:

<div class="verbatim" id="verbatim-138">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;letter
&#x00A0;<br />a</div>
<!--l. 3307--><p class="nopar" > For most people, the first letter of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">banana</span><span 
class="pcrr8c-">&#8217;</span></span></span> is <span 
class="pcrr7tn-">b</span>, not <span 
class="pcrr7tn-">a</span>. But in Python, the index is an offset from the
beginning of the string, and the offset of the first letter is zero.

<div class="verbatim" id="verbatim-139">
&#x003E;&#x003E;&#x003E;&#x00A0;letter&#x00A0;=&#x00A0;fruit[0]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;letter
&#x00A0;<br />b</div>
<!--l. 3319--><p class="nopar" > So <span 
class="pcrr7tn-">b </span>is the 0th letter (&#8220;zero-eth&#8221;) of <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">banana</span><span 
class="pcrr8c-">&#8217;</span></span></span>, <span 
class="pcrr7tn-">a </span>is the 1th letter (&#8220;one-eth&#8221;), and <span 
class="pcrr7tn-">n </span>is the 2th
(&#8220;two-eth&#8221;) letter.
<div  
class="centerline">                  <img 
src="cfbook12x.png" alt="PIC" class="graphics" width="170.92819pt" height="36.135pt" ><!--tex4ht:graphics  
name="cfbook12x.png" src="figs2/string.eps"  
-->                  </div>
<a 
 id="dx1-8007"></a>
<a 
 id="dx1-8008"></a>
<!--l. 3333--><p class="noindent" >You can use any expression, including variables and operators, as an index, but the value of the index
has to be an integer. Otherwise you get:
<a 
 id="dx1-8009"></a>
<a 
 id="dx1-8010"></a>
<a 
 id="dx1-8011"></a>

<div class="verbatim" id="verbatim-140">
&#x003E;&#x003E;&#x003E;&#x00A0;letter&#x00A0;=&#x00A0;fruit[1.5]
&#x00A0;<br />TypeError:&#x00A0;string&#x00A0;indices&#x00A0;must&#x00A0;be&#x00A0;integers</div>
<!--l. 3345--><p class="nopar" >
<!--l. 3349--><p class="noindent" >
<a 
 id="x1-8012r2"></a>
<!--l. 3349--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.2</span>   <span 
class="ptmb7t-x-x-144">Getting the length of a string using </span><span 
class="pcrr7tn-x-x-144">len</span>
<a 
 id="Q1-1-75"></a>
<a 
 id="dx1-8013"></a>
<a 
 id="dx1-8014"></a>
<!--l. 3354--><p class="noindent" ><span 
class="pcrr7tn-">len </span>is a built-in function that returns the number of characters in a string:

<div class="verbatim" id="verbatim-141">
&#x003E;&#x003E;&#x003E;&#x00A0;fruit&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;len(fruit)
&#x00A0;<br />6</div>
<!--l. 3362--><p class="nopar" > To get the last letter of a string, you might be tempted to try something like this:
<a 
 id="dx1-8015"></a>
<a 
 id="dx1-8016"></a>

<div class="verbatim" id="verbatim-142">
&#x003E;&#x003E;&#x003E;&#x00A0;length&#x00A0;=&#x00A0;len(fruit)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;last&#x00A0;=&#x00A0;fruit[length]
&#x00A0;<br />IndexError:&#x00A0;string&#x00A0;index&#x00A0;out&#x00A0;of&#x00A0;range</div>
<!--l. 3376--><p class="nopar" > The reason for the <span 
class="pcrr7tn-">IndexError </span>is that there is no letter in <span 
class="pcrr7tn-">'banana' </span>with the index 6. Since we
started counting at zero, the six letters are numbered 0 to 5. To get the last character, you have to
subtract 1 from <span 
class="pcrr7tn-">length</span>:

<div class="verbatim" id="verbatim-143">
&#x003E;&#x003E;&#x003E;&#x00A0;last&#x00A0;=&#x00A0;fruit[length-1]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;last
&#x00A0;<br />a</div>
<!--l. 3389--><p class="nopar" > Alternatively, you can use negative indices, which count backward from the end of the string. The
expression <span 
class="pcrr7tn-">fruit[-1] </span>yields the last letter, <span 
class="pcrr7tn-">fruit[-2] </span>yields the second to last, and so
on.
<a 
 id="dx1-8017"></a>
<a 
 id="dx1-8018"></a>
<!--l. 3400--><p class="noindent" >
<a 
 id="x1-8019r3"></a>
<!--l. 3400--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.3</span>   <span 
class="ptmb7t-x-x-144">Traversal through a string with a loop</span>
<a 
 id="Q1-1-76"></a>
<a 
 id="dx1-8020"></a>
<a 
 id="dx1-8021"></a>
<a 
 id="dx1-8022"></a>
<a 
 id="dx1-8023"></a>
<a 
 id="dx1-8024"></a>
<a 
 id="dx1-8025"></a>
<!--l. 3410--><p class="noindent" >A lot of computations involve processing a string one character at a time. Often they start at the
beginning, select each character in turn, do something to it, and continue until the end. This
pattern of processing is called a <span 
class="ptmb7t-">traversal</span>. One way to write a traversal is with a <span 
class="pcrr7tn-">while</span>
loop:

<div class="verbatim" id="verbatim-144">
index&#x00A0;=&#x00A0;0
&#x00A0;<br />while&#x00A0;index&#x00A0;&#x003C;&#x00A0;len(fruit):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;letter&#x00A0;=&#x00A0;fruit[index]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;letter
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;index&#x00A0;=&#x00A0;index&#x00A0;+&#x00A0;1</div>
<!--l. 3423--><p class="nopar" > This loop traverses the string and displays each letter on a line by itself. The loop condition is <span 
class="pcrr7tn-">index</span>
<span 
class="pcrr7tn-">&#x003C; len(fruit)</span>, so when <span 
class="pcrr7tn-">index </span>is equal to the length of the string, the condition is false, and the body
of the loop is not executed. The last character accessed is the one with the index <span 
class="pcrr7tn-">len(fruit)-1</span>, which
is the last character in the string.
<div class="newtheorem">
<!--l. 3433--><p class="noindent" ><span class="head">
<a 
 id="x1-8026r1"></a>
<span 
class="ptmb7t-">Exercise 6.1</span>  </span>Write a <span 
class="pcrr7tn-">while </span>loop that starts at the last character in the string and works its
way backwards to the first character in the string, printing each letter on a separate line, except
backwards.
</div>
<!--l. 3439--><p class="noindent" >Another way to write a traversal is with a <span 
class="pcrr7tn-">for </span>loop:

<div class="verbatim" id="verbatim-145">
for&#x00A0;char&#x00A0;in&#x00A0;fruit:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;char</div>
<!--l. 3445--><p class="nopar" > Each time through the loop, the next character in the string is assigned to the variable <span 
class="pcrr7tn-">char</span>. The loop
continues until no characters are left.
<!--l. 3453--><p class="noindent" >
<a 
 id="x1-8027r4"></a>
<!--l. 3453--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.4</span>   <span 
class="ptmb7t-x-x-144">String slices</span>
<a 
 id="Q1-1-77"></a>
<a 
 id="dx1-8028"></a>
<a 
 id="dx1-8029"></a>
<a 
 id="dx1-8030"></a>
<a 
 id="dx1-8031"></a>
<a 
 id="dx1-8032"></a>
<!--l. 3462--><p class="noindent" >A segment of a string is called a <span 
class="ptmb7t-">slice</span>. Selecting a slice is similar to selecting a character:

<div class="verbatim" id="verbatim-146">
&#x003E;&#x003E;&#x003E;&#x00A0;s&#x00A0;=&#x00A0;&#8217;Monty&#x00A0;Python&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;s[0:5]
&#x00A0;<br />Monty
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;s[6:13]
&#x00A0;<br />Python</div>
<!--l. 3472--><p class="nopar" > The operator <span 
class="pcrr7tn-">[n:m] </span>returns the part of the string from the &#8220;n-eth&#8221; character to the &#8220;m-eth&#8221;
character, including the first but excluding the last. This behavior is counterintuitive, but
it might help to imagine the indices pointing <span 
class="ptmri7t-">between </span>the characters, as in the following
diagram:
<div  
class="centerline">                <img 
src="cfbook13x.png" alt="PIC" class="graphics" width="195.73125pt" height="52.19499pt" ><!--tex4ht:graphics  
name="cfbook13x.png" src="figs/banana.eps"  
-->                </div>
<!--l. 3485--><p class="noindent" >If you omit the first index (before the colon), the slice starts at the beginning of the string. If you omit
the second index, the slice goes to the end of the string:

<div class="verbatim" id="verbatim-147">
&#x003E;&#x003E;&#x003E;&#x00A0;fruit&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;fruit[:3]
&#x00A0;<br />&#8217;ban&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;fruit[3:]
&#x00A0;<br />&#8217;ana&#8217;</div>
<!--l. 3496--><p class="nopar" > If the first index is greater than or equal to the second the result is an <span 
class="ptmb7t-">empty string</span>, represented by two
quotation marks:
<a 
 id="dx1-8033"></a>

<div class="verbatim" id="verbatim-148">
&#x003E;&#x003E;&#x003E;&#x00A0;fruit&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;fruit[3:3]
&#x00A0;<br />&#8217;&#8217;</div>
<!--l. 3509--><p class="nopar" > An empty string contains no characters and has length 0, but other than that, it is the same as any other
string.
<div class="newtheorem">
<!--l. 3515--><p class="noindent" ><span class="head">
<a 
 id="x1-8034r2"></a>
<span 
class="ptmb7t-">Exercise 6.2</span>  </span>Given that <span 
class="pcrr7tn-">fruit </span>is a string, what does <span 
class="pcrr7tn-">fruit[:] </span>mean?
<a 
 id="dx1-8035"></a>
<a 
 id="dx1-8036"></a>
</div>
<!--l. 3526--><p class="noindent" >
<a 
 id="x1-8037r5"></a>
<!--l. 3526--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.5</span>   <span 
class="ptmb7t-x-x-144">Strings are immutable</span>
<a 
 id="Q1-1-78"></a>
<a 
 id="dx1-8038"></a>
<a 
 id="dx1-8039"></a>
<a 
 id="dx1-8040"></a>
<!--l. 3531--><p class="noindent" >It is tempting to use the <span 
class="pcrr7tn-">[] </span>operator on the left side of an assignment, with the intention of changing a
character in a string. For example:
<a 
 id="dx1-8041"></a>
<a 
 id="dx1-8042"></a>

<div class="verbatim" id="verbatim-149">
&#x003E;&#x003E;&#x003E;&#x00A0;greeting&#x00A0;=&#x00A0;&#8217;Hello,&#x00A0;world!&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;greeting[0]&#x00A0;=&#x00A0;&#8217;J&#8217;
&#x00A0;<br />TypeError:&#x00A0;object&#x00A0;does&#x00A0;not&#x00A0;support&#x00A0;item&#x00A0;assignment</div>
<!--l. 3543--><p class="nopar" > The &#8220;object&#8221; in this case is the string and the &#8220;item&#8221; is the character you tried to assign. For now, an
<span 
class="ptmb7t-">object </span>is the same thing as a value, but we will refine that definition later. An <span 
class="ptmb7t-">item </span>is one of the values
in a sequence.
<a 
 id="dx1-8043"></a>
<a 
 id="dx1-8044"></a>
<a 
 id="dx1-8045"></a>
<a 
 id="dx1-8046"></a>
<!--l. 3556--><p class="noindent" >The reason for the error is that strings are <span 
class="ptmb7t-">immutable</span>, which means you can&#8217;t change an existing
string. The best you can do is create a new string that is a variation on the original:

<div class="verbatim" id="verbatim-150">
&#x003E;&#x003E;&#x003E;&#x00A0;greeting&#x00A0;=&#x00A0;&#8217;Hello,&#x00A0;world!&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;new_greeting&#x00A0;=&#x00A0;&#8217;J&#8217;&#x00A0;+&#x00A0;greeting[1:]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;new_greeting
&#x00A0;<br />Jello,&#x00A0;world!</div>
<!--l. 3567--><p class="nopar" > This example concatenates a new first letter onto a slice of <span 
class="pcrr7tn-">greeting</span>. It has no effect on the original
string.
<a 
 id="dx1-8047"></a>
<!--l. 3576--><p class="noindent" >
<a 
 id="x1-8048r6"></a>
<!--l. 3576--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.6</span>   <span 
class="ptmb7t-x-x-144">Looping and counting</span>
<a 
 id="Q1-1-79"></a>
<a 
 id="dx1-8049"></a>
<a 
 id="dx1-8050"></a>
<a 
 id="dx1-8051"></a>
<a 
 id="dx1-8052"></a>
<!--l. 3584--><p class="noindent" >The following program counts the number of times the letter <span 
class="pcrr7tn-">a </span>appears in a string:

<div class="verbatim" id="verbatim-151">
word&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />for&#x00A0;letter&#x00A0;in&#x00A0;word:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;letter&#x00A0;==&#x00A0;&#8217;a&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;count</div>
<!--l. 3595--><p class="nopar" > This program demonstrates another pattern of computation called a <span 
class="ptmb7t-">counter</span>. The variable <span 
class="pcrr7tn-">count </span>is
initialized to 0 and then incremented each time an <span 
class="pcrr7tn-">a </span>is found. When the loop exits, <span 
class="pcrr7tn-">count </span>contains the
result&#8212;the total number of <span 
class="pcrr7tn-">a</span>&#8217;s.
<div class="newtheorem">
<!--l. 3604--><p class="noindent" ><span class="head">
<a 
 id="x1-8053r3"></a>
<span 
class="ptmb7t-">Exercise 6.3</span>  </span><a 
 id="dx1-8054"></a>
<!--l. 3607--><p class="noindent" >Encapsulate this code in a function named <span 
class="pcrr7tn-">count</span>, and generalize it so that it accepts the string
and the letter as arguments.
</div>
<!--l. 3612--><p class="noindent" >
<a 
 id="x1-8055r7"></a>
<!--l. 3612--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.7</span>   <span 
class="ptmb7t-x-x-144">The </span><span 
class="pcrr7tn-x-x-144">in </span><span 
class="ptmb7t-x-x-144">operator</span>
<a 
 id="Q1-1-80"></a>
<a 
 id="dx1-8056"></a>
<a 
 id="dx1-8057"></a>
<a 
 id="dx1-8058"></a>
<a 
 id="dx1-8059"></a>
<!--l. 3620--><p class="noindent" >The word <span 
class="pcrr7tn-">in </span>is a boolean operator that takes two strings and returns <span 
class="pcrr7tn-">True </span>if the first appears as a
substring in the second:

<div class="verbatim" id="verbatim-152">
&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;a&#8217;&#x00A0;in&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />True
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;seed&#8217;&#x00A0;in&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />False</div>
<!--l. 3629--><p class="nopar" >
<!--l. 3633--><p class="noindent" >
<a 
 id="x1-8060r8"></a>
<!--l. 3633--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.8</span>   <span 
class="ptmb7t-x-x-144">String comparison</span>
<a 
 id="Q1-1-81"></a>
<a 
 id="dx1-8061"></a>
<a 
 id="dx1-8062"></a>
<!--l. 3638--><p class="noindent" >The comparison operators work on strings. To see if two strings are equal:

<div class="verbatim" id="verbatim-153">
if&#x00A0;word&#x00A0;==&#x00A0;&#8217;banana&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#x00A0;&#8217;All&#x00A0;right,&#x00A0;bananas.&#8217;</div>
<!--l. 3644--><p class="nopar" > Other comparison operations are useful for putting words in alphabetical order:

<div class="verbatim" id="verbatim-154">
if&#x00A0;word&#x00A0;&#x003C;&#x00A0;&#8217;banana&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Your&#x00A0;word,&#8217;&#x00A0;+&#x00A0;word&#x00A0;+&#x00A0;&#8217;,&#x00A0;comes&#x00A0;before&#x00A0;banana.&#8217;
&#x00A0;<br />elif&#x00A0;word&#x00A0;&#x003E;&#x00A0;&#8217;banana&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Your&#x00A0;word,&#8217;&#x00A0;+&#x00A0;word&#x00A0;+&#x00A0;&#8217;,&#x00A0;comes&#x00A0;after&#x00A0;banana.&#8217;
&#x00A0;<br />else:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;All&#x00A0;right,&#x00A0;bananas.&#8217;</div>
<!--l. 3658--><p class="nopar" > Python does not handle uppercase and lowercase letters the same way that people do. All the
uppercase letters come before all the lowercase letters, so:

<div class="verbatim" id="verbatim-155">
Your&#x00A0;word,&#x00A0;Pineapple,&#x00A0;comes&#x00A0;before&#x00A0;banana.</div>
<!--l. 3668--><p class="nopar" > A common way to address this problem is to convert strings to a standard format, such as all
lowercase, before performing the comparison. Keep that in mind in case you have to defend yourself
against a man armed with a Pineapple.
<!--l. 3677--><p class="noindent" >
<a 
 id="x1-8063r9"></a>
<!--l. 3677--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.9</span>   <span 
class="pcrr7tn-x-x-144">string </span><span 
class="ptmb7t-x-x-144">methods</span>
<a 
 id="Q1-1-82"></a>
<!--l. 3679--><p class="noindent" >Strings are an example of Python <span 
class="ptmb7t-">objects</span>. An object contains both data (the actual string itself) as well
as <span 
class="ptmb7t-">methods</span>, which are effectively functions which that are built into the object and are available to any
<span 
class="ptmb7t-">instance </span>of the object.
<!--l. 3684--><p class="noindent" >Python has a function called <span 
class="pcrr7tn-">dir </span>that lists the methods available for an object. The <span 
class="pcrr7tn-">type</span>
function shows the type of an object and the <span 
class="pcrr7tn-">dir </span>function shows the available methods.

<div class="verbatim" id="verbatim-156">
&#x003E;&#x003E;&#x003E;&#x00A0;stuff&#x00A0;=&#x00A0;&#8217;Hello&#x00A0;world&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;type(stuff)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;str&#8217;&#x003E;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;dir(stuff)
&#x00A0;<br />[&#8217;capitalize&#8217;,&#x00A0;&#8217;center&#8217;,&#x00A0;&#8217;count&#8217;,&#x00A0;&#8217;decode&#8217;,&#x00A0;&#8217;encode&#8217;,
&#x00A0;<br />&#8217;endswith&#8217;,&#x00A0;&#8217;expandtabs&#8217;,&#x00A0;&#8217;find&#8217;,&#x00A0;&#8217;format&#8217;,&#x00A0;&#8217;index&#8217;,
&#x00A0;<br />&#8217;isalnum&#8217;,&#x00A0;&#8217;isalpha&#8217;,&#x00A0;&#8217;isdigit&#8217;,&#x00A0;&#8217;islower&#8217;,&#x00A0;&#8217;isspace&#8217;,
&#x00A0;<br />&#8217;istitle&#8217;,&#x00A0;&#8217;isupper&#8217;,&#x00A0;&#8217;join&#8217;,&#x00A0;&#8217;ljust&#8217;,&#x00A0;&#8217;lower&#8217;,&#x00A0;&#8217;lstrip&#8217;,
&#x00A0;<br />&#8217;partition&#8217;,&#x00A0;&#8217;replace&#8217;,&#x00A0;&#8217;rfind&#8217;,&#x00A0;&#8217;rindex&#8217;,&#x00A0;&#8217;rjust&#8217;,
&#x00A0;<br />&#8217;rpartition&#8217;,&#x00A0;&#8217;rsplit&#8217;,&#x00A0;&#8217;rstrip&#8217;,&#x00A0;&#8217;split&#8217;,&#x00A0;&#8217;splitlines&#8217;,
&#x00A0;<br />&#8217;startswith&#8217;,&#x00A0;&#8217;strip&#8217;,&#x00A0;&#8217;swapcase&#8217;,&#x00A0;&#8217;title&#8217;,&#x00A0;&#8217;translate&#8217;,
&#x00A0;<br />&#8217;upper&#8217;,&#x00A0;&#8217;zfill&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;help(str.capitalize)
&#x00A0;<br />Help&#x00A0;on&#x00A0;method_descriptor:
&#x00A0;<br />
&#x00A0;<br />capitalize(...)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;S.capitalize()&#x00A0;-&#x003E;&#x00A0;string
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;Return&#x00A0;a&#x00A0;copy&#x00A0;of&#x00A0;the&#x00A0;string&#x00A0;S&#x00A0;with&#x00A0;only&#x00A0;its&#x00A0;first&#x00A0;character
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;capitalized.
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 3710--><p class="nopar" >
<!--l. 3714--><p class="noindent" >While the <span 
class="pcrr7tn-">dir </span>function lists the methods, and you can use <span 
class="pcrr7tn-">help </span>to get some simple
documentation on a method, a better source of documentation for string methods would be
<a 
href="docs.python.org/library/string.html" class="url" ><span 
class="pcrr7tn-">docs.python.org/library/string.html</span></a>.
<!--l. 3719--><p class="noindent" >Calling a <span 
class="ptmb7t-">method </span>is similar to calling a function&#8212;it takes arguments and returns a value&#8212;but the
syntax is different. We call a method by appending the method name to the variable name using the
period as a delimiter.
<!--l. 3725--><p class="noindent" >For example, the method <span 
class="pcrr7tn-">upper </span>takes a string and returns a new string with all uppercase
letters:
<a 
 id="dx1-8064"></a>
<a 
 id="dx1-8065"></a>
<!--l. 3732--><p class="noindent" >Instead of the function syntax <span 
class="pcrr7tn-">upper(word)</span>, it uses the method syntax <span 
class="pcrr7tn-">word.upper()</span>.
<a 
 id="dx1-8066"></a>

<div class="verbatim" id="verbatim-157">
&#x003E;&#x003E;&#x003E;&#x00A0;word&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;new_word&#x00A0;=&#x00A0;word.upper()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;new_word
&#x00A0;<br />BANANA</div>
<!--l. 3743--><p class="nopar" > This form of dot notation specifies the name of the method, <span 
class="pcrr7tn-">upper</span>, and the name of the string
to apply the method to, <span 
class="pcrr7tn-">word</span>. The empty parentheses indicate that this method takes no
argument.
<a 
 id="dx1-8067"></a>
<!--l. 3753--><p class="noindent" >A method call is called an <span 
class="ptmb7t-">invocation</span>; in this case, we would say that we are invoking <span 
class="pcrr7tn-">upper </span>on the
<span 
class="pcrr7tn-">word</span>.
<a 
 id="dx1-8068"></a>
<!--l. 3758--><p class="noindent" >As it turns out, there is a string method named <span 
class="pcrr7tn-">find </span>that is remarkably similar to the function we
wrote:

<div class="verbatim" id="verbatim-158">
&#x003E;&#x003E;&#x003E;&#x00A0;word&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;index&#x00A0;=&#x00A0;word.find(&#8217;a&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;index
&#x00A0;<br />1</div>
<!--l. 3767--><p class="nopar" > In this example, we invoke <span 
class="pcrr7tn-">find </span>on <span 
class="pcrr7tn-">word </span>and pass the letter we are looking for as a parameter.
<!--l. 3773--><p class="noindent" >Actually, the <span 
class="pcrr7tn-">find </span>method is more general than our function; it can find substrings, not just
characters:

<div class="verbatim" id="verbatim-159">
&#x003E;&#x003E;&#x003E;&#x00A0;word.find(&#8217;na&#8217;)
&#x00A0;<br />2</div>
<!--l. 3780--><p class="nopar" > It can take as a second argument the index where it should start:
<a 
 id="dx1-8069"></a>
<a 
 id="dx1-8070"></a>

<div class="verbatim" id="verbatim-160">
&#x003E;&#x003E;&#x003E;&#x00A0;word.find(&#8217;na&#8217;,&#x00A0;3)
&#x00A0;<br />4</div>
<!--l. 3792--><p class="nopar" > One common task is to remove white space (spaces, tabs, or newlines) from the beginning and end of
a string using the <span 
class="pcrr7tn-">strip </span>method:

<div class="verbatim" id="verbatim-161">
&#x003E;&#x003E;&#x003E;&#x00A0;line&#x00A0;=&#x00A0;&#8217;&#x00A0;&#x00A0;Here&#x00A0;we&#x00A0;go&#x00A0;&#x00A0;&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;line.strip()
&#x00A0;<br />&#8217;Here&#x00A0;we&#x00A0;go&#8217;</div>
<!--l. 3803--><p class="nopar" > Some methods such as <span 
class="ptmb7t-">startswith </span>return boolean values.

<div class="verbatim" id="verbatim-162">
&#x003E;&#x003E;&#x003E;&#x00A0;line&#x00A0;=&#x00A0;&#8217;Please&#x00A0;have&#x00A0;a&#x00A0;nice&#x00A0;day&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;line.startswith(&#8217;Please&#8217;)
&#x00A0;<br />True
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;line.startswith(&#8217;p&#8217;)
&#x00A0;<br />False</div>
<!--l. 3815--><p class="nopar" > You will note that <span 
class="pcrr7tn-">startswith </span>requires case to match so sometimes we take a line and map it all to
lowercase before we do any checking using the <span 
class="pcrr7tn-">lower </span>method.

<div class="verbatim" id="verbatim-163">
&#x003E;&#x003E;&#x003E;&#x00A0;line&#x00A0;=&#x00A0;&#8217;Please&#x00A0;have&#x00A0;a&#x00A0;nice&#x00A0;day&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;line.startswith(&#8217;p&#8217;)
&#x00A0;<br />False
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;line.lower()
&#x00A0;<br />&#8217;please&#x00A0;have&#x00A0;a&#x00A0;nice&#x00A0;day&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;line.lower().startswith(&#8217;p&#8217;)
&#x00A0;<br />True</div>
<!--l. 3831--><p class="nopar" > In the last example, the method <span 
class="pcrr7tn-">lower </span>is called and then we use <span 
class="pcrr7tn-">startswith </span>to check to see if the
resulting lowercase string starts with the letter &#8220;p&#8221;. As long as we are careful with the order, we can
make multiple method calls in a single expression.
<div class="newtheorem">
<!--l. 3841--><p class="noindent" ><span class="head">
<a 
 id="x1-8071r4"></a>
<span 
class="ptmb7t-">Exercise 6.4</span>  </span><a 
 id="dx1-8072"></a> <a 
 id="dx1-8073"></a>
<!--l. 3845--><p class="noindent" >There is a string method called <span 
class="pcrr7tn-">count </span>that is similar to the function in the previous exercise.
Read  the  documentation  of  this  method  at  <a 
href="docs.python.org/library/string.html" class="url" ><span 
class="pcrr7tn-">docs.python.org/library/string.html</span></a> and
write an invocation that counts the number of times the letter a occurs in <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">banana</span><span 
class="pcrr8c-">&#8217;</span></span></span>.
</div>
<!--l. 3854--><p class="noindent" >
<a 
 id="x1-8074r10"></a>
<!--l. 3854--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.10</span>   <span 
class="ptmb7t-x-x-144">Parsing strings</span>
<a 
 id="Q1-1-83"></a>
<!--l. 3856--><p class="noindent" >Often, we want to look into a string and find a substring. For example if we were presented a series of
lines formatted as follows:
<!--l. 3860--><p class="noindent" ><span 
class="pcrr7tn-">From stephen.marquard@</span><span 
class="ptmb7t-">uct.ac.za  </span><span 
class="pcrr7tn-">Sat Jan 5 09:14:16 2008</span>
<!--l. 3863--><p class="noindent" >And we wanted to pull out only the second half of the address (i.e. <span 
class="pcrr7tn-">uct.ac.za</span>) from each line. We can
do this by using the <span 
class="pcrr7tn-">find </span>method and string slicing.
<!--l. 3867--><p class="noindent" >First, we will find the position of the at-sign in the string. Then we will find the position of the first
space <span 
class="ptmri7t-">after </span>the at-sign. And then we will use string slicing to extract the portion of the string which we
are looking for.

<div class="verbatim" id="verbatim-164">
&#x003E;&#x003E;&#x003E;&#x00A0;data&#x00A0;=&#x00A0;&#8217;From&#x00A0;stephen.marquard@uct.ac.za&#x00A0;Sat&#x00A0;Jan&#x00A0;&#x00A0;5&#x00A0;09:14:16&#x00A0;2008&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;atpos&#x00A0;=&#x00A0;data.find(&#8217;@&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;atpos
&#x00A0;<br />21
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;sppos&#x00A0;=&#x00A0;data.find(&#8217;&#x00A0;&#8217;,atpos)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;sppos
&#x00A0;<br />31
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;host&#x00A0;=&#x00A0;data[atpos+1:sppos]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;host
&#x00A0;<br />uct.ac.za
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 3885--><p class="nopar" > We use a version of the <span 
class="pcrr7tn-">find </span>method which allows us to specify a position in the string where we
want <span 
class="pcrr7tn-">find </span>to start looking. When we slice, we extract the characters from &#8220;one beyond the at-sign
through up to <span 
class="ptmri7t-">but not including </span>the space character&#8221;.
<!--l. 3894--><p class="noindent" >The documentation for the <span 
class="pcrr7tn-">find </span>method is available at <a 
href="docs.python.org/library/string.html" class="url" ><span 
class="pcrr7tn-">docs.python.org/library/string.html</span></a>.
<!--l. 3897--><p class="noindent" >
<a 
 id="x1-8075r11"></a>
<!--l. 3897--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.11</span>   <span 
class="ptmb7t-x-x-144">Format operator</span>
<a 
 id="Q1-1-84"></a>
<a 
 id="dx1-8076"></a>
<a 
 id="dx1-8077"></a>
<!--l. 3902--><p class="noindent" >The <span 
class="ptmb7t-">format operator</span>, <span 
class="pcrr7tn-">% </span>allows us to construct strings, replacing parts of the strings with the data
stored in variables. When applied to integers, <span 
class="pcrr7tn-">% </span>is the modulus operator. But when the first operand is a
string, <span 
class="pcrr7tn-">% </span>is the format operator.
<a 
 id="dx1-8078"></a>
<!--l. 3910--><p class="noindent" >The first operand is the <span 
class="ptmb7t-">format string</span>, which contains one or more <span 
class="ptmb7t-">format sequences </span>that specify how
the second operand is formatted. The result is a string.
<a 
 id="dx1-8079"></a>
<!--l. 3917--><p class="noindent" >For example, the format sequence <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">%d</span><span 
class="pcrr8c-">&#8217;</span></span></span> means that the second operand should be formatted as an
integer (<span 
class="pcrr7tn-">d </span>stands for &#8220;decimal&#8221;):

<div class="verbatim" id="verbatim-165">
&#x003E;&#x003E;&#x003E;&#x00A0;camels&#x00A0;=&#x00A0;42
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;%d&#8217;&#x00A0;%&#x00A0;camels
&#x00A0;<br />&#8217;42&#8217;</div>
<!--l. 3926--><p class="nopar" > The result is the string <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">42</span><span 
class="pcrr8c-">&#8217;</span></span></span>, which is not to be confused with the integer value <span 
class="pcrr7tn-">42</span>.
<!--l. 3932--><p class="noindent" >A format sequence can appear anywhere in the string, so you can embed a value in a sentence:

<div class="verbatim" id="verbatim-166">
&#x003E;&#x003E;&#x003E;&#x00A0;camels&#x00A0;=&#x00A0;42
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;I&#x00A0;have&#x00A0;spotted&#x00A0;%d&#x00A0;camels.&#8217;&#x00A0;%&#x00A0;camels
&#x00A0;<br />&#8217;I&#x00A0;have&#x00A0;spotted&#x00A0;42&#x00A0;camels.&#8217;</div>
<!--l. 3940--><p class="nopar" > If there is more than one format sequence in the string, the second argument has to be a tuple. Each
format sequence is matched with an element of the tuple, in order.
<!--l. 3947--><p class="noindent" >The following example uses <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">%d</span><span 
class="pcrr8c-">&#8217;</span></span></span> to format an integer, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">%g</span><span 
class="pcrr8c-">&#8217;</span></span></span> to format a floating-point number (don&#8217;t
ask why), and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">%s</span><span 
class="pcrr8c-">&#8217;</span></span></span> to format a string:

<div class="verbatim" id="verbatim-167">
&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;In&#x00A0;%d&#x00A0;years&#x00A0;I&#x00A0;have&#x00A0;spotted&#x00A0;%g&#x00A0;%s.&#8217;&#x00A0;%&#x00A0;(3,&#x00A0;0.1,&#x00A0;&#8217;camels&#8217;)
&#x00A0;<br />&#8217;In&#x00A0;3&#x00A0;years&#x00A0;I&#x00A0;have&#x00A0;spotted&#x00A0;0.1&#x00A0;camels.&#8217;</div>
<!--l. 3956--><p class="nopar" > The number of elements in the tuple has to match the number of format sequences in the string. Also,
the types of the elements have to match the format sequences:
<a 
 id="dx1-8080"></a>
<a 
 id="dx1-8081"></a>

<div class="verbatim" id="verbatim-168">
&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;%d&#x00A0;%d&#x00A0;%d&#8217;&#x00A0;%&#x00A0;(1,&#x00A0;2)
&#x00A0;<br />TypeError:&#x00A0;not&#x00A0;enough&#x00A0;arguments&#x00A0;for&#x00A0;format&#x00A0;string
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;%d&#8217;&#x00A0;%&#x00A0;&#8217;dollars&#8217;
&#x00A0;<br />TypeError:&#x00A0;illegal&#x00A0;argument&#x00A0;type&#x00A0;for&#x00A0;built-in&#x00A0;operation</div>
<!--l. 3972--><p class="nopar" > In the first example, there aren&#8217;t enough elements; in the second, the element is the wrong
type.
<!--l. 3978--><p class="noindent" >The format operator is powerful, but it can be difficult to use. You can read more about it at
<a 
href="docs.python.org/lib/typesseq-strings.html" class="url" ><span 
class="pcrr7tn-">docs.python.org/lib/typesseq-strings.html</span></a>.
<!--l. 3998--><p class="noindent" >
<a 
 id="x1-8082r12"></a>
<!--l. 3998--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.12</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-85"></a>
<a 
 id="dx1-8083"></a>
<!--l. 4001--><p class="noindent" >A skill that you should cultivate as you program is always asking yourself, &#8220;What could go wrong
here?&#8221; or alternatively, &#8220;What crazy thing might our user do to crash our (seemingly) perfect
program?&#8221;.
<!--l. 4006--><p class="noindent" >For example, look at the program which we used to demonstrate the <span 
class="pcrr7tn-">while </span>loop in the chapter on
iteration:

<div class="verbatim" id="verbatim-169">
while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;raw_input(&#8217;&#x003E;&#x00A0;&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line[0]&#x00A0;==&#x00A0;&#8217;#&#8217;&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line&#x00A0;==&#x00A0;&#8217;done&#8217;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line
&#x00A0;<br />
&#x00A0;<br />print&#x00A0;&#8217;Done!&#8217;</div>
<!--l. 4020--><p class="nopar" > Look what happens when the user enters an empty line of input:

<div class="verbatim" id="verbatim-170">
&#x003E;&#x00A0;hello&#x00A0;there
&#x00A0;<br />hello&#x00A0;there
&#x00A0;<br />&#x003E;&#x00A0;#&#x00A0;don&#8217;t&#x00A0;print&#x00A0;this
&#x00A0;<br />&#x003E;&#x00A0;print&#x00A0;this!
&#x00A0;<br />print&#x00A0;this!
&#x00A0;<br />&#x003E;
&#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"copytildone.py",&#x00A0;line&#x00A0;3,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line[0]&#x00A0;==&#x00A0;&#8217;#&#8217;&#x00A0;:</div>
<!--l. 4036--><p class="nopar" > The code works fine until it is presented an empty line. Then there is no zeroth character so we get
a traceback. There are two solutions to this to make line three &#8220;safe&#8221; even if the line is
empty.
<!--l. 4044--><p class="noindent" >One possibility is to simply use the <span 
class="pcrr7tn-">startswith </span>method which returns <span 
class="pcrr7tn-">False </span>if the string is
empty.

<div class="verbatim" id="verbatim-171">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line.startswith(&#8217;#&#8217;)&#x00A0;:</div>
<!--l. 4050--><p class="nopar" > <a 
 id="dx1-8084"></a> <a 
 id="dx1-8085"></a>Another way to safely write the <span 
class="pcrr7tn-">if </span>statement using the <span 
class="ptmb7t-">guardian </span>pattern and make sure
the second logical expression is evaluated only where there is at least one character in the
string.:

<div class="verbatim" id="verbatim-172">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(line)&#x00A0;&#x003E;&#x00A0;0&#x00A0;and&#x00A0;line[0]&#x00A0;==&#x00A0;&#8217;#&#8217;&#x00A0;:</div>
<!--l. 4062--><p class="nopar" >
<!--l. 4066--><p class="noindent" >
<a 
 id="x1-8086r13"></a>
<!--l. 4066--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.13</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-86"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">counter:</span> </dt><dd 
class="description">A variable used to count something, usually initialized to zero and then incremented.
     <a 
 id="dx1-8087"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">empty string:</span> </dt><dd 
class="description">A string with no characters and length 0, represented by two quotation marks. <a 
 id="dx1-8088"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">format operator:</span> </dt><dd 
class="description">An operator, <span 
class="pcrr7tn-">%</span>, that takes a format string and a tuple and generates a string
     that includes the elements of the tuple formatted as specified by the format string. <a 
 id="dx1-8089"></a><a 
 id="dx1-8090"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">format sequence:</span> </dt><dd 
class="description">A sequence of characters in a format string, like <span 
class="pcrr7tn-">%d</span>, that specifies how a
     value should be formatted. <a 
 id="dx1-8091"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">format string:</span> </dt><dd 
class="description">A string, used with the format operator, that contains format sequences. <a 
 id="dx1-8092"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">flag:</span> </dt><dd 
class="description">A boolean variable used to indicate whether a condition is true. <a 
 id="dx1-8093"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">invocation:</span> </dt><dd 
class="description">A statement that calls a method. <a 
 id="dx1-8094"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">immutable:</span> </dt><dd 
class="description">The property of a sequence whose items cannot be assigned. <a 
 id="dx1-8095"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">index:</span> </dt><dd 
class="description">An integer value used to select an item in a sequence, such as a character in a string. <a 
 id="dx1-8096"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">item:</span> </dt><dd 
class="description">One of the values in a sequence. <a 
 id="dx1-8097"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">method:</span> </dt><dd 
class="description">A function that is associated with an object and called using dot notation. <a 
 id="dx1-8098"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">object:</span> </dt><dd 
class="description">Something  a  variable  can  refer  to.  For  now,  you  can  use  &#8220;object&#8221;  and  &#8220;value&#8221;
     interchangeably. <a 
 id="dx1-8099"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">search:</span> </dt><dd 
class="description">A pattern of traversal that stops when it finds what it is looking for. <a 
 id="dx1-8100"></a><a 
 id="dx1-8101"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">sequence:</span> </dt><dd 
class="description">An ordered set; that is, a set of values where each value is identified by an integer
     index. <a 
 id="dx1-8102"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">slice:</span> </dt><dd 
class="description">A part of a string specified by a range of indices. <a 
 id="dx1-8103"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">traverse:</span> </dt><dd 
class="description">To iterate through the items in a sequence, performing a similar operation on each. <a 
 id="dx1-8104"></a>
     </dd></dl>
<!--l. 4137--><p class="noindent" >
<a 
 id="x1-8105r14"></a>
<!--l. 4137--><p class="noindent" ><span 
class="ptmb7t-x-x-144">6.14</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-87"></a>
<div class="newtheorem">
<!--l. 4139--><p class="noindent" ><span class="head">
<a 
 id="x1-8106r5"></a>
<span 
class="ptmb7t-">Exercise 6.5</span>  </span>Take the following Python code that stores a string:&#8216;
<!--l. 4143--><p class="noindent" ><span 
class="pcrr7tn-">str = 'X-DSPAM-Confidence: </span><span 
class="ptmb7t-">0.8475</span><span 
class="pcrr7tn-">'</span>
<!--l. 4146--><p class="noindent" >Use <span 
class="pcrr7tn-">find </span>and string slicing to extract the portion of the string after the colon character and then
use the <span 
class="pcrr7tn-">float </span>function to convert the extracted string into a floating point number.
</div>
<div class="newtheorem">
<!--l. 4154--><p class="noindent" ><span class="head">
<a 
 id="x1-8107r6"></a>

<span 
class="ptmb7t-">Exercise 6.6</span>  </span><a 
 id="dx1-8108"></a> <a 
 id="dx1-8109"></a>
<!--l. 4158--><p class="noindent" >Read            the            documentation            of            the            string            methods            at
<a 
href="docs.python.org/lib/string-methods.html" class="url" ><span 
class="pcrr7tn-">docs.python.org/lib/string-methods.html</span></a>. You might want to experiment with some of
them to make sure you understand how they work. <span 
class="pcrr7tn-">strip </span>and <span 
class="pcrr7tn-">replace </span>are particularly useful.
<!--l. 4164--><p class="noindent" >The       documentation       uses       a       syntax       that       might       be       confusing.       For
example, in <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">find(sub[,</span><span 
class="pcrr7tn-">&#x00A0;start[,</span><span 
class="pcrr7tn-">&#x00A0;end]])</span></span></span>, the brackets indicate optional arguments. So <span 
class="pcrr7tn-">sub</span>
is required, but <span 
class="pcrr7tn-">start </span>is optional, and if you include <span 
class="pcrr7tn-">start</span>, then <span 
class="pcrr7tn-">end </span>is optional.
</div>

<!--l. 4171--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;7</span><br /><a 
 id="x1-90007"></a>Files</h2>
<a 
 id="dx1-9001"></a>
<a 
 id="dx1-9002"></a>
<a 
 id="x1-9003r1"></a>
<span 
class="ptmb7t-x-x-144">7.1</span>   <span 
class="ptmb7t-x-x-144">Persistence</span>
<a 
 id="Q1-1-89"></a>
<a 
 id="dx1-9004"></a>
<a 
 id="dx1-9005"></a>
<!--l. 4182--><p class="noindent" >So far, we have learned how to write programs and communicate our intentions to the <span 
class="ptmb7t-">Central</span>
<span 
class="ptmb7t-">Processing Unit </span>using conditional execution, functions, and iterations. We have learned how to create
and use data structures in the <span 
class="ptmb7t-">Main Memory</span>. The CPU and memory are where our software works and
runs. It is where all of the &#8220;thinking&#8221; happens.
<!--l. 4189--><p class="noindent" >But if you recall from our hardware architecture discussions, once the power is turned off, anything
stored in either the CPU or main memory is erased. So up to now, our programs have just been
transient fun exercises to learn Python.
<div  
class="centerline">   <img 
src="cfbook14x.png" alt="PIC" class="graphics" width="324.1795pt" height="180.67499pt" ><!--tex4ht:graphics  
name="cfbook14x.png" src="figs2/arch3.eps"  
-->   </div>
<!--l. 4198--><p class="noindent" >In this chapter, we start to work with <span 
class="ptmb7t-">Secondary Memory </span>(or files). Secondary memory is not
erased even when the power is turned off. Or in the case of a USB flash drive, the data can
we write from our programs can be removed from the system and transported to another
system.
<!--l. 4205--><p class="noindent" >We will primarily focus on reading and writing text files such as those we create in a text editor. Later
we will see how to work with database files which are binary files, specifically designed to be read and
written through database software.
<!--l. 4210--><p class="noindent" >

<a 
 id="x1-9006r2"></a>
<!--l. 4210--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.2</span>   <span 
class="ptmb7t-x-x-144">Opening files</span>
<a 
 id="Q1-1-90"></a>
<a 
 id="dx1-9007"></a>
<a 
 id="dx1-9008"></a>
<a 
 id="dx1-9009"></a>
<!--l. 4215--><p class="noindent" >When we want to read or write a file (say on your hard drive), we first must <span 
class="ptmb7t-">open </span>the file. Opening the
file communicates with your operating system which knows where the data for each file is stored.
When you open a file, you are asking the operating system to find the file by name and make
sure the file exists. In this example, we open the file <span 
class="pcrr7tn-">mbox.txt </span>which should be stored in
the same folder that you are in when you start Python. You can download this file from
<a 
href="www.py4inf.com/code/mbox.txt" class="url" ><span 
class="pcrr7tn-">www.py4inf.com/code/mbox.txt</span></a>

<div class="verbatim" id="verbatim-173">
&#x003E;&#x003E;&#x003E;&#x00A0;fhand&#x00A0;=&#x00A0;open(&#8217;mbox.txt&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;fhand
&#x00A0;<br />&#x003C;open&#x00A0;file&#x00A0;&#8217;mbox.txt&#8217;,&#x00A0;mode&#x00A0;&#8217;r&#8217;&#x00A0;at&#x00A0;0x1005088b0&#x003E;</div>
<!--l. 4231--><p class="nopar" ><a 
 id="dx1-9010"></a> If the <span 
class="pcrr7tn-">open </span>is successful, the operating system returns us a <span 
class="ptmb7t-">file handle</span>. The file handle is not the
actual data contained in the file, but instead it is a &#8220;handle&#8221; that we can use to read the data. You are
given a handle if the requested file exists and you have the proper permissions to read the
file.
<div  
class="centerline">          <img 
src="cfbook15x.png" alt="PIC" class="graphics" width="250.04337pt" height="126.47249pt" ><!--tex4ht:graphics  
name="cfbook15x.png" src="figs2/handle.eps"  
-->          </div>
<!--l. 4245--><p class="noindent" >If the file does not exist, <span 
class="pcrr7tn-">open </span>will fail with a traceback and you will not get a handle to access the
contents of the file:

<div class="verbatim" id="verbatim-174">
&#x003E;&#x003E;&#x003E;&#x00A0;fhand&#x00A0;=&#x00A0;open(&#8217;stuff.txt&#8217;)
&#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"&#x003C;stdin&#x003E;",&#x00A0;line&#x00A0;1,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
&#x00A0;<br />IOError:&#x00A0;[Errno&#x00A0;2]&#x00A0;No&#x00A0;such&#x00A0;file&#x00A0;or&#x00A0;directory:&#x00A0;&#8217;stuff.txt&#8217;</div>
<!--l. 4254--><p class="nopar" > Later we will use <span 
class="pcrr7tn-">try </span>and <span 
class="pcrr7tn-">except </span>to deal more gracefully with the situation where we attempt to open
a file that does not exist.
<!--l. 4261--><p class="noindent" >
<a 
 id="x1-9011r3"></a>
<!--l. 4261--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.3</span>   <span 
class="ptmb7t-x-x-144">Text files and lines</span>
<a 
 id="Q1-1-91"></a>
<!--l. 4263--><p class="noindent" >A text file can be thought of as a sequence of lines, much like a Python string can be thought of as a
sequence of characters. For example, this is a sample of a text file which records mail activity from
various individuals in an open source project development team:
<!--l. 4269--><p class="noindent" ><span 
class="pcrr7tn-">From stephen.marquard@uct.ac.za Sat Jan 5 09:14:16 2008</span><br 
class="newline" /><span 
class="pcrr7tn-">Return-Path: &#x003C;postmaster@collab.sakaiproject.org&#x003E;</span><br 
class="newline" /><span 
class="pcrr7tn-">Date: Sat, 5 Jan 2008 09:12:18 -0500</span><br 
class="newline" /><span 
class="pcrr7tn-">To: source@collab.sakaiproject.org</span><br 
class="newline" /><span 
class="pcrr7tn-">From: stephen.marquard@uct.ac.za</span><br 
class="newline" /><span 
class="pcrr7tn-">Subject: [sakai] svn commit: r39772 - content/branches/</span><br 
class="newline" /><span 
class="pcrr7tn-">Details: http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772</span><br 
class="newline" /><span 
class="pcrr7tn-">...</span>
<!--l. 4279--><p class="noindent" >The entire file of mail interactions is available from <a 
href="www.py4inf.com/code/mbox.txt" class="url" ><span 
class="pcrr7tn-">www.py4inf.com/code/mbox.txt</span></a> and a
shortened version of the file is available from <a 
href="www.py4inf.com/code/mbox-short.txt" class="url" ><span 
class="pcrr7tn-">www.py4inf.com/code/mbox-short.txt</span></a>. These files
are in a standard format for a file containing multiple mail messages. The lines which start with &#8220;From
&#8221; separate the messages and the lines which start with &#8220;From:&#8221; are part of the messages. For more
information, see <a 
href="en.wikipedia.org/wiki/Mbox" class="url" ><span 
class="pcrr7tn-">en.wikipedia.org/wiki/Mbox</span></a>.
<!--l. 4290--><p class="noindent" >To break the file into lines, there is a special character that represents the &#8220;end of the line&#8221; called the
<span 
class="ptmb7t-">newline </span>character.
<a 
 id="dx1-9012"></a>
<!--l. 4294--><p class="noindent" >In Python, we represent the <span 
class="ptmb7t-">newline </span>character as a backslash-n in string constants. Even
though this looks like two characters, it is actually a single character. When we look at the
variable by entering &#8220;stuff&#8221; in the interpreter, it shows us the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span> in the string, but when
we use <span 
class="pcrr7tn-">print </span>to show the string, we see the string broken into two lines by the newline
character.

<div class="verbatim" id="verbatim-175">
&#x003E;&#x003E;&#x003E;&#x00A0;stuff&#x00A0;=&#x00A0;&#8217;Hello\nWorld!&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;stuff
&#x00A0;<br />&#8217;Hello\nWorld!&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;stuff
&#x00A0;<br />Hello
&#x00A0;<br />World!
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;stuff&#x00A0;=&#x00A0;&#8217;X\nY&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;stuff
&#x00A0;<br />X
&#x00A0;<br />Y
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;len(stuff)
&#x00A0;<br />3</div>
<!--l. 4315--><p class="nopar" >
<!--l. 4319--><p class="noindent" >You can also see that the length of the string <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">X\nY</span><span 
class="pcrr8c-">&#8217;</span></span></span> is <span 
class="ptmri7t-">three </span>characters because the newline character
is a single character.
<!--l. 4322--><p class="noindent" >So when we look at the lines in a file, we need to <span 
class="ptmri7t-">imagine </span>that there is a special invisible character at
the end of each line that marks the end of the line called the newline.
<!--l. 4327--><p class="noindent" ><span 
class="pcrr7tn-">From stephen.marquard@uct.ac.za Sat Jan 5 09:14:16 2008</span><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span><br 
class="newline" /><span 
class="pcrr7tn-">Return-Path: &#x003C;postmaster@collab.sakaiproject.org&#x003E;</span><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span><br 
class="newline" /><span 
class="pcrr7tn-">Date: Sat, 5 Jan 2008 09:12:18 -0500</span><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span><br 
class="newline" /><span 
class="pcrr7tn-">To: source@collab.sakaiproject.org</span><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span><br 
class="newline" /><span 
class="pcrr7tn-">From: stephen.marquard@uct.ac.za</span><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span><br 
class="newline" /><span 
class="pcrr7tn-">Subject: [sakai] svn commit: r39772 - content/branches/</span><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span><br 
class="newline" /><span 
class="pcrr7tn-">Details: http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772</span><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span><br 
class="newline" /><span 
class="pcrr7tn-">...</span>
<!--l. 4337--><p class="noindent" >So the newline character separates the characters in the file into lines.
<!--l. 4340--><p class="noindent" >
<a 
 id="x1-9013r4"></a>
<!--l. 4340--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.4</span>   <span 
class="ptmb7t-x-x-144">Reading files</span>
<a 
 id="Q1-1-92"></a>
<a 
 id="dx1-9014"></a>
<a 
 id="dx1-9015"></a>
<!--l. 4344--><p class="noindent" >While the <span 
class="ptmb7t-">file handle </span>does not contain the data for the file, it is quite easy to construct a <span 
class="pcrr7tn-">for </span>loop to
read through and count each of the lines in a file:

<div class="verbatim" id="verbatim-176">
fhand&#x00A0;=&#x00A0;open(&#8217;mbox.txt&#8217;)
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;&#8217;Line&#x00A0;Count:&#8217;,&#x00A0;count
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;open.py
&#x00A0;<br />Line&#x00A0;Count:&#x00A0;132045</div>
<!--l. 4358--><p class="nopar" > We can use the file handle as the sequence in our <span 
class="pcrr7tn-">for </span>loop. Our <span 
class="pcrr7tn-">for </span>loop simply counts the
number of lines in the file and prints them out. The rough translation of the <span 
class="pcrr7tn-">for </span>loop into
English is, &#8220;for each line in the file represented by the file handle, add one to the <span 
class="pcrr7tn-">count</span>
variable.&#8221;
<!--l. 4367--><p class="noindent" >The reason that the <span 
class="pcrr7tn-">open </span>function does not read the entire file is that the file might be quite
large with many gigabytes of data. The <span 
class="pcrr7tn-">open </span>statement takes the same amount of time
regardless of the size of the file. The <span 
class="pcrr7tn-">for </span>loop actually causes the data to be read from the
file.
<!--l. 4373--><p class="noindent" >When the file is read using a <span 
class="pcrr7tn-">for </span>loop in this manner, Python takes care of splitting the data in the file
into separate lines using the newline character. Python reads each line through the newline and
includes the newline as the last character in the <span 
class="pcrr7tn-">line </span>variable for each iteration of the <span 
class="pcrr7tn-">for</span>
loop.
<!--l. 4380--><p class="noindent" >Because the for loop reads the data one line at a time, it can efficiently read and count the lines in very
large files without running out of main memory to store the data. The above program can count the
lines in any size file using very little memory since each line is read, counted, and then
discarded.
<!--l. 4386--><p class="noindent" >If you know the file is relatively small compared to the size of your main memory, you can read the
whole file into one string using the <span 
class="pcrr7tn-">read </span>method on the file handle.

<div class="verbatim" id="verbatim-177">
&#x003E;&#x003E;&#x003E;&#x00A0;fhand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;inp&#x00A0;=&#x00A0;fhand.read()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;len(inp)
&#x00A0;<br />94626
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;inp[:20]
&#x00A0;<br />From&#x00A0;stephen.marquar</div>
<!--l. 4398--><p class="nopar" > In this example, the entire contents (all 94,626 characters) of the file <span 
class="pcrr7tn-">mbox-short.txt </span>are read
directly into the variable <span 
class="pcrr7tn-">inp</span>. We use string slicing to print out the first 20 characters of the string data
stored in <span 
class="pcrr7tn-">inp</span>.
<!--l. 4406--><p class="noindent" >When the file is read in this manner, all the characters including all of the lines and newline characters
are one big string in the variable <span 
class="ptmb7t-">inp</span>. Remember that this form of the <span 
class="pcrr7tn-">open </span>function should only be
used if the file data will fit comfortably in the main memory of your computer.
<!--l. 4413--><p class="noindent" >If the file is too large to fit in main memory, you should write your program to read the file in chunks
using a <span 
class="pcrr7tn-">for </span>or <span 
class="pcrr7tn-">while </span>loop.
<!--l. 4417--><p class="noindent" >
<a 
 id="x1-9016r5"></a>
<!--l. 4417--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.5</span>   <span 
class="ptmb7t-x-x-144">Searching through a file</span>
<a 
 id="Q1-1-93"></a>
<!--l. 4419--><p class="noindent" >When you are searching through data in a file, it is a very common pattern to read through a
file, ignoring most of the lines and only processing lines which meet a particular criteria.
We can combine the pattern for reading a file with string <span 
class="ptmb7t-">methods </span>to build simple search
mechanisms.
<a 
 id="dx1-9017"></a>
<a 
 id="dx1-9018"></a>
<!--l. 4427--><p class="noindent" >For example, if we wanted to read a file and only print out lines which started with the prefix
&#8220;From:&#8221;, we could use the string method <span 
class="ptmb7t-">startswith </span>to select only those lines with the desired
prefix:

<div class="verbatim" id="verbatim-178">
fhand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line.startswith(&#8217;From:&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line</div>
<!--l. 4438--><p class="nopar" > When this program runs, we get the following output:

<div class="verbatim" id="verbatim-179">
From:&#x00A0;stephen.marquard@uct.ac.za
&#x00A0;<br />
&#x00A0;<br />From:&#x00A0;louis@media.berkeley.edu
&#x00A0;<br />
&#x00A0;<br />From:&#x00A0;zqian@umich.edu
&#x00A0;<br />
&#x00A0;<br />From:&#x00A0;rjlowe@iupui.edu
&#x00A0;<br />...</div>
<!--l. 4453--><p class="nopar" > The output looks great since the only lines we are seeing are those which start with &#8220;From:&#8221;, but why
are we seeing the extra blank lines? This is due to that invisible <span 
class="ptmb7t-">newline </span>character. Each of the lines
ends with a newline, so the <span 
class="pcrr7tn-">print </span>statement prints the string in the variable <span 
class="ptmb7t-">line </span>which includes a
newline and then <span 
class="pcrr7tn-">print </span>adds <span 
class="ptmri7t-">another </span>newline, resulting in the double spacing effect we
see.
<!--l. 4464--><p class="noindent" >We could use line slicing to print all but the last character, but a simpler approach is to use the <span 
class="ptmb7t-">rstrip</span>
method which strips whitespace from the right side of a string as follows:

<div class="verbatim" id="verbatim-180">
fhand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line.startswith(&#8217;From:&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line</div>
<!--l. 4475--><p class="nopar" > When this program runs, we get the following output:

<div class="verbatim" id="verbatim-181">
From:&#x00A0;stephen.marquard@uct.ac.za
&#x00A0;<br />From:&#x00A0;louis@media.berkeley.edu
&#x00A0;<br />From:&#x00A0;zqian@umich.edu
&#x00A0;<br />From:&#x00A0;rjlowe@iupui.edu
&#x00A0;<br />From:&#x00A0;zqian@umich.edu
&#x00A0;<br />From:&#x00A0;rjlowe@iupui.edu
&#x00A0;<br />From:&#x00A0;cwen@iupui.edu
&#x00A0;<br />...</div>
<!--l. 4490--><p class="nopar" > As your file processing programs get more complicated, you may want to structure your search loops
using <span 
class="pcrr7tn-">continue</span>. The basic idea of the search loop is that you are looking for &#8220;interesting&#8221; lines and
effectively skipping &#8220;uninteresting&#8221; lines. And then when we find an interesting line, we do something
with that line.
<!--l. 4499--><p class="noindent" >We can structure the loop to follow the pattern of skipping uninteresting lines as follows:

<div class="verbatim" id="verbatim-182">
fhand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;Skip&#x00A0;&#8217;uninteresting&#x00A0;lines&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;not&#x00A0;line.startswith(&#8217;From:&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;Process&#x00A0;our&#x00A0;&#8217;interesting&#8217;&#x00A0;line
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line</div>
<!--l. 4512--><p class="nopar" > The output of the program is the same. In English, the uninteresting lines are those which do not start
with &#8220;From:&#8221;, which we skip using <span 
class="pcrr7tn-">continue</span>. For the &#8220;interesting&#8221; lines (i.e. those that start with
&#8220;From:&#8221;) we perform the processing on those lines.
<!--l. 4521--><p class="noindent" >We can use the <span 
class="pcrr7tn-">find </span>string method to simulate a text editor search which finds lines where the search
string is anywhere in the line. Since <span 
class="pcrr7tn-">find </span>looks for an occurrence of a string within another string and
either returns the position of the string or -1 if the string was not found, we can write the following
loop to show lines which contain the string &#8220;@uct.ac.za&#8221; (i.e. they come from the University of Cape
Town in South Africa):

<div class="verbatim" id="verbatim-183">
fhand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line.find(&#8217;@uct.ac.za&#8217;)&#x00A0;==&#x00A0;-1&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line</div>
<!--l. 4537--><p class="nopar" > Which produces the following output:

<div class="verbatim" id="verbatim-184">
From&#x00A0;stephen.marquard@uct.ac.za&#x00A0;Sat&#x00A0;Jan&#x00A0;&#x00A0;5&#x00A0;09:14:16&#x00A0;2008
&#x00A0;<br />X-Authentication-Warning:&#x00A0;set&#x00A0;sender&#x00A0;to&#x00A0;stephen.marquard@uct.ac.za&#x00A0;using&#x00A0;-f
&#x00A0;<br />From:&#x00A0;stephen.marquard@uct.ac.za
&#x00A0;<br />Author:&#x00A0;stephen.marquard@uct.ac.za
&#x00A0;<br />From&#x00A0;david.horwitz@uct.ac.za&#x00A0;Fri&#x00A0;Jan&#x00A0;&#x00A0;4&#x00A0;07:02:32&#x00A0;2008
&#x00A0;<br />X-Authentication-Warning:&#x00A0;set&#x00A0;sender&#x00A0;to&#x00A0;david.horwitz@uct.ac.za&#x00A0;using&#x00A0;-f
&#x00A0;<br />From:&#x00A0;david.horwitz@uct.ac.za
&#x00A0;<br />Author:&#x00A0;david.horwitz@uct.ac.za
&#x00A0;<br />...</div>
<!--l. 4553--><p class="nopar" >
<!--l. 4557--><p class="noindent" >
<a 
 id="x1-9019r6"></a>
<!--l. 4557--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.6</span>   <span 
class="ptmb7t-x-x-144">Letting the user choose the file name</span>
<a 
 id="Q1-1-94"></a>
<!--l. 4559--><p class="noindent" >We really do not want to have to edit our Python code every time we want to process a different
file. It would be more usable to ask the user to enter the file name string each time the
program runs so they can use our program on different files without changing the Python
code.
<!--l. 4565--><p class="noindent" >This is quite simple to do by reading the file name from the user using <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">raw_input</span></span></span> as follows:

<div class="verbatim" id="verbatim-185">
fname&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;&#8217;)
&#x00A0;<br />fhand&#x00A0;=&#x00A0;open(fname)
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line.startswith(&#8217;Subject:&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;&#8217;There&#x00A0;were&#8217;,&#x00A0;count,&#x00A0;&#8217;subject&#x00A0;lines&#x00A0;in&#8217;,&#x00A0;fname</div>
<!--l. 4577--><p class="nopar" > We read the file name from the user and place it in a variable named <span 
class="pcrr7tn-">fname </span>and open that file. Now we
can run the program repeatedly on different files.

<div class="verbatim" id="verbatim-186">
python&#x00A0;search6.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;mbox.txt
&#x00A0;<br />There&#x00A0;were&#x00A0;1797&#x00A0;subject&#x00A0;lines&#x00A0;in&#x00A0;mbox.txt
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;search6.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;mbox-short.txt
&#x00A0;<br />There&#x00A0;were&#x00A0;27&#x00A0;subject&#x00A0;lines&#x00A0;in&#x00A0;mbox-short.txt</div>
<!--l. 4593--><p class="nopar" > Before peeking at the next section, take a look at the above program and ask yourself, &#8220;What could go
possibly wrong here?&#8221; or &#8220;What might our friendly user do that would cause our nice little
program to ungracefully exit with a traceback, making us look not-so-cool in the eyes of our
users?&#8221;.
<!--l. 4602--><p class="noindent" >
<a 
 id="x1-9020r7"></a>
<!--l. 4602--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.7</span>   <span 
class="ptmb7t-x-x-144">Using </span><span 
class="pcrr7tn-x-x-144">try, except, </span><span 
class="ptmb7t-x-x-144">and </span><span 
class="pcrr7tn-x-x-144">open</span>
<a 
 id="Q1-1-95"></a>
<!--l. 4604--><p class="noindent" >I told you not to peek. This is your last chance.
<!--l. 4606--><p class="noindent" >What if our user types something that is not a file name?

<div class="verbatim" id="verbatim-187">
python&#x00A0;search6.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;missing.txt
&#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"search6.py",&#x00A0;line&#x00A0;2,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand&#x00A0;=&#x00A0;open(fname)
&#x00A0;<br />IOError:&#x00A0;[Errno&#x00A0;2]&#x00A0;No&#x00A0;such&#x00A0;file&#x00A0;or&#x00A0;directory:&#x00A0;&#8217;missing.txt&#8217;
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;search6.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;na&#x00A0;na&#x00A0;boo&#x00A0;boo
&#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
&#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"search6.py",&#x00A0;line&#x00A0;2,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand&#x00A0;=&#x00A0;open(fname)
&#x00A0;<br />IOError:&#x00A0;[Errno&#x00A0;2]&#x00A0;No&#x00A0;such&#x00A0;file&#x00A0;or&#x00A0;directory:&#x00A0;&#8217;na&#x00A0;na&#x00A0;boo&#x00A0;boo&#8217;</div>
<!--l. 4622--><p class="nopar" > Do not laugh, users will eventually do every possible thing they can do to break your programs &#8212;
either on purpose or with malicious intent. As a matter of fact, an important part of any software
development team is a person or group called <span 
class="ptmb7t-">Quality Assurance </span>(or QA for short) whose very job it
is to do the craziest things possible in an attempt to break the software that the programmer has
created.
<a 
 id="dx1-9021"></a>
<a 
 id="dx1-9022"></a>
<!--l. 4634--><p class="noindent" >The QA team is responsible for finding the flaws in programs before we have delivered the program to
the end-users who may be purchasing the software or paying our salary to write the software. So the
QA team is the programmer&#8217;s best friend.
<a 
 id="dx1-9023"></a>
<a 
 id="dx1-9024"></a>
<a 
 id="dx1-9025"></a>
<a 
 id="dx1-9026"></a>
<a 
 id="dx1-9027"></a>
<a 
 id="dx1-9028"></a>
<!--l. 4645--><p class="noindent" >So now that we see the flaw in the program, we can elegantly fix it using the <span 
class="pcrr7tn-">try</span>/<span 
class="pcrr7tn-">except </span>structure. We
need to assume that the <span 
class="pcrr7tn-">open </span>call might fail and add recovery code when the <span 
class="pcrr7tn-">open </span>fails as
follows:

<div class="verbatim" id="verbatim-188">
fname&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;&#8217;)
&#x00A0;<br />try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand&#x00A0;=&#x00A0;open(fname)
&#x00A0;<br />except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;File&#x00A0;cannot&#x00A0;be&#x00A0;opened:&#8217;,&#x00A0;fname
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;exit()
&#x00A0;<br />
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;line.startswith(&#8217;Subject:&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;&#8217;There&#x00A0;were&#8217;,&#x00A0;count,&#x00A0;&#8217;subject&#x00A0;lines&#x00A0;in&#8217;,&#x00A0;fname</div>
<!--l. 4664--><p class="nopar" > The <span 
class="pcrr7tn-">exit </span>function terminates the program. It is a function that we call that never returns. Now when
our user (or QA team) types in silliness or bad file names, we &#8220;catch&#8221; them and recover gracefully:

<div class="verbatim" id="verbatim-189">
python&#x00A0;search7.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;mbox.txt
&#x00A0;<br />There&#x00A0;were&#x00A0;1797&#x00A0;subject&#x00A0;lines&#x00A0;in&#x00A0;mbox.txt
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;search7.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;na&#x00A0;na&#x00A0;boo&#x00A0;boo
&#x00A0;<br />File&#x00A0;cannot&#x00A0;be&#x00A0;opened:&#x00A0;na&#x00A0;na&#x00A0;boo&#x00A0;boo</div>
<!--l. 4680--><p class="nopar" ><a 
 id="dx1-9029"></a> Protecting the <span 
class="pcrr7tn-">open </span>call is a good example of the proper use of <span 
class="pcrr7tn-">try </span>and <span 
class="pcrr7tn-">except </span>in a Python program.
We use the term &#8220;Pythonic&#8221; when we are doing something the &#8220;Python way&#8221;. We might say that the
above example is the Pythonic way to open a file.
<!--l. 4691--><p class="noindent" >Once you become more skilled in Python, you can engage in repartee&#8217; with other Python programmers
to decide which of two equivalent solutions to a problem is &#8220;more Pythonic&#8221;. The goal to be &#8220;more
Pythonic&#8221; captures the notion that programming is part engineering and part art. We are not always
interested in just making something work, we also want our solution to be elegant and to be
appreciated as elegant by our peers.
<!--l. 4702--><p class="noindent" >
<a 
 id="x1-9030r8"></a>
<!--l. 4702--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.8</span>   <span 
class="ptmb7t-x-x-144">Writing files</span>
<a 
 id="Q1-1-96"></a>
<a 
 id="dx1-9031"></a>
<!--l. 4706--><p class="noindent" >To write a file, you have to open it with mode <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">w</span><span 
class="pcrr8c-">&#8217;</span></span></span> as a second parameter:

<div class="verbatim" id="verbatim-190">
&#x003E;&#x003E;&#x003E;&#x00A0;fout&#x00A0;=&#x00A0;open(&#8217;output.txt&#8217;,&#x00A0;&#8217;w&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;fout
&#x00A0;<br />&#x003C;open&#x00A0;file&#x00A0;&#8217;output.txt&#8217;,&#x00A0;mode&#x00A0;&#8217;w&#8217;&#x00A0;at&#x00A0;0xb7eb2410&#x003E;</div>
<!--l. 4714--><p class="nopar" > If the file already exists, opening it in write mode clears out the old data and starts fresh, so be careful!
If the file doesn&#8217;t exist, a new one is created.
<!--l. 4721--><p class="noindent" >The <span 
class="pcrr7tn-">write </span>method of the file handle object puts data into the file.

<div class="verbatim" id="verbatim-191">
&#x003E;&#x003E;&#x003E;&#x00A0;line1&#x00A0;=&#x00A0;&#8217;This&#x00A0;here&#8217;s&#x00A0;the&#x00A0;wattle,\n&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;fout.write(line1)</div>
<!--l. 4728--><p class="nopar" ><a 
 id="dx1-9032"></a> Again, the file object keeps track of where it is, so if you call <span 
class="pcrr7tn-">write </span>again, it adds the new data to the
end.
<!--l. 4735--><p class="noindent" >We must make sure to manage the ends of lines as we write to the file by explicitly inserting the
newline character when we want to end a line. The <span 
class="pcrr7tn-">print </span>statement automatically appends a newline,
but the <span 
class="pcrr7tn-">write </span>method does not add the newline automatically.

<div class="verbatim" id="verbatim-192">
&#x003E;&#x003E;&#x003E;&#x00A0;line2&#x00A0;=&#x00A0;&#8217;the&#x00A0;emblem&#x00A0;of&#x00A0;our&#x00A0;land.\n&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;fout.write(line2)</div>
<!--l. 4745--><p class="nopar" > When you are done writing, you have to close the file to make sure that the last bit of data is physically
written to the disk so it will not be lost if the power goes off.

<div class="verbatim" id="verbatim-193">
&#x003E;&#x003E;&#x003E;&#x00A0;fout.close()</div>
<!--l. 4755--><p class="nopar" > We could close the files which we open for read as well, but we can be a little sloppy if we are only
opening a few files since Python makes sure that all open files are closed when the program ends.
When we are writing files, we want to explicitly close the files so as to leave nothing to
chance.
<a 
 id="dx1-9033"></a>
<a 
 id="dx1-9034"></a>
<!--l. 4769--><p class="noindent" >
<a 
 id="x1-9035r9"></a>
<!--l. 4769--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.9</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-97"></a>
<a 
 id="dx1-9036"></a>
<a 
 id="dx1-9037"></a>
<!--l. 4774--><p class="noindent" >When you are reading and writing files, you might run into problems with whitespace. These errors
can be hard to debug because spaces, tabs and newlines are normally invisible:

<div class="verbatim" id="verbatim-194">
&#x003E;&#x003E;&#x003E;&#x00A0;s&#x00A0;=&#x00A0;&#8217;1&#x00A0;2\t&#x00A0;3\n&#x00A0;4&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;s
&#x00A0;<br />1&#x00A0;2 &#x00A0;3
&#x00A0;<br />&#x00A0;4</div>
<!--l. 4784--><p class="nopar" >
<a 
 id="dx1-9038"></a>
<a 
 id="dx1-9039"></a>
<a 
 id="dx1-9040"></a>
<!--l. 4791--><p class="noindent" >The built-in function <span 
class="pcrr7tn-">repr </span>can help. It takes any object as an argument and returns a string
representation of the object. For strings, it represents whitespace characters with backslash
sequences:

<div class="verbatim" id="verbatim-195">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;repr(s)
&#x00A0;<br />&#8217;1&#x00A0;2\t&#x00A0;3\n&#x00A0;4&#8217;</div>
<!--l. 4800--><p class="nopar" >
<!--l. 4803--><p class="noindent" >This can be helpful for debugging.
<!--l. 4805--><p class="noindent" >One other problem you might run into is that different systems use different characters to indicate the
end of a line. Some systems use a newline, represented <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\n</span></span></span>. Others use a return character, represented
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\r</span></span></span>. Some use both. If you move files between different systems, these inconsistencies might cause
problems.
<a 
 id="dx1-9041"></a>
<!--l. 4814--><p class="noindent" >For most systems, there are applications to convert from one format to another. You can find them (and
read more about this issue) at <a 
href="wikipedia.org/wiki/Newline" class="url" ><span 
class="pcrr7tn-">wikipedia.org/wiki/Newline</span></a>. Or, of course, you could write one
yourself.
<!--l. 4821--><p class="noindent" >
<a 
 id="x1-9042r10"></a>
<!--l. 4821--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.10</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-98"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">catch:</span> </dt><dd 
class="description">To  prevent  an  exception  from  terminating  a  program  using  the  <span 
class="pcrr7tn-">try </span>and  <span 
class="pcrr7tn-">except</span>
     statements. <a 
 id="dx1-9043"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">newline:</span> </dt><dd 
class="description">A special character used in files and strings to indicate the end of a line. <a 
 id="dx1-9044"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">Pythonic:</span> </dt><dd 
class="description">A technique that works elegantly in Python. &#8220;Using try and except is the <span 
class="ptmri7t-">Pythonic</span>
     way to recover from missing files.&#8221;. <a 
 id="dx1-9045"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">Quality Assurance:</span> </dt><dd 
class="description">A person or team focused on insuring the overall quality of a software
     product. QA is often involved in testing a product and identifying problems before the
     product is released. <a 
 id="dx1-9046"></a><a 
 id="dx1-9047"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">text file:</span> </dt><dd 
class="description">A sequence of characters stored in permanent storage like a hard drive. <a 
 id="dx1-9048"></a>
     </dd></dl>
<!--l. 4853--><p class="noindent" >
<a 
 id="x1-9049r11"></a>
<!--l. 4853--><p class="noindent" ><span 
class="ptmb7t-x-x-144">7.11</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-99"></a>
<div class="newtheorem">
<!--l. 4855--><p class="noindent" ><span class="head">
<a 
 id="x1-9050r1"></a>
<span 
class="ptmb7t-">Exercise 7.1</span>  </span>Write a program to read through a file and print the contents of the file (line by
line) all in upper case. Executing the program will look as follows:

<div class="verbatim" id="verbatim-196">
python&#x00A0;shout.py
&#x00A0;<br />Enter&#x00A0;a&#x00A0;file&#x00A0;name:&#x00A0;mbox-short.txt
&#x00A0;<br />FROM&#x00A0;STEPHEN.MARQUARD@UCT.AC.ZA&#x00A0;SAT&#x00A0;JAN&#x00A0;&#x00A0;5&#x00A0;09:14:16&#x00A0;2008
&#x00A0;<br />RETURN-PATH:&#x00A0;&#x003C;POSTMASTER@COLLAB.SAKAIPROJECT.ORG&#x003E;
&#x00A0;<br />RECEIVED:&#x00A0;FROM&#x00A0;MURDER&#x00A0;(MAIL.UMICH.EDU&#x00A0;[141.211.14.90])
&#x00A0;<br />&#x00A0;BY&#x00A0;FRANKENSTEIN.MAIL.UMICH.EDU&#x00A0;(CYRUS&#x00A0;V2.3.8)&#x00A0;WITH&#x00A0;LMTPA;
&#x00A0;<br />&#x00A0;SAT,&#x00A0;05&#x00A0;JAN&#x00A0;2008&#x00A0;09:14:16&#x00A0;-0500</div>
<!--l. 4869--><p class="nopar" > You can download the file from <a 
href="www.py4inf.com/code/mbox-short.txt" class="url" ><span 
class="pcrr7tn-">www.py4inf.com/code/mbox-short.txt</span></a>
</div>
<div class="newtheorem">
<!--l. 4876--><p class="noindent" ><span class="head">
<a 
 id="x1-9051r2"></a>
<span 
class="ptmb7t-">Exercise 7.2</span>  </span>Write a program to prompt for a file name, and then read through the file and look
for lines of the form:
<!--l. 4882--><p class="noindent" ><span 
class="pcrr7tn-">X-DSPAM-Confidence: </span><span 
class="ptmb7t-">0.8475</span>
<!--l. 4885--><p class="noindent" >When  you  encounter  a  line  that  starts  with  &#8220;X-DSPAM-Confidence:&#8221;  pull  apart  the  line  to
extract the floating point number on the line. Count these lines and the compute the total of
the spam confidence values from these lines. When you reach the end of the file, print out the
average spam confidence.

<div class="verbatim" id="verbatim-197">
Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;mbox.txt
&#x00A0;<br />Average&#x00A0;spam&#x00A0;confidence:&#x00A0;0.894128046745
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;mbox-short.txt
&#x00A0;<br />Average&#x00A0;spam&#x00A0;confidence:&#x00A0;0.750718518519</div>
<!--l. 4900--><p class="nopar" > Test your file on the <span 
class="pcrr7tn-">mbox.txt </span>and <span 
class="pcrr7tn-">mbox-short.txt </span>files.
</div>
<div class="newtheorem">
<!--l. 4907--><p class="noindent" ><span class="head">
<a 
 id="x1-9052r3"></a>
<span 
class="ptmb7t-">Exercise 7.3</span>  </span>Sometimes when programmers get bored or want to have a bit of fun, they add
a harmless <span 
class="ptmb7t-">Easter Egg </span>to their program (<a 
href="en.wikipedia.org/wiki/Easter_egg_(media)" class="url" ><span 
class="pcrr7tn-">en.wikipedia.org/wiki/Easter_egg_(media)</span></a>).
Modify the program that prompts the user for the file name so that it prints a funny message
when the user types in the exact file name &#8217;na na boo boo&#8217;. The program should behave normally
for all other files which exist and don&#8217;t exist. Here is a sample execution of the program:

<div class="verbatim" id="verbatim-198">
python&#x00A0;egg.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;mbox.txt
&#x00A0;<br />There&#x00A0;were&#x00A0;1797&#x00A0;subject&#x00A0;lines&#x00A0;in&#x00A0;mbox.txt
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;egg.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;missing.tyxt
&#x00A0;<br />File&#x00A0;cannot&#x00A0;be&#x00A0;opened:&#x00A0;missing.tyxt
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;egg.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;na&#x00A0;na&#x00A0;boo&#x00A0;boo
&#x00A0;<br />NA&#x00A0;NA&#x00A0;BOO&#x00A0;BOO&#x00A0;TO&#x00A0;YOU&#x00A0;-&#x00A0;You&#x00A0;have&#x00A0;been&#x00A0;punk&#8217;d!</div>
<!--l. 4929--><p class="nopar" > We are not encouraging you to put Easter Eggs in your programs - this is just an exercise.
</div>

<!--l. 4937--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;8</span><br /><a 
 id="x1-100008"></a>Lists</h2>
<a 
 id="dx1-10001"></a>
<a 
 id="dx1-10002"></a>
<a 
 id="x1-10003r1"></a>
<span 
class="ptmb7t-x-x-144">8.1</span>   <span 
class="ptmb7t-x-x-144">A list is a sequence</span>
<a 
 id="Q1-1-101"></a>
<!--l. 4945--><p class="noindent" >Like a string, a <span 
class="ptmb7t-">list </span>is a sequence of values. In a string, the values are characters; in a list, they can be
any type. The values in list are called <span 
class="ptmb7t-">elements </span>or sometimes <span 
class="ptmb7t-">items</span>.
<a 
 id="dx1-10004"></a>
<a 
 id="dx1-10005"></a>
<a 
 id="dx1-10006"></a>
<!--l. 4953--><p class="noindent" >There are several ways to create a new list; the simplest is to enclose the elements in square brackets (<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">[</span></span></span>
and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">]</span></span></span>):

<div class="verbatim" id="verbatim-199">
[10,&#x00A0;20,&#x00A0;30,&#x00A0;40]
&#x00A0;<br />[&#8217;crunchy&#x00A0;frog&#8217;,&#x00A0;&#8217;ram&#x00A0;bladder&#8217;,&#x00A0;&#8217;lark&#x00A0;vomit&#8217;]</div>
<!--l. 4960--><p class="nopar" > The first example is a list of four integers. The second is a list of three strings. The elements of a list
don&#8217;t have to be the same type. The following list contains a string, a float, an integer, and (lo!) another
list:

<div class="verbatim" id="verbatim-200">
[&#8217;spam&#8217;,&#x00A0;2.0,&#x00A0;5,&#x00A0;[10,&#x00A0;20]]</div>
<!--l. 4971--><p class="nopar" > A list within another list is <span 
class="ptmb7t-">nested</span>.
<a 
 id="dx1-10007"></a>
<a 
 id="dx1-10008"></a>
<!--l. 4979--><p class="noindent" >A list that contains no elements is called an empty list; you can create one with empty brackets,
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">[]</span></span></span>.
<a 
 id="dx1-10009"></a>
<a 
 id="dx1-10010"></a>
<!--l. 4986--><p class="noindent" >As you might expect, you can assign list values to variables:

<div class="verbatim" id="verbatim-201">
&#x003E;&#x003E;&#x003E;&#x00A0;cheeses&#x00A0;=&#x00A0;[&#8217;Cheddar&#8217;,&#x00A0;&#8217;Edam&#8217;,&#x00A0;&#8217;Gouda&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;numbers&#x00A0;=&#x00A0;[17,&#x00A0;123]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;empty&#x00A0;=&#x00A0;[]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;cheeses,&#x00A0;numbers,&#x00A0;empty
&#x00A0;<br />[&#8217;Cheddar&#8217;,&#x00A0;&#8217;Edam&#8217;,&#x00A0;&#8217;Gouda&#8217;]&#x00A0;[17,&#x00A0;123]&#x00A0;[]</div>
<!--l. 4995--><p class="nopar" >
<a 
 id="dx1-10011"></a>
<!--l. 5001--><p class="noindent" >
<a 
 id="x1-10012r2"></a>
<!--l. 5001--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.2</span>   <span 
class="ptmb7t-x-x-144">Lists are mutable</span>
<a 
 id="Q1-1-102"></a>
<a 
 id="dx1-10013"></a>
<a 
 id="dx1-10014"></a>
<a 
 id="dx1-10015"></a>
<a 
 id="dx1-10016"></a>
<a 
 id="dx1-10017"></a>
<!--l. 5009--><p class="noindent" >The syntax for accessing the elements of a list is the same as for accessing the characters of a
string&#8212;the bracket operator. The expression inside the brackets specifies the index. Remember that the
indices start at 0:

<div class="verbatim" id="verbatim-202">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;cheeses[0]
&#x00A0;<br />Cheddar</div>
<!--l. 5018--><p class="nopar" > Unlike strings, lists are mutable because you can change the order of items in a list or reassign an item
in a list. When the bracket operator appears on the left side of an assignment, it identifies the element
of the list that will be assigned.
<a 
 id="dx1-10018"></a>

<div class="verbatim" id="verbatim-203">
&#x003E;&#x003E;&#x003E;&#x00A0;numbers&#x00A0;=&#x00A0;[17,&#x00A0;123]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;numbers[1]&#x00A0;=&#x00A0;5
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;numbers
&#x00A0;<br />[17,&#x00A0;5]</div>
<!--l. 5034--><p class="nopar" > The one-eth element of <span 
class="pcrr7tn-">numbers</span>, which used to be 123, is now 5.
<a 
 id="dx1-10019"></a>
<a 
 id="dx1-10020"></a>
<!--l. 5043--><p class="noindent" >You can think of a list as a relationship between indices and elements. This relationship is called a
<span 
class="ptmb7t-">mapping</span>; each index &#8220;maps to&#8221; one of the elements. Here is a state diagram showing <span 
class="pcrr7tn-">cheeses</span>,
<span 
class="pcrr7tn-">numbers </span>and <span 
class="pcrr7tn-">empty</span>:
<a 
 id="dx1-10021"></a>
<a 
 id="dx1-10022"></a>
<a 
 id="dx1-10023"></a>
<div  
class="centerline">             <img 
src="cfbook16x.png" alt="PIC" class="graphics" width="218.81749pt" height="204.765pt" ><!--tex4ht:graphics  
name="cfbook16x.png" src="figs/list_state.eps"  
-->             </div>
<!--l. 5056--><p class="noindent" >Lists are represented by boxes with the word &#8220;list&#8221; outside and the elements of the list inside. <span 
class="pcrr7tn-">cheeses</span>
refers to a list with three elements indexed 0, 1 and 2. <span 
class="pcrr7tn-">numbers </span>contains two elements; the diagram
shows that the value of the second element has been reassigned from 123 to 5. <span 
class="pcrr7tn-">empty </span>refers to a list
with no elements.
<a 
 id="dx1-10024"></a>
<a 
 id="dx1-10025"></a>

<!--l. 5066--><p class="noindent" >List indices work the same way as string indices:
     <ul class="itemize1">
     <li class="itemize">Any integer expression can be used as an index.
     </li>
     <li class="itemize">If you try to read or write an element that does not exist, you get an <span 
class="pcrr7tn-">IndexError</span>.
<a 
 id="dx1-10026"></a>
<a 
 id="dx1-10027"></a>
     </li>
     <li class="itemize">If an index has a negative value, it counts backward from the end of the list.
     </li></ul>
<a 
 id="dx1-10028"></a>
<a 
 id="dx1-10029"></a>
<a 
 id="dx1-10030"></a>
<a 
 id="dx1-10031"></a>
<a 
 id="dx1-10032"></a>
<!--l. 5091--><p class="noindent" >The <span 
class="pcrr7tn-">in </span>operator also works on lists.

<div class="verbatim" id="verbatim-204">
&#x003E;&#x003E;&#x003E;&#x00A0;cheeses&#x00A0;=&#x00A0;[&#8217;Cheddar&#8217;,&#x00A0;&#8217;Edam&#8217;,&#x00A0;&#8217;Gouda&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;Edam&#8217;&#x00A0;in&#x00A0;cheeses
&#x00A0;<br />True
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;Brie&#8217;&#x00A0;in&#x00A0;cheeses
&#x00A0;<br />False</div>
<!--l. 5100--><p class="nopar" >
<!--l. 5104--><p class="noindent" >
<a 
 id="x1-10033r3"></a>
<!--l. 5104--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.3</span>   <span 
class="ptmb7t-x-x-144">Traversing a list</span>
<a 
 id="Q1-1-103"></a>
<a 
 id="dx1-10034"></a>
<a 
 id="dx1-10035"></a>
<a 
 id="dx1-10036"></a>
<a 
 id="dx1-10037"></a>
<a 
 id="dx1-10038"></a>
<!--l. 5111--><p class="noindent" >The most common way to traverse the elements of a list is with a <span 
class="pcrr7tn-">for </span>loop. The syntax is the same as
for strings:

<div class="verbatim" id="verbatim-205">
for&#x00A0;cheese&#x00A0;in&#x00A0;cheeses:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;cheese</div>
<!--l. 5118--><p class="nopar" > This works well if you only need to read the elements of the list. But if you want to write or update the
elements, you need the indices. A common way to do that is to combine the functions <span 
class="pcrr7tn-">range </span>and
<span 
class="pcrr7tn-">len</span>:
<a 
 id="dx1-10039"></a>
<a 
 id="dx1-10040"></a>

<div class="verbatim" id="verbatim-206">
for&#x00A0;i&#x00A0;in&#x00A0;range(len(numbers)):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;numbers[i]&#x00A0;=&#x00A0;numbers[i]&#x00A0;&#x22C6;&#x00A0;2</div>
<!--l. 5133--><p class="nopar" > This loop traverses the list and updates each element. <span 
class="pcrr7tn-">len </span>returns the number of elements in the list.
<span 
class="pcrr7tn-">range </span>returns a list of indices from 0 to <span 
class="zptmcmrm-">n</span><span 
class="zpzccmry-">-</span><span 
class="zptmcmr-">1</span>, where <span 
class="zptmcmrm-">n </span>is the length of the list. Each time through the
loop <span 
class="pcrr7tn-">i </span>gets the index of the next element. The assignment statement in the body uses <span 
class="pcrr7tn-">i </span>to read the old
value of the element and to assign the new value.
<a 
 id="dx1-10041"></a>
<a 
 id="dx1-10042"></a>
<!--l. 5147--><p class="noindent" >A <span 
class="pcrr7tn-">for </span>loop over an empty list never executes the body:

<div class="verbatim" id="verbatim-207">
for&#x00A0;x&#x00A0;in&#x00A0;empty:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;This&#x00A0;never&#x00A0;happens.&#8217;</div>
<!--l. 5153--><p class="nopar" > Although a list can contain another list, the nested list still counts as a single element. The length of
this list is four:
<a 
 id="dx1-10043"></a>
<a 
 id="dx1-10044"></a>

<div class="verbatim" id="verbatim-208">
[&#8217;spam&#8217;,&#x00A0;1,&#x00A0;[&#8217;Brie&#8217;,&#x00A0;&#8217;Roquefort&#8217;,&#x00A0;&#8217;Pol&#x00A0;le&#x00A0;Veq&#8217;],&#x00A0;[1,&#x00A0;2,&#x00A0;3]]</div>
<!--l. 5166--><p class="nopar" >
<!--l. 5171--><p class="noindent" >
<a 
 id="x1-10045r4"></a>
<!--l. 5171--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.4</span>   <span 
class="ptmb7t-x-x-144">List operations</span>
<a 
 id="Q1-1-104"></a>
<a 
 id="dx1-10046"></a>
<!--l. 5174--><p class="noindent" >The <span 
class="pcrr7tn-">+ </span>operator concatenates lists:
<a 
 id="dx1-10047"></a>
<a 
 id="dx1-10048"></a>

<div class="verbatim" id="verbatim-209">
&#x003E;&#x003E;&#x003E;&#x00A0;a&#x00A0;=&#x00A0;[1,&#x00A0;2,&#x00A0;3]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;b&#x00A0;=&#x00A0;[4,&#x00A0;5,&#x00A0;6]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;c&#x00A0;=&#x00A0;a&#x00A0;+&#x00A0;b
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;c
&#x00A0;<br />[1,&#x00A0;2,&#x00A0;3,&#x00A0;4,&#x00A0;5,&#x00A0;6]</div>
<!--l. 5186--><p class="nopar" > Similarly, the <span 
class="pcrr7tn-">&#x22C6; </span>operator repeats a list a given number of times:
<a 
 id="dx1-10049"></a>
<a 
 id="dx1-10050"></a>

<div class="verbatim" id="verbatim-210">
&#x003E;&#x003E;&#x003E;&#x00A0;[0]&#x00A0;&#x22C6;&#x00A0;4
&#x00A0;<br />[0,&#x00A0;0,&#x00A0;0,&#x00A0;0]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;[1,&#x00A0;2,&#x00A0;3]&#x00A0;&#x22C6;&#x00A0;3
&#x00A0;<br />[1,&#x00A0;2,&#x00A0;3,&#x00A0;1,&#x00A0;2,&#x00A0;3,&#x00A0;1,&#x00A0;2,&#x00A0;3]</div>
<!--l. 5200--><p class="nopar" > The first example repeats <span 
class="pcrr7tn-">[0] </span>four times. The second example repeats the list <span 
class="pcrr7tn-">[1, 2, 3] </span>three
times.
<!--l. 5207--><p class="noindent" >
<a 
 id="x1-10051r5"></a>
<!--l. 5207--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.5</span>   <span 
class="ptmb7t-x-x-144">List slices</span>
<a 
 id="Q1-1-105"></a>
<a 
 id="dx1-10052"></a>
<a 
 id="dx1-10053"></a>
<a 
 id="dx1-10054"></a>
<a 
 id="dx1-10055"></a>
<a 
 id="dx1-10056"></a>
<!--l. 5215--><p class="noindent" >The slice operator also works on lists:

<div class="verbatim" id="verbatim-211">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;,&#x00A0;&#8217;f&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t[1:3]
&#x00A0;<br />[&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t[:4]
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t[3:]
&#x00A0;<br />[&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;,&#x00A0;&#8217;f&#8217;]</div>
<!--l. 5226--><p class="nopar" > If you omit the first index, the slice starts at the beginning. If you omit the second, the slice goes to the
end. So if you omit both, the slice is a copy of the whole list.
<a 
 id="dx1-10057"></a>
<a 
 id="dx1-10058"></a>
<a 
 id="dx1-10059"></a>

<div class="verbatim" id="verbatim-212">
&#x003E;&#x003E;&#x003E;&#x00A0;t[:]
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;,&#x00A0;&#8217;f&#8217;]</div>
<!--l. 5241--><p class="nopar" > Since lists are mutable, it is often useful to make a copy before performing operations that fold,
spindle or mutilate lists.
<a 
 id="dx1-10060"></a>
<!--l. 5250--><p class="noindent" >A slice operator on the left side of an assignment can update multiple elements:
<a 
 id="dx1-10061"></a>
<a 
 id="dx1-10062"></a>

<div class="verbatim" id="verbatim-213">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;,&#x00A0;&#8217;f&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t[1:3]&#x00A0;=&#x00A0;[&#8217;x&#8217;,&#x00A0;&#8217;y&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;x&#8217;,&#x00A0;&#8217;y&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;,&#x00A0;&#8217;f&#8217;]</div>
<!--l. 5262--><p class="nopar" >
<!--l. 5266--><p class="noindent" >
<a 
 id="x1-10063r6"></a>
<!--l. 5266--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.6</span>   <span 
class="ptmb7t-x-x-144">List methods</span>
<a 
 id="Q1-1-106"></a>
<a 
 id="dx1-10064"></a>
<a 
 id="dx1-10065"></a>
<!--l. 5271--><p class="noindent" >Python provides methods that operate on lists. For example, <span 
class="pcrr7tn-">append </span>adds a new element to the end of a
list:
<a 
 id="dx1-10066"></a>
<a 
 id="dx1-10067"></a>

<div class="verbatim" id="verbatim-214">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t.append(&#8217;d&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;]</div>
<!--l. 5283--><p class="nopar" ><span 
class="pcrr7tn-">extend </span>takes a list as an argument and appends all of the elements:
<a 
 id="dx1-10068"></a>
<a 
 id="dx1-10069"></a>

<div class="verbatim" id="verbatim-215">
&#x003E;&#x003E;&#x003E;&#x00A0;t1&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t2&#x00A0;=&#x00A0;[&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t1.extend(t2)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t1
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;]</div>
<!--l. 5299--><p class="nopar" > This example leaves <span 
class="pcrr7tn-">t2 </span>unmodified.
<!--l. 5304--><p class="noindent" ><span 
class="pcrr7tn-">sort </span>arranges the elements of the list from low to high:
<a 
 id="dx1-10070"></a>
<a 
 id="dx1-10071"></a>

<div class="verbatim" id="verbatim-216">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[&#8217;d&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;e&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;a&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t.sort()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;]</div>
<!--l. 5315--><p class="nopar" > Most list methods are void; they modify the list and return <span 
class="pcrr7tn-">None</span>. If you accidentally write <span 
class="pcrr7tn-">t =</span>
<span 
class="pcrr7tn-">t.sort()</span>, you will be disappointed with the result.
<a 
 id="dx1-10072"></a>
<a 
 id="dx1-10073"></a>
<a 
 id="dx1-10074"></a>
<a 
 id="dx1-10075"></a>
<!--l. 5327--><p class="noindent" >
<a 
 id="x1-10076r7"></a>
<!--l. 5327--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.7</span>   <span 
class="ptmb7t-x-x-144">Deleting elements</span>
<a 
 id="Q1-1-107"></a>
<a 
 id="dx1-10077"></a>
<a 
 id="dx1-10078"></a>
<!--l. 5332--><p class="noindent" >There are several ways to delete elements from a list. If you know the index of the element you want,
you can use <span 
class="pcrr7tn-">pop</span>:
<a 
 id="dx1-10079"></a>
<a 
 id="dx1-10080"></a>

<div class="verbatim" id="verbatim-217">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;t.pop(1)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;c&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;x
&#x00A0;<br />b</div>
<!--l. 5347--><p class="nopar" ><span 
class="pcrr7tn-">pop </span>modifies the list and returns the element that was removed. If you don&#8217;t provide an index, it
deletes and returns the last element.
<!--l. 5354--><p class="noindent" >If you don&#8217;t need the removed value, you can use the <span 
class="pcrr7tn-">del </span>operator:
<a 
 id="dx1-10081"></a>
<a 
 id="dx1-10082"></a>

<div class="verbatim" id="verbatim-218">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;del&#x00A0;t[1]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;c&#8217;]</div>
<!--l. 5366--><p class="nopar" >
<!--l. 5370--><p class="noindent" >If you know the element you want to remove (but not the index), you can use <span 
class="pcrr7tn-">remove</span>:
<a 
 id="dx1-10083"></a>
<a 
 id="dx1-10084"></a>

<div class="verbatim" id="verbatim-219">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t.remove(&#8217;b&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;c&#8217;]</div>
<!--l. 5382--><p class="nopar" > The return value from <span 
class="pcrr7tn-">remove </span>is <span 
class="pcrr7tn-">None</span>.
<a 
 id="dx1-10085"></a>
<a 
 id="dx1-10086"></a>
<!--l. 5390--><p class="noindent" >To remove more than one element, you can use <span 
class="pcrr7tn-">del </span>with a slice index:

<div class="verbatim" id="verbatim-220">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;,&#x00A0;&#8217;f&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;del&#x00A0;t[1:5]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[&#8217;a&#8217;,&#x00A0;&#8217;f&#8217;]</div>
<!--l. 5399--><p class="nopar" > As usual, the slice selects all the elements up to, but not including, the second index.
<!--l. 5405--><p class="noindent" >
<a 
 id="x1-10087r8"></a>
<!--l. 5405--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.8</span>   <span 
class="ptmb7t-x-x-144">Lists and functions</span>
<a 
 id="Q1-1-108"></a>
<!--l. 5407--><p class="noindent" >There are a number of built-in functions that can be used on lists that allow you to quickly look
through a list without writing your own loops:

<div class="verbatim" id="verbatim-221">
&#x003E;&#x003E;&#x003E;&#x00A0;nums&#x00A0;=&#x00A0;[3,&#x00A0;41,&#x00A0;12,&#x00A0;9,&#x00A0;74,&#x00A0;15]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;len(nums)
&#x00A0;<br />6
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;max(nums)
&#x00A0;<br />74
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;min(nums)
&#x00A0;<br />3
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;sum(nums)
&#x00A0;<br />154
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;sum(nums)/len(nums)
&#x00A0;<br />25</div>
<!--l. 5424--><p class="nopar" > The <span 
class="pcrr7tn-">sum() </span>function only works when the list elements are numbers. The other functions (<span 
class="pcrr7tn-">max()</span>,
<span 
class="pcrr7tn-">len()</span>, etc.) work with lists of strings and other types that can be comparable.
<!--l. 5431--><p class="noindent" >We could rewrite an earlier program that computed the average of a list of numbers entered by the user
using a list.
<!--l. 5434--><p class="noindent" >First, the program to compute an average without a list:

<div class="verbatim" id="verbatim-222">
total&#x00A0;=&#x00A0;0
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />while&#x00A0;(&#x00A0;True&#x00A0;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;inp&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;a&#x00A0;number:&#x00A0;&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;inp&#x00A0;==&#x00A0;&#8217;done&#8217;&#x00A0;:&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;value&#x00A0;=&#x00A0;float(inp)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;total&#x00A0;=&#x00A0;total&#x00A0;+&#x00A0;value
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />
&#x00A0;<br />average&#x00A0;=&#x00A0;total&#x00A0;/&#x00A0;count
&#x00A0;<br />print&#x00A0;&#8217;Average:&#8217;,&#x00A0;average</div>
<!--l. 5449--><p class="nopar" > In this program, we have <span 
class="pcrr7tn-">count </span>and <span 
class="pcrr7tn-">sum </span>variables to keep the number and running total of the user&#8217;s
numbers as we repeatedly prompt the user for a number.
<!--l. 5456--><p class="noindent" >We could simply remember each number as the user entered it and use built-in functions to compute
the sum and count at the end.

<div class="verbatim" id="verbatim-223">
numlist&#x00A0;=&#x00A0;list()
&#x00A0;<br />while&#x00A0;(&#x00A0;True&#x00A0;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;inp&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;a&#x00A0;number:&#x00A0;&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;inp&#x00A0;==&#x00A0;&#8217;done&#8217;&#x00A0;:&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;value&#x00A0;=&#x00A0;float(inp)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;numlist.append(value)
&#x00A0;<br />
&#x00A0;<br />average&#x00A0;=&#x00A0;sum(numlist)&#x00A0;/&#x00A0;len(numlist)
&#x00A0;<br />print&#x00A0;&#8217;Average:&#8217;,&#x00A0;average</div>
<!--l. 5471--><p class="nopar" > We make an empty list before the loop starts, and then each time we have a number, we append it to
the list. At the end of the program, we simply compute the sum of the numbers in the list and divide it
by the count of the numbers in the list to come up with the average.
<!--l. 5480--><p class="noindent" >
<a 
 id="x1-10088r9"></a>
<!--l. 5480--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.9</span>   <span 
class="ptmb7t-x-x-144">Lists and strings</span>
<a 
 id="Q1-1-109"></a>
<a 
 id="dx1-10089"></a>
<a 
 id="dx1-10090"></a>
<a 
 id="dx1-10091"></a>
<!--l. 5486--><p class="noindent" >A string is a sequence of characters and a list is a sequence of values, but a list of characters
is not the same as a string. To convert from a string to a list of characters, you can use
<span 
class="pcrr7tn-">list</span>:
<a 
 id="dx1-10092"></a>
<a 
 id="dx1-10093"></a>

<div class="verbatim" id="verbatim-224">
&#x003E;&#x003E;&#x003E;&#x00A0;s&#x00A0;=&#x00A0;&#8217;spam&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;list(s)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[&#8217;s&#8217;,&#x00A0;&#8217;p&#8217;,&#x00A0;&#8217;a&#8217;,&#x00A0;&#8217;m&#8217;]</div>
<!--l. 5500--><p class="nopar" > Because <span 
class="pcrr7tn-">list </span>is the name of a built-in function, you should avoid using it as a variable name. I also
avoid <span 
class="pcrr7tn-">l </span>because it looks too much like <span 
class="pcrr7tn-">1</span>. So that&#8217;s why I use <span 
class="pcrr7tn-">t</span>.
<!--l. 5507--><p class="noindent" >The <span 
class="pcrr7tn-">list </span>function breaks a string into individual letters. If you want to break a string into words, you
can use the <span 
class="pcrr7tn-">split </span>method:
<a 
 id="dx1-10094"></a>
<a 
 id="dx1-10095"></a>

<div class="verbatim" id="verbatim-225">
&#x003E;&#x003E;&#x003E;&#x00A0;s&#x00A0;=&#x00A0;&#8217;pining&#x00A0;for&#x00A0;the&#x00A0;fjords&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;s.split()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[&#8217;pining&#8217;,&#x00A0;&#8217;for&#8217;,&#x00A0;&#8217;the&#8217;,&#x00A0;&#8217;fjords&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t[2]
&#x00A0;<br />the</div>
<!--l. 5522--><p class="nopar" > Once you have used <span 
class="pcrr7tn-">split </span>to break the string into a list of tokens, you can use the index operator
(square bracket) to look at a particular word in the list.
<!--l. 5529--><p class="noindent" >You can call <span 
class="pcrr7tn-">split </span>with an optional argument called a <span 
class="ptmb7t-">delimiter </span>specifies which characters to use as
word boundaries. The following example uses a hyphen as a delimiter:
<a 
 id="dx1-10096"></a>
<a 
 id="dx1-10097"></a>
<a 
 id="dx1-10098"></a>

<div class="verbatim" id="verbatim-226">
&#x003E;&#x003E;&#x003E;&#x00A0;s&#x00A0;=&#x00A0;&#8217;spam-spam-spam&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;delimiter&#x00A0;=&#x00A0;&#8217;-&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;s.split(delimiter)
&#x00A0;<br />[&#8217;spam&#8217;,&#x00A0;&#8217;spam&#8217;,&#x00A0;&#8217;spam&#8217;]</div>
<!--l. 5545--><p class="nopar" ><span 
class="pcrr7tn-">join </span>is the inverse of <span 
class="pcrr7tn-">split</span>. It takes a list of strings and concatenates the elements. <span 
class="pcrr7tn-">join </span>is a string
method, so you have to invoke it on the delimiter and pass the list as a parameter:
<a 
 id="dx1-10099"></a>
<a 
 id="dx1-10100"></a>
<a 
 id="dx1-10101"></a>

<div class="verbatim" id="verbatim-227">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;[&#8217;pining&#8217;,&#x00A0;&#8217;for&#8217;,&#x00A0;&#8217;the&#8217;,&#x00A0;&#8217;fjords&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;delimiter&#x00A0;=&#x00A0;&#8217;&#x00A0;&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;delimiter.join(t)
&#x00A0;<br />&#8217;pining&#x00A0;for&#x00A0;the&#x00A0;fjords&#8217;</div>
<!--l. 5564--><p class="nopar" > In this case the delimiter is a space character, so <span 
class="pcrr7tn-">join </span>puts a space between words. To concatenate
strings without spaces, you can use the empty string, <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;&#8217;</span></span></span>, as a delimiter.
<a 
 id="dx1-10102"></a>
<a 
 id="dx1-10103"></a>
<!--l. 5576--><p class="noindent" >
<a 
 id="x1-10104r10"></a>
<!--l. 5576--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.10</span>   <span 
class="ptmb7t-x-x-144">Parsing lines</span>
<a 
 id="Q1-1-110"></a>
<!--l. 5578--><p class="noindent" >Usually when we are reading a file we want to do something to the lines other than just printing the
whole line. Often we want to find the &#8220;interesting lines&#8221; and then <span 
class="ptmb7t-">parse </span>the line to find some
interesting <span 
class="ptmri7t-">part </span>of the line. What if we wanted to print out the day of the week from those lines that
start with &#8220;From &#8221;.
<!--l. 5586--><p class="noindent" ><span 
class="pcrr7tn-">From stephen.marquard@uct.ac.za </span><span 
class="ptmb7t-">Sat  </span><span 
class="pcrr7tn-">Jan 5 09:14:16 2008</span>
<!--l. 5589--><p class="noindent" >The <span 
class="pcrr7tn-">split </span>method is very effective when faced with this kind of problem. We can write a small
program that looks for lines where the line starts with &#8220;From &#8221; and then <span 
class="pcrr7tn-">split </span>those lines and then
print out the third word in the line:

<div class="verbatim" id="verbatim-228">
fhand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;not&#x00A0;line.startswith(&#8217;From&#x00A0;&#8217;)&#x00A0;:&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;words&#x00A0;=&#x00A0;line.split()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;words[2]</div>
<!--l. 5603--><p class="nopar" > We also use the contracted form of the <span 
class="pcrr7tn-">if </span>statement where we put the <span 
class="pcrr7tn-">continue </span>on the same line as
the <span 
class="pcrr7tn-">if</span>. This contracted form of the <span 
class="pcrr7tn-">if </span>functions the same as if the <span 
class="pcrr7tn-">continue </span>were on the next line and
indented.
<!--l. 5612--><p class="noindent" >The program produces the following output:

<div class="verbatim" id="verbatim-229">
Sat
&#x00A0;<br />Fri
&#x00A0;<br />Fri
&#x00A0;<br />Fri
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;...</div>
<!--l. 5621--><p class="nopar" > Later, we will learn increasingly sophisticated techniques for picking the lines to work
on and how we pull those lines apart to find the exact bit of information we are looking
for.
<!--l. 5628--><p class="noindent" >
<a 
 id="x1-10105r11"></a>
<!--l. 5628--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.11</span>   <span 
class="ptmb7t-x-x-144">Objects and values</span>
<a 
 id="Q1-1-111"></a>
<a 
 id="dx1-10106"></a>
<a 
 id="dx1-10107"></a>
<!--l. 5633--><p class="noindent" >If we execute these assignment statements:

<div class="verbatim" id="verbatim-230">
a&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />b&#x00A0;=&#x00A0;&#8217;banana&#8217;</div>
<!--l. 5639--><p class="nopar" > We know that <span 
class="pcrr7tn-">a </span>and <span 
class="pcrr7tn-">b </span>both refer to a string, but we don&#8217;t know whether they refer to the <span 
class="ptmri7t-">same </span>string.
There are two possible states:
<a 
 id="dx1-10108"></a>
<div  
class="centerline">             <img 
src="cfbook17x.png" alt="PIC" class="graphics" width="218.81749pt" height="42.15749pt" ><!--tex4ht:graphics  
name="cfbook17x.png" src="figs/list1.eps"  
-->             </div>
<!--l. 5653--><p class="noindent" >In one case, <span 
class="pcrr7tn-">a </span>and <span 
class="pcrr7tn-">b </span>refer to two different objects that have the same value. In the second case, they
refer to the same object.
<a 
 id="dx1-10109"></a>
<a 
 id="dx1-10110"></a>
<!--l. 5660--><p class="noindent" >To check whether two variables refer to the same object, you can use the <span 
class="pcrr7tn-">is </span>operator.

<div class="verbatim" id="verbatim-231">
&#x003E;&#x003E;&#x003E;&#x00A0;a&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;b&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;a&#x00A0;is&#x00A0;b
&#x00A0;<br />True</div>
<!--l. 5669--><p class="nopar" > In this example, Python only created one string object, and both <span 
class="pcrr7tn-">a </span>and <span 
class="pcrr7tn-">b </span>refer to it.
<!--l. 5675--><p class="noindent" >But when you create two lists, you get two objects:

<div class="verbatim" id="verbatim-232">
&#x003E;&#x003E;&#x003E;&#x00A0;a&#x00A0;=&#x00A0;[1,&#x00A0;2,&#x00A0;3]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;b&#x00A0;=&#x00A0;[1,&#x00A0;2,&#x00A0;3]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;a&#x00A0;is&#x00A0;b
&#x00A0;<br />False</div>
<!--l. 5683--><p class="nopar" > So the state diagram looks like this:
<a 
 id="dx1-10111"></a>
<a 
 id="dx1-10112"></a>
<div  
class="centerline">                         <img 
src="cfbook18x.png" alt="PIC" class="graphics" width="97.36374pt" height="43.16124pt" ><!--tex4ht:graphics  
name="cfbook18x.png" src="figs/list2.eps"  
-->                         </div>
<!--l. 5695--><p class="noindent" >In this case we would say that the two lists are <span 
class="ptmb7t-">equivalent</span>, because they have the same elements, but
not <span 
class="ptmb7t-">identical</span>, because they are not the same object. If two objects are identical, they are also
equivalent, but if they are equivalent, they are not necessarily identical.
<a 
 id="dx1-10113"></a>
<a 
 id="dx1-10114"></a>
<!--l. 5704--><p class="noindent" >Until now, we have been using &#8220;object&#8221; and &#8220;value&#8221; interchangeably, but it is more precise to say that
an object has a value. If you execute <span 
class="pcrr7tn-">a = [1,2,3]</span>, <span 
class="pcrr7tn-">a </span>refers to a list object whose value is a particular
sequence of elements. If another list has the same elements, we would say it has the same
value.
<a 
 id="dx1-10115"></a>
<a 
 id="dx1-10116"></a>
<!--l. 5714--><p class="noindent" >
<a 
 id="x1-10117r12"></a>
<!--l. 5714--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.12</span>   <span 
class="ptmb7t-x-x-144">Aliasing</span>
<a 
 id="Q1-1-112"></a>
<a 
 id="dx1-10118"></a>
<a 
 id="dx1-10119"></a>
<!--l. 5719--><p class="noindent" >If <span 
class="pcrr7tn-">a </span>refers to an object and you assign <span 
class="pcrr7tn-">b = a</span>, then both variables refer to the same object:

<div class="verbatim" id="verbatim-233">
&#x003E;&#x003E;&#x003E;&#x00A0;a&#x00A0;=&#x00A0;[1,&#x00A0;2,&#x00A0;3]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;b&#x00A0;=&#x00A0;a
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;b&#x00A0;is&#x00A0;a
&#x00A0;<br />True</div>
<!--l. 5728--><p class="nopar" > The state diagram looks like this:
<a 
 id="dx1-10120"></a>
<a 
 id="dx1-10121"></a>
<div  
class="centerline">                         <img 
src="cfbook19x.png" alt="PIC" class="graphics" width="97.36374pt" height="43.16124pt" ><!--tex4ht:graphics  
name="cfbook19x.png" src="figs/list3.eps"  
-->                         </div>
<!--l. 5740--><p class="noindent" >The association of a variable with an object is called a <span 
class="ptmb7t-">reference</span>. In this example, there are two
references to the same object.
<a 
 id="dx1-10122"></a>
<!--l. 5746--><p class="noindent" >An object with more than one reference has more than one name, so we say that the object is
<span 
class="ptmb7t-">aliased</span>.
<a 
 id="dx1-10123"></a>
<!--l. 5751--><p class="noindent" >If the aliased object is mutable, changes made with one alias affect the other:

<div class="verbatim" id="verbatim-234">
&#x003E;&#x003E;&#x003E;&#x00A0;b[0]&#x00A0;=&#x00A0;17
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;a
&#x00A0;<br />[17,&#x00A0;2,&#x00A0;3]</div>
<!--l. 5760--><p class="nopar" > Although this behavior can be useful, it is error-prone. In general, it is safer to avoid aliasing when
you are working with mutable objects.
<a 
 id="dx1-10124"></a>
<!--l. 5769--><p class="noindent" >For immutable objects like strings, aliasing is not as much of a problem. In this example:

<div class="verbatim" id="verbatim-235">
a&#x00A0;=&#x00A0;&#8217;banana&#8217;
&#x00A0;<br />b&#x00A0;=&#x00A0;&#8217;banana&#8217;</div>
<!--l. 5776--><p class="nopar" > It almost never makes a difference whether <span 
class="pcrr7tn-">a </span>and <span 
class="pcrr7tn-">b </span>refer to the same string or not.
<!--l. 5783--><p class="noindent" >
<a 
 id="x1-10125r13"></a>
<!--l. 5783--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.13</span>   <span 
class="ptmb7t-x-x-144">List arguments</span>
<a 
 id="Q1-1-113"></a>
<a 
 id="dx1-10126"></a>
<a 
 id="dx1-10127"></a>
<a 
 id="dx1-10128"></a>
<a 
 id="dx1-10129"></a>
<a 
 id="dx1-10130"></a>
<!--l. 5791--><p class="noindent" >When you pass a list to a function, the function gets a reference to the list. If the function modifies a
list parameter, the caller sees the change. For example, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">delete_head</span></span></span> removes the first element from a
list:

<div class="verbatim" id="verbatim-236">
def&#x00A0;delete_head(t):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;del&#x00A0;t[0]</div>
<!--l. 5800--><p class="nopar" > Here&#8217;s how it is used:

<div class="verbatim" id="verbatim-237">
&#x003E;&#x003E;&#x003E;&#x00A0;letters&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;delete_head(letters)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;letters
&#x00A0;<br />[&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]</div>
<!--l. 5811--><p class="nopar" > The parameter <span 
class="pcrr7tn-">t </span>and the variable <span 
class="pcrr7tn-">letters </span>are aliases for the same object. The stack diagram looks
like this:
<a 
 id="dx1-10131"></a>
<a 
 id="dx1-10132"></a>
<div  
class="centerline">          <img 
src="cfbook20x.png" alt="PIC" class="graphics" width="248.93pt" height="74.2775pt" ><!--tex4ht:graphics  
name="cfbook20x.png" src="figs/stack5.eps"  
-->          </div>
<!--l. 5825--><p class="noindent" >Since the list is shared by two frames, I drew it between them.
<!--l. 5828--><p class="noindent" >It is important to distinguish between operations that modify lists and operations that create new
lists. For example, the <span 
class="pcrr7tn-">append </span>method modifies a list, but the <span 
class="pcrr7tn-">+ </span>operator creates a new
list:
<a 
 id="dx1-10133"></a>
<a 
 id="dx1-10134"></a>
<a 
 id="dx1-10135"></a>
<a 
 id="dx1-10136"></a>

<div class="verbatim" id="verbatim-238">
&#x003E;&#x003E;&#x003E;&#x00A0;t1&#x00A0;=&#x00A0;[1,&#x00A0;2]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t2&#x00A0;=&#x00A0;t1.append(3)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t1
&#x00A0;<br />[1,&#x00A0;2,&#x00A0;3]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t2
&#x00A0;<br />None
&#x00A0;<br />
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t3&#x00A0;=&#x00A0;t1&#x00A0;+&#x00A0;[3]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t3
&#x00A0;<br />[1,&#x00A0;2,&#x00A0;3]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t2&#x00A0;is&#x00A0;t3
&#x00A0;<br />False</div>
<!--l. 5852--><p class="nopar" >
<!--l. 5855--><p class="noindent" >This difference is important when you write functions that are supposed to modify lists. For example,
this function <span 
class="ptmri7t-">does not </span>delete the head of a list:

<div class="verbatim" id="verbatim-239">
def&#x00A0;bad_delete_head(t):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;t&#x00A0;=&#x00A0;t[1:]&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;WRONG!</div>
<!--l. 5863--><p class="nopar" >
<!--l. 5866--><p class="noindent" >The slice operator creates a new list and the assignment makes <span 
class="pcrr7tn-">t </span>refer to it, but none of that has any
effect on the list that was passed as an argument.
<a 
 id="dx1-10137"></a>
<a 
 id="dx1-10138"></a>
<!--l. 5873--><p class="noindent" >An alternative is to write a function that creates and returns a new list. For example, <span 
class="pcrr7tn-">tail </span>returns all
but the first element of a list:

<div class="verbatim" id="verbatim-240">
def&#x00A0;tail(t):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;t[1:]</div>
<!--l. 5882--><p class="nopar" > This function leaves the original list unmodified. Here&#8217;s how it is used:

<div class="verbatim" id="verbatim-241">
&#x003E;&#x003E;&#x003E;&#x00A0;letters&#x00A0;=&#x00A0;[&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;rest&#x00A0;=&#x00A0;tail(letters)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;rest
&#x00A0;<br />[&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;]</div>
<!--l. 5894--><p class="nopar" >
<div class="newtheorem">
<!--l. 5898--><p class="noindent" ><span class="head">
<a 
 id="x1-10139r1"></a>
<span 
class="ptmb7t-">Exercise 8.1</span>  </span>
<!--l. 5900--><p class="noindent" >Write a function called <span 
class="pcrr7tn-">chop </span>that takes a list and modifies it, removing the first and last elements,
and returns <span 
class="pcrr7tn-">None</span>.
<!--l. 5903--><p class="noindent" >Then write a function called <span 
class="pcrr7tn-">middle </span>that takes a list and returns a new list that contains all but
the first and last elements.
</div>
<!--l. 5910--><p class="noindent" >
<a 
 id="x1-10140r14"></a>
<!--l. 5910--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.14</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-114"></a>
<a 
 id="dx1-10141"></a>
<!--l. 5913--><p class="noindent" >Careless use of lists (and other mutable objects) can lead to long hours of debugging. Here are some
common pitfalls and ways to avoid them:
<!--l. 5917--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-10143x1">Don&#8217;t forget that most list methods modify the argument and return <span 
class="pcrr7tn-">None</span>. This is the
     opposite of the string methods, which return a new string and leave the original alone.
     <!--l. 5923--><p class="noindent" >If you are used to writing string code like this:

     <div class="verbatim" id="verbatim-242">
     word&#x00A0;=&#x00A0;word.strip()
</div>
     <!--l. 5928--><p class="nopar" >
     <!--l. 5931--><p class="noindent" >It is tempting to write list code like this:

     <div class="verbatim" id="verbatim-243">
     t&#x00A0;=&#x00A0;t.sort()&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;WRONG!
</div>
     <!--l. 5936--><p class="nopar" >
<a 
 id="dx1-10144"></a>
<a 
 id="dx1-10145"></a>
     <!--l. 5942--><p class="noindent" >Because <span 
class="pcrr7tn-">sort </span>returns <span 
class="pcrr7tn-">None</span>, the next operation you perform with <span 
class="pcrr7tn-">t </span>is likely to fail.
     <!--l. 5945--><p class="noindent" >Before using list methods and operators, you should read the documentation carefully and then
     test them in interactive mode. The methods and operators that lists share with other
     sequences (like strings) are documented at <a 
href="docs.python.org/lib/typesseq.html" class="url" ><span 
class="pcrr7tn-">docs.python.org/lib/typesseq.html</span></a>.
     The methods and operators that only apply to mutable sequences are documented at
     <a 
href="docs.python.org/lib/typesseq-mutable.html" class="url" ><span 
class="pcrr7tn-">docs.python.org/lib/typesseq-mutable.html</span></a>.
     </li>
     <li 
  class="enumerate" id="x1-10147x2">Pick an idiom and stick with it.
     <!--l. 5956--><p class="noindent" >Part of the problem with lists is that there are too many ways to do things. For example, to
     remove an element from a list, you can use <span 
class="pcrr7tn-">pop</span>, <span 
class="pcrr7tn-">remove</span>, <span 
class="pcrr7tn-">del</span>, or even a slice assignment.
     <!--l. 5961--><p class="noindent" >To add an element, you can use the <span 
class="pcrr7tn-">append </span>method or the <span 
class="pcrr7tn-">+ </span>operator. But don&#8217;t forget that these
     are right:

     <div class="verbatim" id="verbatim-244">
     t.append(x)
     &#x00A0;<br />t&#x00A0;=&#x00A0;t&#x00A0;+&#x00A0;[x]
</div>
     <!--l. 5968--><p class="nopar" >
     <!--l. 5971--><p class="noindent" >And these are wrong:

     <div class="verbatim" id="verbatim-245">
     t.append([x])&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;WRONG!
     &#x00A0;<br />t&#x00A0;=&#x00A0;t.append(x)&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;WRONG!
     &#x00A0;<br />t&#x00A0;+&#x00A0;[x]&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;WRONG!
     &#x00A0;<br />t&#x00A0;=&#x00A0;t&#x00A0;+&#x00A0;x&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;WRONG!
</div>
     <!--l. 5979--><p class="nopar" >
     <!--l. 5982--><p class="noindent" >Try out each of these examples in interactive mode to make sure you understand what they do.
     Notice that only the last one causes a runtime error; the other three are legal, but they do the
     wrong thing.
     </li>
     <li 
  class="enumerate" id="x1-10149x3">Make copies to avoid aliasing.
<a 
 id="dx1-10150"></a>
<a 
 id="dx1-10151"></a>
     <!--l. 5993--><p class="noindent" >If you want to use a method like <span 
class="pcrr7tn-">sort </span>that modifies the argument, but you need to keep the
     original list as well, you can make a copy.

     <div class="verbatim" id="verbatim-246">
     orig&#x00A0;=&#x00A0;t[:]
     &#x00A0;<br />t.sort()
</div>
     <!--l. 6001--><p class="nopar" >
     <!--l. 6004--><p class="noindent" >In this example you could also use the built-in function <span 
class="pcrr7tn-">sorted</span>, which returns a new, sorted list
     and leaves the original alone. But in that case you should avoid using <span 
class="pcrr7tn-">sorted </span>as a variable
     name!
     </li>
     <li 
  class="enumerate" id="x1-10153x4">Lists, <span 
class="pcrr7tn-">split</span>, and files
     <!--l. 6011--><p class="noindent" >When we read and parse files, there are many opportunities to encounter input that can crash our
     program so it is a good idea to revisit the <span 
class="ptmb7t-">guardian </span>pattern when it comes writing programs that
     read through a file and look for a &#8220;needle in the haystack&#8221;.
     <!--l. 6017--><p class="noindent" >Let&#8217;s revisit our program that is looking for the day of the week on the from lines of our
     file:
     <!--l. 6021--><p class="noindent" ><span 
class="pcrr7tn-">From stephen.marquard@uct.ac.za </span><span 
class="ptmb7t-">Sat  </span><span 
class="pcrr7tn-">Jan 5 09:14:16 2008</span>
     <!--l. 6024--><p class="noindent" >Since we are breaking this line into words, we could dispense with the use of <span 
class="pcrr7tn-">startswith </span>and
     simply look at the first word of the line to determine if we are interested in the line at
     all. We can use <span 
class="pcrr7tn-">continue </span>to skip lines that don&#8217;t have &#8220;From&#8221; as the first word as
     follows:

     <div class="verbatim" id="verbatim-247">
     fhand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
     &#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;words&#x00A0;=&#x00A0;line.split()
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;words[0]&#x00A0;!=&#x00A0;&#8217;From&#8217;&#x00A0;:&#x00A0;continue
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;words[2]
</div>
     <!--l. 6037--><p class="nopar" > This looks much simpler and we don&#8217;t even need to do the <span 
class="pcrr7tn-">rstrip </span>to remove the newline at the
     end of the file. But is it better?

     <div class="verbatim" id="verbatim-248">
     python&#x00A0;search8.py
     &#x00A0;<br />Sat
     &#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
     &#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"search8.py",&#x00A0;line&#x00A0;5,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;words[0]&#x00A0;!=&#x00A0;&#8217;From&#8217;&#x00A0;:&#x00A0;continue
     &#x00A0;<br />IndexError:&#x00A0;list&#x00A0;index&#x00A0;out&#x00A0;of&#x00A0;range
</div>
     <!--l. 6052--><p class="nopar" > It kind of works and we see the day from the first line (Sat) but then the program fails with a
     traceback error. What went wrong? What messed-up data caused our elegant, clever and very
     Pythonic program to fail?
     <!--l. 6060--><p class="noindent" >You could stare at it for a long time and puzzle through it or ask someone for help, but the
     quicker and smarter approach is to add a <span 
class="pcrr7tn-">print </span>statement. The best place to add the print
     statement is right before the line where the program failed and print out the data that seems to be
     causing the failure.
     <!--l. 6067--><p class="noindent" >Now this approach may generate a lot of lines of output but at least you will immediately have
     some clue as to the problem at hand. So we add a print of the variable <span 
class="pcrr7tn-">words </span>right before line
     five. We even add a prefix &#8220;Debug:&#8221; to the line so we can keep our regular output separate from
     our debug output.

     <div class="verbatim" id="verbatim-249">
     for&#x00A0;line&#x00A0;in&#x00A0;fhand:
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;words&#x00A0;=&#x00A0;line.split()
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Debug:&#8217;,&#x00A0;words
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;words[0]&#x00A0;!=&#x00A0;&#8217;From&#8217;&#x00A0;:&#x00A0;continue
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;words[2]
</div>
     <!--l. 6081--><p class="nopar" > When we run the program, a lot of output scrolls off the screen but at the end, we
     see our debug output and the traceback so we know what happened just before the
     traceback.

     <div class="verbatim" id="verbatim-250">
     Debug:&#x00A0;[&#8217;X-DSPAM-Confidence:&#8217;,&#x00A0;&#8217;0.8475&#8217;]
     &#x00A0;<br />Debug:&#x00A0;[&#8217;X-DSPAM-Probability:&#8217;,&#x00A0;&#8217;0.0000&#8217;]
     &#x00A0;<br />Debug:&#x00A0;[]
     &#x00A0;<br />Traceback&#x00A0;(most&#x00A0;recent&#x00A0;call&#x00A0;last):
     &#x00A0;<br />&#x00A0;&#x00A0;File&#x00A0;"search9.py",&#x00A0;line&#x00A0;6,&#x00A0;in&#x00A0;&#x003C;module&#x003E;
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;words[0]&#x00A0;!=&#x00A0;&#8217;From&#8217;&#x00A0;:&#x00A0;continue
     &#x00A0;<br />IndexError:&#x00A0;list&#x00A0;index&#x00A0;out&#x00A0;of&#x00A0;range
</div>
     <!--l. 6097--><p class="nopar" > Each debug line is printing the list of words which we get when we <span 
class="pcrr7tn-">split </span>the line into words.
     When the program fails the list of words is empty <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">[]</span></span></span>. If we open the file in a text editor and look
     at the file, at that point it looks as follows:

     <div class="verbatim" id="verbatim-251">
     X-DSPAM-Result:&#x00A0;Innocent
     &#x00A0;<br />X-DSPAM-Processed:&#x00A0;Sat&#x00A0;Jan&#x00A0;&#x00A0;5&#x00A0;09:14:16&#x00A0;2008
     &#x00A0;<br />X-DSPAM-Confidence:&#x00A0;0.8475
     &#x00A0;<br />X-DSPAM-Probability:&#x00A0;0.0000
     &#x00A0;<br />
     &#x00A0;<br />Details:&#x00A0;http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772
</div>
     <!--l. 6113--><p class="nopar" > The error occurs when our program encounters a blank line! Of course there are &#8220;zero words&#8221;
     on a blank line. Why didn&#8217;t we think of that when we were writing the code. When the code
     looks for the first word (<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">word[0]</span></span></span>) to check to see if it matches &#8220;From&#8221;, we get an &#8220;index out of
     range&#8221; error.
     <!--l. 6122--><p class="noindent" >This of course is the perfect place to add some <span 
class="ptmb7t-">guardian </span>code to avoid checking the
     first word if the first word is not there. There are many ways to protect this code,
     we will choose to check the number of words we have before we look at the first
     word:

     <div class="verbatim" id="verbatim-252">
     fhand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
     &#x00A0;<br />count&#x00A0;=&#x00A0;0
     &#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;words&#x00A0;=&#x00A0;line.split()
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;print&#x00A0;&#8217;Debug:&#8217;,&#x00A0;words
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(words)&#x00A0;==&#x00A0;0&#x00A0;:&#x00A0;continue
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;words[0]&#x00A0;!=&#x00A0;&#8217;From&#8217;&#x00A0;:&#x00A0;continue
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;words[2]
</div>
     <!--l. 6137--><p class="nopar" > First we commented out the debug print statement instead of removing it in case our
     modification fails and we need to debug again. Then we added a guardian statement that checks
     to see if we have zero words, and if so, we use <span 
class="pcrr7tn-">continue </span>to skip to the next line in the
     file.
     <!--l. 6145--><p class="noindent" >We can think of the two <span 
class="pcrr7tn-">continue </span>statements as helping us refine the set of lines which are
     &#8220;interesting&#8221; to us and which we want to process some more. A line which has no words is
     &#8220;uninteresting&#8221; to us so we skip to the next line. A line which does not have &#8220;From&#8221; as its first
     word is uninteresting to us so we skip it.
     <!--l. 6151--><p class="noindent" >The program as modified runs successfully so perhaps it is correct. Our guardian
     statement does make sure that the <span 
class="pcrr7tn-">words[0] </span>will never fail, but perhaps it is not
     enough. When we are programming, we must always be thinking, &#8220;What might go
     wrong?&#8221;.
     <div class="newtheorem">
     <!--l. 6156--><p class="noindent" ><span class="head">
<a 
 id="x1-10154r2"></a>
    <span 
class="ptmb7t-">Exercise 8.2</span>  </span>Figure out which line of the above program is still not properly guarded.
     See if you can construct a text file which causes the program to fail and then modify the
     program so that the line is properly guarded and test it to make sure it handles your new
     text file.
     </div>
     <div class="newtheorem">
     <!--l. 6163--><p class="noindent" ><span class="head">
<a 
 id="x1-10155r3"></a>
    <span 
class="ptmb7t-">Exercise 8.3</span>  </span>Rewrite the guardian code in the above example without two <span 
class="pcrr7tn-">if </span>statements.

     Instead use a compound logical expression using the <span 
class="pcrr7tn-">and </span>logical operator with a single
     <span 
class="pcrr7tn-">if </span>statement.
     </div>
     </li></ol>
<!--l. 6174--><p class="noindent" >
<a 
 id="x1-10156r15"></a>
<!--l. 6174--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.15</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-115"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">aliasing:</span> </dt><dd 
class="description">A circumstance where two or more variables refer to the same object. <a 
 id="dx1-10157"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">delimiter:</span> </dt><dd 
class="description">A character or string used to indicate where a string should be split. <a 
 id="dx1-10158"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">element:</span> </dt><dd 
class="description">One of the values in a list (or other sequence), also called items. <a 
 id="dx1-10159"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">equivalent:</span> </dt><dd 
class="description">Having the same value. <a 
 id="dx1-10160"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">index:</span> </dt><dd 
class="description">An integer value that indicates an element in a list. <a 
 id="dx1-10161"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">identical:</span> </dt><dd 
class="description">Being the same object (which implies equivalence). <a 
 id="dx1-10162"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">list:</span> </dt><dd 
class="description">A sequence of values. <a 
 id="dx1-10163"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">list traversal:</span> </dt><dd 
class="description">The sequential accessing of each element in a list. <a 
 id="dx1-10164"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">nested list:</span> </dt><dd 
class="description">A list that is an element of another list. <a 
 id="dx1-10165"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">object:</span> </dt><dd 
class="description">Something a variable can refer to. An object has a type and a value. <a 
 id="dx1-10166"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">reference:</span> </dt><dd 
class="description">The association between a variable and its value. <a 
 id="dx1-10167"></a>
     </dd></dl>
<!--l. 6218--><p class="noindent" >

<a 
 id="x1-10168r16"></a>
<!--l. 6218--><p class="noindent" ><span 
class="ptmb7t-x-x-144">8.16</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-116"></a>
<div class="newtheorem">
<!--l. 6220--><p class="noindent" ><span class="head">
<a 
 id="x1-10169r4"></a>
<span 
class="ptmb7t-">Exercise 8.4</span>  </span>Download a copy of the file from <a 
href="www.py4inf.com/code/romeo.txt" class="url" ><span 
class="pcrr7tn-">www.py4inf.com/code/romeo.txt</span></a>
<!--l. 6224--><p class="noindent" >Write a program to open the file <span 
class="pcrr7tn-">romeo.txt </span>and read it line by line. For each line, split the line
into a list of words using the <span 
class="pcrr7tn-">split </span>function.
<!--l. 6228--><p class="noindent" >For each word, check to see if the word is already in a list. If the word is not in the list, add it to
the list.
<!--l. 6231--><p class="noindent" >When the program completes, sort and print the resulting words in alphabetical order.

<div class="verbatim" id="verbatim-253">
Enter&#x00A0;file:&#x00A0;romeo.txt
&#x00A0;<br />[&#8217;Arise&#8217;,&#x00A0;&#8217;But&#8217;,&#x00A0;&#8217;It&#8217;,&#x00A0;&#8217;Juliet&#8217;,&#x00A0;&#8217;Who&#8217;,&#x00A0;&#8217;already&#8217;,
&#x00A0;<br />&#8217;and&#8217;,&#x00A0;&#8217;breaks&#8217;,&#x00A0;&#8217;east&#8217;,&#x00A0;&#8217;envious&#8217;,&#x00A0;&#8217;fair&#8217;,&#x00A0;&#8217;grief&#8217;,
&#x00A0;<br />&#8217;is&#8217;,&#x00A0;&#8217;kill&#8217;,&#x00A0;&#8217;light&#8217;,&#x00A0;&#8217;moon&#8217;,&#x00A0;&#8217;pale&#8217;,&#x00A0;&#8217;sick&#8217;,&#x00A0;&#8217;soft&#8217;,
&#x00A0;<br />&#8217;sun&#8217;,&#x00A0;&#8217;the&#8217;,&#x00A0;&#8217;through&#8217;,&#x00A0;&#8217;what&#8217;,&#x00A0;&#8217;window&#8217;,
&#x00A0;<br />&#8217;with&#8217;,&#x00A0;&#8217;yonder&#8217;]</div>
<!--l. 6241--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 6244--><p class="noindent" ><span class="head">
<a 
 id="x1-10170r5"></a>
<span 
class="ptmb7t-">Exercise 8.5</span>  </span>Write a program to read through the mail box data and when you find line that
starts with &#8220;From&#8221;, you will split the line into words using the <span 
class="pcrr7tn-">split </span>function. We are interested
in who sent the message which is the second word on the From line.
<!--l. 6250--><p class="noindent" ><span 
class="pcrr7tn-">From stephen.marquard@uct.ac.za Sat Jan 5 09:14:16 2008</span>
<!--l. 6252--><p class="noindent" >You will parse the From line and print out the second word for each From line and then you will
also count the number of From (not From:) lines and print out a count at the end.
<!--l. 6256--><p class="noindent" >This is a sample good output with a few lines removed:

<div class="verbatim" id="verbatim-254">
python&#x00A0;fromcount.py
&#x00A0;<br />Enter&#x00A0;a&#x00A0;file&#x00A0;name:&#x00A0;mbox-short.txt
&#x00A0;<br />stephen.marquard@uct.ac.za
&#x00A0;<br />louis@media.berkeley.edu
&#x00A0;<br />zqian@umich.edu
&#x00A0;<br />
&#x00A0;<br />[...some&#x00A0;output&#x00A0;removed...]
&#x00A0;<br />
&#x00A0;<br />ray@media.berkeley.edu
&#x00A0;<br />cwen@iupui.edu
&#x00A0;<br />cwen@iupui.edu
&#x00A0;<br />cwen@iupui.edu
&#x00A0;<br />There&#x00A0;were&#x00A0;27&#x00A0;lines&#x00A0;in&#x00A0;the&#x00A0;file&#x00A0;with&#x00A0;From&#x00A0;as&#x00A0;the&#x00A0;first&#x00A0;word</div>
<!--l. 6273--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 6278--><p class="noindent" ><span class="head">
<a 
 id="x1-10171r6"></a>
<span 
class="ptmb7t-">Exercise 8.6</span>  </span>Rewrite the program that prompts the user for a list of numbers and prints out
the maximum and minimum of the numbers at the end when the user enters &#8220;done&#8221;. Write the
program to store the numbers the user enters in a list and use the <span 
class="pcrr7tn-">max() </span>and <span 
class="pcrr7tn-">min() </span>fuctions to
compute the maximum and minimum numbers after the loop completes.

<div class="verbatim" id="verbatim-255">
Enter&#x00A0;a&#x00A0;number:&#x00A0;6
&#x00A0;<br />Enter&#x00A0;a&#x00A0;number:&#x00A0;2
&#x00A0;<br />Enter&#x00A0;a&#x00A0;number:&#x00A0;9
&#x00A0;<br />Enter&#x00A0;a&#x00A0;number:&#x00A0;3
&#x00A0;<br />Enter&#x00A0;a&#x00A0;number:&#x00A0;5
&#x00A0;<br />Enter&#x00A0;a&#x00A0;number:&#x00A0;done
&#x00A0;<br />Maximum:&#x00A0;9.0
&#x00A0;<br />Minimum:&#x00A0;2.0</div>
<!--l. 6297--><p class="nopar" >
</div>

<!--l. 6303--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;9</span><br /><a 
 id="x1-110009"></a>Dictionaries</h2> <a 
 id="dx1-11001"></a>
<a 
 id="dx1-11002"></a>
<a 
 id="dx1-11003"></a>
<a 
 id="dx1-11004"></a>
<a 
 id="dx1-11005"></a>
<a 
 id="dx1-11006"></a>
<!--l. 6312--><p class="noindent" >A <span 
class="ptmb7t-">dictionary </span>is like a list, but more general. In a list, the positions (a.k.a. indices) have to be integers;
in a dictionary the indices can be (almost) any type.
<!--l. 6316--><p class="noindent" >You can think of a dictionary as a mapping between a set of indices (which are called <span 
class="ptmb7t-">keys</span>) and a set of
values. Each key maps to a value. The association of a key and a value is called a <span 
class="ptmb7t-">key-value pair </span>or
sometimes an <span 
class="ptmb7t-">item</span>.
<!--l. 6321--><p class="noindent" >As an example, we&#8217;ll build a dictionary that maps from English to Spanish words, so the keys and the
values are all strings.
<!--l. 6324--><p class="noindent" >The function <span 
class="pcrr7tn-">dict </span>creates a new dictionary with no items. Because <span 
class="pcrr7tn-">dict </span>is the name of a built-in
function, you should avoid using it as a variable name.
<a 
 id="dx1-11007"></a>
<a 
 id="dx1-11008"></a>

<div class="verbatim" id="verbatim-256">
&#x003E;&#x003E;&#x003E;&#x00A0;eng2sp&#x00A0;=&#x00A0;dict()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;eng2sp
&#x00A0;<br />{}</div>
<!--l. 6336--><p class="nopar" >
<!--l. 6339--><p class="noindent" >The squiggly-brackets, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">{}</span></span></span>, represent an empty dictionary. To add items to the dictionary, you can use
square brackets:
<a 
 id="dx1-11009"></a>
<a 
 id="dx1-11010"></a>

<div class="verbatim" id="verbatim-257">
&#x003E;&#x003E;&#x003E;&#x00A0;eng2sp[&#8217;one&#8217;]&#x00A0;=&#x00A0;&#8217;uno&#8217;</div>
<!--l. 6348--><p class="nopar" > This line creates an item that maps from the key <span 
class="pcrr7tn-">'one' </span>to the value <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">uno</span><span 
class="pcrr8c-">&#8217;</span></span></span>. If we print the dictionary
again, we see a key-value pair with a colon between the key and value:

<div class="verbatim" id="verbatim-258">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;eng2sp
&#x00A0;<br />{&#8217;one&#8217;:&#x00A0;&#8217;uno&#8217;}</div>
<!--l. 6360--><p class="nopar" > This output format is also an input format. For example, you can create a new dictionary with three
items:

<div class="verbatim" id="verbatim-259">
&#x003E;&#x003E;&#x003E;&#x00A0;eng2sp&#x00A0;=&#x00A0;{&#8217;one&#8217;:&#x00A0;&#8217;uno&#8217;,&#x00A0;&#8217;two&#8217;:&#x00A0;&#8217;dos&#8217;,&#x00A0;&#8217;three&#8217;:&#x00A0;&#8217;tres&#8217;}</div>
<!--l. 6369--><p class="nopar" > But if you print <span 
class="pcrr7tn-">eng2sp</span>, you might be surprised:

<div class="verbatim" id="verbatim-260">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;eng2sp
&#x00A0;<br />{&#8217;one&#8217;:&#x00A0;&#8217;uno&#8217;,&#x00A0;&#8217;three&#8217;:&#x00A0;&#8217;tres&#8217;,&#x00A0;&#8217;two&#8217;:&#x00A0;&#8217;dos&#8217;}</div>
<!--l. 6378--><p class="nopar" > The order of the key-value pairs is not the same. In fact, if you type the same example on your
computer, you might get a different result. In general, the order of items in a dictionary is
unpredictable.
<!--l. 6386--><p class="noindent" >But that&#8217;s not a problem because the elements of a dictionary are never indexed with integer indices.
Instead, you use the keys to look up the corresponding values:

<div class="verbatim" id="verbatim-261">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;eng2sp[&#8217;two&#8217;]
&#x00A0;<br />&#8217;dos&#8217;</div>
<!--l. 6394--><p class="nopar" > The key <span 
class="pcrr7tn-">'two' </span>always maps to the value <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">dos</span><span 
class="pcrr8c-">&#8217;</span></span></span> so the order of the items doesn&#8217;t matter.
<!--l. 6400--><p class="noindent" >If the key isn&#8217;t in the dictionary, you get an exception:
<a 
 id="dx1-11011"></a>
<a 
 id="dx1-11012"></a>

<div class="verbatim" id="verbatim-262">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;eng2sp[&#8217;four&#8217;]
&#x00A0;<br />KeyError:&#x00A0;&#8217;four&#8217;</div>
<!--l. 6409--><p class="nopar" > The <span 
class="pcrr7tn-">len </span>function works on dictionaries; it returns the number of key-value pairs:
<a 
 id="dx1-11013"></a>
<a 
 id="dx1-11014"></a>

<div class="verbatim" id="verbatim-263">
&#x003E;&#x003E;&#x003E;&#x00A0;len(eng2sp)
&#x00A0;<br />3</div>
<!--l. 6422--><p class="nopar" > The <span 
class="pcrr7tn-">in </span>operator works on dictionaries; it tells you whether something appears as a <span 
class="ptmri7t-">key </span>in the
dictionary (appearing as a value is not good enough).
<a 
 id="dx1-11015"></a>
<a 
 id="dx1-11016"></a>
<a 
 id="dx1-11017"></a>

<div class="verbatim" id="verbatim-264">
&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;one&#8217;&#x00A0;in&#x00A0;eng2sp
&#x00A0;<br />True
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;uno&#8217;&#x00A0;in&#x00A0;eng2sp
&#x00A0;<br />False</div>
<!--l. 6439--><p class="nopar" > To see whether something appears as a value in a dictionary, you can use the method <span 
class="pcrr7tn-">values</span>, which
returns the values as a list, and then use the <span 
class="pcrr7tn-">in </span>operator:
<a 
 id="dx1-11018"></a>
<a 
 id="dx1-11019"></a>

<div class="verbatim" id="verbatim-265">
&#x003E;&#x003E;&#x003E;&#x00A0;vals&#x00A0;=&#x00A0;eng2sp.values()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;&#8217;uno&#8217;&#x00A0;in&#x00A0;vals
&#x00A0;<br />True</div>
<!--l. 6454--><p class="nopar" > The <span 
class="pcrr7tn-">in </span>operator uses different algorithms for lists and dictionaries. For lists, it uses a linear search
algorithm. As the list gets longer, the search time gets longer in direct proportion to the length of the
list. For dictionaries, Python uses an algorithm called a <span 
class="ptmb7t-">hash table </span>that has a remarkable property; the
<span 
class="pcrr7tn-">in </span>operator takes about the same amount of time no matter how many items there are in a
dictionary. I won&#8217;t explain why hash functions are so magical, but you can read more about it at
<a 
href="wikipedia.org/wiki/Hash_table" class="url" ><span 
class="pcrr7tn-">wikipedia.org/wiki/Hash_table</span></a>.
<a 
 id="dx1-11020"></a>
<div class="newtheorem">
<!--l. 6471--><p class="noindent" ><span class="head">
<a 
 id="x1-11021r1"></a>
<span 
class="ptmb7t-">Exercise 9.1</span>  </span>
<a 
 id="dx1-11022"></a>
<a 
 id="dx1-11023"></a>
<!--l. 6477--><p class="noindent" >Write a function that reads the words in <span 
class="pcrr7tn-">words.txt </span>and stores them as keys in a dictionary. It
doesn&#8217;t matter what the values are. Then you can use the <span 
class="pcrr7tn-">in </span>operator as a fast way to check
whether a string is in the dictionary.
</div>
<a 
 id="x1-11024r1"></a>
<!--l. 6486--><p class="noindent" ><span 
class="ptmb7t-x-x-144">9.1</span>   <span 
class="ptmb7t-x-x-144">Dictionary as a set of counters</span>
<a 
 id="Q1-1-118"></a>
<a 
 id="dx1-11025"></a>
<!--l. 6491--><p class="noindent" >Suppose you are given a string and you want to count how many times each letter appears. There are
several ways you could do it:
<!--l. 6494--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-11027x1">You could create 26 variables, one for each letter of the alphabet. Then you could traverse
     the string and, for each character, increment the corresponding counter, probably using a
     chained conditional.

     </li>
     <li 
  class="enumerate" id="x1-11029x2">You could create a list with 26 elements. Then you could convert each character to a
     number (using the built-in function <span 
class="pcrr7tn-">ord</span>), use the number as an index into the list, and
     increment the appropriate counter.
     </li>
     <li 
  class="enumerate" id="x1-11031x3">You could create a dictionary with characters as keys and counters as the corresponding
     values. The first time you see a character, you would add an item to the dictionary. After
     that you would increment the value of an existing item.
     </li></ol>
<!--l. 6513--><p class="noindent" >Each of these options performs the same computation, but each of them implements that computation
in a different way.
<a 
 id="dx1-11032"></a>
<!--l. 6518--><p class="noindent" >An <span 
class="ptmb7t-">implementation </span>is a way of performing a computation; some implementations are better than
others. For example, an advantage of the dictionary implementation is that we don&#8217;t have to know
ahead of time which letters appear in the string and we only have to make room for the letters that do
appear.
<!--l. 6524--><p class="noindent" >Here is what the code might look like:

<div class="verbatim" id="verbatim-266">
def&#x00A0;histogram(s):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;d&#x00A0;=&#x00A0;dict()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;c&#x00A0;in&#x00A0;s:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;c&#x00A0;not&#x00A0;in&#x00A0;d:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;d[c]&#x00A0;=&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;else:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;d[c]&#x00A0;=&#x00A0;d[c]&#x00A0;+&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;d</div>
<!--l. 6536--><p class="nopar" > The name of the function is <span 
class="ptmb7t-">histogram</span>, which is a statistical term for a set of counters (or
frequencies).
<a 
 id="dx1-11033"></a>
<a 
 id="dx1-11034"></a>
<a 
 id="dx1-11035"></a>
<!--l. 6546--><p class="noindent" >The first line of the function creates an empty dictionary. The <span 
class="pcrr7tn-">for </span>loop traverses the string. Each time
through the loop, if the character <span 
class="pcrr7tn-">c </span>is not in the dictionary, we create a new item with key <span 
class="pcrr7tn-">c </span>and the
initial value 1 (since we have seen this letter once). If <span 
class="pcrr7tn-">c </span>is already in the dictionary we increment
<span 
class="pcrr7tn-">d[c]</span>.
<a 
 id="dx1-11036"></a>
<!--l. 6555--><p class="noindent" >Here&#8217;s how it works:

<div class="verbatim" id="verbatim-267">
&#x003E;&#x003E;&#x003E;&#x00A0;h&#x00A0;=&#x00A0;histogram(&#8217;brontosaurus&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;h
&#x00A0;<br />{&#8217;a&#8217;:&#x00A0;1,&#x00A0;&#8217;b&#8217;:&#x00A0;1,&#x00A0;&#8217;o&#8217;:&#x00A0;2,&#x00A0;&#8217;n&#8217;:&#x00A0;1,&#x00A0;&#8217;s&#8217;:&#x00A0;2,&#x00A0;&#8217;r&#8217;:&#x00A0;2,&#x00A0;&#8217;u&#8217;:&#x00A0;2,&#x00A0;&#8217;t&#8217;:&#x00A0;1}</div>
<!--l. 6562--><p class="nopar" > The histogram indicates that the letters <span 
class="pcrr7tn-">'a' </span>and <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">b</span><span 
class="pcrr8c-">&#8217;</span></span></span> appear once; <span class="obeylines-h"><span class="verb"><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">o</span><span 
class="pcrr8c-">&#8217;</span></span></span> appears twice, and so
on.
<div class="newtheorem">
<!--l. 6568--><p class="noindent" ><span class="head">
<a 
 id="x1-11037r2"></a>
<span 
class="ptmb7t-">Exercise 9.2</span>  </span>
<a 
 id="dx1-11038"></a>
<a 
 id="dx1-11039"></a>
<!--l. 6573--><p class="noindent" >Dictionaries have a method called <span 
class="pcrr7tn-">get </span>that takes a key and a default value. If the key appears in
the dictionary, <span 
class="pcrr7tn-">get </span>returns the corresponding value; otherwise it returns the default value. For
example:

<div class="verbatim" id="verbatim-268">
&#x003E;&#x003E;&#x003E;&#x00A0;h&#x00A0;=&#x00A0;histogram(&#8217;a&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;h
&#x00A0;<br />{&#8217;a&#8217;:&#x00A0;1}
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;h.get(&#8217;a&#8217;,&#x00A0;0)
&#x00A0;<br />1
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;h.get(&#8217;b&#8217;,&#x00A0;0)
&#x00A0;<br />0</div>
<!--l. 6587--><p class="nopar" > Use <span 
class="pcrr7tn-">get </span>to write <span 
class="pcrr7tn-">histogram </span>more concisely. You should be able to eliminate the <span 
class="pcrr7tn-">if </span>statement.
</div>
<!--l. 6594--><p class="noindent" >
<a 
 id="x1-11040r2"></a>
<!--l. 6594--><p class="noindent" ><span 
class="ptmb7t-x-x-144">9.2</span>   <span 
class="ptmb7t-x-x-144">Dictionaries and files</span>
<a 
 id="Q1-1-119"></a>
<!--l. 6596--><p class="noindent" >One of the common uses of a dictionary is to count the occurrence of words in a file with some written
text. Let&#8217;s start with a very simple file of words taken from the text of <span 
class="ptmri7t-">Romeo and Juliet </span>thanks to
<a 
href="http://shakespeare.mit.edu/Tragedy/romeoandjuliet/romeo_juliet.2.2.html" class="url" ><span 
class="pcrr7tn-">http://shakespeare.mit.edu/Tragedy/romeoandjuliet/romeo_juliet.2.2.html</span></a>.
<!--l. 6603--><p class="noindent" >For the first set of examples, we will use a shortened and simplified version of the text with no
punctuation. Later we will work with the text of the scene with punctuation included.

<div class="verbatim" id="verbatim-269">
But&#x00A0;soft&#x00A0;what&#x00A0;light&#x00A0;through&#x00A0;yonder&#x00A0;window&#x00A0;breaks
&#x00A0;<br />It&#x00A0;is&#x00A0;the&#x00A0;east&#x00A0;and&#x00A0;Juliet&#x00A0;is&#x00A0;the&#x00A0;sun
&#x00A0;<br />Arise&#x00A0;fair&#x00A0;sun&#x00A0;and&#x00A0;kill&#x00A0;the&#x00A0;envious&#x00A0;moon
&#x00A0;<br />Who&#x00A0;is&#x00A0;already&#x00A0;sick&#x00A0;and&#x00A0;pale&#x00A0;with&#x00A0;grief</div>
<!--l. 6613--><p class="nopar" > We will write a Python program to read through the lines of the file, break each line into a list of
words, and then loop through each of the words in the line, and count each word using a
dictionary.
<a 
 id="dx1-11041"></a>
<a 
 id="dx1-11042"></a>
<!--l. 6622--><p class="noindent" >You will see that we have two <span 
class="pcrr7tn-">for </span>loops. The outer loop is reading the lines of the file and the inner
loop is iterating through each of the words on that particular line. This is an example of a pattern called
<span 
class="ptmb7t-">nested loops </span>because one of the loops is the <span 
class="ptmri7t-">outer </span>loop and the other loop is the <span 
class="ptmri7t-">inner</span>
loop.
<!--l. 6629--><p class="noindent" >Because the inner loop executes all of its iterations each time the outer loop makes a single iteration,
we think of the inner loop as iterating &#8220;more quickly&#8221; and the outer loop as iterating more
slowly.
<!--l. 6634--><p class="noindent" >The combination of the two nested loops ensures that we will count every word on every line of the
input file.

<div class="verbatim" id="verbatim-270">
fname&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;&#8217;)
&#x00A0;<br />try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand&#x00A0;=&#x00A0;open(fname)
&#x00A0;<br />except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;File&#x00A0;cannot&#x00A0;be&#x00A0;opened:&#8217;,&#x00A0;fname
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;exit()
&#x00A0;<br />
&#x00A0;<br />counts&#x00A0;=&#x00A0;dict()
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;words&#x00A0;=&#x00A0;line.split()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;word&#x00A0;in&#x00A0;words:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;word&#x00A0;not&#x00A0;in&#x00A0;counts:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;counts[word]&#x00A0;=&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;else:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;counts[word]&#x00A0;+=&#x00A0;1
&#x00A0;<br />
&#x00A0;<br />print&#x00A0;counts</div>
<!--l. 6656--><p class="nopar" > When we run the program, we see a raw dump of all of the counts in unsorted hash order. (the
<span 
class="pcrr7tn-">romeo.txt </span>file is available at <a 
href="www.py4inf.com/code/romeo.txt" class="url" ><span 
class="pcrr7tn-">www.py4inf.com/code/romeo.txt</span></a>)

<div class="verbatim" id="verbatim-271">
python&#x00A0;count1.py
&#x00A0;<br />Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;romeo.txt
&#x00A0;<br />{&#8217;and&#8217;:&#x00A0;3,&#x00A0;&#8217;envious&#8217;:&#x00A0;1,&#x00A0;&#8217;already&#8217;:&#x00A0;1,&#x00A0;&#8217;fair&#8217;:&#x00A0;1,
&#x00A0;<br />&#8217;is&#8217;:&#x00A0;3,&#x00A0;&#8217;through&#8217;:&#x00A0;1,&#x00A0;&#8217;pale&#8217;:&#x00A0;1,&#x00A0;&#8217;yonder&#8217;:&#x00A0;1,
&#x00A0;<br />&#8217;what&#8217;:&#x00A0;1,&#x00A0;&#8217;sun&#8217;:&#x00A0;2,&#x00A0;&#8217;Who&#8217;:&#x00A0;1,&#x00A0;&#8217;But&#8217;:&#x00A0;1,&#x00A0;&#8217;moon&#8217;:&#x00A0;1,
&#x00A0;<br />&#8217;window&#8217;:&#x00A0;1,&#x00A0;&#8217;sick&#8217;:&#x00A0;1,&#x00A0;&#8217;east&#8217;:&#x00A0;1,&#x00A0;&#8217;breaks&#8217;:&#x00A0;1,
&#x00A0;<br />&#8217;grief&#8217;:&#x00A0;1,&#x00A0;&#8217;with&#8217;:&#x00A0;1,&#x00A0;&#8217;light&#8217;:&#x00A0;1,&#x00A0;&#8217;It&#8217;:&#x00A0;1,&#x00A0;&#8217;Arise&#8217;:&#x00A0;1,
&#x00A0;<br />&#8217;kill&#8217;:&#x00A0;1,&#x00A0;&#8217;the&#8217;:&#x00A0;3,&#x00A0;&#8217;soft&#8217;:&#x00A0;1,&#x00A0;&#8217;Juliet&#8217;:&#x00A0;1}</div>
<!--l. 6674--><p class="nopar" > It is a bit inconvenient to look through the dictionary to find the most common words and their
counts, so we need to add some more Python code to get us the output that will be more
helpful.
<!--l. 6681--><p class="noindent" >
<a 
 id="x1-11043r3"></a>
<!--l. 6681--><p class="noindent" ><span 
class="ptmb7t-x-x-144">9.3</span>   <span 
class="ptmb7t-x-x-144">Looping and dictionaries</span>
<a 
 id="Q1-1-120"></a>
<a 
 id="dx1-11044"></a>
<a 
 id="dx1-11045"></a>
<a 
 id="dx1-11046"></a>
<!--l. 6687--><p class="noindent" >If you use a dictionary as the sequence in a <span 
class="pcrr7tn-">for </span>statement, it traverses the keys of the dictionary. For
example, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">print_hist</span></span></span> prints each key and the corresponding value:

<div class="verbatim" id="verbatim-272">
def&#x00A0;print_hist(h):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;c&#x00A0;in&#x00A0;h:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;c,&#x00A0;h[c]</div>
<!--l. 6697--><p class="nopar" > Here&#8217;s what the output looks like:

<div class="verbatim" id="verbatim-273">
&#x003E;&#x003E;&#x003E;&#x00A0;h&#x00A0;=&#x00A0;histogram(&#8217;parrot&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print_hist(h)
&#x00A0;<br />a&#x00A0;1
&#x00A0;<br />p&#x00A0;1
&#x00A0;<br />r&#x00A0;2
&#x00A0;<br />t&#x00A0;1
&#x00A0;<br />o&#x00A0;1</div>
<!--l. 6711--><p class="nopar" > Again, the keys are in no particular order.
<a 
 id="dx1-11047"></a>
<a 
 id="dx1-11048"></a>
<!--l. 6718--><p class="noindent" >If you want to print the keys in alphabetical order, you first make a list of the keys in the dictionary
using the <span 
class="pcrr7tn-">keys </span>method available in dictionary objects, and then sort that list and loop through the
sorted list, looking up each key printing out key/value pairs in sorted order as follows as
follows:

<div class="verbatim" id="verbatim-274">
def&#x00A0;print_sorted_hist(h):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lst&#x00A0;=&#x00A0;h.keys()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lst.sort()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;c&#x00A0;in&#x00A0;lst:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;c,&#x00A0;h[c]</div>
<!--l. 6733--><p class="nopar" > Here&#8217;s what the output looks like:

<div class="verbatim" id="verbatim-275">
&#x003E;&#x003E;&#x003E;&#x00A0;h&#x00A0;=&#x00A0;histogram(&#8217;parrot&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print_sorted_hist(h)
&#x00A0;<br />a&#x00A0;1
&#x00A0;<br />o&#x00A0;1
&#x00A0;<br />p&#x00A0;1
&#x00A0;<br />r&#x00A0;2
&#x00A0;<br />t&#x00A0;1</div>
<!--l. 6747--><p class="nopar" > So now the keys are in alphabetical order.
<!--l. 6752--><p class="noindent" >
<a 
 id="x1-11049r4"></a>
<!--l. 6752--><p class="noindent" ><span 
class="ptmb7t-x-x-144">9.4</span>   <span 
class="ptmb7t-x-x-144">Advanced text parsing</span>
<a 
 id="Q1-1-121"></a>
<!--l. 6754--><p class="noindent" >In the above example using the file <span 
class="pcrr7tn-">romeo.txt</span>, we made the file as simple as possible by
removing any and all punctuation by hand. The real text has lots of punctuation as shown
below:

<div class="verbatim" id="verbatim-276">
But,&#x00A0;soft!&#x00A0;what&#x00A0;light&#x00A0;through&#x00A0;yonder&#x00A0;window&#x00A0;breaks?
&#x00A0;<br />It&#x00A0;is&#x00A0;the&#x00A0;east,&#x00A0;and&#x00A0;Juliet&#x00A0;is&#x00A0;the&#x00A0;sun.
&#x00A0;<br />Arise,&#x00A0;fair&#x00A0;sun,&#x00A0;and&#x00A0;kill&#x00A0;the&#x00A0;envious&#x00A0;moon,
&#x00A0;<br />Who&#x00A0;is&#x00A0;already&#x00A0;sick&#x00A0;and&#x00A0;pale&#x00A0;with&#x00A0;grief,</div>
<!--l. 6765--><p class="nopar" > Since the Python <span 
class="pcrr7tn-">split </span>function looks for spaces and treats words as tokens separated by spaces, we
would treat the words &#8220;soft!&#8221; and &#8220;soft&#8221; as <span 
class="ptmri7t-">different </span>words and create a separate dictionary entry for
each word.
<!--l. 6773--><p class="noindent" >Also since the file has capitalization, we would treat &#8220;who&#8221; and &#8220;Who&#8221; as different words with
different counts.
<!--l. 6777--><p class="noindent" >We can solve both these problems by using the string methods <span 
class="pcrr7tn-">lower</span>, <span 
class="pcrr7tn-">punctuation</span>, and
<span 
class="pcrr7tn-">translate</span>. The <span 
class="pcrr7tn-">translate </span>is the most subtle of the methods. Here is the documentation for
<span 
class="pcrr7tn-">translate</span>:
<!--l. 6782--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">string.translate(s,</span><span 
class="pcrr7tn-">&#x00A0;table[,</span><span 
class="pcrr7tn-">&#x00A0;deletechars])</span></span></span>
<!--l. 6788--><p class="noindent" ><span 
class="ptmri7t-">Delete all characters from s that are in deletechars (if present), and then translate the characters using</span>
<span 
class="ptmri7t-">table, which must be a 256-character string giving the translation for each character value, indexed by</span>
<span 
class="ptmri7t-">its ordinal. If table is None, then only the character deletion step is performed.</span>
<!--l. 6790--><p class="noindent" >We will not specify the <span 
class="pcrr7tn-">table </span>but we will use the <span 
class="pcrr7tn-">deletechars </span>parameter to delete all
of the punctuation. We will even let Python tell us the list of characters that it considers
&#8220;punctuation&#8221;:

<div class="verbatim" id="verbatim-277">
&#x003E;&#x003E;&#x003E;&#x00A0;import&#x00A0;string
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;string.punctuation
&#x00A0;<br />&#8217;!"#$%&amp;\&#8217;()&#x22C6;+,-./:;&#x003C;=&#x003E;?@[\\]^_&#8216;{|}~&#8217;</div>
<!--l. 6800--><p class="nopar" > We make the following modifications to our program:

<div class="verbatim" id="verbatim-278">
import&#x00A0;string&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;New&#x00A0;Code
&#x00A0;<br />
&#x00A0;<br />fname&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;&#8217;)
&#x00A0;<br />try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand&#x00A0;=&#x00A0;open(fname)
&#x00A0;<br />except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;File&#x00A0;cannot&#x00A0;be&#x00A0;opened:&#8217;,&#x00A0;fname
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;exit()
&#x00A0;<br />
&#x00A0;<br />counts&#x00A0;=&#x00A0;dict()
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.translate(None,&#x00A0;string.punctuation)&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;New&#x00A0;Code
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.lower()&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;New&#x00A0;Code
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;words&#x00A0;=&#x00A0;line.split()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;word&#x00A0;in&#x00A0;words:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;word&#x00A0;not&#x00A0;in&#x00A0;counts:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;counts[word]&#x00A0;=&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;else:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;counts[word]&#x00A0;+=&#x00A0;1
&#x00A0;<br />
&#x00A0;<br />print&#x00A0;counts</div>
<!--l. 6828--><p class="nopar" > We use <span 
class="pcrr7tn-">translate </span>to remove all punctuation and <span 
class="pcrr7tn-">lower </span>to force the line to lowercase. Otherwise the
program is unchanged. Note for Python 2.5 and earlier, <span 
class="pcrr7tn-">translate </span>does not accept <span 
class="pcrr7tn-">None </span>as the first
parameter so use this code for the translate call:

<div class="verbatim" id="verbatim-279">
print&#x00A0;a.translate(string.maketrans(&#8217;&#x00A0;&#8217;,&#8217;&#x00A0;&#8217;),&#x00A0;string.punctuation</div>
<!--l. 6840--><p class="nopar" > Part of learning the &#8220;Art of Python&#8221; or &#8220;Thinking Pythonically&#8221; is realizing that Python often has
built-in capabilities for many common data-analysis problems. Over time, you will see enough
example code and read enough of the documentation to know where to look to see if someone has
already written something that makes your job much easier.
<!--l. 6850--><p class="noindent" >The following is an abbreviated version of the output:

<div class="verbatim" id="verbatim-280">
Enter&#x00A0;the&#x00A0;file&#x00A0;name:&#x00A0;romeo-full.txt
&#x00A0;<br />{&#8217;swearst&#8217;:&#x00A0;1,&#x00A0;&#8217;all&#8217;:&#x00A0;6,&#x00A0;&#8217;afeard&#8217;:&#x00A0;1,&#x00A0;&#8217;leave&#8217;:&#x00A0;2,&#x00A0;&#8217;these&#8217;:&#x00A0;2,
&#x00A0;<br />&#8217;kinsmen&#8217;:&#x00A0;2,&#x00A0;&#8217;what&#8217;:&#x00A0;11,&#x00A0;&#8217;thinkst&#8217;:&#x00A0;1,&#x00A0;&#8217;love&#8217;:&#x00A0;24,&#x00A0;&#8217;cloak&#8217;:&#x00A0;1,
&#x00A0;<br />a&#8217;:&#x00A0;24,&#x00A0;&#8217;orchard&#8217;:&#x00A0;2,&#x00A0;&#8217;light&#8217;:&#x00A0;5,&#x00A0;&#8217;lovers&#8217;:&#x00A0;2,&#x00A0;&#8217;romeo&#8217;:&#x00A0;40,
&#x00A0;<br />&#8217;maiden&#8217;:&#x00A0;1,&#x00A0;&#8217;whiteupturned&#8217;:&#x00A0;1,&#x00A0;&#8217;juliet&#8217;:&#x00A0;32,&#x00A0;&#8217;gentleman&#8217;:&#x00A0;1,
&#x00A0;<br />&#8217;it&#8217;:&#x00A0;22,&#x00A0;&#8217;leans&#8217;:&#x00A0;1,&#x00A0;&#8217;canst&#8217;:&#x00A0;1,&#x00A0;&#8217;having&#8217;:&#x00A0;1,&#x00A0;...}</div>
<!--l. 6859--><p class="nopar" > Looking through this output is still unwieldy and we can use Python to gives us exactly what we are
looking for, but to do so, we need to learn about Python <span 
class="ptmb7t-">tuples</span>. We will pick up this example once we
learn about tuples.
<!--l. 6867--><p class="noindent" >
<a 
 id="x1-11050r5"></a>
<!--l. 6867--><p class="noindent" ><span 
class="ptmb7t-x-x-144">9.5</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-122"></a>
<a 
 id="dx1-11051"></a>
<!--l. 6870--><p class="noindent" >As you work with bigger datasets it can become unwieldy to debug by printing and checking data by
hand. Here are some suggestions for debugging large datasets:
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">Scale down the input:</span> </dt><dd 
class="description">If possible, reduce the size of the dataset. For example if the program
     reads a text file, start with just the first 10 lines, or with the smallest example you can
     find. You can either edit the files themselves, or (better) modify the program so it reads
     only the first <span 
class="pcrr7tn-">n </span>lines.
     <!--l. 6882--><p class="noindent" >If there is an error, you can reduce <span 
class="pcrr7tn-">n </span>to the smallest value that manifests the error, and
     then increase it gradually as you find and correct errors.
     </dd><dt class="description">
<span 
class="ptmb7t-">Check summaries and types:</span> </dt><dd 
class="description">Instead  of  printing  and  checking  the  entire  dataset,  consider
     printing summaries of the data: for example, the number of items in a dictionary or the
     total of a list of numbers.
     <!--l. 6890--><p class="noindent" >A common cause of runtime errors is a value that is not the right type. For debugging this
     kind of error, it is often enough to print the type of a value.
     </dd><dt class="description">
<span 
class="ptmb7t-">Write self-checks:</span> </dt><dd 
class="description">Sometimes  you  can  write  code  to  check  for  errors  automatically.  For

     example, if you are computing the average of a list of numbers, you could check that the
     result is not greater than the largest element in the list or less than the smallest. This is
     called a &#8220;sanity check&#8221; because it detects results that are &#8220;insane.&#8221;
<a 
 id="dx1-11052"></a>
<a 
 id="dx1-11053"></a>
     <!--l. 6904--><p class="noindent" >Another kind of check compares the results of two different computations to see if they
     are consistent. This is called a &#8220;consistency check.&#8221;
     </dd><dt class="description">
<span 
class="ptmb7t-">Pretty print the output:</span> </dt><dd 
class="description">Formatting debugging output can make it easier to spot an error.
     </dd></dl>
<!--l. 6913--><p class="noindent" >Again, time you spend building scaffolding can reduce the time you spend debugging.
<a 
 id="dx1-11054"></a>
<!--l. 6918--><p class="noindent" >
<a 
 id="x1-11055r6"></a>
<!--l. 6918--><p class="noindent" ><span 
class="ptmb7t-x-x-144">9.6</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-123"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">dictionary:</span> </dt><dd 
class="description">A mapping from a set of keys to their corresponding values. <a 
 id="dx1-11056"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">hashtable:</span> </dt><dd 
class="description">The algorithm used to implement Python dictionaries. <a 
 id="dx1-11057"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">hash function:</span> </dt><dd 
class="description">A function used by a hashtable to compute the location for a key. <a 
 id="dx1-11058"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">histogram:</span> </dt><dd 
class="description">A set of counters. <a 
 id="dx1-11059"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">implementation:</span> </dt><dd 
class="description">A way of performing a computation. <a 
 id="dx1-11060"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">item:</span> </dt><dd 
class="description">Another name for a key-value pair. <a 
 id="dx1-11061"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">key:</span> </dt><dd 
class="description">An object that appears in a dictionary as the first part of a key-value pair. <a 
 id="dx1-11062"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">key-value pair:</span> </dt><dd 
class="description">The representation of the mapping from a key to a value. <a 
 id="dx1-11063"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">lookup:</span> </dt><dd 
class="description">A dictionary operation that takes a key and finds the corresponding value. <a 
 id="dx1-11064"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">nested loops:</span> </dt><dd 
class="description">When there is one or more loops &#8220;inside&#8221; of another loop. The inner loop runs
     to completion each time the outer loop runs once. <a 
 id="dx1-11065"></a><a 
 id="dx1-11066"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">value:</span> </dt><dd 
class="description">An object that appears in a dictionary as the second part of a key-value pair. This is
     more specific than our previous use of the word &#8220;value.&#8221; <a 
 id="dx1-11067"></a>
     </dd></dl>
<!--l. 6968--><p class="noindent" >
<a 
 id="x1-11068r7"></a>
<!--l. 6968--><p class="noindent" ><span 
class="ptmb7t-x-x-144">9.7</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-124"></a>
<div class="newtheorem">
<!--l. 6970--><p class="noindent" ><span class="head">
<a 
 id="x1-11069r3"></a>
<span 
class="ptmb7t-">Exercise 9.3</span>  </span>Write a program that categorizes each mail message by which day of the week
the commit was done. To do this look for lines which start with &#8220;From&#8221;, then look for the third
word and then keep a running count of each of the days of the week. At the end of the program
print out the contents of your dictionary (order does not matter).

<div class="verbatim" id="verbatim-281">
Sample&#x00A0;Line:
&#x00A0;<br />From&#x00A0;stephen.marquard@uct.ac.za&#x00A0;Sat&#x00A0;Jan&#x00A0;&#x00A0;5&#x00A0;09:14:16&#x00A0;2008
&#x00A0;<br />
&#x00A0;<br />Sample&#x00A0;Execution:
&#x00A0;<br />python&#x00A0;dow.py
&#x00A0;<br />Enter&#x00A0;a&#x00A0;file&#x00A0;name:&#x00A0;mbox-short.txt
&#x00A0;<br />{&#8217;Fri&#8217;:&#x00A0;20,&#x00A0;&#8217;Thu&#8217;:&#x00A0;6,&#x00A0;&#8217;Sat&#8217;:&#x00A0;1}</div>
<!--l. 6987--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 6991--><p class="noindent" ><span class="head">
<a 
 id="x1-11070r4"></a>
<span 
class="ptmb7t-">Exercise 9.4</span>  </span>Write a program to read through a mail log, and figure out who had the most
messages in the file. The program looks for &#8220;From&#8221; lines and takes the second parameter on
those lines as the person who sent the mail.
<!--l. 6997--><p class="noindent" >The program creates a Python dictionary that maps the sender&#8217;s address to the total number of
messages for that person.
<!--l. 7000--><p class="noindent" >After all the data has been read the program looks through the dictionary using a maximum loop
(see Section&#x00A0;<a 
href="#x1-7039r2">5.7.2<!--tex4ht:ref: maximumloop --></a>) to find who has the most messages and how many messages the person has.

<div class="verbatim" id="verbatim-282">
Enter&#x00A0;a&#x00A0;file&#x00A0;name:&#x00A0;mbox-short.txt
&#x00A0;<br />cwen@iupui.edu&#x00A0;5
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;a&#x00A0;file&#x00A0;name:&#x00A0;mbox.txt
&#x00A0;<br />zqian@umich.edu&#x00A0;195</div>
<!--l. 7013--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 7017--><p class="noindent" ><span class="head">
<a 
 id="x1-11071r5"></a>
<span 
class="ptmb7t-">Exercise 9.5</span>  </span>This  program  records  the  domain  name  (instead  of  the  address)  where  the
message was sent from instead of who the mail came from (i.e. the whole e-mail address). At
the end of the program print out the contents of your dictionary.

<div class="verbatim" id="verbatim-283">
python&#x00A0;schoolcount.py
&#x00A0;<br />Enter&#x00A0;a&#x00A0;file&#x00A0;name:&#x00A0;mbox-short.txt
&#x00A0;<br />{&#8217;media.berkeley.edu&#8217;:&#x00A0;4,&#x00A0;&#8217;uct.ac.za&#8217;:&#x00A0;6,&#x00A0;&#8217;umich.edu&#8217;:&#x00A0;7,
&#x00A0;<br />&#8217;gmail.com&#8217;:&#x00A0;1,&#x00A0;&#8217;caret.cam.ac.uk&#8217;:&#x00A0;1,&#x00A0;&#8217;iupui.edu&#8217;:&#x00A0;8}</div>
<!--l. 7029--><p class="nopar" >
</div>

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;10</span><br /><a 
 id="x1-1200010"></a>Tuples</h2>
<a 
 id="x1-12001r1"></a>
<span 
class="ptmb7t-x-x-144">10.1</span>   <span 
class="ptmb7t-x-x-144">Tuples are immutable</span>
<a 
 id="Q1-1-126"></a>
<a 
 id="dx1-12002"></a>
<a 
 id="dx1-12003"></a>
<a 
 id="dx1-12004"></a>
<!--l. 7042--><p class="noindent" >A tuple<span class="footnote-mark"><a 
href="cfbook9.html#fn1x11"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-12005f1"></a> is
a sequence of values much like a list. The values stored in a tuple can be any type, and they are
indexed by integers. The important difference is that tuples are <span 
class="ptmb7t-">immutable</span>. Tuples are also
<span 
class="ptmb7t-">comparable </span>and <span 
class="ptmb7t-">hashable </span>so we can sort lists of them and use tuples as key values in Python
dictionaries.
<a 
 id="dx1-12006"></a>
<a 
 id="dx1-12007"></a>
<a 
 id="dx1-12008"></a>
<a 
 id="dx1-12009"></a>
<!--l. 7058--><p class="noindent" >Syntactically, a tuple is a comma-separated list of values:

<div class="verbatim" id="verbatim-284">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;</div>
<!--l. 7063--><p class="nopar" > Although it is not necessary, it is common to enclose tuples in parentheses to help us quickly identify
tuples when we look at Python code:
<a 
 id="dx1-12010"></a>

<div class="verbatim" id="verbatim-285">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;(&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;)</div>
<!--l. 7075--><p class="nopar" > To create a tuple with a single element, you have to include the final comma:
<a 
 id="dx1-12011"></a>
<a 
 id="dx1-12012"></a>

<div class="verbatim" id="verbatim-286">
&#x003E;&#x003E;&#x003E;&#x00A0;t1&#x00A0;=&#x00A0;(&#8217;a&#8217;,)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;type(t1)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;tuple&#8217;&#x003E;</div>
<!--l. 7089--><p class="nopar" > Without the comma Python treats <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">(</span><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">a</span><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">)</span></span></span> as an expression with a string in parentheses that evaluates to
a string:

<div class="verbatim" id="verbatim-287">
&#x003E;&#x003E;&#x003E;&#x00A0;t2&#x00A0;=&#x00A0;(&#8217;a&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;type(t2)
&#x00A0;<br />&#x003C;type&#x00A0;&#8217;str&#8217;&#x003E;</div>
<!--l. 7100--><p class="nopar" > Another way to construct a tuple is the built-in function <span 
class="pcrr7tn-">tuple</span>. With no argument, it creates an empty
tuple:
<a 
 id="dx1-12013"></a>
<a 
 id="dx1-12014"></a>

<div class="verbatim" id="verbatim-288">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;tuple()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />()</div>
<!--l. 7114--><p class="nopar" > If the argument is a sequence (string, list or tuple), the result of the call to <span 
class="pcrr7tn-">tuple </span>is a tuple with the
elements of the sequence:

<div class="verbatim" id="verbatim-289">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;tuple(&#8217;lupins&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />(&#8217;l&#8217;,&#x00A0;&#8217;u&#8217;,&#x00A0;&#8217;p&#8217;,&#x00A0;&#8217;i&#8217;,&#x00A0;&#8217;n&#8217;,&#x00A0;&#8217;s&#8217;)</div>
<!--l. 7126--><p class="nopar" > Because <span 
class="pcrr7tn-">tuple </span>is the name of a constructor, you should avoid using it as a variable name.
<!--l. 7132--><p class="noindent" >Most list operators also work on tuples. The bracket operator indexes an element:
<a 
 id="dx1-12015"></a>
<a 
 id="dx1-12016"></a>

<div class="verbatim" id="verbatim-290">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;(&#8217;a&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t[0]
&#x00A0;<br />&#8217;a&#8217;</div>
<!--l. 7143--><p class="nopar" > And the slice operator selects a range of elements.
<a 
 id="dx1-12017"></a>
<a 
 id="dx1-12018"></a>
<a 
 id="dx1-12019"></a>
<a 
 id="dx1-12020"></a>

<div class="verbatim" id="verbatim-291">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t[1:3]
&#x00A0;<br />(&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;)</div>
<!--l. 7157--><p class="nopar" > But if you try to modify one of the elements of the tuple, you get an error:
<a 
 id="dx1-12021"></a>
<a 
 id="dx1-12022"></a>
<a 
 id="dx1-12023"></a>
<a 
 id="dx1-12024"></a>

<div class="verbatim" id="verbatim-292">
&#x003E;&#x003E;&#x003E;&#x00A0;t[0]&#x00A0;=&#x00A0;&#8217;A&#8217;
&#x00A0;<br />TypeError:&#x00A0;object&#x00A0;doesn&#8217;t&#x00A0;support&#x00A0;item&#x00A0;assignment</div>
<!--l. 7172--><p class="nopar" > You can&#8217;t modify the elements of a tuple, but you can replace one tuple with another:

<div class="verbatim" id="verbatim-293">
&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;(&#8217;A&#8217;,)&#x00A0;+&#x00A0;t[1:]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />(&#8217;A&#8217;,&#x00A0;&#8217;b&#8217;,&#x00A0;&#8217;c&#8217;,&#x00A0;&#8217;d&#8217;,&#x00A0;&#8217;e&#8217;)</div>
<!--l. 7183--><p class="nopar" >
<a 
 id="x1-12025r2"></a>
<!--l. 7187--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.2</span>   <span 
class="ptmb7t-x-x-144">Comparing tuples</span>
<a 
 id="Q1-1-127"></a>
<a 
 id="dx1-12026"></a>
<a 
 id="dx1-12027"></a>
<a 
 id="dx1-12028"></a>
<a 
 id="dx1-12029"></a>
<!--l. 7194--><p class="noindent" >The comparison operators work with tuples and other sequences; Python starts by comparing the first
element from each sequence. If they are equal, it goes on to the next element, and so on, until it
finds elements that differ. Subsequent elements are not considered (even if they are really
big).

<div class="verbatim" id="verbatim-294">
&#x003E;&#x003E;&#x003E;&#x00A0;(0,&#x00A0;1,&#x00A0;2)&#x00A0;&#x003C;&#x00A0;(0,&#x00A0;3,&#x00A0;4)
&#x00A0;<br />True
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;(0,&#x00A0;1,&#x00A0;2000000)&#x00A0;&#x003C;&#x00A0;(0,&#x00A0;3,&#x00A0;4)
&#x00A0;<br />True</div>
<!--l. 7206--><p class="nopar" > The <span 
class="pcrr7tn-">sort </span>function works the same way. It sorts primarily by first element, but in the case of a tie, it
sorts by second element, and so on.
<!--l. 7213--><p class="noindent" >This feature lends itself to a pattern called <span 
class="ptmb7t-">DSU </span>for
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">Decorate</span> </dt><dd 
class="description">a  sequence  by  building  a  list  of  tuples  with  one  or  more  sort  keys  preceding  the
     elements from the sequence,
     </dd><dt class="description">
<span 
class="ptmb7t-">Sort</span> </dt><dd 
class="description">the list of tuples uring the Python built-in <span 
class="pcrr7tn-">sort</span>, and
     </dd><dt class="description">
<span 
class="ptmb7t-">Undecorate</span> </dt><dd 
class="description">by extracting the sorted elements of the sequence.
     </dd></dl>
<a 
 id="dx1-12030"></a>
<a 
 id="dx1-12031"></a>
<a 
 id="dx1-12032"></a>
<a 
 id="dx1-12033"></a>
<!--l. 7232--><p class="noindent" >For example, suppose you have a list of words and you want to sort them from longest to
shortest:

<div class="verbatim" id="verbatim-295">
def&#x00A0;sort_by_length(words):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;t&#x00A0;=&#x00A0;list()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;word&#x00A0;in&#x00A0;words:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;t.append((len(word),&#x00A0;word))
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;t.sort(reverse=True)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;list()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;length,&#x00A0;word&#x00A0;in&#x00A0;t:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;res.append(word)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;res</div>
<!--l. 7248--><p class="nopar" > The first loop builds a list of tuples, where each tuple is a word preceded by its length.
<!--l. 7254--><p class="noindent" ><span 
class="pcrr7tn-">sort </span>compares the first element, length, first, and only considers the second element to break ties. The
keyword argument <span 
class="pcrr7tn-">reverse=True </span>tells <span 
class="pcrr7tn-">sort </span>to go in decreasing order.
<a 
 id="dx1-12034"></a>
<a 
 id="dx1-12035"></a>
<a 
 id="dx1-12036"></a>
<!--l. 7262--><p class="noindent" >The second loop traverses the list of tuples and builds a list of words in descending order of
length.
<!--l. 7266--><p class="noindent" >
<a 
 id="x1-12037r3"></a>
<!--l. 7266--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.3</span>   <span 
class="ptmb7t-x-x-144">Tuple assignment</span>
<a 
 id="Q1-1-128"></a>
<a 
 id="dx1-12038"></a>
<a 
 id="dx1-12039"></a>
<a 
 id="dx1-12040"></a>
<a 
 id="dx1-12041"></a>
<!--l. 7274--><p class="noindent" >One of the unique syntactic features of the Python language is the ability to have a tuple on the left
hand side of an assignment statement. This allows you to assign more than one variable at a time when
the left hand side is a sequence.
<!--l. 7280--><p class="noindent" >In this example we have a two element list (which is a sequence) and assign the first and second
elements of the sequence to the variables <span 
class="pcrr7tn-">x </span>and <span 
class="pcrr7tn-">y </span>in a single statement.

<div class="verbatim" id="verbatim-296">
&#x003E;&#x003E;&#x003E;&#x00A0;m&#x00A0;=&#x00A0;[&#x00A0;&#8217;have&#8217;,&#x00A0;&#8217;fun&#8217;&#x00A0;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x,&#x00A0;y&#x00A0;=&#x00A0;m
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x
&#x00A0;<br />&#8217;have&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y
&#x00A0;<br />&#8217;fun&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 7293--><p class="nopar" > It is not magic, Python <span 
class="ptmri7t-">roughly </span>translates the tuple assignment syntax to be the
following:<span class="footnote-mark"><a 
href="cfbook10.html#fn2x11"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-12042f2"></a>

<div class="verbatim" id="verbatim-297">
&#x003E;&#x003E;&#x003E;&#x00A0;m&#x00A0;=&#x00A0;[&#x00A0;&#8217;have&#8217;,&#x00A0;&#8217;fun&#8217;&#x00A0;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x&#x00A0;=&#x00A0;m[0]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y&#x00A0;=&#x00A0;m[1]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x
&#x00A0;<br />&#8217;have&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y
&#x00A0;<br />&#8217;fun&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 7312--><p class="nopar" >
<!--l. 7315--><p class="noindent" >Stylistically when we use a tuple on the left hand side of the assignment statement, we omit the
parentheses, but the following is an equally valid syntax:

<div class="verbatim" id="verbatim-298">
&#x003E;&#x003E;&#x003E;&#x00A0;m&#x00A0;=&#x00A0;[&#x00A0;&#8217;have&#8217;,&#x00A0;&#8217;fun&#8217;&#x00A0;]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;(x,&#x00A0;y)&#x00A0;=&#x00A0;m
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;x
&#x00A0;<br />&#8217;have&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;y
&#x00A0;<br />&#8217;fun&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 7328--><p class="nopar" > A particularly clever application of tuple assignment allows us to <span 
class="ptmb7t-">swap </span>the values of two variables in a
single statement:

<div class="verbatim" id="verbatim-299">
&#x003E;&#x003E;&#x003E;&#x00A0;a,&#x00A0;b&#x00A0;=&#x00A0;b,&#x00A0;a</div>
<!--l. 7337--><p class="nopar" > Both sides of this statement are tuples, but the left side is a tuple of variables; the right side is a tuple
of expressions. Each value on the right side is assigned to its respective variable on the left side. All the
expressions on the right side are evaluated before any of the assignments.
<!--l. 7347--><p class="noindent" >The number of variables on the left and the number of values on the right have to be the
same:
<a 
 id="dx1-12043"></a>
<a 
 id="dx1-12044"></a>

<div class="verbatim" id="verbatim-300">
&#x003E;&#x003E;&#x003E;&#x00A0;a,&#x00A0;b&#x00A0;=&#x00A0;1,&#x00A0;2,&#x00A0;3
&#x00A0;<br />ValueError:&#x00A0;too&#x00A0;many&#x00A0;values&#x00A0;to&#x00A0;unpack</div>
<!--l. 7357--><p class="nopar" > More generally, the right side can be any kind of sequence (string, list or tuple). For example, to split
an email address into a user name and a domain, you could write:
<a 
 id="dx1-12045"></a>
<a 
 id="dx1-12046"></a>
<a 
 id="dx1-12047"></a>

<div class="verbatim" id="verbatim-301">
&#x003E;&#x003E;&#x003E;&#x00A0;addr&#x00A0;=&#x00A0;&#8217;monty@python.org&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;uname,&#x00A0;domain&#x00A0;=&#x00A0;addr.split(&#8217;@&#8217;)</div>
<!--l. 7372--><p class="nopar" > The return value from <span 
class="pcrr7tn-">split </span>is a list with two elements; the first element is assigned to <span 
class="pcrr7tn-">uname</span>, the
second to <span 
class="pcrr7tn-">domain</span>.

<div class="verbatim" id="verbatim-302">
&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;uname
&#x00A0;<br />monty
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;domain
&#x00A0;<br />python.org</div>
<!--l. 7385--><p class="nopar" >
<a 
 id="x1-12048r4"></a>
<!--l. 7389--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.4</span>   <span 
class="ptmb7t-x-x-144">Dictionaries and tuples</span>
<a 
 id="Q1-1-129"></a>
<a 
 id="dx1-12049"></a>
<a 
 id="dx1-12050"></a>
<a 
 id="dx1-12051"></a>
<a 
 id="dx1-12052"></a>
<!--l. 7396--><p class="noindent" >Dictionaries have a method called <span 
class="pcrr7tn-">items </span>that returns a list of tuples, where each tuple is a key-value
pair<span class="footnote-mark"><a 
href="cfbook11.html#fn3x11"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-12053f3"></a>.

<div class="verbatim" id="verbatim-303">
&#x003E;&#x003E;&#x003E;&#x00A0;d&#x00A0;=&#x00A0;{&#8217;a&#8217;:10,&#x00A0;&#8217;b&#8217;:1,&#x00A0;&#8217;c&#8217;:22}
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;d.items()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;t
&#x00A0;<br />[(&#8217;a&#8217;,&#x00A0;10),&#x00A0;(&#8217;c&#8217;,&#x00A0;22),&#x00A0;(&#8217;b&#8217;,&#x00A0;1)]</div>
<!--l. 7406--><p class="nopar" > As you should expect from a dictionary, the items are in no particular order.
<!--l. 7412--><p class="noindent" >However, since the list of tuples is a list, and tuples are comparable, we can now sort the list of tuples.
Converting a dictionary to a list of tuples is a way for us to output the contents of a dictionary sorted by
key:

<div class="verbatim" id="verbatim-304">
&#x003E;&#x003E;&#x003E;&#x00A0;d&#x00A0;=&#x00A0;{&#8217;a&#8217;:10,&#x00A0;&#8217;b&#8217;:1,&#x00A0;&#8217;c&#8217;:22}
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t&#x00A0;=&#x00A0;d.items()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t
&#x00A0;<br />[(&#8217;a&#8217;,&#x00A0;10),&#x00A0;(&#8217;c&#8217;,&#x00A0;22),&#x00A0;(&#8217;b&#8217;,&#x00A0;1)]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t.sort()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;t
&#x00A0;<br />[(&#8217;a&#8217;,&#x00A0;10),&#x00A0;(&#8217;b&#8217;,&#x00A0;1),&#x00A0;(&#8217;c&#8217;,&#x00A0;22)]</div>
<!--l. 7426--><p class="nopar" > The new list is sorted in ascending alphabetical order by the key value.
<a 
 id="x1-12054r5"></a>
<!--l. 7431--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.5</span>   <span 
class="ptmb7t-x-x-144">Multiple assignment with dictionaries</span>
<a 
 id="Q1-1-130"></a>
<a 
 id="dx1-12055"></a>
<a 
 id="dx1-12056"></a>
<!--l. 7436--><p class="noindent" >Combining <span 
class="pcrr7tn-">items</span>, tuple assignment and <span 
class="pcrr7tn-">for</span>, you can see a nice code pattern for traversing the keys
and values of a dictionary in a single loop:

<div class="verbatim" id="verbatim-305">
for&#x00A0;key,&#x00A0;val&#x00A0;in&#x00A0;d.items():
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;val,&#x00A0;key</div>
<!--l. 7444--><p class="nopar" > This loop has two <span 
class="ptmb7t-">iteration variables </span>because <span 
class="pcrr7tn-">items </span>returns a list of tuples and <span 
class="pcrr7tn-">key, val</span>
is a tuple assignment that successively iterates through each of the key/value pairs in the
dictionary.
<!--l. 7451--><p class="noindent" >For each iteration through the loop, both <span 
class="pcrr7tn-">key </span>and <span 
class="pcrr7tn-">value </span>are advanced to the next key/value pair in the
dictionary (still in hash order).
<!--l. 7455--><p class="noindent" >The output of this loop is:

<div class="verbatim" id="verbatim-306">
0&#x00A0;a
&#x00A0;<br />2&#x00A0;c
&#x00A0;<br />1&#x00A0;b</div>
<!--l. 7462--><p class="nopar" > Again in hash key order (i.e. no particular order).
<!--l. 7467--><p class="noindent" >If we combine these two techniques, we can print out the contents of a dictionary sorted by the <span 
class="ptmri7t-">value</span>
stored in each key/value pair.
<!--l. 7471--><p class="noindent" >To do this, we first make a list of tuples where each tuple is <span 
class="pcrr7tn-">(value, key)</span>. The <span 
class="pcrr7tn-">items </span>method would
give us a list of <span 
class="pcrr7tn-">(key, value) </span>tuples&#8211;but this time we want to sort by value not key. Once we have
constructed the list with the value/key tuples, it is a simple matter to sort the list in reverse order and
print out the new, sorted list.

<div class="verbatim" id="verbatim-307">
&#x003E;&#x003E;&#x003E;&#x00A0;d&#x00A0;=&#x00A0;{&#8217;a&#8217;:10,&#x00A0;&#8217;b&#8217;:1,&#x00A0;&#8217;c&#8217;:22}
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;l&#x00A0;=&#x00A0;list()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;for&#x00A0;key,&#x00A0;val&#x00A0;in&#x00A0;d.items()&#x00A0;:
&#x00A0;<br />...&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;l.append(&#x00A0;(val,&#x00A0;key)&#x00A0;)
&#x00A0;<br />...
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;l
&#x00A0;<br />[(10,&#x00A0;&#8217;a&#8217;),&#x00A0;(22,&#x00A0;&#8217;c&#8217;),&#x00A0;(1,&#x00A0;&#8217;b&#8217;)]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;l.sort(reverse=True)
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;l
&#x00A0;<br />[(22,&#x00A0;&#8217;c&#8217;),&#x00A0;(10,&#x00A0;&#8217;a&#8217;),&#x00A0;(1,&#x00A0;&#8217;b&#8217;)]
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 7490--><p class="nopar" > By hand-constructing the list of tuples to have the value as the first element of each tuple, we can sort
the list of tuples and get our dictionary contents sorted by value.
<!--l. 7497--><p class="noindent" >
<a 
 id="x1-12057r6"></a>
<!--l. 7497--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.6</span>   <span 
class="ptmb7t-x-x-144">The most common words</span>
<a 
 id="Q1-1-131"></a>
<!--l. 7499--><p class="noindent" >Coming back to our running example of the text from <span 
class="ptmri7t-">Romeo and Juliet </span>Act 2, Scene 2, we can
augment our program to use this technique to print the ten most common words in the text as
follows:

<div class="verbatim" id="verbatim-308">
import&#x00A0;string
&#x00A0;<br />fhand&#x00A0;=&#x00A0;open(&#8217;romeo-full.txt&#8217;)
&#x00A0;<br />counts&#x00A0;=&#x00A0;dict()
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.translate(None,&#x00A0;string.punctuation)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.lower()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;words&#x00A0;=&#x00A0;line.split()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;word&#x00A0;in&#x00A0;words:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;word&#x00A0;not&#x00A0;in&#x00A0;counts:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;counts[word]&#x00A0;=&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;else:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;counts[word]&#x00A0;+=&#x00A0;1
&#x00A0;<br />
&#x00A0;<br />#&#x00A0;Sort&#x00A0;the&#x00A0;dictionary&#x00A0;by&#x00A0;value
&#x00A0;<br />lst&#x00A0;=&#x00A0;list()
&#x00A0;<br />for&#x00A0;key,&#x00A0;val&#x00A0;in&#x00A0;counts.items():
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;lst.append(&#x00A0;(val,&#x00A0;key)&#x00A0;)
&#x00A0;<br />
&#x00A0;<br />lst.sort(reverse=True)
&#x00A0;<br />
&#x00A0;<br />for&#x00A0;key,&#x00A0;val&#x00A0;in&#x00A0;lst[:10]&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;key,&#x00A0;val</div>
<!--l. 7527--><p class="nopar" > The first part of the program which reads the file and computes the dictionary that maps each word to
the count of words in the document is unchanged. But instead of simply printing out <span 
class="pcrr7tn-">counts </span>and
ending the program, we construct a list of <span 
class="pcrr7tn-">(val, key) </span>tuples and then sort the list in reverse
order.
<!--l. 7536--><p class="noindent" >Since the value is first, it will be used for the comparisons and if there is more than one tuple with the
same value, it will look at the second element (the key) so tuples where the value is the same will be
further sorted by the alphabetical order of the key.
<!--l. 7541--><p class="noindent" >At the end we write a nice <span 
class="pcrr7tn-">for loop </span>which does a multiple assignment iteration and prints out the ten
most common words by iterating through a slice of the list (<span 
class="pcrr7tn-">lst[:10]</span>).
<!--l. 7545--><p class="noindent" >So now the output finally looks like what we want for our word frequency analysis.

<div class="verbatim" id="verbatim-309">
61&#x00A0;i
&#x00A0;<br />42&#x00A0;and
&#x00A0;<br />40&#x00A0;romeo
&#x00A0;<br />34&#x00A0;to
&#x00A0;<br />34&#x00A0;the
&#x00A0;<br />32&#x00A0;thou
&#x00A0;<br />32&#x00A0;juliet
&#x00A0;<br />30&#x00A0;that
&#x00A0;<br />29&#x00A0;my
&#x00A0;<br />24&#x00A0;thee</div>
<!--l. 7560--><p class="nopar" > The fact that this complex data parsing and analysis can be done with an easy-to-understand 19 line
Python program is one reason why Python is a good choice as a language for exploring
information.
<!--l. 7568--><p class="noindent" >
<a 
 id="x1-12058r7"></a>
<!--l. 7568--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.7</span>   <span 
class="ptmb7t-x-x-144">Using tuples as keys in dictionaries</span>
<a 
 id="Q1-1-132"></a>
<a 
 id="dx1-12059"></a>
<a 
 id="dx1-12060"></a>
<!--l. 7573--><p class="noindent" >Because tuples are <span 
class="ptmb7t-">hashable </span>and lists are not, if we want to create a <span 
class="ptmb7t-">composite </span>key to use in a
dictionary we must use a tuple as the key.
<!--l. 7577--><p class="noindent" >We would encounter a composite key if we wanted to create a telephone directory that maps
from last-name, first-name pairs to telephone numbers. Assuming that we have defined the
variables <span 
class="pcrr7tn-">last</span>, <span 
class="pcrr7tn-">first </span>and <span 
class="pcrr7tn-">number</span>, we could write a dictionary assignment statement as
follows:

<div class="verbatim" id="verbatim-310">
directory[last,first]&#x00A0;=&#x00A0;number</div>
<!--l. 7587--><p class="nopar" > The expression in brackets is a tuple. We could use tuple assignment in a <span 
class="pcrr7tn-">for </span>loop to traverse this
dictionary.
<a 
 id="dx1-12061"></a>

<div class="verbatim" id="verbatim-311">
for&#x00A0;last,&#x00A0;first&#x00A0;in&#x00A0;directory:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;first,&#x00A0;last,&#x00A0;directory[last,first]</div>
<!--l. 7599--><p class="nopar" > This loop traverses the keys in <span 
class="pcrr7tn-">directory</span>, which are tuples. It assigns the elements of each tuple to
<span 
class="pcrr7tn-">last </span>and <span 
class="pcrr7tn-">first</span>, then prints the name and corresponding telephone number.
<!--l. 7606--><p class="noindent" >There are two ways to represent tuples in a state diagram. The more detailed version shows the indices
and elements just as they appear in a list. For example, the tuple <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">(</span><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">Cleese</span><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">,</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">John</span><span 
class="pcrr8c-">&#8217;</span><span 
class="pcrr7tn-">)</span></span></span> would
appear:
<a 
 id="dx1-12062"></a>
<a 
 id="dx1-12063"></a>
<div  
class="centerline">                      <img 
src="cfbook21x.png" alt="PIC" class="graphics" width="123.46124pt" height="53.19875pt" ><!--tex4ht:graphics  
name="cfbook21x.png" src="figs/tuple1.eps"  
-->                      </div>
<!--l. 7617--><p class="noindent" >But in a larger diagram you might want to leave out the details. For example, a diagram of the
telephone directory might appear:
<div  
class="centerline">            <img 
src="cfbook22x.png" alt="PIC" class="graphics" width="231.86624pt" height="125.46875pt" ><!--tex4ht:graphics  
name="cfbook22x.png" src="figs/dict2.eps"  
-->            </div>
<!--l. 7625--><p class="noindent" >Here the tuples are shown using Python syntax as a graphical shorthand.
<!--l. 7628--><p class="noindent" >The telephone number in the diagram is the complaints line for the BBC, so please don&#8217;t call
it.
<!--l. 7631--><p class="noindent" >

<a 
 id="x1-12064r8"></a>
<!--l. 7631--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.8</span>   <span 
class="ptmb7t-x-x-144">Sequences: strings, lists, and tuples&#8211;Oh My!</span>
<a 
 id="Q1-1-133"></a>
<a 
 id="dx1-12065"></a>
<!--l. 7634--><p class="noindent" >I have focused on lists of tuples, but almost all of the examples in this chapter also work with lists of
lists, tuples of tuples, and tuples of lists. To avoid enumerating the possible combinations, it is
sometimes easier to talk about sequences of sequences.
<!--l. 7639--><p class="noindent" >In many contexts, the different kinds of sequences (strings, lists and tuples) can be used
interchangeably. So how and why do you choose one over the others?
<a 
 id="dx1-12066"></a>
<a 
 id="dx1-12067"></a>
<a 
 id="dx1-12068"></a>
<a 
 id="dx1-12069"></a>
<a 
 id="dx1-12070"></a>
<!--l. 7649--><p class="noindent" >To start with the obvious, strings are more limited than other sequences because the elements have to
be characters. They are also immutable. If you need the ability to change the characters in
a string (as opposed to creating a new string), you might want to use a list of characters
instead.
<!--l. 7655--><p class="noindent" >Lists are more common than tuples, mostly because they are mutable. But there are a few cases where
you might prefer tuples:
<!--l. 7658--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-12072x1">In some contexts, like a <span 
class="pcrr7tn-">return </span>statement, it is syntactically simpler to create a tuple than
     a list. In other contexts, you might prefer a list.
     </li>
     <li 
  class="enumerate" id="x1-12074x2">If you want to use a sequence as a dictionary key, you have to use an immutable type like
     a tuple or string.
     </li>
     <li 
  class="enumerate" id="x1-12076x3">If  you  are  passing  a  sequence  as  an  argument  to  a  function,  using  tuples  reduces  the
     potential for unexpected behavior due to aliasing.
     </li></ol>
<!--l. 7673--><p class="noindent" >Because tuples are immutable, they don&#8217;t provide methods like <span 
class="pcrr7tn-">sort </span>and <span 
class="pcrr7tn-">reverse</span>, which modify
existing lists. However Python provides the built-in functions <span 
class="pcrr7tn-">sorted </span>and <span 
class="pcrr7tn-">reversed</span>, which take
any sequence as a parameter and return a new list with the same elements in a different
order.
<a 
 id="dx1-12077"></a>
<a 
 id="dx1-12078"></a>

<a 
 id="dx1-12079"></a>
<a 
 id="dx1-12080"></a>
<!--l. 7686--><p class="noindent" >
<a 
 id="x1-12081r9"></a>
<!--l. 7686--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.9</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-134"></a>
<a 
 id="dx1-12082"></a>
<a 
 id="dx1-12083"></a>
<a 
 id="dx1-12084"></a>
<a 
 id="dx1-12085"></a>
<!--l. 7693--><p class="noindent" >Lists, dictionaries and tuples are known generically as <span 
class="ptmb7t-">data structures</span>; in this chapter we are starting
to see compound data structures, like lists of tuples, and dictionaries that contain tuples as
keys and lists as values. Compound data structures are useful, but they are prone to what I
call <span 
class="ptmb7t-">shape errors</span>; that is, errors caused when a data structure has the wrong type, size or
composition or perhaps you write some code and forget the shape of your data and introduce an
error.
<!--l. 7702--><p class="noindent" >For example, if you are expecting a list with one integer and I give you a plain old integer (not in a
list), it won&#8217;t work.
<!--l. 7705--><p class="noindent" >When you are debugging a program, and especially if you are working on a hard bug, there are four
things to try:
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">reading:</span> </dt><dd 
class="description">Examine your code, read it back to yourself, and check that it says what you meant
     to say.
     </dd><dt class="description">
<span 
class="ptmb7t-">running:</span> </dt><dd 
class="description">Experiment by making changes and running different versions. Often if you display
     the  right  thing  at  the  right  place  in  the  program,  the  problem  becomes  obvious,  but
     sometimes you have to spend some time to build scaffolding.
     </dd><dt class="description">
<span 
class="ptmb7t-">ruminating:</span> </dt><dd 
class="description">Take some time to think! What kind of error is it: syntax, runtime, semantic? What
     information can you get from the error messages, or from the output of the program?
     What kind of error could cause the problem you&#8217;re seeing? What did you change last,
     before the problem appeared?
     </dd><dt class="description">
<span 
class="ptmb7t-">retreating:</span> </dt><dd 
class="description">At some point, the best thing to do is back off, undoing recent changes, until you
     get back to a program that works and that you understand. Then you can start rebuilding.
     </dd></dl>

<!--l. 7730--><p class="noindent" >Beginning programmers sometimes get stuck on one of these activities and forget the others. Each
activity comes with its own failure mode.
<a 
 id="dx1-12086"></a>
<!--l. 7736--><p class="noindent" >For example, reading your code might help if the problem is a typographical error, but
not if the problem is a conceptual misunderstanding. If you don&#8217;t understand what your
program does, you can read it 100 times and never see the error, because the error is in your
head.
<a 
 id="dx1-12087"></a>
<!--l. 7744--><p class="noindent" >Running experiments can help, especially if you run small, simple tests. But if you run experiments
without thinking or reading your code, you might fall into a pattern I call &#8220;random walk
programming,&#8221; which is the process of making random changes until the program does the right thing.
Needless to say, random walk programming can take a long time.
<a 
 id="dx1-12088"></a>
<a 
 id="dx1-12089"></a>
<!--l. 7754--><p class="noindent" >You have to take time to think. Debugging is like an experimental science. You should have at least one
hypothesis about what the problem is. If there are two or more possibilities, try to think of a test that
would eliminate one of them.
<!--l. 7759--><p class="noindent" >Taking a break helps with the thinking. So does talking. If you explain the problem to someone
else (or even yourself), you will sometimes find the answer before you finish asking the
question.
<!--l. 7763--><p class="noindent" >But even the best debugging techniques will fail if there are too many errors, or if the code you are
trying to fix is too big and complicated. Sometimes the best option is to retreat, simplifying the
program until you get to something that works and that you understand.
<!--l. 7769--><p class="noindent" >Beginning programmers are often reluctant to retreat because they can&#8217;t stand to delete a line of
code (even if it&#8217;s wrong). If it makes you feel better, copy your program into another file
before you start stripping it down. Then you can paste the pieces back in a little bit at a
time.
<!--l. 7775--><p class="noindent" >Finding a hard bug requires reading, running, ruminating, and sometimes retreating. If you get stuck on
one of these activities, try the others.
<!--l. 7780--><p class="noindent" >
<a 
 id="x1-12090r10"></a>
<!--l. 7780--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.10</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-135"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">comparable:</span> </dt><dd 
class="description">A type where one value can be checked to see if it is greater than, less than or
     equal to another value of the same type. Types which are comparable can be put in a list
     and sorted. <a 
 id="dx1-12091"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">data structure:</span> </dt><dd 
class="description">A collection of related values, often organized in lists, dictionaries, tuples, etc.
     <a 
 id="dx1-12092"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">DSU:</span> </dt><dd 
class="description">Abbreviation  of  &#8220;decorate-sort-undecorate,&#8221;  a  pattern  that  involves  building  a  list  of
     tuples, sorting, and extracting part of the result. <a 
 id="dx1-12093"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">gather:</span> </dt><dd 
class="description">The operation of assembling a variable-length argument tuple. <a 
 id="dx1-12094"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">hashable:</span> </dt><dd 
class="description">A type that has a hash function. Immutable types like integers, floats and strings are
     hashable; mutable types like lists and dictionaries are not. <a 
 id="dx1-12095"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">scatter:</span> </dt><dd 
class="description">The operation of treating a sequence as a list of arguments. <a 
 id="dx1-12096"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">shape (of a data structure):</span> </dt><dd 
class="description">A summary of the type, size and composition of a data structure.
     <a 
 id="dx1-12097"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">singleton:</span> </dt><dd 
class="description">A list (or other sequence) with a single element. <a 
 id="dx1-12098"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">tuple:</span> </dt><dd 
class="description">An immutable sequence of elements. <a 
 id="dx1-12099"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">tuple assignment:</span> </dt><dd 
class="description">An assignment with a sequence on the right side and a tuple of variables on
     the left. The right side is evaluated and then its elements are assigned to the variables on
     the left. <a 
 id="dx1-12100"></a><a 
 id="dx1-12101"></a>
     </dd></dl>
<!--l. 7832--><p class="noindent" >
<a 
 id="x1-12102r11"></a>
<!--l. 7832--><p class="noindent" ><span 
class="ptmb7t-x-x-144">10.11</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-136"></a>
<div class="newtheorem">
<!--l. 7834--><p class="noindent" ><span class="head">
<a 
 id="x1-12103r1"></a>

<span 
class="ptmb7t-">Exercise 10.1</span>  </span>Revise  a  previous  program  as  follows:  Read  and  parse  the  &#8220;From&#8221;  lines  and
pull out the addresses from the line. Count the number of messages from each person using a
dictionary.
<!--l. 7840--><p class="noindent" >After all the data has been read print the person with the most commits by creating a list of
(count, email) tuples from the dictionary and then sorting the list in reverse order and print out
the person who has the most commits.

<div class="verbatim" id="verbatim-312">
Sample&#x00A0;Line:
&#x00A0;<br />From&#x00A0;stephen.marquard@uct.ac.za&#x00A0;Sat&#x00A0;Jan&#x00A0;&#x00A0;5&#x00A0;09:14:16&#x00A0;2008
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;a&#x00A0;file&#x00A0;name:&#x00A0;mbox-short.txt
&#x00A0;<br />cwen@iupui.edu&#x00A0;5
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;a&#x00A0;file&#x00A0;name:&#x00A0;mbox.txt
&#x00A0;<br />zqian@umich.edu&#x00A0;195</div>
<!--l. 7857--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 7860--><p class="noindent" ><span class="head">
<a 
 id="x1-12104r2"></a>
<span 
class="ptmb7t-">Exercise 10.2</span>  </span>This program counts the distribution of the hour of the day for each of the
messages. You can pull the hour from the &#8220;From&#8221; line by finding the time string and then
splitting that string into parts using the colon character. Once you have accumulated the
counts for each hour, print out the counts, one per line, sorted by hour as shown below.

<div class="verbatim" id="verbatim-313">
Sample&#x00A0;Execution:
&#x00A0;<br />python&#x00A0;timeofday.py
&#x00A0;<br />Enter&#x00A0;a&#x00A0;file&#x00A0;name:&#x00A0;mbox-short.txt
&#x00A0;<br />04&#x00A0;3
&#x00A0;<br />06&#x00A0;1
&#x00A0;<br />07&#x00A0;1
&#x00A0;<br />09&#x00A0;2
&#x00A0;<br />10&#x00A0;3
&#x00A0;<br />11&#x00A0;6
&#x00A0;<br />14&#x00A0;1
&#x00A0;<br />15&#x00A0;2
&#x00A0;<br />16&#x00A0;4
&#x00A0;<br />17&#x00A0;2
&#x00A0;<br />18&#x00A0;1
&#x00A0;<br />19&#x00A0;1</div>
<!--l. 7884--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 7889--><p class="noindent" ><span class="head">
<a 
 id="x1-12105r3"></a>
<span 
class="ptmb7t-">Exercise 10.3</span>  </span>Write a function called <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">most_frequent</span></span></span> that takes a string and prints the letters
in  decreasing  order  of  frequency.  Find  text  samples  from  several  different  languages  and
see how letter frequency varies between languages. Compare your results with the tables at
<a 
href="wikipedia.org/wiki/Letter_frequencies" class="url" ><span 
class="pcrr7tn-">wikipedia.org/wiki/Letter_frequencies</span></a>.
<a 
 id="dx1-12106"></a>
<a 
 id="dx1-12107"></a>
</div>

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;11</span><br /><a 
 id="x1-1300011"></a>Regular expressions</h2>
<!--l. 1436--><p class="noindent" >So far we have been reading through files, looking for patterns and extracting various bits of lines that
we find interesting. We have been using string methods like <span 
class="pcrr7tn-">split </span>and <span 
class="pcrr7tn-">find </span>and using lists and string
slicing to extract portions of the lines. <a 
 id="dx1-13001"></a><a 
 id="dx1-13002"></a> <a 
 id="dx1-13003"></a>
<!--l. 1441--><p class="noindent" >This task of searching and extracting is so common that Python has a very powerful library called
<span 
class="ptmb7t-">regular expressions </span>that handles many of these tasks quite elegantly. The reason we have not
introduced regular expressions earlier in the book is because while they are very powerful, they are a
little complicated and their syntax takes some getting used to.
<!--l. 1443--><p class="noindent" >Regular expressions are almost their own little programming language for searching and parsing
strings. As a matter of fact, entire books have been written on the topic of regular expressions. In this
chapter, we will only cover the basics of regular expressions. For more detail on regular expressions,
see:
<!--l. 1445--><p class="noindent" ><a 
href="http://en.wikipedia.org/wiki/Regular_expression" class="url" ><span 
class="pcrr7tn-">http://en.wikipedia.org/wiki/Regular_expression</span></a>
<!--l. 1447--><p class="noindent" ><a 
href="http://docs.python.org/library/re.html" class="url" ><span 
class="pcrr7tn-">http://docs.python.org/library/re.html</span></a>
<!--l. 1449--><p class="noindent" >The regular expression library must be imported into your program before you can use it. The simplest
use of the regular expression library is the <span 
class="pcrr7tn-">search() </span>function. The following program demonstrates a
trivial use of the search function. <a 
 id="dx1-13004"></a>

<div class="verbatim" id="verbatim-314">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;re.search(&#8217;From:&#8217;,&#x00A0;line)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line</div>
<!--l. 1460--><p class="nopar" > We open the file, loop through each line and use the regular expression <span 
class="pcrr7tn-">search() </span>to only print out
lines that contain the string &#8220;From:&#8221;. This program does not use the real power of regular
expressions since we could have just as easily used <span 
class="pcrr7tn-">line.find() </span>to accomplish the same result.
<a 
 id="dx1-13005"></a>
<!--l. 1466--><p class="noindent" >The power of the regular expressions comes when we add to special characters to the search string that
allow us to more precisely control which lines match the string. Adding these special characters to our
regular expression allow us to do sophisticated matching and extraction while writing very little
code.
<!--l. 1468--><p class="noindent" >For example, the caret character is uses in regular expressions to match &#8220;the beginning&#8221; of a line. We
could change our application to only match lines where &#8220;From:&#8221; was at the beginning of the line as
follows:

<div class="verbatim" id="verbatim-315">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;re.search(&#8217;^From:&#8217;,&#x00A0;line)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line</div>
<!--l. 1481--><p class="nopar" > Now we will only match lines that <span 
class="ptmri7t-">start with </span>the string &#8220;From:&#8221;. This is still a very simple
example that we could have done equivalently with the <span 
class="pcrr7tn-">startswith() </span>method from the
string library. But it serves to introduce the notion that regular expressions contain special
action characters that give us more control as to what will match the regular expression.
<a 
 id="dx1-13006"></a>
<a 
 id="x1-13007r1"></a>
<span 
class="ptmb7t-x-x-144">11.1</span>   <span 
class="ptmb7t-x-x-144">Character matching in regular expressions</span>
<a 
 id="Q1-1-138"></a>
<!--l. 1489--><p class="noindent" >There are a number of other special characters that let us build even more powerful regular
expressions. The most commonly used special character is the period character which matches any
character. <a 
 id="dx1-13008"></a><a 
 id="dx1-13009"></a>
<!--l. 1493--><p class="noindent" >In the following example, the regular expression &#8220;F..m:&#8221; would match any of the strings &#8220;From:&#8221;,
&#8220;Fxxm:&#8221;, &#8220;F12m:&#8221;, or &#8220;F!@m:&#8221; since the period characters in the regular expression match any
character.

<div class="verbatim" id="verbatim-316">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;re.search(&#8217;^F..m:&#8217;,&#x00A0;line)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line</div>
<!--l. 1503--><p class="nopar" > This is particularly powerful when combined with the ability to indicate that a character can be
repeated any number of times using the &#8220;*&#8221; or &#8220;+&#8221; characters in your regular expression. These special
characters mean that instead of matching a single character in the search string they match
zero-or-more in the case of the asterisk or one-or-more of the characters in the case of the plus
sign.
<!--l. 1508--><p class="noindent" >We can further narrow down the lines that we match using a repeated <span 
class="ptmb7t-">wild card </span>character in the
following example:

<div class="verbatim" id="verbatim-317">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;re.search(&#8217;^From:.+@&#8217;,&#x00A0;line)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line</div>
<!--l. 1518--><p class="nopar" > The search string &#8220;<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">^</span></span></span>From:.+@&#8221; will successfully match lines that start with &#8220;From:&#8221; followed
by one or more characters &#8220;.+&#8221; followed by an at-sign. So this will match the following
line:
<!--l. 1524--><p class="noindent" ><span 
class="ptmb7t-">From:</span><span class="underline">  <span 
class="pcrr7tn-">stephen.marquard</span></span><span 
class="ptmb7t-">@</span><span 
class="pcrr7tn-">uct.ac.za</span>
<!--l. 1527--><p class="noindent" >You can think of the &#8220;.+&#8221; wildcard as expanding to match all the characters between the colon
character and the at-sign.
<!--l. 1532--><p class="noindent" ><span 
class="ptmb7t-">From:</span><span class="underline"><span 
class="pcrr7tn-">.+</span></span><span 
class="ptmb7t-">@</span>
<!--l. 1535--><p class="noindent" >It is good to think of the plus and asterisk characters as &#8220;pushy&#8221;. For example the following string
would match the last at-sign in the string as the &#8220;.+&#8221; pushes outwards as shown below:
<!--l. 1538--><p class="noindent" ><span 
class="ptmb7t-">From:</span><span class="underline">  <span 
class="pcrr7tn-">stephen.marquard@uct.ac.za, csev@umich.edu, and cwen</span></span><span 
class="ptmb7t-">@</span><span 
class="pcrr7tn-">iupui.edu</span>
<!--l. 1541--><p class="noindent" >It is possible to tell an asterisk or plus-sign not to be so &#8220;greedy&#8221; by adding another character. See the
detailed documentation for information on turning off the greedy behavior. <a 
 id="dx1-13010"></a>
<!--l. 1546--><p class="noindent" >
<a 
 id="x1-13011r2"></a>
<!--l. 1546--><p class="noindent" ><span 
class="ptmb7t-x-x-144">11.2</span>   <span 
class="ptmb7t-x-x-144">Extracting data using regular expressions</span>
<a 
 id="Q1-1-139"></a>
<!--l. 1548--><p class="noindent" >If we want to extract data from a string in Python we can use the <span 
class="pcrr7tn-">findall() </span>method to extract all of
the substrings which match a regular expression. Let&#8217;s use the example of wanting to extract anything
that looks like an e-mail address from any line regardless of format. For example, we want to pull the
e-mail addresses from each of the following lines:

<div class="verbatim" id="verbatim-318">
From&#x00A0;stephen.marquard@uct.ac.za&#x00A0;Sat&#x00A0;Jan&#x00A0;&#x00A0;5&#x00A0;09:14:16&#x00A0;2008
&#x00A0;<br />Return-Path:&#x00A0;&#x003C;postmaster@collab.sakaiproject.org&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;&#x003C;source@collab.sakaiproject.org&#x003E;;
&#x00A0;<br />Received:&#x00A0;(from&#x00A0;apache@localhost)
&#x00A0;<br />Author:&#x00A0;stephen.marquard@uct.ac.za</div>
<!--l. 1557--><p class="nopar" > We don&#8217;t want to write code for each of the types of lines, splitting and slicing differently for each
line. This following program uses <span 
class="pcrr7tn-">findall() </span>to find the lines with e-mail addresses in them and
extract one or more addresses from each of those lines. <a 
 id="dx1-13012"></a><a 
 id="dx1-13013"></a>

<div class="verbatim" id="verbatim-319">
import&#x00A0;re
&#x00A0;<br />s&#x00A0;=&#x00A0;&#8217;Hello&#x00A0;from&#x00A0;csev@umich.edu&#x00A0;to&#x00A0;cwen@iupui.edu&#x00A0;about&#x00A0;the&#x00A0;meeting&#x00A0;@2PM&#8217;
&#x00A0;<br />lst&#x00A0;=&#x00A0;re.findall(&#8217;\S+@\S+&#8217;,&#x00A0;s)
&#x00A0;<br />print&#x00A0;lst</div>
<!--l. 1570--><p class="nopar" > The <span 
class="pcrr7tn-">findall() </span>method searches the string in the second argument and returns a list of all of the
strings that look like e-mail addresses. We are using a two-character sequence that matches a
non-whitespace character (<span 
class="zpzccmry-">\</span>S).
<!--l. 1576--><p class="noindent" >The output of the program would be:

<div class="verbatim" id="verbatim-320">
[&#8217;csev@umich.edu&#8217;,&#x00A0;&#8217;cwen@iupui.edu&#8217;]</div>
<!--l. 1581--><p class="nopar" > Translating the regular expression, we are looking for substrings that have at least one non-whitespace
character, followed by an at-sign, followed by at least one more non-white space characters. Also, the
&#8220;<span 
class="zpzccmry-">\</span>S+&#8221; matches as many non-whitespace characters as possible (this is called <span 
class="ptmb7t-">&#8220;greedy&#8221; </span>matching in
regular expressions).
<!--l. 1586--><p class="noindent" >The regular expression would match twice (csev@umich.edu and cwen@iupui.edu) but it would not
match the string &#8220;@2PM&#8221; because there are no non-blank characters <span 
class="ptmri7t-">before </span>the at-sign. We can use
this regular expression in a program to read all the lines in a file and print out anything that looks like
an e-mail address as follows:

<div class="verbatim" id="verbatim-321">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;=&#x00A0;re.findall(&#8217;\S+@\S+&#8217;,&#x00A0;line)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(x)&#x00A0;&#x003E;&#x00A0;0&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;x</div>
<!--l. 1598--><p class="nopar" > We read each line and then extract all the substrings that match our regular expression. Since
<span 
class="pcrr7tn-">findall() </span>returns a list, we simple check if the number of elements in our returned list is more than
zero to print only lines where we found at least one substring that looks like an e-mail
address.
<!--l. 1603--><p class="noindent" >If we run the program on <span 
class="pcrr7tn-">mbox.txt </span>we get the following output:

<div class="verbatim" id="verbatim-322">
[&#8217;wagnermr@iupui.edu&#8217;]
&#x00A0;<br />[&#8217;cwen@iupui.edu&#8217;]
&#x00A0;<br />[&#8217;&#x003C;postmaster@collab.sakaiproject.org&#x003E;&#8217;]
&#x00A0;<br />[&#8217;&#x003C;200801032122.m03LMFo4005148@nakamura.uits.iupui.edu&#x003E;&#8217;]
&#x00A0;<br />[&#8217;&#x003C;source@collab.sakaiproject.org&#x003E;;&#8217;]
&#x00A0;<br />[&#8217;&#x003C;source@collab.sakaiproject.org&#x003E;;&#8217;]
&#x00A0;<br />[&#8217;&#x003C;source@collab.sakaiproject.org&#x003E;;&#8217;]
&#x00A0;<br />[&#8217;apache@localhost)&#8217;]
&#x00A0;<br />[&#8217;source@collab.sakaiproject.org;&#8217;]</div>
<!--l. 1616--><p class="nopar" > Some of our E-mail addresses have incorrect characters like &#8220;<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x003C;</span></span></span>&#8221; or &#8220;;&#8221; at the beginning or end. Let&#8217;s
declare that we are only interested in the portion of the string that starts and ends with a letter or a
number.
<!--l. 1621--><p class="noindent" >To do this, we use another feature of regular expressions. Square brackets are used to indicate a set of
multiple acceptable characters we are willing to consider matching. In a sense, the &#8220;<span 
class="zpzccmry-">\</span>S&#8221; is asking to
match the set of &#8220;non-whitespace characters&#8221;. Now we will be a little more explicit in terms of the
characters we will match.
<!--l. 1623--><p class="noindent" >Here is our new regular expression:

<div class="verbatim" id="verbatim-323">
[a-zA-Z0-9]\S&#x22C6;@\S&#x22C6;[a-zA-Z]</div>
<!--l. 1628--><p class="nopar" > This is getting a little complicated and you can begin to see why regular expressions are their own
little language unto themselves. Translating this regular expression, we are looking for substrings that
start with a <span 
class="ptmri7t-">single </span>lowercase letter, upper case letter, or number &#8220;[a-zA-Z0-9]&#8221; followed by zero or
more non blank characters &#8220;<span 
class="zpzccmry-">\</span>S*&#8221;, followed by an at-sign, followed by zero or more non-blank
characters &#8220;<span 
class="zpzccmry-">\</span>S*&#8221; followed by an upper or lower case letter. Note that we switched from &#8220;+&#8221; to &#8220;*&#8221; to
indicate zero-or-more non-blank characters since &#8220;[a-zA-Z0-9]&#8221; is already one non-blank character.
Remember that the &#8220;*&#8221; or &#8220;+&#8221; applies to the single character immediately to the left of the plus or
asterisk. <a 
 id="dx1-13014"></a>
<!--l. 1634--><p class="noindent" >If we use this expression in our program, our data is much cleaner:

<div class="verbatim" id="verbatim-324">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;=&#x00A0;re.findall(&#8217;[a-zA-Z0-9]\S+@\S+[a-zA-Z]&#8217;,&#x00A0;line)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(x)&#x00A0;&#x003E;&#x00A0;0&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;x</div>
<!--l. 1645--><p class="nopar" >

<div class="verbatim" id="verbatim-325">
&#x00A0;<br />[&#8217;wagnermr@iupui.edu&#8217;]
&#x00A0;<br />[&#8217;cwen@iupui.edu&#8217;]
&#x00A0;<br />[&#8217;postmaster@collab.sakaiproject.org&#8217;]
&#x00A0;<br />[&#8217;200801032122.m03LMFo4005148@nakamura.uits.iupui.edu&#8217;]
&#x00A0;<br />[&#8217;source@collab.sakaiproject.org&#8217;]
&#x00A0;<br />[&#8217;source@collab.sakaiproject.org&#8217;]
&#x00A0;<br />[&#8217;source@collab.sakaiproject.org&#8217;]
&#x00A0;<br />[&#8217;apache@localhost&#8217;]</div>
<!--l. 1659--><p class="nopar" > Notice that on the &#8220;source@collab.sakaiproject.org&#8221; lines, our regular expression eliminated two
letters at the end of the string (&#8220;<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x003E;</span></span></span>;&#8221;). This is because when we append &#8220;[a-zA-Z]&#8221; to the end of our
regular expression, we are demanding that whatever string the regular expression parser finds, it must
end with a letter. So when it sees the &#8220;<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x003E;</span></span></span>&#8221; after &#8220;sakaiproject.org<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x003E;</span></span></span>;&#8221; it simply stops at the last
&#8220;matching&#8221; letter it found (i.e. the &#8220;g&#8221; was the last good match).
<!--l. 1664--><p class="noindent" >Also note that the output of the program is a Python list that has a string as the single element in the
list.
<!--l. 1666--><p class="noindent" >
<a 
 id="x1-13015r3"></a>
<!--l. 1666--><p class="noindent" ><span 
class="ptmb7t-x-x-144">11.3</span>   <span 
class="ptmb7t-x-x-144">Combining searching and extracting</span>
<a 
 id="Q1-1-140"></a>
<!--l. 1668--><p class="noindent" >If we want to find numbers on lines that start with the string &#8220;X-&#8221; such as:

<div class="verbatim" id="verbatim-326">
X-DSPAM-Confidence:&#x00A0;0.8475
&#x00A0;<br />X-DSPAM-Probability:&#x00A0;0.0000</div>
<!--l. 1674--><p class="nopar" > We don&#8217;t just want any floating point numbers from any lines. We only to extract numbers from lines
that have the above syntax.
<!--l. 1679--><p class="noindent" >We can construct the following regular expression to select the lines:

<div class="verbatim" id="verbatim-327">
^X-.&#x22C6;:&#x00A0;[0-9.]+</div>
<!--l. 1684--><p class="nopar" > Translating this, we are saying, we want lines that start with &#8220;X-&#8221; followed by zero or more characters
&#8220;.*&#8221; followed by a colon (&#8220;:&#8221;) and then a space. After the space we are looking for one or more
characters that are either a digit (0-9) or a period &#8220;[0-9.]+&#8221;. Note that in between the square
braces, the period matches an actual period (i.e. it is not a wildcard between the square
brackets).
<!--l. 1689--><p class="noindent" >This is a very tight expression that will pretty much match only the lines we are interested in as
follows:

<div class="verbatim" id="verbatim-328">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;re.search(&#8217;^X\S&#x22C6;:&#x00A0;[0-9.]+&#8217;,&#x00A0;line)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line</div>
<!--l. 1699--><p class="nopar" > When we run the program, we see the data nicely filtered to show only the lines we are looking
for.

<div class="verbatim" id="verbatim-329">
X-DSPAM-Confidence:&#x00A0;0.8475
&#x00A0;<br />X-DSPAM-Probability:&#x00A0;0.0000
&#x00A0;<br />X-DSPAM-Confidence:&#x00A0;0.6178
&#x00A0;<br />X-DSPAM-Probability:&#x00A0;0.0000</div>
<!--l. 1711--><p class="nopar" > But now we have to solve the problem of extracting the numbers using <span 
class="pcrr7tn-">split</span>. While it would be
simple enough to use <span 
class="pcrr7tn-">split</span>, we can use another feature of regular expressions to both search and
parse the line at the same time. <a 
 id="dx1-13016"></a>
<!--l. 1717--><p class="noindent" >Parentheses are another special character in regular expressions. When you add parentheses to
a regular expression they are ignored when matching the string, but when you are using
<span 
class="pcrr7tn-">findall()</span>, parentheses indicate that while you want the whole expression to match, you only
are interested in extracting a portion of the substring that matches the regular expression.
<a 
 id="dx1-13017"></a><a 
 id="dx1-13018"></a>
<!--l. 1721--><p class="noindent" >So we make the following change to our program:

<div class="verbatim" id="verbatim-330">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;=&#x00A0;re.findall(&#8217;^X\S&#x22C6;:&#x00A0;([0-9.]+)&#8217;,&#x00A0;line)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(x)&#x00A0;&#x003E;&#x00A0;0&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;x</div>
<!--l. 1732--><p class="nopar" > Instead of calling <span 
class="pcrr7tn-">search()</span>, we add parentheses around the part of the regular expression that
represents the floating point number to indicate we only want <span 
class="pcrr7tn-">findall() </span>to give us back the floating
point number portion of the matching string.
<!--l. 1737--><p class="noindent" >The output from this program is as follows:

<div class="verbatim" id="verbatim-331">
[&#8217;0.8475&#8217;]
&#x00A0;<br />[&#8217;0.0000&#8217;]
&#x00A0;<br />[&#8217;0.6178&#8217;]
&#x00A0;<br />[&#8217;0.0000&#8217;]
&#x00A0;<br />[&#8217;0.6961&#8217;]
&#x00A0;<br />[&#8217;0.0000&#8217;]
&#x00A0;<br />..</div>
<!--l. 1748--><p class="nopar" > The numbers are still in a list and need to be converted from strings to floating point but we have
used the power of regular expressions to both search and extract the information we found
interesting.
<!--l. 1753--><p class="noindent" >As another example of this technique, if you look at the file there are a number of lines of the
form:

<div class="verbatim" id="verbatim-332">
Details:&#x00A0;http://source.sakaiproject.org/viewsvn/?view=rev&amp;rev=39772</div>
<!--l. 1759--><p class="nopar" > If we wanted to extract all of the revision numbers (the integer number at the end of these lines) using
the same technique as above, we could write the following program:

<div class="verbatim" id="verbatim-333">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;=&#x00A0;re.findall(&#8217;^Details:.&#x22C6;rev=([0-9.]+)&#8217;,&#x00A0;line)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(x)&#x00A0;&#x003E;&#x00A0;0:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;x</div>
<!--l. 1773--><p class="nopar" > Translating our regular expression, we are looking for lines that start with &#8220;Details:&#8217;, followed by any
any number of characters &#8220;.*&#8221; followed by &#8220;rev=&#8221; and then by one or more digits. We want lines that
match the entire expression but we only want to extract the integer number at the end of the line so we
surround &#8220;[0-9]+&#8221; with parentheses.
<!--l. 1778--><p class="noindent" >When we run the program, we get the following output:

<div class="verbatim" id="verbatim-334">
[&#8217;39772&#8217;]
&#x00A0;<br />[&#8217;39771&#8217;]
&#x00A0;<br />[&#8217;39770&#8217;]
&#x00A0;<br />[&#8217;39769&#8217;]
&#x00A0;<br />...</div>
<!--l. 1787--><p class="nopar" > Remember that the &#8220;[0-9]+&#8221; is &#8220;greedy&#8221; and it tries to make as large a string of digits as possible
before extracting those digits. This &#8220;greedy&#8221; behavior is why we get all five digits for each number.
The regular expression library expands in both directions until it counters a non-digit, the beginning, or
the end of a line.
<!--l. 1792--><p class="noindent" >Now we can use regular expressions to re-do an exercise from earlier in the book where
we were interested in the time of day of each mail message. We looked for lines of the
form:

<div class="verbatim" id="verbatim-335">
From&#x00A0;stephen.marquard@uct.ac.za&#x00A0;Sat&#x00A0;Jan&#x00A0;&#x00A0;5&#x00A0;09:14:16&#x00A0;2008</div>
<!--l. 1797--><p class="nopar" > And wanted to extract the hour of the day for each line. Previously we did this with two
calls to <span 
class="pcrr7tn-">split</span>. First the line was split into words and then we pulled out the fifth word
and split it again on the colon character to pull out the two characters we were interested
in.
<!--l. 1803--><p class="noindent" >While this worked, it actually results in pretty brittle code that is assuming the lines are nicely
formatted. If you were to add enough error checking (or a big try/except block) to insure that your
program never failed when presented with incorrectly formatted lines, the code would balloon to 10-15
lines of code that was pretty hard to read.
<!--l. 1805--><p class="noindent" >We can do this far simpler with the following regular expression:

<div class="verbatim" id="verbatim-336">
^From&#x00A0;.&#x22C6;&#x00A0;[0-9][0-9]:</div>
<!--l. 1810--><p class="nopar" > The translation of this regular expression is that we are looking for lines that start with &#8220;From &#8221; (note
the space) followed by any number of characters &#8220;.*&#8221; followed by a space followed by two digits
&#8220;[0-9][0-9]&#8221; followed by a colon character. This is the definition of the kinds of lines we are looking
for.
<!--l. 1815--><p class="noindent" >In order to pull out only the hour using <span 
class="pcrr7tn-">findall()</span>, we add parentheses around the two digits as
follows:

<div class="verbatim" id="verbatim-337">
^From&#x00A0;.&#x22C6;&#x00A0;([0-9][0-9]):</div>
<!--l. 1820--><p class="nopar" > This results in the following program:

<div class="verbatim" id="verbatim-338">
import&#x00A0;re
&#x00A0;<br />hand&#x00A0;=&#x00A0;open(&#8217;mbox-short.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;hand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;line&#x00A0;=&#x00A0;line.rstrip()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;x&#x00A0;=&#x00A0;re.findall(&#8217;^From&#x00A0;.&#x22C6;&#x00A0;([0-9][0-9]):&#8217;,&#x00A0;line)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(x)&#x00A0;&#x003E;&#x00A0;0&#x00A0;:&#x00A0;print&#x00A0;x</div>
<!--l. 1833--><p class="nopar" > When the program runs, it produces the following output:

<div class="verbatim" id="verbatim-339">
[&#8217;09&#8217;]
&#x00A0;<br />[&#8217;18&#8217;]
&#x00A0;<br />[&#8217;16&#8217;]
&#x00A0;<br />[&#8217;15&#8217;]
&#x00A0;<br /></div>
<!--l. 1845--><p class="nopar" >
<a 
 id="x1-13019r4"></a>
<!--l. 1848--><p class="noindent" ><span 
class="ptmb7t-x-x-144">11.4</span>   <span 
class="ptmb7t-x-x-144">Escape character</span>
<a 
 id="Q1-1-141"></a>
<!--l. 1850--><p class="noindent" >Since we use special characters in regular expressions to match the beginning or end of a line or
specify wild cards, we need a way to indicate that these characters are &#8220;normal&#8221; and we want to match
the actual character such as a dollar-sign or caret.
<!--l. 1854--><p class="noindent" >We can indicate that we want to simply match a character by prefixing that character with a backslash.
For example, we can find money amounts with the following regular expression.

<div class="verbatim" id="verbatim-340">
import&#x00A0;re
&#x00A0;<br />x&#x00A0;=&#x00A0;&#8217;We&#x00A0;just&#x00A0;received&#x00A0;$10.00&#x00A0;for&#x00A0;cookies.&#8217;
&#x00A0;<br />y&#x00A0;=&#x00A0;re.findall(&#8217;\$[0-9.]+&#8217;,x)</div>
<!--l. 1863--><p class="nopar" > Since we prefix the dollar-sign with a backslash, it actually matches the dollar-sign in the input string
instead of matching the &#8220;end of line&#8221; and the rest of the regular expression matches one or more digits
or the period character. <span 
class="ptmri7t-">Note: </span>In between square brackets, characters are not &#8220;special&#8221;. So when we
say &#8220;[0-9.]&#8221;, it really means digits or a period. Outside of square brackets, a period is the
&#8220;wild-card&#8221; character and matches any character. In between square brackets, the period is a
period.
<!--l. 1873--><p class="noindent" >
<a 
 id="x1-13020r5"></a>
<!--l. 1873--><p class="noindent" ><span 
class="ptmb7t-x-x-144">11.5</span>   <span 
class="ptmb7t-x-x-144">Summary</span>
<a 
 id="Q1-1-142"></a>
<!--l. 1875--><p class="noindent" >While this only scratched the surface of regular expressions, we have learned a bit about the language
of regular expressions. They are search strings that have special characters in them that communicate
your wishes to the regular expression system as to what defines &#8220;matching&#8221; and what is
extracted from the matched strings. Here are some of those special characters and character
sequences:
<!--l. 1877--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">^</span></span></span><br 
class="newline" />Matches the beginning of the line.
<!--l. 1880--><p class="noindent" ><span 
class="ptmr8c-">$ </span><br 
class="newline" />Matches the end of the line.
<!--l. 1883--><p class="noindent" >. <br 
class="newline" />Matches any character (a wildcard).
<!--l. 1886--><p class="noindent" ><span 
class="zpzccmry-">\</span>s <br 
class="newline" />Matches a whitespace character.
<!--l. 1889--><p class="noindent" ><span 
class="zpzccmry-">\</span>S <br 
class="newline" />Matches a non-whitespace character (opposite of <span 
class="zpzccmry-">\</span>s).
<!--l. 1892--><p class="noindent" >* <br 
class="newline" />Applies to the immediately preceding character and indicates to match zero or more of the preceding
character.

<!--l. 1895--><p class="noindent" >*? <br 
class="newline" />Applies to the immediately preceding character and indicates to match zero or more of the preceding
character in &#8220;non-greedy mode&#8221;.
<!--l. 1898--><p class="noindent" >+ <br 
class="newline" />Applies to the immediately preceding character and indicates to match zero or more of the preceding
character.
<!--l. 1901--><p class="noindent" >+? <br 
class="newline" />Applies to the immediately preceding character and indicates to match zero or more of the preceding
character in &#8220;non-greedy mode&#8221;.
<!--l. 1904--><p class="noindent" >[aeiou] <br 
class="newline" />Matches a single character as long as that character is in the specified set. In this example, it would
match &#8220;a&#8221;, &#8220;e&#8221;, &#8220;i&#8221;, &#8220;o&#8221; or &#8220;u&#8221; but no other characters.
<!--l. 1907--><p class="noindent" >[a-z0-9] <br 
class="newline" />You can specify ranges of characters using the minus sign. This example is a single character that must
be a lower case letter or a digit.
<!--l. 1910--><p class="noindent" >[<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">^</span></span></span>A-Za-z] <br 
class="newline" />When the first character in the set notation is a caret, it inverts the logic. This example matches a single
character that is anything <span 
class="ptmri7t-">other than </span>an upper or lower case character.
<!--l. 1913--><p class="noindent" >( ) <br 
class="newline" />When parentheses are added to a regular expression, they are ignored for the purpose of matching, but
allow you to extract a particular subset of the matched string rather than the whole string when using
<span 
class="pcrr7tn-">findall()</span>.
<!--l. 1916--><p class="noindent" ><span 
class="zpzccmry-">\</span>b <br 
class="newline" />Matches the empty string, but only at the start or end of a word.
<!--l. 1919--><p class="noindent" ><span 
class="zpzccmry-">\</span>B <br 
class="newline" />Matches the empty string, but not at the start or end of a word.
<!--l. 1922--><p class="noindent" ><span 
class="zpzccmry-">\</span>d <br 
class="newline" />Matches any decimal digit; equivalent to the set [0-9].
<!--l. 1925--><p class="noindent" ><span 
class="zpzccmry-">\</span>D <br 
class="newline" />Matches any non-digit character; equivalent to the set [<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">^</span></span></span>0-9].
<!--l. 1928--><p class="noindent" >
<a 
 id="x1-13021r6"></a>
<!--l. 1928--><p class="noindent" ><span 
class="ptmb7t-x-x-144">11.6</span>   <span 
class="ptmb7t-x-x-144">Bonus section for UNIX users</span>
<a 
 id="Q1-1-143"></a>

<!--l. 1930--><p class="noindent" >Support for searching files using regular expressions was built into the UNIX operating system
since the 1960&#8217;s and it is available in nearly all programming languages in one form or
another.
<!--l. 1933--><p class="noindent" >As a matter of fact, there is a command-line program built into UNIX called <span 
class="ptmb7t-">grep </span>(Generalized
Regular Expression Parser) that does pretty much the same as the <span 
class="pcrr7tn-">search() </span>examples in this chapter.
So if you have a Macintosh or Linux system, you can try the following commands in your command
line window.

<div class="verbatim" id="verbatim-341">
$&#x00A0;grep&#x00A0;&#8217;^From:&#8217;&#x00A0;mbox-short.txt
&#x00A0;<br />From:&#x00A0;stephen.marquard@uct.ac.za
&#x00A0;<br />From:&#x00A0;louis@media.berkeley.edu
&#x00A0;<br />From:&#x00A0;zqian@umich.edu
&#x00A0;<br />From:&#x00A0;rjlowe@iupui.edu</div>
<!--l. 1945--><p class="nopar" > This tells <span 
class="pcrr7tn-">grep </span>to show you lines that start with the string &#8220;From:&#8221; in the file <span 
class="pcrr7tn-">mbox-short.txt</span>. If you
experiment with the <span 
class="pcrr7tn-">grep </span>command a bit and read the documentation for <span 
class="pcrr7tn-">grep</span>, you will find some
subtle differences between the regular expression support in Python and the regular expression support
in <span 
class="pcrr7tn-">grep</span>. As an example, <span 
class="pcrr7tn-">grep </span>does not support the non-blank character &#8220;<span 
class="zpzccmry-">\</span>S&#8221; so you will need to use
the slightly more complex set notation &#8220;[<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">^</span></span></span> ]&#8221;- which simply means - match a character that is anything
other than a space.
<!--l. 1950--><p class="noindent" >
<a 
 id="x1-13022r7"></a>
<!--l. 1950--><p class="noindent" ><span 
class="ptmb7t-x-x-144">11.7</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-144"></a>
<!--l. 1952--><p class="noindent" >Python has some simple and rudimentary built-in documentation that can be quite helpful if you need a
quick refresher to trigger your memory about the exact name of a particular method. This
documentation can be viewed in the Python interpreter in interactive mode.
<!--l. 1954--><p class="noindent" >You can bring up an interactive help system using <span 
class="pcrr7tn-">help()</span>.

<div class="verbatim" id="verbatim-342">
&#x003E;&#x003E;&#x003E;&#x00A0;help()
&#x00A0;<br />
&#x00A0;<br />Welcome&#x00A0;to&#x00A0;Python&#x00A0;2.6!&#x00A0;&#x00A0;This&#x00A0;is&#x00A0;the&#x00A0;online&#x00A0;help&#x00A0;utility.
&#x00A0;<br />
&#x00A0;<br />If&#x00A0;this&#x00A0;is&#x00A0;your&#x00A0;first&#x00A0;time&#x00A0;using&#x00A0;Python,&#x00A0;you&#x00A0;should&#x00A0;definitely&#x00A0;check&#x00A0;out
&#x00A0;<br />the&#x00A0;tutorial&#x00A0;on&#x00A0;the&#x00A0;Internet&#x00A0;at&#x00A0;http://docs.python.org/tutorial/.
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;the&#x00A0;name&#x00A0;of&#x00A0;any&#x00A0;module,&#x00A0;keyword,&#x00A0;or&#x00A0;topic&#x00A0;to&#x00A0;get&#x00A0;help&#x00A0;on&#x00A0;writing
&#x00A0;<br />Python&#x00A0;programs&#x00A0;and&#x00A0;using&#x00A0;Python&#x00A0;modules.&#x00A0;&#x00A0;To&#x00A0;quit&#x00A0;this&#x00A0;help&#x00A0;utility&#x00A0;and
&#x00A0;<br />return&#x00A0;to&#x00A0;the&#x00A0;interpreter,&#x00A0;just&#x00A0;type&#x00A0;"quit".
&#x00A0;<br />
&#x00A0;<br />To&#x00A0;get&#x00A0;a&#x00A0;list&#x00A0;of&#x00A0;available&#x00A0;modules,&#x00A0;keywords,&#x00A0;or&#x00A0;topics,&#x00A0;type&#x00A0;"modules",
&#x00A0;<br />"keywords",&#x00A0;or&#x00A0;"topics".&#x00A0;&#x00A0;Each&#x00A0;module&#x00A0;also&#x00A0;comes&#x00A0;with&#x00A0;a&#x00A0;one-line&#x00A0;summary
&#x00A0;<br />of&#x00A0;what&#x00A0;it&#x00A0;does;&#x00A0;to&#x00A0;list&#x00A0;the&#x00A0;modules&#x00A0;whose&#x00A0;summaries&#x00A0;contain&#x00A0;a&#x00A0;given&#x00A0;word
&#x00A0;<br />such&#x00A0;as&#x00A0;"spam",&#x00A0;type&#x00A0;"modules&#x00A0;spam".
&#x00A0;<br />
&#x00A0;<br />help&#x003E;&#x00A0;modules</div>
<!--l. 1975--><p class="nopar" > If you know what module you want to use, you can use the <span 
class="pcrr7tn-">dir() </span>command to find the methods in the
module as follows:

<div class="verbatim" id="verbatim-343">
&#x003E;&#x003E;&#x003E;&#x00A0;import&#x00A0;re
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;dir(re)
&#x00A0;<br />[..&#x00A0;&#8217;compile&#8217;,&#x00A0;&#8217;copy_reg&#8217;,&#x00A0;&#8217;error&#8217;,&#x00A0;&#8217;escape&#8217;,&#x00A0;&#8217;findall&#8217;,
&#x00A0;<br />&#8217;finditer&#8217;,&#x00A0;&#8217;match&#8217;,&#x00A0;&#8217;purge&#8217;,&#x00A0;&#8217;search&#8217;,&#x00A0;&#8217;split&#8217;,&#x00A0;&#8217;sre_compile&#8217;,
&#x00A0;<br />&#8217;sre_parse&#8217;,&#x00A0;&#8217;sub&#8217;,&#x00A0;&#8217;subn&#8217;,&#x00A0;&#8217;sys&#8217;,&#x00A0;&#8217;template&#8217;]</div>
<!--l. 1987--><p class="nopar" > You can also get a small amount of documentation on a particular method using the dir
command.

<div class="verbatim" id="verbatim-344">
&#x003E;&#x003E;&#x003E;&#x00A0;help&#x00A0;(re.search)
&#x00A0;<br />Help&#x00A0;on&#x00A0;function&#x00A0;search&#x00A0;in&#x00A0;module&#x00A0;re:
&#x00A0;<br />
&#x00A0;<br />search(pattern,&#x00A0;string,&#x00A0;flags=0)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;Scan&#x00A0;through&#x00A0;string&#x00A0;looking&#x00A0;for&#x00A0;a&#x00A0;match&#x00A0;to&#x00A0;the&#x00A0;pattern,&#x00A0;returning
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;a&#x00A0;match&#x00A0;object,&#x00A0;or&#x00A0;None&#x00A0;if&#x00A0;no&#x00A0;match&#x00A0;was&#x00A0;found.
&#x00A0;<br />&#x003E;&#x003E;&#x003E;</div>
<!--l. 2001--><p class="nopar" > The built in documentation is not very extensive, but it can be helpful when you are in a hurry or don&#8217;t
have access to a web browser or search engine.
<!--l. 2007--><p class="noindent" >
<a 
 id="x1-13023r8"></a>
<!--l. 2007--><p class="noindent" ><span 
class="ptmb7t-x-x-144">11.8</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-145"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">brittle code:</span> </dt><dd 
class="description">Code  that  works  when  the  input  data  is  in  a  particular  format  but  prone  to
     breakage if there is some deviation from the correct format. We call this &#8220;brittle code&#8221;
     because it is easily broken.
     </dd><dt class="description">
<span 
class="ptmb7t-">greedy matching:</span> </dt><dd 
class="description">The notion that the &#8220;+&#8221; and &#8220;*&#8221; characters in a regular expression expand
     outward to match the largest possible string. <a 
 id="dx1-13024"></a><a 
 id="dx1-13025"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">grep:</span> </dt><dd 
class="description">A command available in most UNIX systems that searches through text files looking
     for lines that match regular expressions.  The command name stands for &#8221;Generalized
     Regular Expression Parser&#8221;. <a 
 id="dx1-13026"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">regular expression:</span> </dt><dd 
class="description">A  language  for  expressing  more  complex  search  strings.  A  regular
     expression may contain special characters that indicate that a search only matches at the
     beginning or end of a line or many other similar capabilities.
     </dd><dt class="description">
<span 
class="ptmb7t-">wild card:</span> </dt><dd 
class="description">A special character that matches any character. In regular expressions the wild card
     character is the period character. <a 
 id="dx1-13027"></a>
     </dd></dl>

<!--l. 2034--><p class="noindent" >
<a 
 id="x1-13028r9"></a>
<!--l. 2034--><p class="noindent" ><span 
class="ptmb7t-x-x-144">11.9</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-146"></a>
<div class="newtheorem">
<!--l. 2036--><p class="noindent" ><span class="head">
<a 
 id="x1-13029r1"></a>
<span 
class="ptmb7t-">Exercise 11.1</span>  </span>Write a simple program to simulate the operation of the the <span 
class="pcrr7tn-">grep </span>command on
UNIX. Ask the user to enter a regular expression and count the number of lines that matched
the regular expression:

<div class="verbatim" id="verbatim-345">
$&#x00A0;python&#x00A0;grep.py
&#x00A0;<br />Enter&#x00A0;a&#x00A0;regular&#x00A0;expression:&#x00A0;^Author
&#x00A0;<br />mbox.txt&#x00A0;had&#x00A0;1798&#x00A0;lines&#x00A0;that&#x00A0;matched&#x00A0;^Author
&#x00A0;<br />
&#x00A0;<br />$&#x00A0;python&#x00A0;grep.py
&#x00A0;<br />Enter&#x00A0;a&#x00A0;regular&#x00A0;expression:&#x00A0;^X-
&#x00A0;<br />mbox.txt&#x00A0;had&#x00A0;14368&#x00A0;lines&#x00A0;that&#x00A0;matched&#x00A0;^X-
&#x00A0;<br />
&#x00A0;<br />$&#x00A0;python&#x00A0;grep.py
&#x00A0;<br />Enter&#x00A0;a&#x00A0;regular&#x00A0;expression:&#x00A0;java$
&#x00A0;<br />mbox.txt&#x00A0;had&#x00A0;4218&#x00A0;lines&#x00A0;that&#x00A0;matched&#x00A0;java$</div>
<!--l. 2054--><p class="nopar" >
</div>
<div class="newtheorem">
<!--l. 2059--><p class="noindent" ><span class="head">
<a 
 id="x1-13030r2"></a>
<span 
class="ptmb7t-">Exercise 11.2</span>  </span>Write a program to look for lines of the form
<!--l. 2062--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">New</span><span 
class="pcrr7tn-">&#x00A0;Revision:</span><span 
class="pcrr7tn-">&#x00A0;39772</span></span></span>
<!--l. 2064--><p class="noindent" >And extract the number from each of the lines using a regular expression and the <span 
class="pcrr7tn-">findall()</span>
method. Compute the average of the numbers and print out the average.

<div class="verbatim" id="verbatim-346">
Enter&#x00A0;file:mbox.txt
&#x00A0;<br />38549.7949721
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;file:mbox-short.txt
&#x00A0;<br />39756.9259259</div>
<!--l. 2075--><p class="nopar" >
</div>

<!--l. 2081--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;12</span><br /><a 
 id="x1-1400012"></a>Networked programs</h2>
<!--l. 2083--><p class="noindent" >While many of the examples in this book have focused on reading files and looking for
data in those files, there are many different sources of information when one considers the
Internet.
<!--l. 2087--><p class="noindent" >In this chapter we will pretend to be a web browser and retrieve web pages using the HyperText
Transport Protocol (HTTP). Then we will read through the web page data and parse it.
<a 
 id="x1-14001r1"></a>
<span 
class="ptmb7t-x-x-144">12.1</span>   <span 
class="ptmb7t-x-x-144">HyperText Transport Protocol - HTTP</span>
<a 
 id="Q1-1-148"></a>
<!--l. 2093--><p class="noindent" >The network protocol that powers the web is actually quite simple and there is built-in support in
Python called <span 
class="pcrr7tn-">sockets </span>which makes it very easy to make network connections and retrieve data over
those sockets in a Python program.
<!--l. 2098--><p class="noindent" >A <span 
class="ptmb7t-">socket </span>is much like a file, except that it provides a two-way connection between two programs with
a single socket. You can both read from and write to the same socket. If you write something to a
socket it is sent to the application at the other end of the socket. If you read from the socket, you are
given the data which the other application has sent.
<!--l. 2105--><p class="noindent" >But if you try to read a socket when the program on the other end of the socket has not sent any data -
you just sit and wait. If the programs on both ends of the socket simply wait for some data without
sending anything, they will wait for a very long time.
<!--l. 2110--><p class="noindent" >So an important part of programs that communicate over the Internet is to have some sort of protocol.
A protocol is a set of precise rules that determine who is to go first, what they are to do, and then what
are the responses to that message, and who sends next and so on. In a sense the two applications
at either end of the socket are doing a dance and making sure not to step on each other&#8217;s
toes.
<!--l. 2116--><p class="noindent" >There are many documents which describe these network protocols. The HyperText Transport Protocol
is described in the following document:
<!--l. 2119--><p class="noindent" ><a 
href="http://www.w3.org/Protocols/rfc2616/rfc2616.txt" class="url" ><span 
class="pcrr7tn-">http://www.w3.org/Protocols/rfc2616/rfc2616.txt</span></a>
<!--l. 2121--><p class="noindent" >This is a long and complex 176 page document with a lot of detail. If you find it interesting feel free to
read it all. But if you take a look around page 36 of RFC2616 you will find the syntax for the GET
request. If you read in detail, you will find that to request a document from a web server, we
make a connection to the <span 
class="pcrr7tn-">www.py4inf.com </span>server on port 80, and then send a line of the
form:
<!--l. 2127--><p class="noindent" ><span 
class="pcrr7tn-">GET http://www.py4inf.com/code/romeo.txt HTTP/1.0</span>
<!--l. 2129--><p class="noindent" >Where the second parameter is the web page we are requesting and then we also send a blank line. The
web server will respond with some header information about the document and a blank line followed
by the document content.
<!--l. 2134--><p class="noindent" >

<a 
 id="x1-14002r2"></a>
<!--l. 2134--><p class="noindent" ><span 
class="ptmb7t-x-x-144">12.2</span>   <span 
class="ptmb7t-x-x-144">The World&#8217;s Simplest Web Browser</span>
<a 
 id="Q1-1-149"></a>
<!--l. 2136--><p class="noindent" >Perhaps the easiest way to show how the HTTP protocol works is to write a very simple Python
program that makes a connection to a web server and following the rules of the HTTP protocol,
requests a document and displays what the server sends back.

<div class="verbatim" id="verbatim-347">
import&#x00A0;socket
&#x00A0;<br />
&#x00A0;<br />mysock&#x00A0;=&#x00A0;socket.socket(socket.AF_INET,&#x00A0;socket.SOCK_STREAM)
&#x00A0;<br />mysock.connect((&#8217;www.py4inf.com&#8217;,&#x00A0;80))
&#x00A0;<br />mysock.send(&#8217;GET&#x00A0;http://www.py4inf.com/code/romeo.txt&#x00A0;HTTP/1.0\n\n&#8217;)
&#x00A0;<br />
&#x00A0;<br />while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;data&#x00A0;=&#x00A0;mysock.recv(512)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(&#x00A0;len(data)&#x00A0;&#x003C;&#x00A0;1&#x00A0;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;data
&#x00A0;<br />
&#x00A0;<br />mysock.close()</div>
<!--l. 2156--><p class="nopar" > First the program makes a connection to port 80 on the server <a 
href="www.py4inf.com" class="url" ><span 
class="pcrr7tn-">www.py4inf.com</span></a>. Since our program is
playing the role of the &#8220;web browser&#8221; the HTTP protocol says we must send the GET command
followed by a blank line.
<div  
class="centerline">            <img 
src="cfbook23x.png" alt="PIC" class="graphics" width="237.46841pt" height="108.405pt" ><!--tex4ht:graphics  
name="cfbook23x.png" src="figs2/socket.eps"  
-->            </div>
<!--l. 2168--><p class="noindent" >Once we send that blank line, we write a loop that receives data in 512 character chunks from the
socket and prints the data out until there is no more data to read (i.e. the recv() returns an empty
string).
<!--l. 2173--><p class="noindent" >The program produces the following output:

<div class="verbatim" id="verbatim-348">
HTTP/1.1&#x00A0;200&#x00A0;OK
&#x00A0;<br />Date:&#x00A0;Sun,&#x00A0;14&#x00A0;Mar&#x00A0;2010&#x00A0;23:52:41&#x00A0;GMT
&#x00A0;<br />Server:&#x00A0;Apache
&#x00A0;<br />Last-Modified:&#x00A0;Tue,&#x00A0;29&#x00A0;Dec&#x00A0;2009&#x00A0;01:31:22&#x00A0;GMT
&#x00A0;<br />ETag:&#x00A0;"143c1b33-a7-4b395bea"
&#x00A0;<br />Accept-Ranges:&#x00A0;bytes
&#x00A0;<br />Content-Length:&#x00A0;167
&#x00A0;<br />Connection:&#x00A0;close
&#x00A0;<br />Content-Type:&#x00A0;text/plain
&#x00A0;<br />
&#x00A0;<br />But&#x00A0;soft&#x00A0;what&#x00A0;light&#x00A0;through&#x00A0;yonder&#x00A0;window&#x00A0;breaks
&#x00A0;<br />It&#x00A0;is&#x00A0;the&#x00A0;east&#x00A0;and&#x00A0;Juliet&#x00A0;is&#x00A0;the&#x00A0;sun
&#x00A0;<br />Arise&#x00A0;fair&#x00A0;sun&#x00A0;and&#x00A0;kill&#x00A0;the&#x00A0;envious&#x00A0;moon
&#x00A0;<br />Who&#x00A0;is&#x00A0;already&#x00A0;sick&#x00A0;and&#x00A0;pale&#x00A0;with&#x00A0;grief</div>
<!--l. 2191--><p class="nopar" > The output starts with headers which the web server sends to describe the document. For
example, the <span 
class="pcrr7tn-">Content-Type  </span>header indicated that the document is a plain text document
(<span 
class="pcrr7tn-">text/plain</span>).
<!--l. 2199--><p class="noindent" >After the server sends us the headers, it adds a blank line to indicate the end of the headers and then
sends the actual data of the file <span 
class="pcrr7tn-">romeo.txt</span>.
<!--l. 2203--><p class="noindent" >This example shows how to make a low-level network connection with sockets. Sockets can be used to
communicate with a web server or with a mail server or many other kinds of servers. All that is needed
is to find the document which describes the protocol and write the code to send and receive the data
according to the protocol.
<!--l. 2210--><p class="noindent" >However, since the protocol that we use most commonly is the HTTP (i.e. the web) protocol, Python
has a special library specifically designed to support the HTTP protocol for the retrieval of documents
and data over the web.
<!--l. 2216--><p class="noindent" >
<a 
 id="x1-14003r3"></a>
<!--l. 2216--><p class="noindent" ><span 
class="ptmb7t-x-x-144">12.3</span>   <span 
class="ptmb7t-x-x-144">Retrieving web pages with </span><span 
class="pcrr7tn-x-x-144">urllib</span>
<a 
 id="Q1-1-150"></a>
<!--l. 2218--><p class="noindent" >The <span 
class="pcrr7tn-">urllib </span>library makes it very easy to retrieve web pages and process the data in Python. Using
<span 
class="pcrr7tn-">urllib </span>you can treat a web page much like a file. You simply indicate which web page you would like
to retrieve and <span 
class="pcrr7tn-">urllib </span>handles all of the HTTP protocol details.
<!--l. 2224--><p class="noindent" >The equivalent code to read the <span 
class="pcrr7tn-">romeo.txt </span>file from the web using <span 
class="pcrr7tn-">urllib </span>is as follows:

<div class="verbatim" id="verbatim-349">
import&#x00A0;urllib
&#x00A0;<br />
&#x00A0;<br />fhand&#x00A0;=&#x00A0;urllib.urlopen(&#8217;http://www.py4inf.com/code/romeo.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;line.strip()</div>
<!--l. 2234--><p class="nopar" > Once the web page has been opened with <span 
class="pcrr7tn-">urllib.urlopen </span>we can treat it like a file and read through
it using a <span 
class="pcrr7tn-">for </span>loop.
<!--l. 2242--><p class="noindent" >When the program runs, we only see the output of the contents of the file. The headers are still sent, but
the <span 
class="pcrr7tn-">urllib </span>code consumes the headers and only returns the data to us.

<div class="verbatim" id="verbatim-350">
But&#x00A0;soft&#x00A0;what&#x00A0;light&#x00A0;through&#x00A0;yonder&#x00A0;window&#x00A0;breaks
&#x00A0;<br />It&#x00A0;is&#x00A0;the&#x00A0;east&#x00A0;and&#x00A0;Juliet&#x00A0;is&#x00A0;the&#x00A0;sun
&#x00A0;<br />Arise&#x00A0;fair&#x00A0;sun&#x00A0;and&#x00A0;kill&#x00A0;the&#x00A0;envious&#x00A0;moon
&#x00A0;<br />Who&#x00A0;is&#x00A0;already&#x00A0;sick&#x00A0;and&#x00A0;pale&#x00A0;with&#x00A0;grief</div>
<!--l. 2254--><p class="nopar" >
<!--l. 2258--><p class="noindent" >As an example, we can write a program to retrieve the data for <span 
class="pcrr7tn-">romeo.txt </span>and compute the frequency
of each word in the file as follows:

<div class="verbatim" id="verbatim-351">
import&#x00A0;urllib
&#x00A0;<br />
&#x00A0;<br />counts&#x00A0;=&#x00A0;dict()
&#x00A0;<br />fhand&#x00A0;=&#x00A0;urllib.urlopen(&#8217;http://www.py4inf.com/code/romeo.txt&#8217;)
&#x00A0;<br />for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;words&#x00A0;=&#x00A0;line.split()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;word&#x00A0;in&#x00A0;words:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;counts[word]&#x00A0;=&#x00A0;counts.get(word,0)&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;counts</div>
<!--l. 2274--><p class="nopar" > Again, once we have opened the web page, we can read it like a local file.
<!--l. 2280--><p class="noindent" >
<a 
 id="x1-14004r4"></a>
<!--l. 2280--><p class="noindent" ><span 
class="ptmb7t-x-x-144">12.4</span>   <span 
class="ptmb7t-x-x-144">Parsing HTML and scraping the web</span>
<a 
 id="Q1-1-151"></a>
<a 
 id="dx1-14005"></a>
<a 
 id="dx1-14006"></a>
<!--l. 2284--><p class="noindent" >One of the common uses of the <span 
class="pcrr7tn-">urllib </span>capability in Python is to <span 
class="ptmb7t-">scrape </span>the web. Web scraping is
when we write a program that pretends to be a web browser and retrieves pages and then examines the
data in those pages looking for patterns.
<!--l. 2289--><p class="noindent" >As an example, a search engine such as Google will look at the source of one web page and extract the
links to other pages and retrieve those pages, extracting links, and so on. Using this technique, Google
<span 
class="ptmb7t-">spiders </span>its way through nearly all of the pages on the web.
<!--l. 2295--><p class="noindent" >Google also uses the frequency of links from pages it finds to a particular page as one measure of how
&#8220;important&#8221; a page is and how highly the page should appear in its search results.
<!--l. 2299--><p class="noindent" >
<a 
 id="x1-14007r5"></a>
<!--l. 2299--><p class="noindent" ><span 
class="ptmb7t-x-x-144">12.5</span>   <span 
class="ptmb7t-x-x-144">Parsing HTML using Regular Expressions</span>
<a 
 id="Q1-1-152"></a>
<!--l. 2301--><p class="noindent" >One simple way to parse HTML is to use regular expressions to repeatedly search and extract for
substrings that match a particular pattern.
<!--l. 2304--><p class="noindent" >Here is a simple web page:

<div class="verbatim" id="verbatim-352">
&#x003C;h1&#x003E;The&#x00A0;First&#x00A0;Page&#x003C;/h1&#x003E;
&#x00A0;<br />&#x003C;p&#x003E;
&#x00A0;<br />If&#x00A0;you&#x00A0;like,&#x00A0;you&#x00A0;can&#x00A0;switch&#x00A0;to&#x00A0;the
&#x00A0;<br />&#x003C;a&#x00A0;href="http://www.dr-chuck.com/page2.htm"&#x003E;
&#x00A0;<br />Second&#x00A0;Page&#x003C;/a&#x003E;.
&#x00A0;<br />&#x003C;/p&#x003E;</div>
<!--l. 2314--><p class="nopar" > We can construct a well-formed regular expression to match and extract the link values from the above
text as follows:

<div class="verbatim" id="verbatim-353">
href="http://.+?"</div>
<!--l. 2323--><p class="nopar" > Our regular expression looks for strings that start with &#8220;href=&#8221;http://&#8221; followed by one or more
characters &#8220;.+?&#8221; followed by another double quote. The question mark added to the &#8220;.+?&#8221; indicates that
the match is to be done in a &#8220;non-greedy&#8221; fashion instead of a &#8220;greedy&#8221; fashion. A non-greedy match
tries to find the <span 
class="ptmri7t-">smallest </span>possible matching string and a greedy match tries to find the <span 
class="ptmri7t-">largest </span>possible
matching string. <a 
 id="dx1-14008"></a><a 
 id="dx1-14009"></a>
<!--l. 2337--><p class="noindent" >We need to add parentheses to our regular expression to indicate which part of our matched string we
would like to extract and produce the following program: <a 
 id="dx1-14010"></a><a 
 id="dx1-14011"></a>

<div class="verbatim" id="verbatim-354">
import&#x00A0;urllib
&#x00A0;<br />import&#x00A0;re
&#x00A0;<br />
&#x00A0;<br />url&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;-&#x00A0;&#8217;)
&#x00A0;<br />html&#x00A0;=&#x00A0;urllib.urlopen(url).read()
&#x00A0;<br />links&#x00A0;=&#x00A0;re.findall(&#8217;href="(http://.&#x22C6;?)"&#8217;,&#x00A0;html)
&#x00A0;<br />for&#x00A0;link&#x00A0;in&#x00A0;links:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;link</div>
<!--l. 2353--><p class="nopar" > The <span 
class="pcrr7tn-">findall </span>regular expression method will give us a list of all of the strings that match our regular
expression, returning only the link text between the double quotes.
<!--l. 2360--><p class="noindent" >When we run the program, we get the following output:

<div class="verbatim" id="verbatim-355">
python&#x00A0;urlregex.py
&#x00A0;<br />Enter&#x00A0;-&#x00A0;http://www.dr-chuck.com/page1.htm
&#x00A0;<br />http://www.dr-chuck.com/page2.htm
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;urlregex.py
&#x00A0;<br />Enter&#x00A0;-&#x00A0;http://www.py4inf.com/book.htm
&#x00A0;<br />http://www.greenteapress.com/thinkpython/thinkpython.html
&#x00A0;<br />http://allendowney.com/
&#x00A0;<br />http://www.py4inf.com/code
&#x00A0;<br />http://www.lib.umich.edu/espresso-book-machine
&#x00A0;<br />http://www.py4inf.com/py4inf-slides.zip</div>
<!--l. 2375--><p class="nopar" > Regular expressions work very nice when your HTML is well-formatted and predictable. But since
there is a lot of &#8220;broken&#8221; HTML pages out there, you might find that a solution only using regular
expressions might either miss some valid links or end up with bad data.
<!--l. 2384--><p class="noindent" >This can be solved by using a robust HTML parsing library.
<!--l. 2386--><p class="noindent" >
<a 
 id="x1-14012r6"></a>
<!--l. 2386--><p class="noindent" ><span 
class="ptmb7t-x-x-144">12.6</span>   <span 
class="ptmb7t-x-x-144">Parsing HTML using BeautifulSoup</span>
<a 
 id="Q1-1-153"></a>
<a 
 id="dx1-14013"></a>
<!--l. 2389--><p class="noindent" >There are a number of Python libraries which can help you parse HTML and extract data from the
pages. Each of the libraries has its strengths and weaknesses and you can pick one based on your
needs.
<!--l. 2394--><p class="noindent" >As an example, we will simply parse some HTML input and extract links using the <span 
class="ptmb7t-">BeautifulSoup</span>
library. You can download and install the BeautifulSoup code from:
<!--l. 2399--><p class="noindent" ><a 
href="www.crummy.com" class="url" ><span 
class="pcrr7tn-">www.crummy.com</span></a>
<!--l. 2401--><p class="noindent" >You can download and &#8220;install&#8221; BeautifulSoup or you can simply place the <span 
class="pcrr7tn-">BeautifulSoup.py </span>file in
the same folder as your application.
<!--l. 2405--><p class="noindent" >Even though HTML looks like XML and some pages are carefully constructed to be XML, most
HTML is generally broken in ways that cause an XML parser to reject the entire page of HTML as
improperly formed. BeautifulSoup tolerates highly flawed HTML and still lets you easily extract the
data you need.
<!--l. 2411--><p class="noindent" >We will use <span 
class="pcrr7tn-">urllib </span>to read the page and then use <span 
class="pcrr7tn-">BeautifulSoup </span>to extract the <span 
class="pcrr7tn-">href </span>attributes from
the anchor (<span 
class="pcrr7tn-">a</span>) tags. <a 
 id="dx1-14014"></a><a 
 id="dx1-14015"></a> <a 
 id="dx1-14016"></a>

<div class="verbatim" id="verbatim-356">
import&#x00A0;urllib
&#x00A0;<br />from&#x00A0;BeautifulSoup&#x00A0;import&#x00A0;&#x22C6;
&#x00A0;<br />
&#x00A0;<br />url&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;-&#x00A0;&#8217;)
&#x00A0;<br />html&#x00A0;=&#x00A0;urllib.urlopen(url).read()
&#x00A0;<br />soup&#x00A0;=&#x00A0;BeautifulSoup(html)
&#x00A0;<br />
&#x00A0;<br />#&#x00A0;Retrieve&#x00A0;all&#x00A0;of&#x00A0;the&#x00A0;anchor&#x00A0;tags
&#x00A0;<br />tags&#x00A0;=&#x00A0;soup(&#8217;a&#8217;)
&#x00A0;<br />for&#x00A0;tag&#x00A0;in&#x00A0;tags:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;tag.get(&#8217;href&#8217;,&#x00A0;None)</div>
<!--l. 2431--><p class="nopar" > The program prompts for a web address, then opens the web page, reads the data and passes the data
to the BeautifulSoup parser, and then retrieves all of the anchor tags and prints out the <span 
class="pcrr7tn-">href </span>attribute
for each tag.
<!--l. 2439--><p class="noindent" >When the program runs it looks as follows:

<div class="verbatim" id="verbatim-357">
python&#x00A0;urllinks.py
&#x00A0;<br />Enter&#x00A0;-&#x00A0;http://www.dr-chuck.com/page1.htm
&#x00A0;<br />http://www.dr-chuck.com/page2.htm
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;urllinks.py
&#x00A0;<br />Enter&#x00A0;-&#x00A0;http://www.py4inf.com/book.htm
&#x00A0;<br />http://www.greenteapress.com/thinkpython/thinkpython.html
&#x00A0;<br />http://allendowney.com/
&#x00A0;<br />http://www.si502.com/
&#x00A0;<br />http://www.lib.umich.edu/espresso-book-machine
&#x00A0;<br />http://www.py4inf.com/code
&#x00A0;<br />http://www.pythonlearn.com/</div>
<!--l. 2455--><p class="nopar" > You can use BeautifulSoup to pull out various parts of each tag as follows:

<div class="verbatim" id="verbatim-358">
import&#x00A0;urllib
&#x00A0;<br />from&#x00A0;BeautifulSoup&#x00A0;import&#x00A0;&#x22C6;
&#x00A0;<br />
&#x00A0;<br />url&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;-&#x00A0;&#8217;)
&#x00A0;<br />html&#x00A0;=&#x00A0;urllib.urlopen(url).read()
&#x00A0;<br />soup&#x00A0;=&#x00A0;BeautifulSoup(html)
&#x00A0;<br />
&#x00A0;<br />#&#x00A0;Retrieve&#x00A0;all&#x00A0;of&#x00A0;the&#x00A0;anchor&#x00A0;tags
&#x00A0;<br />tags&#x00A0;=&#x00A0;soup(&#8217;a&#8217;)
&#x00A0;<br />for&#x00A0;tag&#x00A0;in&#x00A0;tags:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;#&#x00A0;Look&#x00A0;at&#x00A0;the&#x00A0;parts&#x00A0;of&#x00A0;a&#x00A0;tag
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;TAG:&#8217;,tag
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;URL:&#8217;,tag.get(&#8217;href&#8217;,&#x00A0;None)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Content:&#8217;,tag.contents[0]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Attrs:&#8217;,tag.attrs</div>
<!--l. 2477--><p class="nopar" > This produces the following output:

<div class="verbatim" id="verbatim-359">
python&#x00A0;urllink2.py
&#x00A0;<br />Enter&#x00A0;-&#x00A0;http://www.dr-chuck.com/page1.htm
&#x00A0;<br />TAG:&#x00A0;&#x003C;a&#x00A0;href="http://www.dr-chuck.com/page2.htm"&#x003E;
&#x00A0;<br />Second&#x00A0;Page&#x003C;/a&#x003E;
&#x00A0;<br />URL:&#x00A0;http://www.dr-chuck.com/page2.htm
&#x00A0;<br />Content:&#x00A0;[u&#8217;\nSecond&#x00A0;Page&#8217;]
&#x00A0;<br />Attrs:&#x00A0;[(u&#8217;href&#8217;,&#x00A0;u&#8217;http://www.dr-chuck.com/page2.htm&#8217;)]</div>
<!--l. 2491--><p class="nopar" > These examples only begin to show the power of BeautifulSoup when it comes to parsing HTML. See
the documentation and samples at <a 
href="www.crummy.com" class="url" ><span 
class="pcrr7tn-">www.crummy.com</span></a> for more detail.
<!--l. 2500--><p class="noindent" >
<a 
 id="x1-14017r7"></a>
<!--l. 2500--><p class="noindent" ><span 
class="ptmb7t-x-x-144">12.7</span>   <span 
class="ptmb7t-x-x-144">Reading binary files using urllib</span>
<a 
 id="Q1-1-154"></a>
<!--l. 2502--><p class="noindent" >Sometimes you want to retrieve a non-text (or binary) file such as an image or video file. The data in
these files is generally not useful to print out but you can easily make a copy of a URL to a local file on
your hard disk using <span 
class="pcrr7tn-">urllib</span>. <a 
 id="dx1-14018"></a>
<!--l. 2508--><p class="noindent" >The pattern is to open the URL and use <span 
class="pcrr7tn-">read </span>to download the entire contents of the document into a
string variable (<span 
class="pcrr7tn-">img</span>) and then write that information to a local file as follows:

<div class="verbatim" id="verbatim-360">
img&#x00A0;=&#x00A0;urllib.urlopen(&#8217;http://www.py4inf.com/cover.jpg&#8217;).read()
&#x00A0;<br />fhand&#x00A0;=&#x00A0;open(&#8217;cover.jpg&#8217;,&#x00A0;&#8217;w&#8217;)
&#x00A0;<br />fhand.write(img)
&#x00A0;<br />fhand.close()</div>
<!--l. 2518--><p class="nopar" > This program reads all of the data in at once across the network and stores it in the variable <span 
class="pcrr7tn-">img </span>in the
main memory of your computer and then opens the file <span 
class="pcrr7tn-">cover.jpg </span>and writes the data out to
your disk. This will work if the size of the file is less than the size of the memory of your
computer.
<!--l. 2527--><p class="noindent" >However if this is a large audio or video file, this program may crash or at least run extremely slowly
when your computer runs out of memory. In order to avoid running out of memory, we retrieve the data
in blocks (or buffers) and then write each block to your disk before retrieving the next block. This way
the program can read any sized file without using up all of the memory you have in your
computer.

<div class="verbatim" id="verbatim-361">
import&#x00A0;urllib
&#x00A0;<br />
&#x00A0;<br />img&#x00A0;=&#x00A0;urllib.urlopen(&#8217;http://www.py4inf.com/cover.jpg&#8217;)
&#x00A0;<br />fhand&#x00A0;=&#x00A0;open(&#8217;cover.jpg&#8217;,&#x00A0;&#8217;w&#8217;)
&#x00A0;<br />size&#x00A0;=&#x00A0;0
&#x00A0;<br />while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;info&#x00A0;=&#x00A0;img.read(100000)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(info)&#x00A0;&#x003C;&#x00A0;1&#x00A0;:&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;size&#x00A0;=&#x00A0;size&#x00A0;+&#x00A0;len(info)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand.write(info)
&#x00A0;<br />
&#x00A0;<br />print&#x00A0;size,&#8217;characters&#x00A0;copied.&#8217;
&#x00A0;<br />fhand.close()</div>
<!--l. 2549--><p class="nopar" > In this example, we read only 100,000 characters at a time and then write those characters to the
<span 
class="pcrr7tn-">cover.jpg </span>file before retrieving the next 100,000 characters of data from the web.
<!--l. 2557--><p class="noindent" >This program runs as follows:

<div class="verbatim" id="verbatim-362">
python&#x00A0;curl2.py
&#x00A0;<br />568248&#x00A0;characters&#x00A0;copied.</div>
<!--l. 2563--><p class="nopar" >
<!--l. 2567--><p class="noindent" >If you have a Unix or Macintosh computer, you probably have a command built into your operating
system that performs this operation as follows: <a 
 id="dx1-14019"></a>

<div class="verbatim" id="verbatim-363">
curl&#x00A0;-O&#x00A0;http://www.py4inf.com/cover.jpg</div>
<!--l. 2575--><p class="nopar" > The command <span 
class="pcrr7tn-">curl </span>is short for &#8220;copy URL&#8221; and so these two examples are cleverly named <span 
class="pcrr7tn-">curl1.py</span>
and <span 
class="pcrr7tn-">curl2.py </span>on <a 
href="www.py4inf.com/code" class="url" ><span 
class="pcrr7tn-">www.py4inf.com/code</span></a> as they implement similar functionality to the <span 
class="pcrr7tn-">curl</span>
command. There is also a <span 
class="pcrr7tn-">curl3.py </span>sample program that does this task a little more effectively in case
you actually want to use this pattern in a program you are writing.
<!--l. 2585--><p class="noindent" >
<a 
 id="x1-14020r8"></a>
<!--l. 2585--><p class="noindent" ><span 
class="ptmb7t-x-x-144">12.8</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-155"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">BeautifulSoup:</span> </dt><dd 
class="description">A  Python  library  for  parsing  HTML  documents  and  extracting  data  from
     HTML  documents  that  compensates  for  most  of  the  imperfections  in  the  HTML
     that  browsers  generally  ignore.  You  can  download  the  BeautifulSoup  code  from
     <a 
href="www.crummy.com" class="url" ><span 
class="pcrr7tn-">www.crummy.com</span></a>. <a 
 id="dx1-14021"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">port:</span> </dt><dd 
class="description">A number that generally indicates which application you are contacting when you make
     a socket connection to a server. As an example, web traffic usually uses port 80 while
     e-mail traffic uses port 25. <a 
 id="dx1-14022"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">scrape:</span> </dt><dd 
class="description">When a program pretends to be a web browser and retrieves a web page and then looks
     at the web page content. Often programs are following the links in one page to find the
     next page so they can traverse a network of pages or a social network. <a 
 id="dx1-14023"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">socket:</span> </dt><dd 
class="description">A network connection between two applications where the applications can send and
     receive data in either direction. <a 
 id="dx1-14024"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">spider:</span> </dt><dd 
class="description">The act of a web search engine retrieving a page and then all the pages linked from a
     page and so on until they have nearly all of the pages on the Internet which they use to
     build their search index. <a 
 id="dx1-14025"></a>
     </dd></dl>
<!--l. 2622--><p class="noindent" >

<a 
 id="x1-14026r9"></a>
<!--l. 2622--><p class="noindent" ><span 
class="ptmb7t-x-x-144">12.9</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-156"></a>
<div class="newtheorem">
<!--l. 2624--><p class="noindent" ><span class="head">
<a 
 id="x1-14027r1"></a>
<span 
class="ptmb7t-">Exercise 12.1</span>  </span>Change the socket program <span 
class="pcrr7tn-">socket1.py </span>to prompt the user for the URL so it
can read any web page. You can use <span 
class="pcrr7tn-">split('/') </span>to break the URL into its component parts so
you can extract the host name for the socket <span 
class="pcrr7tn-">connect </span>call. Add error checking using <span 
class="pcrr7tn-">try </span>and
<span 
class="pcrr7tn-">except </span>to handle the condition where the user enters an improperly formatted or non-existent
URL.
</div>
<div class="newtheorem">
<!--l. 2633--><p class="noindent" ><span class="head">
<a 
 id="x1-14028r2"></a>
<span 
class="ptmb7t-">Exercise 12.2</span>  </span>Change your socket program so that it counts the number of characters it has
received and stops displaying any text after it has shown 3000 characters. The program should
retrieve the entire document and count the total number of characters and display the count of
the number of characters at the end of the document.
</div>
<div class="newtheorem">
<!--l. 2640--><p class="noindent" ><span class="head">
<a 
 id="x1-14029r3"></a>
<span 
class="ptmb7t-">Exercise 12.3</span>  </span>Use <span 
class="pcrr7tn-">urllib </span>to replicate the previous exercise of (1) retrieving the document
from  a  URL,  (2)  displaying  up  to  3000  characters,  and  (3)  counting  the  overall  number  of
characters in the document. Don&#8217;t worry about the headers for this exercise, simply show the
first 3000 characters of the document contents.
</div>

<div class="newtheorem">
<!--l. 2647--><p class="noindent" ><span class="head">
<a 
 id="x1-14030r4"></a>
<span 
class="ptmb7t-">Exercise 12.4</span>  </span>Change the <span 
class="pcrr7tn-">urllinks.py </span>program to extract and count paragraph (p) tags from
the retrieved HTML document and display the count of the paragraphs as the output of your
program. Do not display the paragraph text - only count them. Test your program on several
small web pages as well as some larger web pages.
</div>
<div class="newtheorem">
<!--l. 2657--><p class="noindent" ><span class="head">
<a 
 id="x1-14031r5"></a>
<span 
class="ptmb7t-">Exercise 12.5</span>  </span>(Advanced)  Change  the  socket  program  so  that  it  only  shows  data  after  the
headers  and  a  blank  line  have  been  received.  Remember  that  <span 
class="pcrr7tn-">recv </span>is  receiving  characters
(newlines and all) - not lines.
</div>

<!--l. 2664--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;13</span><br /><a 
 id="x1-1500013"></a>Using Web Services</h2>
<!--l. 2666--><p class="noindent" >Once it became easy to retrieve documents and parse documents over HTTP using programs, it did
not take long to develop an approach where we started producing documents that were
specifically designed to be consumed by other programs (i.e. not HTML to be displayed in a
browser).
<!--l. 2672--><p class="noindent" >The most common approach when two programs are exchanging data across the web is to exchange
the data in a format called the &#8220;eXtensible Markup Language&#8221; or XML.
<a 
 id="x1-15001r1"></a>
<span 
class="ptmb7t-x-x-144">13.1</span>   <span 
class="ptmb7t-x-x-144">eXtensible Markup Language - XML</span>
<a 
 id="Q1-1-158"></a>
<!--l. 2678--><p class="noindent" >XML looks very similar to HTML, but XML is more structured than HTML. Here is a sample of an
XML document:

<div class="verbatim" id="verbatim-364">
&#x003C;person&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;name&#x003E;Chuck&#x003C;/name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;phone&#x00A0;type="intl"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;+1&#x00A0;734&#x00A0;303&#x00A0;4456
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x003C;/phone&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x003C;email&#x00A0;hide="yes"/&#x003E;
&#x00A0;<br />&#x003C;/person&#x003E;</div>
<!--l. 2690--><p class="nopar" > Often it is helpful to think of an XML document as a tree structure where there is a top tag <span 
class="pcrr7tn-">person</span>
and other tags such as <span 
class="pcrr7tn-">phone </span>are drawn as <span 
class="ptmri7t-">children </span>of their parent nodes.
<div  
class="centerline">         <img 
src="cfbook24x.png" alt="PIC" class="graphics" width="261.14217pt" height="108.405pt" ><!--tex4ht:graphics  
name="cfbook24x.png" src="figs2/xml-tree.eps"  
-->         </div>
<!--l. 2701--><p class="noindent" >
<a 
 id="x1-15002r2"></a>
<!--l. 2701--><p class="noindent" ><span 
class="ptmb7t-x-x-144">13.2</span>   <span 
class="ptmb7t-x-x-144">Parsing XML</span>
<a 
 id="Q1-1-159"></a>
<!--l. 2703--><p class="noindent" >Here is a simple application that parses some XML and extracts some data elements from the
XML:
<a 
 id="dx1-15003"></a>
<a 
 id="dx1-15004"></a>
<a 
 id="dx1-15005"></a>

<div class="verbatim" id="verbatim-365">
import&#x00A0;xml.etree.ElementTree&#x00A0;as&#x00A0;ET
&#x00A0;<br />
&#x00A0;<br />data&#x00A0;=&#x00A0;&#8217;&#8217;&#8217;
&#x00A0;<br />&#x003C;person&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;name&#x003E;Chuck&#x003C;/name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;phone&#x00A0;type="intl"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;+1&#x00A0;734&#x00A0;303&#x00A0;4456
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x003C;/phone&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x003C;email&#x00A0;hide="yes"/&#x003E;
&#x00A0;<br />&#x003C;/person&#x003E;&#8217;&#8217;&#8217;
&#x00A0;<br />
&#x00A0;<br />tree&#x00A0;=&#x00A0;ET.fromstring(data)
&#x00A0;<br />print&#x00A0;&#8217;Name:&#8217;,tree.find(&#8217;name&#8217;).text
&#x00A0;<br />print&#x00A0;&#8217;Attr:&#8217;,tree.find(&#8217;email&#8217;).get(&#8217;hide&#8217;)</div>
<!--l. 2725--><p class="nopar" > Calling <span 
class="pcrr7tn-">fromstring </span>converts the string representation of the XML into a &#8217;tree&#8217; of XML nodes. When
the XML is in a tree, we have a series of methods which we can call to extract portions of data from the
XML.
<!--l. 2733--><p class="noindent" >The <span 
class="pcrr7tn-">find </span>function searches through the XML tree and retrieves a <span 
class="ptmb7t-">node </span>that matches the specified tag.
Each node can have some text, some attributes (i.e. like hide) and some &#8220;child&#8221; nodes. Each node can
be the top of a tree of nodes.

<div class="verbatim" id="verbatim-366">
Name:&#x00A0;Chuck
&#x00A0;<br />Attr:&#x00A0;yes</div>
<!--l. 2742--><p class="nopar" > Using an XML parser such as <span 
class="pcrr7tn-">ElementTree </span>has the advantage that while the XML in this
example is quite simple, it turns out there are many rules regarding valid XML and using
<span 
class="pcrr7tn-">ElementTree </span>allows us to extract data from XML without worrying about the rules of XML
syntax.
<!--l. 2751--><p class="noindent" >
<a 
 id="x1-15006r3"></a>
<!--l. 2751--><p class="noindent" ><span 
class="ptmb7t-x-x-144">13.3</span>   <span 
class="ptmb7t-x-x-144">Looping through nodes</span>
<a 
 id="Q1-1-160"></a>
<!--l. 2753--><p class="noindent" >Often the XML has multiple nodes and we need to write a loop to process all of the nodes. In the
following program, we loop through all of the <span 
class="pcrr7tn-">user </span>nodes:
<a 
 id="dx1-15007"></a>
<a 
 id="dx1-15008"></a>

<div class="verbatim" id="verbatim-367">
import&#x00A0;xml.etree.ElementTree&#x00A0;as&#x00A0;ET
&#x00A0;<br />
&#x00A0;<br />input&#x00A0;=&#x00A0;&#8217;&#8217;&#8217;
&#x00A0;<br />&#x003C;stuff&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;users&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;user&#x00A0;x="2"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;id&#x003E;001&#x003C;/id&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;name&#x003E;Chuck&#x003C;/name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/user&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;user&#x00A0;x="7"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;id&#x003E;009&#x003C;/id&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;name&#x003E;Brent&#x003C;/name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/user&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/users&#x003E;
&#x00A0;<br />&#x003C;/stuff&#x003E;&#8217;&#8217;&#8217;
&#x00A0;<br />
&#x00A0;<br />stuff&#x00A0;=&#x00A0;ET.fromstring(input)
&#x00A0;<br />lst&#x00A0;=&#x00A0;stuff.findall(&#8217;users/user&#8217;)
&#x00A0;<br />print&#x00A0;&#8217;User&#x00A0;count:&#8217;,&#x00A0;len(lst)
&#x00A0;<br />
&#x00A0;<br />for&#x00A0;item&#x00A0;in&#x00A0;lst:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Name&#8217;,&#x00A0;item.find(&#8217;name&#8217;).text
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Id&#8217;,&#x00A0;item.find(&#8217;id&#8217;).text
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Attribute&#8217;,&#x00A0;item.get(&#8217;x&#8217;)</div>
<!--l. 2785--><p class="nopar" > The <span 
class="pcrr7tn-">findall </span>method retrieves a Python list of sub-trees that represent the <span 
class="pcrr7tn-">user </span>structures in the XML
tree. Then we can write a <span 
class="pcrr7tn-">for </span>loop that looks at each of the user nodes, and prints the <span 
class="pcrr7tn-">name </span>and <span 
class="pcrr7tn-">id </span>text
elements as well as the <span 
class="pcrr7tn-">x </span>attribute from the <span 
class="pcrr7tn-">user </span>node.

<div class="verbatim" id="verbatim-368">
User&#x00A0;count:&#x00A0;2
&#x00A0;<br />Name&#x00A0;Chuck
&#x00A0;<br />Id&#x00A0;001
&#x00A0;<br />Attribute&#x00A0;2
&#x00A0;<br />Name&#x00A0;Brent
&#x00A0;<br />Id&#x00A0;009
&#x00A0;<br />Attribute&#x00A0;7</div>
<!--l. 2803--><p class="nopar" >
<!--l. 2807--><p class="noindent" >
<a 
 id="x1-15009r4"></a>
<!--l. 2807--><p class="noindent" ><span 
class="ptmb7t-x-x-144">13.4</span>   <span 
class="ptmb7t-x-x-144">Application Programming Interfaces (API)</span>
<a 
 id="Q1-1-161"></a>
<!--l. 2809--><p class="noindent" >We now have the ability to exchange data between applications using HyperText Transport Protocol
(HTTP) and a way to represent complex data that we are sending back and forth between these
applications using eXtensible Markup Language (XML).
<!--l. 2814--><p class="noindent" >The next step is to begin to define and document &#8220;contracts&#8221; between applications using these
techniques. The general name for these application-to-application contracts is <span 
class="ptmb7t-">Application Program</span>
<span 
class="ptmb7t-">Interfaces </span>or APIs. When we use an API, generally one program makes a set of <span 
class="ptmb7t-">services </span>available for
use by other applications and publishes the APIs (i.e. the &#8220;rules&#8221;) that must be followed to access the
services provided by the program.
<!--l. 2822--><p class="noindent" >When we begin to build our programs where the functionality of our program includes
access to services provided by other programs, we call the approach a <span 
class="ptmb7t-">Service-Oriented</span>
<span 
class="ptmb7t-">Architecture </span>or SOA. A SOA approach is one where our overall application makes use
of the services of other applications. A non-SOA approach is where the application is a
single stand-alone application which contains all of the code necessary to implement the
application.
<!--l. 2830--><p class="noindent" >We see many examples of SOA when we use the web. We can go to a single web site and book air
travel, hotels, and automobiles all from a single site. The data for hotels is not stored on the airline
computers. Instead, the airline computers contact the services on the hotel computers and retrieve the
hotel data and present it to the user. When the user agrees to make a hotel reservation using the airline
site, the airline site uses another web service on the hotel systems to actually make the reservation.
And when it comes to charge your credit card for the whole transaction, still other computers become
involved in the process.

<div  
class="centerline">           <img 
src="cfbook25x.png" alt="PIC" class="graphics" width="240.81148pt" height="180.67499pt" ><!--tex4ht:graphics  
name="cfbook25x.png" src="figs2/soa.eps"  
-->           </div>
<!--l. 2844--><p class="noindent" >A Service-Oriented Architecture has many advantages including: (1) we always maintain only one
copy of data - this is particularly important for things like hotel reservations where we do not want to
over-commit and (2) the owners of the data can set the rules about the use of their data. With these
advantages, a SOA system must be carefully designed to have good performance and meet the user&#8217;s
needs.
<!--l. 2851--><p class="noindent" >When an application makes a set of services in its API available over the web, we call these <span 
class="ptmb7t-">web</span>
<span 
class="ptmb7t-">services</span>.
<!--l. 2854--><p class="noindent" >
<a 
 id="x1-15010r5"></a>
<!--l. 2854--><p class="noindent" ><span 
class="ptmb7t-x-x-144">13.5</span>   <span 
class="ptmb7t-x-x-144">Twitter web services</span>
<a 
 id="Q1-1-162"></a>
<!--l. 2856--><p class="noindent" >You are probably familiar with the Twitter web site and its applications <a 
href="http://www.twitter.com" class="url" ><span 
class="pcrr7tn-">http://www.twitter.com</span></a>.
Twitter has a very unique approach to its API/web services in that all of its data is available to
non-Twitter applications using the Twitter API.
<!--l. 2861--><p class="noindent" >Because Twitter has been so liberal in allowing access to its data, it has enabled thousands of software
developers to build their own customized Twitter-based software. These additional applications greatly
increase the value of Twitter far beyond simply a web site. The Twitter web services allow the building
of whole new applications that the Twitter team may never have thought of. It is said that over 90
percent of the use of Twitter is through the API (i.e. not through the <span 
class="pcrr7tn-">twitter.com </span>web user
interface).
<!--l. 2870--><p class="noindent" >You can view the Twitter API documentation at <a 
href="http://apiwiki.twitter.com/" class="url" ><span 
class="pcrr7tn-">http://apiwiki.twitter.com/</span></a>. The Twitter
API is an example of the REST style of web services. We will focus on the Twitter API to
retrieve a list of a user&#8217;s friends and their statuses. As an example, you can visit the following
URL:

<!--l. 2877--><p class="noindent" ><a 
href="http://api.twitter.com/1/statuses/friends/drchuck.xml" class="url" ><span 
class="pcrr7tn-">http://api.twitter.com/1/statuses/friends/drchuck.xml</span></a>
<!--l. 2879--><p class="noindent" >To see a list of the friends of the twitter account <span 
class="pcrr7tn-">drchuck</span>. It may look like a mess in your browser. To
see the actual XML returned by Twitter, you can view the source of the returned &#8220;web
page&#8221;.
<!--l. 2884--><p class="noindent" >We can retrieve this same XML using Python using the <span 
class="pcrr7tn-">urllib </span>utility:

<div class="verbatim" id="verbatim-369">
import&#x00A0;urllib
&#x00A0;<br />
&#x00A0;<br />TWITTER_URL&#x00A0;=&#x00A0;&#8217;http://api.twitter.com/l/statuses/friends/ACCT.xml&#8217;
&#x00A0;<br />
&#x00A0;<br />while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;acct&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;Twitter&#x00A0;Account:&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(&#x00A0;len(acct)&#x00A0;&#x003C;&#x00A0;1&#x00A0;)&#x00A0;:&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;url&#x00A0;=&#x00A0;TWITTER_URL.replace(&#8217;ACCT&#8217;,&#x00A0;acct)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Retrieving&#8217;,&#x00A0;url
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;document&#x00A0;=&#x00A0;urllib.urlopen&#x00A0;(url).read()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;document[:250]</div>
<!--l. 2901--><p class="nopar" > The program prompts for a Twitter account and opens the URL for the friends and statuses
API and then retrieves the text from the URL and shows us the first 250 characters of the
text.

<div class="verbatim" id="verbatim-370">
python&#x00A0;twitter1.py
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;Twitter&#x00A0;Account:drchuck
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/drchuck.xml
&#x00A0;<br />&#x003C;?xml&#x00A0;version="1.0"&#x00A0;encoding="UTF-8"?&#x003E;
&#x00A0;<br />&#x003C;users&#x00A0;type="array"&#x003E;
&#x00A0;<br />&#x003C;user&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;id&#x003E;115636613&#x003C;/id&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;name&#x003E;Steve&#x00A0;Coppin&#x003C;/name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;screen_name&#x003E;steve_coppin&#x003C;/screen_name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;location&#x003E;Kent,&#x00A0;UK&#x003C;/location&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;description&#x003E;Software&#x00A0;developing,&#x00A0;best&#x00A0;practicing,&#x00A0;agile&#x00A0;e
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;Twitter&#x00A0;Account:</div>
<!--l. 2925--><p class="nopar" > In this application, we have retrieved the XML exactly as if it were an HTML web page. If we wanted
to extract data from the XML, we could use Python string functions but this would become pretty
complex as we tried to really start to dig into the XML in detail.
<!--l. 2933--><p class="noindent" >If we were to dump out some of the retrieved XML it would look roughly as follows:

<div class="verbatim" id="verbatim-371">
&#x003C;?xml&#x00A0;version="1.0"&#x00A0;encoding="UTF-8"?&#x003E;
&#x00A0;<br />&#x003C;users&#x00A0;type="array"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;user&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;id&#x003E;115636613&#x003C;/id&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;name&#x003E;Steve&#x00A0;Coppin&#x003C;/name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;screen_name&#x003E;steve_coppin&#x003C;/screen_name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;location&#x003E;Kent,&#x00A0;UK&#x003C;/location&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;status&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;id&#x003E;10174607039&#x003C;/id&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;source&#x003E;web&#x003C;/source&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/status&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;/user&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;user&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;id&#x003E;17428929&#x003C;/id&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;name&#x003E;davidkocher&#x003C;/name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;screen_name&#x003E;davidkocher&#x003C;/screen_name&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;location&#x003E;Bern&#x003C;/location&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;status&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;id&#x003E;10306231257&#x003C;/id&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;text&#x003E;@MikeGrace&#x00A0;If&#x00A0;possible&#x00A0;please&#x00A0;post&#x00A0;a&#x00A0;detailed&#x00A0;bug&#x00A0;report&#x00A0;&#x003C;/text&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/status&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;/user&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;...</div>
<!--l. 2960--><p class="nopar" > The top level tag is a <span 
class="pcrr7tn-">users </span>and there are multiple <span 
class="pcrr7tn-">user </span>tags below within the <span 
class="pcrr7tn-">users </span>tag. There is also
a <span 
class="pcrr7tn-">status </span>tag below the <span 
class="pcrr7tn-">user </span>tag.
<!--l. 2967--><p class="noindent" >
<a 
 id="x1-15011r6"></a>
<!--l. 2967--><p class="noindent" ><span 
class="ptmb7t-x-x-144">13.6</span>   <span 
class="ptmb7t-x-x-144">Handling XML data from an API</span>
<a 
 id="Q1-1-163"></a>
<!--l. 2969--><p class="noindent" >When we receive well-formed XML data from an API, we generally use an XML parser such as
<span 
class="pcrr7tn-">ElementTree </span>to extract information from the XML data.
<!--l. 2973--><p class="noindent" >In the program below, we retrieve the friends and statuses from the Twitter API and then parse the
returned XML to show the first four friends and their statuses.

<div class="verbatim" id="verbatim-372">
import&#x00A0;urllib
&#x00A0;<br />import&#x00A0;xml.etree.ElementTree&#x00A0;as&#x00A0;ET
&#x00A0;<br />
&#x00A0;<br />TWITTER_URL&#x00A0;=&#x00A0;&#8217;http://api.twitter.com/l/statuses/friends/ACCT.xml&#8217;
&#x00A0;<br />
&#x00A0;<br />while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;acct&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;Twitter&#x00A0;Account:&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(&#x00A0;len(acct)&#x00A0;&#x003C;&#x00A0;1&#x00A0;)&#x00A0;:&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;url&#x00A0;=&#x00A0;TWITTER_URL.replace(&#8217;ACCT&#8217;,&#x00A0;acct)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Retrieving&#8217;,&#x00A0;url
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;document&#x00A0;=&#x00A0;urllib.urlopen&#x00A0;(url).read()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Retrieved&#8217;,&#x00A0;len(document),&#x00A0;&#8217;characters.&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;tree&#x00A0;=&#x00A0;ET.fromstring(document)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;user&#x00A0;in&#x00A0;tree.findall(&#8217;user&#8217;):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;count&#x00A0;&#x003E;&#x00A0;4&#x00A0;:&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;user.find(&#8217;screen_name&#8217;).text
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;status&#x00A0;=&#x00A0;&#x00A0;user.find(&#8217;status&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;status&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;txt&#x00A0;=&#x00A0;status.find(&#8217;text&#8217;).text
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;&#x00A0;&#x00A0;&#8217;,txt[:50]</div>
<!--l. 3002--><p class="nopar" > We use the <span 
class="pcrr7tn-">findall </span>method to get a list of the <span 
class="pcrr7tn-">user </span>nodes and loop through the list using a <span 
class="pcrr7tn-">for</span>
loop. For each <span 
class="pcrr7tn-">user </span>node, we pull out the text of the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span> node and then pull out the <span 
class="pcrr7tn-">status</span>
node. If there is a <span 
class="pcrr7tn-">status </span>node, we pull out the text of the <span 
class="pcrr7tn-">text </span>node and print the first 50 characters
of the status text.
<!--l. 3012--><p class="noindent" >The pattern is pretty straightforward, we use <span 
class="pcrr7tn-">findall </span>and <span 
class="pcrr7tn-">find </span>to pull out a list of nodes or a single
node and then if a node is a complex element with more sub-nodes we look deeper into the node until
we reach the text element that we are interested in.
<!--l. 3017--><p class="noindent" >The program runs as follows:

<div class="verbatim" id="verbatim-373">
python&#x00A0;twitter2.py
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;Twitter&#x00A0;Account:drchuck
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/drchuck.xml
&#x00A0;<br />Retrieved&#x00A0;193310&#x00A0;characters.
&#x00A0;<br />steve_coppin
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Looking&#x00A0;forward&#x00A0;to&#x00A0;some&#x00A0;"oh&#x00A0;no&#x00A0;the&#x00A0;markets&#x00A0;closed,
&#x00A0;<br />davidkocher
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;@MikeGrace&#x00A0;If&#x00A0;possible&#x00A0;please&#x00A0;post&#x00A0;a&#x00A0;detailed&#x00A0;bug
&#x00A0;<br />hrheingold
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;From&#x00A0;today&#8217;s&#x00A0;Columbia&#x00A0;Journalism&#x00A0;Review,&#x00A0;on&#x00A0;crap&#x00A0;d
&#x00A0;<br />huge_idea
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;@drchuck&#x00A0;&#x00A0;#cnx2010&#x00A0;misses&#x00A0;you,&#x00A0;too.&#x00A0;&#x00A0;Thanks&#x00A0;for&#x00A0;co
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;Twitter&#x00A0;Account:hrheingold
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/hrheingold.xml
&#x00A0;<br />Retrieved&#x00A0;208081&#x00A0;characters.
&#x00A0;<br />carr2n
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;RT&#x00A0;@tysone:&#x00A0;Saturday&#8217;s&#x00A0;proclaimation&#x00A0;by&#x00A0;@carr2n&#x00A0;pr
&#x00A0;<br />tiffanyshlain
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;RT&#x00A0;@ScottKirsner:&#x00A0;Turning&#x00A0;smartphones&#x00A0;into&#x00A0;a&#x00A0;tool
&#x00A0;<br />soniasimone
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;@ACCompanyC&#x00A0;Funny,&#x00A0;smart,&#x00A0;cute,&#x00A0;and&#x00A0;also&#x00A0;nice!&#x00A0;He
&#x00A0;<br />JenStone7617
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Watching&#x00A0;"Changing&#x00A0;The&#x00A0;Equation:&#x00A0;High&#x00A0;Tech&#x00A0;Answers
&#x00A0;<br />
&#x00A0;<br />Enter&#x00A0;Twitter&#x00A0;Account:</div>
<!--l. 3048--><p class="nopar" > While the code for parsing the XML and extracting the fields using <span 
class="pcrr7tn-">ElementTree </span>takes a few lines to
express what we are looking for in the XML, it is much simpler than trying to use Python string
parsing to pull apart the XML and find the data elements.
<!--l. 3057--><p class="noindent" >
<a 
 id="x1-15012r7"></a>
<!--l. 3057--><p class="noindent" ><span 
class="ptmb7t-x-x-144">13.7</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-164"></a>

     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">API:</span> </dt><dd 
class="description">Application Program Interface - A contract between applications that defines the patterns
     of interaction between two application components. <a 
 id="dx1-15013"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">ElementTree:</span> </dt><dd 
class="description">A built-in Python library used to parse XML data. <a 
 id="dx1-15014"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">XML:</span> </dt><dd 
class="description">eXtensible Markup Language - A format that allows for the markup of structured data.
     <a 
 id="dx1-15015"></a><a 
 id="dx1-15016"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">REST:</span> </dt><dd 
class="description">REpresentational  State  Transfer  -  A  style  of  Web  Services  that  provide  access  to
     resources within an application using the HTTP protocol. <a 
 id="dx1-15017"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">SOA:</span> </dt><dd 
class="description">Service Oriented Architecture - when an application is made of components connected
     across a network. <a 
 id="dx1-15018"></a><a 
 id="dx1-15019"></a>
     </dd></dl>
<!--l. 3086--><p class="noindent" >
<a 
 id="x1-15020r8"></a>
<!--l. 3086--><p class="noindent" ><span 
class="ptmb7t-x-x-144">13.8</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-165"></a>
<div class="newtheorem">
<!--l. 3088--><p class="noindent" ><span class="head">
<a 
 id="x1-15021r1"></a>
<span 
class="ptmb7t-">Exercise 13.1</span>  </span>Change the program that retrieves twitter data (<span 
class="pcrr7tn-">twitter2.py</span>) to also print out
the location for each of the friends indented under the name by two spaces as follows:

<div class="verbatim" id="verbatim-374">
Enter&#x00A0;Twitter&#x00A0;Account:drchuck
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/drchuck.xml
&#x00A0;<br />Retrieved&#x00A0;194533&#x00A0;characters.
&#x00A0;<br />steve_coppin
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Kent,&#x00A0;UK
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Looking&#x00A0;forward&#x00A0;to&#x00A0;some&#x00A0;"oh&#x00A0;no&#x00A0;the&#x00A0;markets&#x00A0;closed,
&#x00A0;<br />davidkocher
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Bern
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;@MikeGrace&#x00A0;If&#x00A0;possible&#x00A0;please&#x00A0;post&#x00A0;a&#x00A0;detailed&#x00A0;bug
&#x00A0;<br />hrheingold
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;San&#x00A0;Francisco&#x00A0;Bay&#x00A0;Area
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;RT&#x00A0;@barrywellman:&#x00A0;Lovely&#x00A0;AmBerhSci&#x00A0;Internet&#x00A0;&amp;&#x00A0;Comm
&#x00A0;<br />huge_idea
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;Boston,&#x00A0;MA
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;@drchuck&#x00A0;&#x00A0;#cnx2010&#x00A0;misses&#x00A0;you,&#x00A0;too.&#x00A0;&#x00A0;Thanks&#x00A0;for&#x00A0;co</div>
<!--l. 3111--><p class="nopar" >
</div>

<!--l. 3116--><p class="noindent" >

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;14</span><br /><a 
 id="x1-1600014"></a>Using databases and Structured Query Language (SQL)</h2>
<a 
 id="x1-16001r1"></a>
<span 
class="ptmb7t-x-x-144">14.1</span>   <span 
class="ptmb7t-x-x-144">What is a database?</span>
<a 
 id="Q1-1-167"></a>
<a 
 id="dx1-16002"></a>
<!--l. 3121--><p class="noindent" >A <span 
class="ptmb7t-">database </span>is a file that is organized for storing data. Most databases are organized like a dictionary in
the sense that they map from keys to values. The biggest difference is that the database is on disk (or
other permanent storage), so it persists after the program ends. Because a database is stored on
permanent storage, it can store far more data than a dictionary, which is limited to the size of the
memory in the computer.
<a 
 id="dx1-16003"></a>
<!--l. 3131--><p class="noindent" >Like a dictionary, database software is designed to keep the inserting and accessing of data very fast,
even for large amounts of data. Database software maintains its performance by building
<span 
class="ptmb7t-">indexes </span>as data is added to the database to allow the computer to jump quickly to a particular
entry.
<!--l. 3138--><p class="noindent" >There are many different database systems which are used for a wide variety of purposes including:
Oracle, MySQL, Microsoft SQL Server, PostgreSQL, and SQLite. We focus on SQLite in this book
because it is a very common database and is already built into Python. SQLite is designed to be
<span 
class="ptmri7t-">embedded </span>into other applications to provide database support within the application. For
example, the Firefox browser also uses the SQLite database internally as do many other
products.
<!--l. 3147--><p class="noindent" ><a 
href="http://sqlite.org/" class="url" ><span 
class="pcrr7tn-">http://sqlite.org/</span></a>
<!--l. 3149--><p class="noindent" >SQLite is well suited to some of the data manipulation problems that we see in Informatics such as the
Twitter spidering application that we describe in this chapter.
<!--l. 3153--><p class="noindent" >
<a 
 id="x1-16004r2"></a>
<!--l. 3153--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.2</span>   <span 
class="ptmb7t-x-x-144">Database concepts</span>
<a 
 id="Q1-1-168"></a>
<!--l. 3155--><p class="noindent" >When you first look at a database it looks like a spreadsheet with multiple sheets. The primary data
structures in a database are: <span 
class="ptmb7t-">tables</span>, <span 
class="ptmb7t-">rows</span>, and <span 
class="ptmb7t-">columns</span>.

<div  
class="centerline">  <img 
src="cfbook26x.png" alt="PIC" class="graphics" width="339.90292pt" height="108.405pt" ><!--tex4ht:graphics  
name="cfbook26x.png" src="figs2/relational.eps"  
-->  </div>
<!--l. 3164--><p class="noindent" >In technical descriptions of relational databases the concepts of table, row, and column are more
formally referred to as <span 
class="ptmb7t-">relation</span>, <span 
class="ptmb7t-">tuple</span>, and <span 
class="ptmb7t-">attribute</span>, respectively. We will use the less formal terms in
this chapter.
<!--l. 3169--><p class="noindent" >
<a 
 id="x1-16005r3"></a>
<!--l. 3169--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.3</span>   <span 
class="ptmb7t-x-x-144">SQLite Database Browser</span>
<a 
 id="Q1-1-169"></a>
<!--l. 3171--><p class="noindent" >While this chapter will focus on using Python to work with data in SQLite database files, many
operations can be done more conveniently using a desktop program called the <span 
class="ptmb7t-">SQLite Database</span>
<span 
class="ptmb7t-">Browser </span>which is freely available from:
<!--l. 3176--><p class="noindent" ><a 
href="http://sourceforge.net/projects/sqlitebrowser/" class="url" ><span 
class="pcrr7tn-">http://sourceforge.net/projects/sqlitebrowser/</span></a>
<!--l. 3178--><p class="noindent" >Using the browser you can easily create tables, insert data, edit data, or run simple SQL queries on the
data in the database.

<div  
class="centerline">       <img 
src="cfbook27x.png" alt="PIC" class="graphics" width="287.87842pt" height="216.81pt" ><!--tex4ht:graphics  
name="cfbook27x.png" src="figs2/sqlite.eps"  
-->       </div>
<!--l. 3185--><p class="noindent" >In a sense, the database browser is similar to a text editor when working with text files. When you want
to do one or very few operations on a text file, you can just open it in a text editor and make the
changes you want. When you have many changes that you need to do to a text file, often you will write
a simple Python program. You will find the same pattern when working with databases. You will do
simple operations in the database browser and more complex operations will be most conveniently
done in Python.
<!--l. 3195--><p class="noindent" >
<a 
 id="x1-16006r4"></a>
<!--l. 3195--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.4</span>   <span 
class="ptmb7t-x-x-144">Creating a database table</span>
<a 
 id="Q1-1-170"></a>
<!--l. 3197--><p class="noindent" >Databases require more defined structure than Python lists or
dictionaries<span class="footnote-mark"><a 
href="cfbook12.html#fn1x15"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-16007f1"></a>.
<!--l. 3204--><p class="noindent" >When we create a database <span 
class="ptmb7t-">table </span>we must tell the database in advance the names of each of the
<span 
class="ptmb7t-">columns </span>in the table and the type of data which we are planning to store in each <span 
class="ptmb7t-">column</span>. When the
database software knows the type of data in each column, it can choose the most efficient way to store
and lookup the data based on the type of data.

<!--l. 3212--><p class="noindent" >You can look at the various data types supported by SQLite at the following url:
<!--l. 3215--><p class="noindent" ><a 
href="http://www.sqlite.org/datatypes.html" class="url" ><span 
class="pcrr7tn-">http://www.sqlite.org/datatypes.html</span></a>
<!--l. 3217--><p class="noindent" >Defining structure for your data up front may seem inconvenient at the beginning, but the payoff is fast
access to your data even when the database contains a large amount of data.
<!--l. 3221--><p class="noindent" >The code to create a database file and a table named <span 
class="pcrr7tn-">Tracks </span>with two columns in the database is as
follows:
<a 
 id="dx1-16008"></a>
<a 
 id="dx1-16009"></a>

<div class="verbatim" id="verbatim-375">
import&#x00A0;sqlite3
&#x00A0;<br />
&#x00A0;<br />conn&#x00A0;=&#x00A0;sqlite3.connect(&#8217;music.db&#8217;)
&#x00A0;<br />cur&#x00A0;=&#x00A0;conn.cursor()
&#x00A0;<br />
&#x00A0;<br />cur.execute(&#8217;DROP&#x00A0;TABLE&#x00A0;IF&#x00A0;EXISTS&#x00A0;Tracks&#x00A0;&#8217;)
&#x00A0;<br />cur.execute(&#8217;CREATE&#x00A0;TABLE&#x00A0;Tracks&#x00A0;(title&#x00A0;TEXT,&#x00A0;plays&#x00A0;INTEGER)&#8217;)
&#x00A0;<br />
&#x00A0;<br />conn.close()</div>
<!--l. 3238--><p class="nopar" ><a 
 id="dx1-16010"></a><a 
 id="dx1-16011"></a><a 
 id="dx1-16012"></a><a 
 id="dx1-16013"></a>The <span 
class="pcrr7tn-">connect </span>operation makes a &#8220;connection&#8221; to the database stored in the file <span 
class="pcrr7tn-">music.db </span>in the
current directory. If the file does not exist, it will be created. The reason this is called a &#8220;connection&#8221; is
that sometimes the database is stored on a separate &#8220;database server&#8221; from the server on which we are
running our application. In our simple examples the database will just be a local file in the same
directory as the Python code we are running.
<!--l. 3254--><p class="noindent" >A <span 
class="ptmb7t-">cursor </span>is like a file handle that we can use to perform operations on the data stored in the database.
Calling <span 
class="pcrr7tn-">cursor() </span>is very similar conceptually to calling <span 
class="pcrr7tn-">open() </span>when dealing with text
files.
<div  
class="centerline">                <img 
src="cfbook28x.png" alt="PIC" class="graphics" width="189.52872pt" height="108.405pt" ><!--tex4ht:graphics  
name="cfbook28x.png" src="figs2/cursor.eps"  
-->                </div>
<!--l. 3263--><p class="noindent" >Once we have the cursor, we can begin to execute commands on the contents of the database using the
<span 
class="pcrr7tn-">execute() </span>method.
<!--l. 3267--><p class="noindent" >Database commands are expressed in a special language that has been standardized across many
different database vendors to allow us to learn a single database language. The database language is
called <span 
class="ptmb7t-">Structured Query Language </span>or <span 
class="ptmb7t-">SQL </span>for short.
<!--l. 3273--><p class="noindent" ><a 
href="http://en.wikipedia.org/wiki/SQL" class="url" ><span 
class="pcrr7tn-">http://en.wikipedia.org/wiki/SQL</span></a>
<!--l. 3275--><p class="noindent" >In our example, we are executing two SQL commands in our database. As a convention, we will show
the SQL keywords in uppercase and the parts of the command that we are adding (such as the table and
column names) will be shown in lowercase.

<!--l. 3280--><p class="noindent" >The first SQL command removes the <span 
class="pcrr7tn-">Tracks </span>table from the database if it exists. This pattern is simply
to allow us to run the same program to create the <span 
class="pcrr7tn-">Tracks </span>table over and over again without causing an
error. Note that the <span 
class="pcrr7tn-">DROP TABLE </span>command deletes the table and all of its contents from the database
(i.e. there is no &#8220;undo&#8221;).

<div class="verbatim" id="verbatim-376">
cur.execute(&#8217;DROP&#x00A0;TABLE&#x00A0;IF&#x00A0;EXISTS&#x00A0;Tracks&#x00A0;&#8217;)</div>
<!--l. 3290--><p class="nopar" > The second command creates a table named <span 
class="pcrr7tn-">Tracks </span>with a text column named <span 
class="pcrr7tn-">title </span>and an integer
column named <span 
class="pcrr7tn-">plays</span>.

<div class="verbatim" id="verbatim-377">
cur.execute(&#8217;CREATE&#x00A0;TABLE&#x00A0;Tracks&#x00A0;(title&#x00A0;TEXT,&#x00A0;plays&#x00A0;INTEGER)&#8217;)</div>
<!--l. 3300--><p class="nopar" > Now that we have created a table named <span 
class="pcrr7tn-">Tracks</span>, we can put some data into that table using the SQL
<span 
class="pcrr7tn-">INSERT </span>operation. Again, we begin by making a connection to the database and obtaining the <span 
class="pcrr7tn-">cursor</span>.
We can then execute SQL commands using the cursor.
<!--l. 3308--><p class="noindent" >The SQL <span 
class="pcrr7tn-">INSERT </span>command indicates which table we are using and then defines a new row by listing
the fields we want to include <span 
class="pcrr7tn-">(title, plays) </span>followed by the <span 
class="pcrr7tn-">VALUES </span>we want placed in the new
row in the table. We specify the values as question marks <span 
class="pcrr7tn-">(?, ?) </span>to indicate that the actual values
are passed in as a tuple <span 
class="pcrr7tn-">( 'My Way', 15 )  </span>as the second parameter to the <span 
class="pcrr7tn-">execute()</span>
call.

<div class="verbatim" id="verbatim-378">
import&#x00A0;sqlite3
&#x00A0;<br />
&#x00A0;<br />conn&#x00A0;=&#x00A0;sqlite3.connect(&#8217;music.db&#8217;)
&#x00A0;<br />cur&#x00A0;=&#x00A0;conn.cursor()
&#x00A0;<br />
&#x00A0;<br />cur.execute(&#8217;INSERT&#x00A0;INTO&#x00A0;Tracks&#x00A0;(title,&#x00A0;plays)&#x00A0;VALUES&#x00A0;(&#x00A0;?,&#x00A0;?&#x00A0;)&#8217;,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(&#x00A0;&#8217;Thunderstruck&#8217;,&#x00A0;20&#x00A0;)&#x00A0;)
&#x00A0;<br />cur.execute(&#8217;INSERT&#x00A0;INTO&#x00A0;Tracks&#x00A0;(title,&#x00A0;plays)&#x00A0;VALUES&#x00A0;(&#x00A0;?,&#x00A0;?&#x00A0;)&#8217;,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(&#x00A0;&#8217;My&#x00A0;Way&#8217;,&#x00A0;15&#x00A0;)&#x00A0;)
&#x00A0;<br />conn.commit()
&#x00A0;<br />
&#x00A0;<br />print&#x00A0;&#8217;Tracks:&#8217;
&#x00A0;<br />cur.execute(&#8217;SELECT&#x00A0;title,&#x00A0;plays&#x00A0;FROM&#x00A0;Tracks&#8217;)
&#x00A0;<br />for&#x00A0;row&#x00A0;in&#x00A0;cur&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;row
&#x00A0;<br />
&#x00A0;<br />cur.execute(&#8217;DELETE&#x00A0;FROM&#x00A0;Tracks&#x00A0;WHERE&#x00A0;plays&#x00A0;&#x003C;&#x00A0;100&#8217;)
&#x00A0;<br />conn.commit()
&#x00A0;<br />
&#x00A0;<br />cur.close()</div>
<!--l. 3338--><p class="nopar" > First we <span 
class="pcrr7tn-">INSERT </span>two rows into our table and use <span 
class="pcrr7tn-">commit() </span>to force the data to be written to the
database file.
<div  
class="centerline">                      <img 
src="cfbook29x.png" alt="PIC" class="graphics" width="132.64319pt" height="72.26999pt" ><!--tex4ht:graphics  
name="cfbook29x.png" src="figs2/tracks.eps"  
-->                      </div>
<!--l. 3348--><p class="noindent" >Then we use the <span 
class="pcrr7tn-">SELECT </span>command to retrieve the rows we just inserted from the table.
On the <span 
class="pcrr7tn-">SELECT </span>command, we indicate which columns we would like <span 
class="pcrr7tn-">(title, plays)</span>
and indicate which table we want to retrieve the data from. After we execute the <span 
class="pcrr7tn-">SELECT</span>
statement, the cursor is something we can loop through in a <span 
class="pcrr7tn-">for </span>statement. For efficiency,
the cursor does not read all of the data from the database when we execute the <span 
class="pcrr7tn-">SELECT</span>
statement. Instead, the data is read on-demand as we loop through the rows in the <span 
class="pcrr7tn-">for</span>
statement.
<!--l. 3360--><p class="noindent" >The output of the program is as follows:

<div class="verbatim" id="verbatim-379">
Tracks:
&#x00A0;<br />(u&#8217;Thunderstruck&#8217;,&#x00A0;20)
&#x00A0;<br />(u&#8217;My&#x00A0;Way&#8217;,&#x00A0;15)</div>
<!--l. 3367--><p class="nopar" ><a 
 id="dx1-16014"></a> Our <span 
class="pcrr7tn-">for </span>loop finds two rows, and each row is a Python tuple with the first value as the <span 
class="pcrr7tn-">title </span>and the
second value as the number of <span 
class="pcrr7tn-">plays</span>. Do not be concerned that the title strings are shown starting with
<span 
class="pcrr7tn-">u'</span>. This is an indication that the strings are <span 
class="ptmb7t-">Unicode </span>strings that are capable of storing non-Latin
character sets.
<!--l. 3377--><p class="noindent" >At the very end of the program, we execute an SQL command to <span 
class="pcrr7tn-">DELETE </span>the rows we have just created
so we can run the program over and over. The <span 
class="pcrr7tn-">DELETE </span>command shows the use of a <span 
class="pcrr7tn-">WHERE </span>clause
that allows us to express a selection criterion so that we can ask the database to apply the
command to only the rows that match the criterion. In this example the criterion happens to
apply to all the rows so we empty the table out so we can run the program repeatedly. After
the <span 
class="pcrr7tn-">DELETE </span>is performed we also call <span 
class="pcrr7tn-">commit() </span>to force the data to be removed from the
database.
<a 
 id="x1-16015r5"></a>
<!--l. 3386--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.5</span>   <span 
class="ptmb7t-x-x-144">Structured Query Language (SQL) summary</span>
<a 
 id="Q1-1-171"></a>
<!--l. 3388--><p class="noindent" >So far, we have been using the Structured Query Language in our Python examples and have covered
many of the basics of the SQL commands. In this section, we look at the SQL language in particular
and give an overview of SQL syntax.
<!--l. 3393--><p class="noindent" >Since there are so many different database vendors, the Structured Query Language (SQL) was
standardized so we could communicate in a portable manner to database systems from multiple
vendors.
<!--l. 3397--><p class="noindent" >A relational database is made up of tables, rows, and columns. The columns generally have a type such
as text, numeric, or date data. When we create a table, we indicate the names and types of the
columns:

<div class="verbatim" id="verbatim-380">
CREATE&#x00A0;TABLE&#x00A0;Tracks&#x00A0;(title&#x00A0;TEXT,&#x00A0;plays&#x00A0;INTEGER)</div>
<!--l. 3404--><p class="nopar" > To insert a row into a table, we use the SQL <span 
class="pcrr7tn-">INSERT </span>command:

<div class="verbatim" id="verbatim-381">
INSERT&#x00A0;INTO&#x00A0;Tracks&#x00A0;(title,&#x00A0;plays)&#x00A0;VALUES&#x00A0;(&#8217;My&#x00A0;Way&#8217;,&#x00A0;15)</div>
<!--l. 3412--><p class="nopar" > The <span 
class="pcrr7tn-">INSERT </span>statement specifies the table name, and then a list of the fields/columns that you would
like to set in the new row, and then the keyword <span 
class="pcrr7tn-">VALUES </span>and then a list of corresponding values for
each of the fields.
<!--l. 3420--><p class="noindent" >The SQL <span 
class="pcrr7tn-">SELECT </span>command is used to retrieve rows and columns from a database. The <span 
class="pcrr7tn-">SELECT</span>
statement lets you specify which columns you would like to retrieve as well as a <span 
class="pcrr7tn-">WHERE </span>clause to select
which rows you would like to see. It also allows an optional <span 
class="pcrr7tn-">ORDER BY </span>clause to control the sorting of
the returned rows.

<div class="verbatim" id="verbatim-382">
SELECT&#x00A0;&#x22C6;&#x00A0;FROM&#x00A0;Tracks&#x00A0;WHERE&#x00A0;title&#x00A0;=&#x00A0;&#8217;My&#x00A0;Way&#8217;</div>
<!--l. 3429--><p class="nopar" > Using <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x22C6;</span></span></span> indicates that you want the database to return all of the columns for each row that matches the
<span 
class="pcrr7tn-">WHERE </span>clause.
<!--l. 3435--><p class="noindent" >Note, unlike in Python, in a SQL <span 
class="pcrr7tn-">WHERE </span>clause we use a single equal sign to indicate a test
for equality rather than a double equal sign. Other logical operations allowed in a <span 
class="pcrr7tn-">WHERE</span>
clause include <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x003C;</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x003E;</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x003C;=</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">&#x003E;=</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">!=</span></span></span>, as well as <span 
class="pcrr7tn-">AND </span>and <span 
class="pcrr7tn-">OR </span>and parentheses to build your logical
expressions.
<!--l. 3447--><p class="noindent" >You can request that the returned rows be sorted by one of the fields as follows:

<div class="verbatim" id="verbatim-383">
SELECT&#x00A0;title,plays&#x00A0;FROM&#x00A0;Tracks&#x00A0;ORDER&#x00A0;BY&#x00A0;title</div>
<!--l. 3453--><p class="nopar" > To remove a row, you need a <span 
class="pcrr7tn-">WHERE </span>clause on an SQL <span 
class="pcrr7tn-">DELETE </span>statement. The <span 
class="pcrr7tn-">WHERE </span>clause
determines which rows are to be deleted:

<div class="verbatim" id="verbatim-384">
DELETE&#x00A0;FROM&#x00A0;Tracks&#x00A0;WHERE&#x00A0;title&#x00A0;=&#x00A0;&#8217;My&#x00A0;Way&#8217;</div>
<!--l. 3462--><p class="nopar" > It is possible to <span 
class="pcrr7tn-">UPDATE </span>a column or columns within one or more rows in a table using the SQL
<span 
class="pcrr7tn-">UPDATE </span>statement as follows:

<div class="verbatim" id="verbatim-385">
UPDATE&#x00A0;Tracks&#x00A0;SET&#x00A0;plays&#x00A0;=&#x00A0;16&#x00A0;WHERE&#x00A0;title&#x00A0;=&#x00A0;&#8217;My&#x00A0;Way&#8217;</div>
<!--l. 3471--><p class="nopar" > The <span 
class="pcrr7tn-">UPDATE </span>statement specifies a table and then a list of fields and values to change after the <span 
class="pcrr7tn-">SET</span>
keyword and then an optional <span 
class="pcrr7tn-">WHERE </span>clause to select the rows that are to be updated. A single <span 
class="pcrr7tn-">UPDATE</span>
statement will change all of the rows that match the <span 
class="pcrr7tn-">WHERE </span>clause, or if a <span 
class="pcrr7tn-">WHERE </span>clause is not specified,
it performs the <span 
class="pcrr7tn-">UPDATE </span>on all of the rows in the table.
<!--l. 3482--><p class="noindent" >These four basic SQL commands (INSERT, SELECT, UPDATE, and DELETE) allow the four basic
operations needed to create and maintain data.
<!--l. 3486--><p class="noindent" >
<a 
 id="x1-16016r6"></a>
<!--l. 3486--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.6</span>   <span 
class="ptmb7t-x-x-144">Spidering Twitter using a database</span>
<a 
 id="Q1-1-172"></a>
<!--l. 3488--><p class="noindent" >In this section, we will create a simple spidering program that will go through Twitter accounts and
build a database of them. <span 
class="ptmri7t-">Note: Be very careful when running this program. You do not want to pull too</span>
<span 
class="ptmri7t-">much data or run the program for too long and end up having your Twitter access shut</span>
<span 
class="ptmri7t-">off.</span>
<!--l. 3494--><p class="noindent" >One of the problems of any kind of spidering program is that it needs to be able to be stopped
and restarted many times and you do not want to lose the data that you have retrieved so
far. You don&#8217;t want to always restart your data retrieval at the very beginning so we want
to store data as we retrieve it so our program can start back up and pick up where it left
off.
<!--l. 3501--><p class="noindent" >We will start by retrieving one person&#8217;s Twitter friends and their statuses, looping through the list of
friends, and adding each of the friends to a database to be retrieved in the future. After we process one
person&#8217;s Twitter friends, we check in our database and retrieve one of the friends of the friend. We do
this over and over, picking an &#8220;unvisited&#8221; person, retrieving their friend list and adding friends we have
not seen to our list for a future visit.
<!--l. 3509--><p class="noindent" >We also track how many times we have seen a particular friend in the database to get some sense of
&#8220;popularity&#8221;.
<!--l. 3512--><p class="noindent" >By storing our list of known accounts and whether we have retrieved the account or not, and how
popular the account is in a database on the disk of the computer, we can stop and restart our program as
many times as we like.
<!--l. 3519--><p class="noindent" >This program is a bit complex. It is based on the code from the exercise earlier in the book that uses the
Twitter API.
<!--l. 3523--><p class="noindent" >Here is the source code for our Twitter spidering application:

<div class="verbatim" id="verbatim-386">
import&#x00A0;sqlite3
&#x00A0;<br />import&#x00A0;urllib
&#x00A0;<br />import&#x00A0;xml.etree.ElementTree&#x00A0;as&#x00A0;ET
&#x00A0;<br />
&#x00A0;<br />TWITTER_URL&#x00A0;=&#x00A0;&#8217;http://api.twitter.com/l/statuses/friends/ACCT.xml&#8217;
&#x00A0;<br />
&#x00A0;<br />conn&#x00A0;=&#x00A0;sqlite3.connect(&#8217;twdata.db&#8217;)
&#x00A0;<br />cur&#x00A0;=&#x00A0;conn.cursor()
&#x00A0;<br />
&#x00A0;<br />cur.execute(&#8217;&#8217;&#8217;
&#x00A0;<br />CREATE&#x00A0;TABLE&#x00A0;IF&#x00A0;NOT&#x00A0;EXISTS
&#x00A0;<br />Twitter&#x00A0;(name&#x00A0;TEXT,&#x00A0;retrieved&#x00A0;INTEGER,&#x00A0;friends&#x00A0;INTEGER)&#8217;&#8217;&#8217;)
&#x00A0;<br />
&#x00A0;<br />while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;acct&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:&#x00A0;&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(&#x00A0;acct&#x00A0;==&#x00A0;&#8217;quit&#8217;&#x00A0;)&#x00A0;:&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(&#x00A0;len(acct)&#x00A0;&#x003C;&#x00A0;1&#x00A0;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;SELECT&#x00A0;name&#x00A0;FROM&#x00A0;Twitter&#x00A0;WHERE&#x00A0;retrieved&#x00A0;=&#x00A0;0&#x00A0;LIMIT&#x00A0;1&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;acct&#x00A0;=&#x00A0;cur.fetchone()[0]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;No&#x00A0;unretrieved&#x00A0;Twitter&#x00A0;accounts&#x00A0;found&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;url&#x00A0;=&#x00A0;TWITTER_URL.replace(&#8217;ACCT&#8217;,&#x00A0;acct)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Retrieving&#8217;,&#x00A0;url
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;document&#x00A0;=&#x00A0;urllib.urlopen&#x00A0;(url).read()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;tree&#x00A0;=&#x00A0;ET.fromstring(document)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;UPDATE&#x00A0;Twitter&#x00A0;SET&#x00A0;retrieved=1&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#8217;,&#x00A0;(acct,&#x00A0;)&#x00A0;)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;countnew&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;countold&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;user&#x00A0;in&#x00A0;tree.findall(&#8217;user&#8217;):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;friend&#x00A0;=&#x00A0;user.find(&#8217;screen_name&#8217;).text
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;SELECT&#x00A0;friends&#x00A0;FROM&#x00A0;Twitter&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#x00A0;LIMIT&#x00A0;1&#8217;,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(friend,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;cur.fetchone()[0]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;UPDATE&#x00A0;Twitter&#x00A0;SET&#x00A0;friends&#x00A0;=&#x00A0;?&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#8217;,

&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(count+1,&#x00A0;friend)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;countold&#x00A0;=&#x00A0;countold&#x00A0;+&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;&#8217;&#8217;INSERT&#x00A0;INTO&#x00A0;Twitter&#x00A0;(name,&#x00A0;retrieved,&#x00A0;friends)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;VALUES&#x00A0;(&#x00A0;?,&#x00A0;0,&#x00A0;1&#x00A0;)&#8217;&#8217;&#8217;,&#x00A0;(&#x00A0;friend,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;countnew&#x00A0;=&#x00A0;countnew&#x00A0;+&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;New&#x00A0;accounts=&#8217;,countnew,&#8217;&#x00A0;revisited=&#8217;,countold
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conn.commit()
&#x00A0;<br />
&#x00A0;<br />cur.close()</div>
<!--l. 3577--><p class="nopar" > Our database is stored in the file <span 
class="pcrr7tn-">twdata.db </span>and it has one table named <span 
class="pcrr7tn-">Twitter </span>and each row in the
<span 
class="pcrr7tn-">Twitter </span>table has a column for the account name, whether we have retrieved the friends of this
account, and how many times this account has been &#8220;friended&#8221;.
<!--l. 3585--><p class="noindent" >In the main loop of the program, we prompt the user for a Twitter account name or &#8220;quit&#8221; to exit the
program. If the user enters a Twitter account, we retrieve the list of friends and statuses for that user
and add each friend to the database if not already in the database. If the friend is already in the list, we
add one to the <span 
class="pcrr7tn-">friends </span>field in the row in the database.
<!--l. 3593--><p class="noindent" >If the user presses enter, we look in the database for the next Twitter account that we have not yet
retrieved and retrieve the friends and statuses for that account, add them to the database or update them
and increase their <span 
class="pcrr7tn-">friends count</span>.
<!--l. 3598--><p class="noindent" >Once we retrieve the list of friends and statuses, we loop through all of the <span 
class="pcrr7tn-">user </span>items in the returned
XML and retrieve the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span> for each user. Then we use the <span 
class="pcrr7tn-">SELECT </span>statement to see if we
already have stored this particular <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span> in the database and retrieve the friend count
(<span 
class="pcrr7tn-">friends</span>) if the record exists.

<div class="verbatim" id="verbatim-387">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;countnew&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;countold&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;user&#x00A0;in&#x00A0;tree.findall(&#8217;user&#8217;):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;friend&#x00A0;=&#x00A0;user.find(&#8217;screen_name&#8217;).text
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;SELECT&#x00A0;friends&#x00A0;FROM&#x00A0;Twitter&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#x00A0;LIMIT&#x00A0;1&#8217;,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(friend,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;cur.fetchone()[0]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;UPDATE&#x00A0;Twitter&#x00A0;SET&#x00A0;friends&#x00A0;=&#x00A0;?&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#8217;,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(count+1,&#x00A0;friend)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;countold&#x00A0;=&#x00A0;countold&#x00A0;+&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;&#8217;&#8217;INSERT&#x00A0;INTO&#x00A0;Twitter&#x00A0;(name,&#x00A0;retrieved,&#x00A0;friends)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;VALUES&#x00A0;(&#x00A0;?,&#x00A0;0,&#x00A0;1&#x00A0;)&#8217;&#8217;&#8217;,&#x00A0;(&#x00A0;friend,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;countnew&#x00A0;=&#x00A0;countnew&#x00A0;+&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;New&#x00A0;accounts=&#8217;,countnew,&#8217;&#x00A0;revisited=&#8217;,countold
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conn.commit()</div>
<!--l. 3624--><p class="nopar" > Once the cursor executes the <span 
class="pcrr7tn-">SELECT </span>statement, we must retrieve the rows. We could do this
with a <span 
class="pcrr7tn-">for </span>statement, but since we are only retrieving one row (<span 
class="pcrr7tn-">LIMIT 1</span>), we can use the
<span 
class="pcrr7tn-">fetchone() </span>method to fetch the first (and only) row that is the result of the <span 
class="pcrr7tn-">SELECT </span>operation.
Since <span 
class="pcrr7tn-">fetchone() </span>returns the row as a <span 
class="ptmb7t-">tuple </span>(even though there is only one field), we take
the first value from the tuple using <span 
class="pcrr7tn-">[0] </span>to get the current friend count into the variable
<span 
class="pcrr7tn-">count</span>.
<!--l. 3636--><p class="noindent" >If this retrieval is successful, we use the SQL <span 
class="pcrr7tn-">UPDATE </span>statement with a <span 
class="pcrr7tn-">WHERE </span>clause to add one to the
<span 
class="pcrr7tn-">friends </span>column for the row that matches the friend&#8217;s account. Notice that there are two
placeholders (i.e. question marks) in the SQL, and the second parameter to the <span 
class="pcrr7tn-">execute() </span>is a
two-element tuple which holds the values to be substituted into the SQL in place of the question
marks.
<!--l. 3643--><p class="noindent" >If the code in the <span 
class="pcrr7tn-">try </span>block fails it is probably because no record matched the <span 
class="pcrr7tn-">WHERE name = ? </span>clause
on the SELECT statement. So in the <span 
class="pcrr7tn-">except </span>block, we use the SQL <span 
class="pcrr7tn-">INSERT </span>statement to add the
friend&#8217;s <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span> to the table with an indication that we have not yet retrieved the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span>
and setting the friend count to zero.
<!--l. 3649--><p class="noindent" >So the first time the program runs and we enter a Twitter account, the program runs as follows:

<div class="verbatim" id="verbatim-388">
Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:&#x00A0;drchuck
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/drchuck.xml
&#x00A0;<br />New&#x00A0;accounts=&#x00A0;100&#x00A0;&#x00A0;revisited=&#x00A0;0
&#x00A0;<br />Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:&#x00A0;quit</div>
<!--l. 3657--><p class="nopar" > Since this is the first time we have run the program, the database is empty and we create the database
in the file <span 
class="pcrr7tn-">twdata.db </span>and add a table named <span 
class="pcrr7tn-">Twitter </span>to the database. Then we retrieve some friends
and add them all to the database since the database is empty.
<!--l. 3666--><p class="noindent" >At this point, we might want to write a simple database dumper to take a look at what is in our
<span 
class="pcrr7tn-">twdata.db </span>file:

<div class="verbatim" id="verbatim-389">
import&#x00A0;sqlite3
&#x00A0;<br />
&#x00A0;<br />conn&#x00A0;=&#x00A0;sqlite3.connect(&#8217;twdata.db&#8217;)
&#x00A0;<br />cur&#x00A0;=&#x00A0;conn.cursor()
&#x00A0;<br />cur.execute(&#8217;SELECT&#x00A0;&#x22C6;&#x00A0;FROM&#x00A0;Twitter&#8217;)
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />for&#x00A0;row&#x00A0;in&#x00A0;cur&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;row
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;count,&#x00A0;&#8217;rows.&#8217;
&#x00A0;<br />cur.close()</div>
<!--l. 3681--><p class="nopar" > This program simply opens the database and selects all of the columns of all of the rows in the table
<span 
class="pcrr7tn-">Twitter</span>, then loops through the rows and prints out each row.
<!--l. 3688--><p class="noindent" >If we run this program after the first execution of our Twitter spider above, its output will be as follows:

<div class="verbatim" id="verbatim-390">
(u&#8217;opencontent&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />(u&#8217;lhawthorn&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />(u&#8217;steve_coppin&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />(u&#8217;davidkocher&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />(u&#8217;hrheingold&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />...
&#x00A0;<br />100&#x00A0;rows.</div>
<!--l. 3699--><p class="nopar" > We see one row for each <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span>, that we have not retrieved the data for that <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span> and
everyone in the database has one friend.
<!--l. 3706--><p class="noindent" >Now our database reflects the retrieval of the friends of our first Twitter account (<span 
class="ptmb7t-">drchuck</span>). We can run
the program again and tell it to retrieve the friends of the next &#8220;unprocessed&#8221; account by simply
pressing enter instead of a Twitter account as follows:

<div class="verbatim" id="verbatim-391">
Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/opencontent.xml
&#x00A0;<br />New&#x00A0;accounts=&#x00A0;98&#x00A0;&#x00A0;revisited=&#x00A0;2
&#x00A0;<br />Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/lhawthorn.xml
&#x00A0;<br />New&#x00A0;accounts=&#x00A0;97&#x00A0;&#x00A0;revisited=&#x00A0;3
&#x00A0;<br />Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:&#x00A0;quit</div>
<!--l. 3720--><p class="nopar" > Since we pressed enter (i.e. we did not specify a Twitter account), the following code is executed:

<div class="verbatim" id="verbatim-392">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(&#x00A0;len(acct)&#x00A0;&#x003C;&#x00A0;1&#x00A0;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;SELECT&#x00A0;name&#x00A0;FROM&#x00A0;Twitter&#x00A0;WHERE&#x00A0;retrieved&#x00A0;=&#x00A0;0&#x00A0;LIMIT&#x00A0;1&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;acct&#x00A0;=&#x00A0;cur.fetchone()[0]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;No&#x00A0;unretrieved&#x00A0;twitter&#x00A0;accounts&#x00A0;found&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue</div>
<!--l. 3734--><p class="nopar" > We use the SQL <span 
class="pcrr7tn-">SELECT </span>statement to retrieve the name of the first (<span 
class="pcrr7tn-">LIMIT 1</span>) user who still has their
&#8220;have we retrieved this user&#8221; value set to zero. We also use the <span 
class="pcrr7tn-">fetchone()[0] </span>pattern within a
try/except block to either extract a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span> from the retrieved data or put out an error message
and loop back up.
<!--l. 3743--><p class="noindent" >If we successfully retrieved an unprocessed <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span>, we retrieve their data as follows:

<div class="verbatim" id="verbatim-393">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;url&#x00A0;=&#x00A0;TWITTER_URL.replace(&#8217;ACCT&#8217;,&#x00A0;acct)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Retrieving&#8217;,&#x00A0;url
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;document&#x00A0;=&#x00A0;urllib.urlopen&#x00A0;(url).read()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;tree&#x00A0;=&#x00A0;ET.fromstring(document)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;UPDATE&#x00A0;Twitter&#x00A0;SET&#x00A0;retrieved=1&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#8217;,&#x00A0;(acct,&#x00A0;)&#x00A0;)</div>
<!--l. 3754--><p class="nopar" > Once we retrieve the data successfully, we use the <span 
class="pcrr7tn-">UPDATE </span>statement to set the <span 
class="pcrr7tn-">retrieved </span>column to
one to indicate that we have completed the retrieval of the friends of this account. This keeps us from
re-retrieving the same data over and over and keeps us progressing forward through the network of
Twitter friends.
<!--l. 3763--><p class="noindent" >If we run the friend program and press enter twice to retrieve the next unvisited friend&#8217;s friends, then
run the dumping program, it will give us the following output:

<div class="verbatim" id="verbatim-394">
(u&#8217;opencontent&#8217;,&#x00A0;1,&#x00A0;1)
&#x00A0;<br />(u&#8217;lhawthorn&#8217;,&#x00A0;1,&#x00A0;1)
&#x00A0;<br />(u&#8217;steve_coppin&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />(u&#8217;davidkocher&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />(u&#8217;hrheingold&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />...
&#x00A0;<br />(u&#8217;cnxorg&#8217;,&#x00A0;0,&#x00A0;2)
&#x00A0;<br />(u&#8217;knoop&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />(u&#8217;kthanos&#8217;,&#x00A0;0,&#x00A0;2)
&#x00A0;<br />(u&#8217;LectureTools&#8217;,&#x00A0;0,&#x00A0;1)
&#x00A0;<br />...
&#x00A0;<br />295&#x00A0;rows.</div>
<!--l. 3781--><p class="nopar" > We can see that we have properly recorded that we have visited <span 
class="pcrr7tn-">lhawthorn </span>and <span 
class="pcrr7tn-">opencontent</span>. Also
the accounts <span 
class="pcrr7tn-">cnxorg </span>and <span 
class="pcrr7tn-">kthanos </span>already have two followers. Since we now have retrieved the friends
of three people (<span 
class="pcrr7tn-">drchuck</span>, <span 
class="pcrr7tn-">opencontent </span>and <span 
class="pcrr7tn-">lhawthorn</span>) our table has 295 rows of friends to
retrieve.
<!--l. 3791--><p class="noindent" >Each time we run the program and press enter, it will pick the next unvisited account (e.g. the next
account will be <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">steve_coppin</span></span></span>), retrieve their friends, mark them as retrieved and for each of the
friends of <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">steve_coppin</span></span></span>, either add them to the end of the database, or update their friend count if
they are already in the database.
<!--l. 3798--><p class="noindent" >Since the program&#8217;s data is all stored on disk in a database, the spidering activity can be suspended and
resumed as many times as you like with no loss of data.
<!--l. 3805--><p class="noindent" ><span 
class="ptmri7t-">Note: One more time before we leave this topic, be very careful when running this Twitter spidering</span>
<span 
class="ptmri7t-">program. You do not want to pull too much data or run the program for too long and end up having</span>
<span 
class="ptmri7t-">your Twitter access shut off.</span>
<!--l. 3807--><p class="noindent" >
<a 
 id="x1-16017r7"></a>
<!--l. 3807--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.7</span>   <span 
class="ptmb7t-x-x-144">Basic data modeling</span>
<a 
 id="Q1-1-173"></a>
<!--l. 3809--><p class="noindent" >The real power of a relational database is when we make multiple tables and make links between those
tables. The act of deciding how to break up your application data into multiple tables and establishing
the relationships between the two tables is called <span 
class="ptmb7t-">data modeling</span>. The design document that shows the
tables and their relationships is called a <span 
class="ptmb7t-">data model</span>.

<!--l. 3816--><p class="noindent" >Data modeling is a relatively sophisticated skill and we will only introduce the most basic concepts of
relational data modeling in this section. For more detail on data modeling you can start
with:
<!--l. 3820--><p class="noindent" ><a 
href="http://en.wikipedia.org/wiki/Relational_model" class="url" ><span 
class="pcrr7tn-">http://en.wikipedia.org/wiki/Relational_model</span></a>
<!--l. 3822--><p class="noindent" >Let&#8217;s say for our Twitter spider application, instead of just counting a person&#8217;s friends, we wanted to
keep a list of all of the incoming relationships so we could find a list of everyone who is following a
particular account.
<!--l. 3827--><p class="noindent" >Since everyone will potentially have many accounts that follow them, we cannot simply add a single
column to our <span 
class="pcrr7tn-">Twitter </span>table. So we create a new table that keeps track of pairs of friends. The
following is a simple way of making such a table:

<div class="verbatim" id="verbatim-395">
CREATE&#x00A0;TABLE&#x00A0;Pals&#x00A0;(from_friend&#x00A0;TEXT,&#x00A0;to_friend&#x00A0;TEXT)</div>
<!--l. 3835--><p class="nopar" > Each time we encounter a person who <span 
class="pcrr7tn-">drchuck </span>is following, we would insert a row of the
form:

<div class="verbatim" id="verbatim-396">
INSERT&#x00A0;INTO&#x00A0;Pals&#x00A0;(from_friend,to_friend)&#x00A0;VALUES&#x00A0;(&#8217;drchuck&#8217;,&#x00A0;&#8217;lhawthorn&#8217;)</div>
<!--l. 3844--><p class="nopar" > As we are processing the 100 friends from the <span 
class="pcrr7tn-">drchuck </span>Twitter feed, we will insert 100 records with
&#8220;drchuck&#8221; as the first parameter so we will end up duplicating the string many times in the
database.
<!--l. 3852--><p class="noindent" >This duplication of string data violates the best practices for <span 
class="ptmb7t-">database normalization </span>which basically
states that we should never put the same string data in the database more than once. If we need the data
more than once, we create a numeric <span 
class="ptmb7t-">key </span>for the data and reference the actual data using this
key.
<!--l. 3859--><p class="noindent" >In practical terms, a string takes up a lot more space than an integer on the disk and in the memory of
our computer and takes more processor time to compare and sort. If we only have a few hundred
entries the storage and processor time hardly matters. But if we have a million people in our database
and a possibility of 100 million friend links, it is important to be able to scan data as quickly as
possible.
<!--l. 3868--><p class="noindent" >We will store our Twitter accounts in a table named <span 
class="pcrr7tn-">People </span>instead of the <span 
class="pcrr7tn-">Twitter </span>table used in the
previous example. The <span 
class="pcrr7tn-">People </span>table has an additional column to store the numeric key associated with
the row for this Twitter user. SQLite has a feature that automatically adds the key value for
any row we insert into a table using a special type of data column (<span 
class="pcrr7tn-">INTEGER PRIMARY</span>
<span 
class="pcrr7tn-">KEY</span>).
<!--l. 3877--><p class="noindent" >We can create the <span 
class="pcrr7tn-">People </span>table with this additional <span 
class="pcrr7tn-">id </span>column as follows:

<div class="verbatim" id="verbatim-397">
CREATE&#x00A0;TABLE&#x00A0;People
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(id&#x00A0;INTEGER&#x00A0;PRIMARY&#x00A0;KEY,&#x00A0;name&#x00A0;TEXT&#x00A0;UNIQUE,&#x00A0;retrieved&#x00A0;INTEGER)</div>
<!--l. 3884--><p class="nopar" > Notice that we are no longer maintaining a friend count in each row of the <span 
class="pcrr7tn-">People </span>table. When we
select <span 
class="pcrr7tn-">INTEGER PRIMARY KEY </span>as the type of our <span 
class="pcrr7tn-">id </span>column, we are indicating that we would like
SQLite to manage this column and assign a unique numeric key to each row we insert automatically.
We also add the keyword <span 
class="pcrr7tn-">UNIQUE </span>to indicate that we will not allow SQLite to insert two rows with the
same value for <span 
class="pcrr7tn-">name</span>.
<!--l. 3895--><p class="noindent" >Now instead of creating the table <span 
class="pcrr7tn-">Pals </span>above, we create a table called <span 
class="pcrr7tn-">Follows </span>with two
integer columns <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">from_id</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">to_id</span></span></span> and a constraint on the table that the <span 
class="ptmri7t-">combination </span>of
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">from_id</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">to_id</span></span></span> must be unique in this table (i.e. we cannot insert duplicate rows) in our
database.

<div class="verbatim" id="verbatim-398">
CREATE&#x00A0;TABLE&#x00A0;Follows
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(from_id&#x00A0;INTEGER,&#x00A0;to_id&#x00A0;INTEGER,&#x00A0;UNIQUE(from_id,&#x00A0;to_id)&#x00A0;)</div>
<!--l. 3905--><p class="nopar" > When we add <span 
class="pcrr7tn-">UNIQUE </span>clauses to our tables, we are communicating a set of rules that we are asking the
database to enforce when we attempt to insert records. We are creating these rules as a convenience in
our programs as we will see in a moment. The rules both keep us from making mistakes and make it
simpler to write some of our code.
<!--l. 3914--><p class="noindent" >In essence, in creating this <span 
class="pcrr7tn-">Follows </span>table, we are modelling a &#8221;relationship&#8221; where one person
&#8221;follows&#8221; someone else and representing it with a pair of numbers indicating that (a) the people are
connected and (b) the direction of the relationship.
<div  
class="centerline">       <img 
src="cfbook30x.png" alt="PIC" class="graphics" width="286.65215pt" height="180.67499pt" ><!--tex4ht:graphics  
name="cfbook30x.png" src="figs2/twitter.eps"  
-->       </div>
<!--l. 3924--><p class="noindent" >
<a 
 id="x1-16018r8"></a>
<!--l. 3924--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.8</span>   <span 
class="ptmb7t-x-x-144">Programming with multiple tables</span>
<a 
 id="Q1-1-174"></a>
<!--l. 3926--><p class="noindent" >We will now re-do the Twitter spider program using two tables, the primary keys, and the key
references as described above. Here is the code for the new version of the program:

<div class="verbatim" id="verbatim-399">
import&#x00A0;sqlite3
&#x00A0;<br />import&#x00A0;urllib
&#x00A0;<br />import&#x00A0;xml.etree.ElementTree&#x00A0;as&#x00A0;ET
&#x00A0;<br />
&#x00A0;<br />TWITTER_URL&#x00A0;=&#x00A0;&#8217;http://api.twitter.com/l/statuses/friends/ACCT.xml&#8217;
&#x00A0;<br />
&#x00A0;<br />conn&#x00A0;=&#x00A0;sqlite3.connect(&#8217;twdata.db&#8217;)
&#x00A0;<br />cur&#x00A0;=&#x00A0;conn.cursor()
&#x00A0;<br />
&#x00A0;<br />cur.execute(&#8217;&#8217;&#8217;CREATE&#x00A0;TABLE&#x00A0;IF&#x00A0;NOT&#x00A0;EXISTS&#x00A0;People
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(id&#x00A0;INTEGER&#x00A0;PRIMARY&#x00A0;KEY,&#x00A0;name&#x00A0;TEXT&#x00A0;UNIQUE,&#x00A0;retrieved&#x00A0;INTEGER)&#8217;&#8217;&#8217;)
&#x00A0;<br />cur.execute(&#8217;&#8217;&#8217;CREATE&#x00A0;TABLE&#x00A0;IF&#x00A0;NOT&#x00A0;EXISTS&#x00A0;Follows
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(from_id&#x00A0;INTEGER,&#x00A0;to_id&#x00A0;INTEGER,&#x00A0;UNIQUE(from_id,&#x00A0;to_id))&#8217;&#8217;&#8217;)
&#x00A0;<br />
&#x00A0;<br />while&#x00A0;True:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;acct&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:&#x00A0;&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(&#x00A0;acct&#x00A0;==&#x00A0;&#8217;quit&#8217;&#x00A0;)&#x00A0;:&#x00A0;break
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(&#x00A0;len(acct)&#x00A0;&#x003C;&#x00A0;1&#x00A0;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;&#8217;&#8217;SELECT&#x00A0;id,name&#x00A0;FROM&#x00A0;People
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;WHERE&#x00A0;retrieved&#x00A0;=&#x00A0;0&#x00A0;LIMIT&#x00A0;1&#8217;&#8217;&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(id,&#x00A0;acct)&#x00A0;=&#x00A0;cur.fetchone()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;No&#x00A0;unretrieved&#x00A0;Twitter&#x00A0;accounts&#x00A0;found&#8217;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;else:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;SELECT&#x00A0;id&#x00A0;FROM&#x00A0;People&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#x00A0;LIMIT&#x00A0;1&#8217;,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(acct,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;id&#x00A0;=&#x00A0;cur.fetchone()[0]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;&#8217;&#8217;INSERT&#x00A0;OR&#x00A0;IGNORE&#x00A0;INTO&#x00A0;People
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(name,&#x00A0;retrieved)&#x00A0;VALUES&#x00A0;(&#x00A0;?,&#x00A0;0)&#8217;&#8217;&#8217;,&#x00A0;(&#x00A0;acct,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;conn.commit()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;cur.rowcount&#x00A0;!=&#x00A0;1&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Error&#x00A0;inserting&#x00A0;account:&#8217;,acct
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;id&#x00A0;=&#x00A0;cur.lastrowid
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;url&#x00A0;=&#x00A0;TWITTER_URL.replace(&#8217;ACCT&#8217;,&#x00A0;acct)

&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Retrieving&#8217;,&#x00A0;url
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;document&#x00A0;=&#x00A0;urllib.urlopen&#x00A0;(url).read()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;tree&#x00A0;=&#x00A0;ET.fromstring(document)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;UPDATE&#x00A0;People&#x00A0;SET&#x00A0;retrieved=1&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#8217;,&#x00A0;(acct,&#x00A0;)&#x00A0;)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;countnew&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;countold&#x00A0;=&#x00A0;0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;user&#x00A0;in&#x00A0;tree.findall(&#8217;user&#8217;):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;friend&#x00A0;=&#x00A0;user.find(&#8217;screen_name&#8217;).text
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;SELECT&#x00A0;id&#x00A0;FROM&#x00A0;People&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#x00A0;LIMIT&#x00A0;1&#8217;,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(friend,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;friend_id&#x00A0;=&#x00A0;cur.fetchone()[0]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;countold&#x00A0;=&#x00A0;countold&#x00A0;+&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;&#8217;&#8217;INSERT&#x00A0;OR&#x00A0;IGNORE&#x00A0;INTO&#x00A0;People&#x00A0;(name,&#x00A0;retrieved)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;VALUES&#x00A0;(&#x00A0;?,&#x00A0;0)&#8217;&#8217;&#8217;,&#x00A0;(&#x00A0;friend,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;conn.commit()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;cur.rowcount&#x00A0;!=&#x00A0;1&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Error&#x00A0;inserting&#x00A0;account:&#8217;,friend
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;friend_id&#x00A0;=&#x00A0;cur.lastrowid
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;countnew&#x00A0;=&#x00A0;countnew&#x00A0;+&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;&#8217;&#8217;INSERT&#x00A0;OR&#x00A0;IGNORE&#x00A0;INTO&#x00A0;Follows
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(from_id,&#x00A0;to_id)&#x00A0;VALUES&#x00A0;(?,&#x00A0;?)&#8217;&#8217;&#8217;,&#x00A0;(id,&#x00A0;friend_id)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;New&#x00A0;accounts=&#8217;,countnew,&#8217;&#x00A0;revisited=&#8217;,countold
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;conn.commit()
&#x00A0;<br />
&#x00A0;<br />cur.close()</div>
<!--l. 4002--><p class="nopar" > This program is starting to get a bit complicated, but it illustrates the patterns that we need to use when
we are using integer keys to link tables. The basic patterns are:
<!--l. 4009--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-16020x1">Creating tables with primary keys and constraints.
     </li>
     <li 
  class="enumerate" id="x1-16022x2">When we have a logical key for a person (i.e. account name) and we need the <span 
class="pcrr7tn-">id </span>value
     for the person. Depending on whether or not the person is already in the <span 
class="pcrr7tn-">People </span>table,
     we either need to: (1) look up the person in the <span 
class="pcrr7tn-">People </span>table and retrieve the <span 
class="pcrr7tn-">id </span>value for
     the person or (2) add the person the the <span 
class="pcrr7tn-">People </span>table and get the <span 
class="pcrr7tn-">id </span>value for the newly
     added row.

     </li>
     <li 
  class="enumerate" id="x1-16024x3">Insert the row that captures the &#8220;follows&#8221; relationship.
     </li></ol>
<!--l. 4026--><p class="noindent" >We will cover each of these in turn.
<!--l. 4028--><p class="noindent" >
<a 
 id="x1-16025r1"></a>
<!--l. 4028--><p class="noindent" ><span 
class="ptmb7t-x-x-120">14.8.1</span>  <span 
class="ptmb7t-x-x-120">Constraints in database tables</span>
<a 
 id="Q1-1-175"></a>
<!--l. 4030--><p class="noindent" >As we design our table structures, we can tell the database system that we would like it to enforce a
few rules on us. These rules help us from making mistakes and introducing incorrect data into out
tables. When we create our tables:

<div class="verbatim" id="verbatim-400">
cur.execute(&#8217;&#8217;&#8217;CREATE&#x00A0;TABLE&#x00A0;IF&#x00A0;NOT&#x00A0;EXISTS&#x00A0;People
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(id&#x00A0;INTEGER&#x00A0;PRIMARY&#x00A0;KEY,&#x00A0;name&#x00A0;TEXT&#x00A0;UNIQUE,&#x00A0;retrieved&#x00A0;INTEGER)&#8217;&#8217;&#8217;)
&#x00A0;<br />cur.execute(&#8217;&#8217;&#8217;CREATE&#x00A0;TABLE&#x00A0;IF&#x00A0;NOT&#x00A0;EXISTS&#x00A0;Follows
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(from_id&#x00A0;INTEGER,&#x00A0;to_id&#x00A0;INTEGER,&#x00A0;UNIQUE(from_id,&#x00A0;to_id))&#8217;&#8217;&#8217;)</div>
<!--l. 4041--><p class="nopar" > We indicate that the <span 
class="pcrr7tn-">name </span>column in the <span 
class="pcrr7tn-">People </span>table must be <span 
class="pcrr7tn-">UNIQUE</span>. We also indicate that the
combination of the two numbers in each row of the <span 
class="pcrr7tn-">Follows </span>table must be unique. These
constraints keep us from making mistakes such as adding the same relationship more than
once.
<!--l. 4050--><p class="noindent" >We can take advantage of these constraints in the following code:

<div class="verbatim" id="verbatim-401">
cur.execute(&#8217;&#8217;&#8217;INSERT&#x00A0;OR&#x00A0;IGNORE&#x00A0;INTO&#x00A0;People&#x00A0;(name,&#x00A0;retrieved)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;VALUES&#x00A0;(&#x00A0;?,&#x00A0;0)&#8217;&#8217;&#8217;,&#x00A0;(&#x00A0;friend,&#x00A0;)&#x00A0;)</div>
<!--l. 4056--><p class="nopar" > We add the <span 
class="pcrr7tn-">OR IGNORE </span>clause to our <span 
class="pcrr7tn-">INSERT </span>statement to indicate that if this particular <span 
class="pcrr7tn-">INSERT </span>would
cause a violation of the &#8220;<span 
class="pcrr7tn-">name </span>must be unique&#8221; rule, the database system is allowed to ignore the
<span 
class="pcrr7tn-">INSERT</span>. We are using the database constraint as a safety net to make sure we don&#8217;t inadvertently do
something incorrect.
<!--l. 4065--><p class="noindent" >Similarly, the following code ensures that we don&#8217;t add the exact same <span 
class="pcrr7tn-">Follows </span>relationship
twice.

<div class="verbatim" id="verbatim-402">
cur.execute(&#8217;&#8217;&#8217;INSERT&#x00A0;OR&#x00A0;IGNORE&#x00A0;INTO&#x00A0;Follows
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(from_id,&#x00A0;to_id)&#x00A0;VALUES&#x00A0;(?,&#x00A0;?)&#8217;&#8217;&#8217;,&#x00A0;(id,&#x00A0;friend_id)&#x00A0;)</div>
<!--l. 4072--><p class="nopar" > Again we simply tell the database to ignore our attempted <span 
class="pcrr7tn-">INSERT </span>if it would violate the uniqueness
constraint that we specified for the <span 
class="pcrr7tn-">Follows </span>rows.
<!--l. 4079--><p class="noindent" >
<a 
 id="x1-16026r2"></a>
<!--l. 4079--><p class="noindent" ><span 
class="ptmb7t-x-x-120">14.8.2</span>  <span 
class="ptmb7t-x-x-120">Retrieve and/or insert a record</span>
<a 
 id="Q1-1-176"></a>
<!--l. 4081--><p class="noindent" >When we prompt the user for a Twitter account, if the account exists, we must look up its <span 
class="pcrr7tn-">id </span>value. If
the account does not yet exist in the <span 
class="pcrr7tn-">People </span>table, we must insert the record and get the <span 
class="pcrr7tn-">id </span>value from
the inserted row.
<!--l. 4087--><p class="noindent" >This is a very common pattern and is done twice in the program above. This code shows how we look
up the <span 
class="pcrr7tn-">id </span>for a friend&#8217;s account when we have extracted a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">screen_name</span></span></span> from a <span 
class="pcrr7tn-">user </span>node in the
retrieved Twitter XML.
<!--l. 4092--><p class="noindent" >Since over time it will be increasingly likely that the account will already be in the database, we first
check to see if the <span 
class="pcrr7tn-">People </span>record exists using a <span 
class="pcrr7tn-">SELECT </span>statement.
<!--l. 4096--><p class="noindent" >If all goes well<span class="footnote-mark"><a 
href="cfbook13.html#fn2x15"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-16027f2"></a>
inside the <span 
class="pcrr7tn-">try </span>section, we retrieve the record using <span 
class="pcrr7tn-">fetchone() </span>and then retrieve the first (and only)
element of the returned tuple and store it in <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">friend_id</span></span></span>.
<!--l. 4103--><p class="noindent" >If the <span 
class="pcrr7tn-">SELECT </span>fails, the <span 
class="pcrr7tn-">fetchone()[0] </span>code will fail and control will transfer into the <span 
class="pcrr7tn-">except</span>
section.

<div class="verbatim" id="verbatim-403">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;friend&#x00A0;=&#x00A0;user.find(&#8217;screen_name&#8217;).text
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;SELECT&#x00A0;id&#x00A0;FROM&#x00A0;People&#x00A0;WHERE&#x00A0;name&#x00A0;=&#x00A0;?&#x00A0;LIMIT&#x00A0;1&#8217;,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(friend,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;friend_id&#x00A0;=&#x00A0;cur.fetchone()[0]
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;countold&#x00A0;=&#x00A0;countold&#x00A0;+&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;except:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;cur.execute(&#8217;&#8217;&#8217;INSERT&#x00A0;OR&#x00A0;IGNORE&#x00A0;INTO&#x00A0;People&#x00A0;(name,&#x00A0;retrieved)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;VALUES&#x00A0;(&#x00A0;?,&#x00A0;0)&#8217;&#8217;&#8217;,&#x00A0;(&#x00A0;friend,&#x00A0;)&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;conn.commit()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;cur.rowcount&#x00A0;!=&#x00A0;1&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Error&#x00A0;inserting&#x00A0;account:&#8217;,friend
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;friend_id&#x00A0;=&#x00A0;cur.lastrowid
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;countnew&#x00A0;=&#x00A0;countnew&#x00A0;+&#x00A0;1</div>
<!--l. 4123--><p class="nopar" > If we end up in the <span 
class="pcrr7tn-">except </span>code, it simply means that the row was not found so we must insert the
row. We use <span 
class="pcrr7tn-">INSERT OR IGNORE </span>just to avoid errors and then call <span 
class="pcrr7tn-">commit() </span>to force the database to
really be updated. After the write is done, we can check the <span 
class="pcrr7tn-">cur.rowcount </span>to see how many rows
were affected. Since we are attempting to insert a single row, if the number of affected rows is
something other than one, it is an error.
<!--l. 4134--><p class="noindent" >If the <span 
class="pcrr7tn-">INSERT </span>is successful, we can look at <span 
class="pcrr7tn-">cur.lastrowid </span>to find out what value the database
assigned to the <span 
class="pcrr7tn-">id </span>column in our newly created row.
<a 
 id="x1-16028r3"></a>
<!--l. 4138--><p class="noindent" ><span 
class="ptmb7t-x-x-120">14.8.3</span>  <span 
class="ptmb7t-x-x-120">Storing the friend relationship</span>
<a 
 id="Q1-1-177"></a>
<!--l. 4140--><p class="noindent" >Once we know the key value for both the Twitter user and the friend in the XML, it is a simple matter
to insert the two numbers into the <span 
class="pcrr7tn-">Follows </span>table with the following code:

<div class="verbatim" id="verbatim-404">
cur.execute(&#8217;INSERT&#x00A0;OR&#x00A0;IGNORE&#x00A0;INTO&#x00A0;Follows&#x00A0;(from_id,&#x00A0;to_id)&#x00A0;VALUES&#x00A0;(?,&#x00A0;?)&#8217;,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(id,&#x00A0;friend_id)&#x00A0;)</div>
<!--l. 4149--><p class="nopar" > Notice that we let the database take care of keeping us from &#8220;double-inserting&#8221; a relationship by
creating the table with a uniqueness constraint and then adding <span 
class="pcrr7tn-">OR IGNORE </span>to our <span 
class="pcrr7tn-">INSERT</span>
statement.
<!--l. 4156--><p class="noindent" >Here is a sample execution of this program:

<div class="verbatim" id="verbatim-405">
Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:
&#x00A0;<br />No&#x00A0;unretrieved&#x00A0;Twitter&#x00A0;accounts&#x00A0;found
&#x00A0;<br />Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:&#x00A0;drchuck
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/drchuck.xml
&#x00A0;<br />New&#x00A0;accounts=&#x00A0;100&#x00A0;&#x00A0;revisited=&#x00A0;0
&#x00A0;<br />Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/opencontent.xml
&#x00A0;<br />New&#x00A0;accounts=&#x00A0;97&#x00A0;&#x00A0;revisited=&#x00A0;3
&#x00A0;<br />Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:
&#x00A0;<br />Retrieving&#x00A0;http://api.twitter.com/l/statuses/friends/lhawthorn.xml
&#x00A0;<br />New&#x00A0;accounts=&#x00A0;97&#x00A0;&#x00A0;revisited=&#x00A0;3
&#x00A0;<br />Enter&#x00A0;a&#x00A0;Twitter&#x00A0;account,&#x00A0;or&#x00A0;quit:&#x00A0;quit</div>
<!--l. 4171--><p class="nopar" > We started with the <span 
class="pcrr7tn-">drchuck </span>account and then let the program automatically pick the next two
accounts to retrieve and add to our database.
<!--l. 4178--><p class="noindent" >The following is the first few rows in the <span 
class="pcrr7tn-">People </span>and <span 
class="pcrr7tn-">Follows </span>tables after this run is completed:

<div class="verbatim" id="verbatim-406">
People:
&#x00A0;<br />(1,&#x00A0;u&#8217;drchuck&#8217;,&#x00A0;1)
&#x00A0;<br />(2,&#x00A0;u&#8217;opencontent&#8217;,&#x00A0;1)
&#x00A0;<br />(3,&#x00A0;u&#8217;lhawthorn&#8217;,&#x00A0;1)
&#x00A0;<br />(4,&#x00A0;u&#8217;steve_coppin&#8217;,&#x00A0;0)
&#x00A0;<br />(5,&#x00A0;u&#8217;davidkocher&#8217;,&#x00A0;0)
&#x00A0;<br />295&#x00A0;rows.
&#x00A0;<br />Follows:
&#x00A0;<br />(1,&#x00A0;2)
&#x00A0;<br />(1,&#x00A0;3)
&#x00A0;<br />(1,&#x00A0;4)
&#x00A0;<br />(1,&#x00A0;5)
&#x00A0;<br />(1,&#x00A0;6)
&#x00A0;<br />300&#x00A0;rows.</div>
<!--l. 4196--><p class="nopar" > You can see the <span 
class="pcrr7tn-">id</span>, <span 
class="pcrr7tn-">name</span>, and <span 
class="pcrr7tn-">visited </span>fields in the <span 
class="pcrr7tn-">People </span>table and you see the numbers of both
ends of the relationship <span 
class="pcrr7tn-">Follows </span>table. In the <span 
class="pcrr7tn-">People </span>table, we can see that the first three people have
been visited and their data has been retrieved. The data in the <span 
class="pcrr7tn-">Follows </span>table indicates that <span 
class="pcrr7tn-">drchuck</span>
(user 1) is a friend to all of the people shown in the first five rows. This makes sense because the
first data we retrieved and stored was the Twitter friends of <span 
class="pcrr7tn-">drchuck</span>. If you were to print
more rows from the <span 
class="pcrr7tn-">Follows </span>table, you would see the friends of user two and three as
well.
<!--l. 4211--><p class="noindent" >
<a 
 id="x1-16029r9"></a>
<!--l. 4211--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.9</span>   <span 
class="ptmb7t-x-x-144">Three kinds of keys</span>
<a 
 id="Q1-1-178"></a>
<!--l. 4213--><p class="noindent" >Now that we have started building a data model putting our data into multiple linked tables, and linking
the rows in those tables using <span 
class="ptmb7t-">keys</span>, we need to look at some terminology around keys. There are
generally three kinds of keys used in a database model.
     <ul class="itemize1">
     <li class="itemize">A <span 
class="ptmb7t-">logical key </span>is a key that the &#8220;real world&#8221; might use to look up a row. In our example
     data model, the <span 
class="pcrr7tn-">name </span>field is a logical key. It is the screen name for the user and we indeed
     look up a user&#8217;s row several times in the program using the <span 
class="pcrr7tn-">name </span>field. You will often find
     that it makes sense to add a <span 
class="pcrr7tn-">UNIQUE </span>constraint to a logical key. Since the logical key is

     how we look up a row from the outside world, it makes little sense to allow multiple rows
     with the same value in the table.
     </li>
     <li class="itemize">A <span 
class="ptmb7t-">primary key </span>is usually a number that is assigned automatically by the database. It
     generally has no meaning outside the program and is only used to link rows from different
     tables together. When we want to look up a row in a table, usually searching for the row
     using the primary key is the fastest way to find a row. Since primary keys are integer
     numbers, they take up very little storage and can be compared or sorted very quickly. In
     our data model, the <span 
class="pcrr7tn-">id </span>field is an example of a primary key.
     </li>
     <li class="itemize">A <span 
class="ptmb7t-">foreign key </span>is usually a number that points to the primary key of an associated row in
     a different table. An example of a foreign key in our data model is the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">from_id</span></span></span>.
     </li></ul>
<!--l. 4245--><p class="noindent" >We are using a naming convention of always calling the primary key field name <span 
class="pcrr7tn-">id </span>and appending the
suffix <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">_id</span></span></span> to any field name that is a foreign key.
<!--l. 4251--><p class="noindent" >
<a 
 id="x1-16030r10"></a>
<!--l. 4251--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.10</span>   <span 
class="ptmb7t-x-x-144">Using JOIN to retrieve data</span>
<a 
 id="Q1-1-179"></a>
<!--l. 4253--><p class="noindent" >Now that we have followed the rules of database normalization and have data separated into two tables,
linked together using primary and foreign keys, we need to be able to build a <span 
class="pcrr7tn-">SELECT </span>that re-assembles
the data across the tables.
<!--l. 4258--><p class="noindent" >SQL uses the <span 
class="pcrr7tn-">JOIN </span>clause to re-connect these tables. In the <span 
class="pcrr7tn-">JOIN </span>clause you specify the fields that are
used to re-connect the rows between the tables.
<!--l. 4262--><p class="noindent" >The following is an example of a <span 
class="pcrr7tn-">SELECT </span>with a <span 
class="pcrr7tn-">JOIN </span>clause:

<div class="verbatim" id="verbatim-407">
SELECT&#x00A0;&#x22C6;&#x00A0;FROM&#x00A0;Follows&#x00A0;JOIN&#x00A0;People
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;ON&#x00A0;Follows.to_id&#x00A0;=&#x00A0;People.id&#x00A0;WHERE&#x00A0;Follows.from_id&#x00A0;=&#x00A0;2</div>
<!--l. 4269--><p class="nopar" > The <span 
class="pcrr7tn-">JOIN </span>clause indicates that the fields we are selecting cross both the <span 
class="pcrr7tn-">Follows </span>and <span 
class="pcrr7tn-">People </span>tables.
The <span 
class="pcrr7tn-">ON </span>clause indicates how the two tables are to be joined. Take the rows from <span 
class="pcrr7tn-">Follows </span>and append
the row from <span 
class="pcrr7tn-">People </span>where the field <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">from_id</span></span></span> in <span 
class="pcrr7tn-">Follows </span>is the same the <span 
class="pcrr7tn-">id </span>value in the <span 
class="pcrr7tn-">People</span>
table.
<div  
class="centerline">         <img 
src="cfbook31x.png" alt="PIC" class="graphics" width="261.95963pt" height="180.67499pt" ><!--tex4ht:graphics  
name="cfbook31x.png" src="figs2/join.eps"  
-->         </div>
<!--l. 4283--><p class="noindent" >The result of the JOIN is to create extra-long &#8220;meta-rows&#8221; which have both the fields from <span 
class="pcrr7tn-">People </span>and
the matching fields from <span 
class="pcrr7tn-">Follows</span>. Where there is more than one match between the <span 
class="pcrr7tn-">id </span>field from
<span 
class="pcrr7tn-">People </span>and the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">from_id</span></span></span> from <span 
class="pcrr7tn-">People</span>, then JOIN creates a meta-row for <span 
class="ptmri7t-">each </span>of the matching pairs of
rows, duplicating data as needed.
<!--l. 4289--><p class="noindent" >The following code demonstrates the data that we will have in the database after the multi-table Twitter
spider program (above) has been run several times.

<div class="verbatim" id="verbatim-408">
import&#x00A0;sqlite3
&#x00A0;<br />
&#x00A0;<br />conn&#x00A0;=&#x00A0;sqlite3.connect(&#8217;twdata.db&#8217;)
&#x00A0;<br />cur&#x00A0;=&#x00A0;conn.cursor()
&#x00A0;<br />
&#x00A0;<br />cur.execute(&#8217;SELECT&#x00A0;&#x22C6;&#x00A0;FROM&#x00A0;People&#8217;)
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />print&#x00A0;&#8217;People:&#8217;
&#x00A0;<br />for&#x00A0;row&#x00A0;in&#x00A0;cur&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;if&#x00A0;count&#x00A0;&#x003C;&#x00A0;5:&#x00A0;print&#x00A0;row
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;count,&#x00A0;&#8217;rows.&#8217;
&#x00A0;<br />
&#x00A0;<br />cur.execute(&#8217;SELECT&#x00A0;&#x22C6;&#x00A0;FROM&#x00A0;Follows&#8217;)
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />print&#x00A0;&#8217;Follows:&#8217;
&#x00A0;<br />for&#x00A0;row&#x00A0;in&#x00A0;cur&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;if&#x00A0;count&#x00A0;&#x003C;&#x00A0;5:&#x00A0;print&#x00A0;row
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;count,&#x00A0;&#8217;rows.&#8217;
&#x00A0;<br />
&#x00A0;<br />cur.execute(&#8217;&#8217;&#8217;SELECT&#x00A0;&#x22C6;&#x00A0;FROM&#x00A0;Follows&#x00A0;JOIN&#x00A0;People
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;ON&#x00A0;Follows.to_id&#x00A0;=&#x00A0;People.id&#x00A0;WHERE&#x00A0;Follows.from_id&#x00A0;=&#x00A0;2&#8217;&#8217;&#8217;)
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />print&#x00A0;&#8217;Connections&#x00A0;for&#x00A0;id=2:&#8217;
&#x00A0;<br />for&#x00A0;row&#x00A0;in&#x00A0;cur&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;if&#x00A0;count&#x00A0;&#x003C;&#x00A0;5:&#x00A0;print&#x00A0;row
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;count,&#x00A0;&#8217;rows.&#8217;
&#x00A0;<br />
&#x00A0;<br />cur.close()</div>
<!--l. 4326--><p class="nopar" > In this program, we first dump out the <span 
class="pcrr7tn-">People </span>and <span 
class="pcrr7tn-">Follows </span>and then dump out a subset of the data in
the tables joined together.
<!--l. 4333--><p class="noindent" >Here is the output of the program:

<div class="verbatim" id="verbatim-409">
python&#x00A0;twjoin.py
&#x00A0;<br />People:
&#x00A0;<br />(1,&#x00A0;u&#8217;drchuck&#8217;,&#x00A0;1)
&#x00A0;<br />(2,&#x00A0;u&#8217;opencontent&#8217;,&#x00A0;1)
&#x00A0;<br />(3,&#x00A0;u&#8217;lhawthorn&#8217;,&#x00A0;1)
&#x00A0;<br />(4,&#x00A0;u&#8217;steve_coppin&#8217;,&#x00A0;0)
&#x00A0;<br />(5,&#x00A0;u&#8217;davidkocher&#8217;,&#x00A0;0)
&#x00A0;<br />295&#x00A0;rows.
&#x00A0;<br />Follows:
&#x00A0;<br />(1,&#x00A0;2)
&#x00A0;<br />(1,&#x00A0;3)
&#x00A0;<br />(1,&#x00A0;4)
&#x00A0;<br />(1,&#x00A0;5)
&#x00A0;<br />(1,&#x00A0;6)
&#x00A0;<br />300&#x00A0;rows.
&#x00A0;<br />Connections&#x00A0;for&#x00A0;id=2:
&#x00A0;<br />(2,&#x00A0;1,&#x00A0;1,&#x00A0;u&#8217;drchuck&#8217;,&#x00A0;1)
&#x00A0;<br />(2,&#x00A0;28,&#x00A0;28,&#x00A0;u&#8217;cnxorg&#8217;,&#x00A0;0)
&#x00A0;<br />(2,&#x00A0;30,&#x00A0;30,&#x00A0;u&#8217;kthanos&#8217;,&#x00A0;0)
&#x00A0;<br />(2,&#x00A0;102,&#x00A0;102,&#x00A0;u&#8217;SomethingGirl&#8217;,&#x00A0;0)
&#x00A0;<br />(2,&#x00A0;103,&#x00A0;103,&#x00A0;u&#8217;ja_Pac&#8217;,&#x00A0;0)
&#x00A0;<br />100&#x00A0;rows.</div>
<!--l. 4359--><p class="nopar" > You see the columns from the <span 
class="pcrr7tn-">People </span>and <span 
class="pcrr7tn-">Follows </span>tables and the last set of rows is the result of the
<span 
class="pcrr7tn-">SELECT </span>with the <span 
class="pcrr7tn-">JOIN </span>clause.
<!--l. 4365--><p class="noindent" >In the last select, we are looking for accounts that are friends of &#8220;opencontent&#8221; (i.e. <span 
class="pcrr7tn-">People.id=2</span>).
<!--l. 4368--><p class="noindent" >In each of the &#8220;meta-rows&#8221; in the last select, the first two columns are from the <span 
class="pcrr7tn-">Follows </span>table followed
by columns three through five from the <span 
class="pcrr7tn-">People </span>table. You can also see that the second
column (<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">Follows.to_id</span></span></span>) matches the third column (<span 
class="pcrr7tn-">People.id</span>) in each of the joined-up
&#8220;meta-rows&#8221;.
<!--l. 4374--><p class="noindent" >
<a 
 id="x1-16031r11"></a>
<!--l. 4374--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.11</span>   <span 
class="ptmb7t-x-x-144">Summary</span>
<a 
 id="Q1-1-180"></a>
<!--l. 4376--><p class="noindent" >This chapter has covered a lot of ground to give you an overview of the basics of using a database in
Python. It is more complicated to write the code to use a database to store data than Python dictionaries

or flat files so there is little reason to use a database unless your application truly needs the capabilities
of a database. The situations where a database can be quite useful are: (1) when your application needs
to make small many random updates within a large data set, (2) when your data is so large it cannot fit
in a dictionary and you need to look up information repeatedly, or (3) you have a long-running
process that you want to be able to stop and restart and retain the data from one run to the
next.
<!--l. 4387--><p class="noindent" >You can build a simple database with a single table to suit many application needs, but most problems
will require several tables and links/relationships between rows in different tables. When
you start making links between tables, it is important to do some thoughtful design and
follow the rules of database normalization to make the best use of the database&#8217;s capabilities.
Since the primary motivation for using a database is that you have a large amount of data to
deal with, it is important to model your data efficiently so your programs run as fast as
possible.
<!--l. 4396--><p class="noindent" >
<a 
 id="x1-16032r12"></a>
<!--l. 4396--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.12</span>   <span 
class="ptmb7t-x-x-144">Debugging</span>
<a 
 id="Q1-1-181"></a>
<!--l. 4398--><p class="noindent" >One common pattern when you are developing a Python program to connect to an SQLite database
will be to run a Python program and check the results using the SQLite Database Browser. The
browser allows you to quickly check to see if your program is working properly.
<!--l. 4403--><p class="noindent" >You must be careful because SQLite takes care to keep two programs from changing the same data at
the same time. For example, if you open a database in the browser and make a change to the database
and have not yet pressed the &#8220;save&#8221; button in the browser, the browser &#8220;locks&#8221; the database file and
keeping any other program from accessing the file. In particular, your Python program will not be able
to access the file if it is locked.
<!--l. 4411--><p class="noindent" >So a solution is to make sure to either close the database browser or use the <span 
class="ptmb7t-">File </span>menu to close the
database in the browser before you attempt to access the database from Python to avoid the problem of
your Python code failing because the database is locked.
<!--l. 4417--><p class="noindent" >
<a 
 id="x1-16033r13"></a>
<!--l. 4417--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.13</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-182"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">attribute:</span> </dt><dd 
class="description">One of the values within a tuple. More commonly called a &#8220;column&#8221; or &#8220;field&#8221;. <a 
 id="dx1-16034"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">constraint:</span> </dt><dd 
class="description">When we tell the database to enforce a rule on a field or a row in a table. A common
     constraint is to insist that there can be no duplicate values in a particular field (i.e. all the
     values must be unique). <a 
 id="dx1-16035"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">cursor:</span> </dt><dd 
class="description">A cursor allows you to execute SQL commands in a database and retrieve data from
     the database. A cursor is similar to a socket or file handle for network connections and
     files respectively. <a 
 id="dx1-16036"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">database browser:</span> </dt><dd 
class="description">A piece of software that allows you to directly connect to a database and
     manipulate the database directly without writing a program. <a 
 id="dx1-16037"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">foreign key:</span> </dt><dd 
class="description">A numeric key that points to the primary key of a row in another table. Foreign
     keys establish relationships between rows stored in different tables. <a 
 id="dx1-16038"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">index:</span> </dt><dd 
class="description">Additional data that the database software maintains as rows are inserted into a table
     designed to make lookups very fast. <a 
 id="dx1-16039"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">logical key:</span> </dt><dd 
class="description">A key that the &#8220;outside world&#8221; uses to look up a particular row. For example in a
     table of user accounts, a person&#8217;s e-mail address might be a good candidate as the logical
     key for the user&#8217;s data. <a 
 id="dx1-16040"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">normalization:</span> </dt><dd 
class="description">Designing a data model so that no data is replicated. We store each item of
     data at one place in the database and reference it elsewhere using a foreign key. <a 
 id="dx1-16041"></a><a 
 id="dx1-16042"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">primary key:</span> </dt><dd 
class="description">A numeric key assigned to each row that is used to refer to one row in a table
     from another table. Often the database is configured to automatically assign primary keys
     as rows are inserted. <a 
 id="dx1-16043"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">relation:</span> </dt><dd 
class="description">An area within a database that contains tuples and attributes. More typically called a
     &#8220;table&#8221;. <a 
 id="dx1-16044"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">tuple:</span> </dt><dd 
class="description">A single entry in a database table that is a set of attributes. More typically called &#8220;row&#8221;.
     <a 
 id="dx1-16045"></a>
     </dd></dl>
<!--l. 4476--><p class="noindent" >

<a 
 id="x1-16046r14"></a>
<!--l. 4476--><p class="noindent" ><span 
class="ptmb7t-x-x-144">14.14</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-183"></a>
<div class="newtheorem">
<!--l. 4478--><p class="noindent" ><span class="head">
<a 
 id="x1-16047r1"></a>
<span 
class="ptmb7t-">Exercise 14.1</span>  </span>Retrieve the following file <a 
href="http://www.py4inf.com/code/wikidata.db" class="url" ><span 
class="pcrr7tn-">http://www.py4inf.com/code/wikidata.db</span></a> and
use the SQLite browser to figure out how many tables are in the database and list the fields for
each of the tables including the type of the field. One of the fields is a type that is not described
in this chapter. Use the SQLite online documentation to describe the purpose of that type of
data?
</div>

<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;15</span><br /><a 
 id="x1-1700015"></a>Automating common tasks on your computer</h2>
<!--l. 4489--><p class="noindent" >We have been reading data from files, networks, services, and databases. Python can also go through
all of the directories and folders on your computers and read those files as well.
<!--l. 4494--><p class="noindent" >In this chapter, we will write programs that scan scan through your computer and perform some
operation on each file. Files are organized into directories (also called &#8220;folders&#8221;). Simple Python
scripts can make short work of simple tasks that must be done to hundreds or thousands of files spread
across a directory tree or your entire computer.
<!--l. 4503--><p class="noindent" >To walk through all the directories and files in a tree we use <span 
class="pcrr7tn-">os.walk </span>and a <span 
class="pcrr7tn-">for </span>loop. This is similar to
how <span 
class="pcrr7tn-">open </span>allows us to write a loop to read the contents of a file, <span 
class="pcrr7tn-">socket </span>allows us to write a loop to
read the contents of a network connection, and <span 
class="pcrr7tn-">urllib </span>allows us to open a web document and loop
through its contents.
<a 
 id="x1-17001r1"></a>
<span 
class="ptmb7t-x-x-144">15.1</span>   <span 
class="ptmb7t-x-x-144">File names and paths</span>
<a 
 id="Q1-1-185"></a>
<a 
 id="dx1-17002"></a>
<a 
 id="dx1-17003"></a>
<a 
 id="dx1-17004"></a>
<a 
 id="dx1-17005"></a>
<!--l. 4517--><p class="noindent" >Every running program has a &#8220;current directory,&#8221; which is the default directory for most
operations. For example, when you open a file for reading, Python looks for it in the current
directory.
<a 
 id="dx1-17006"></a>
<a 
 id="dx1-17007"></a>
<!--l. 4525--><p class="noindent" >The <span 
class="pcrr7tn-">os </span>module provides functions for working with files and directories (<span 
class="pcrr7tn-">os </span>stands for &#8220;operating
system&#8221;). <span 
class="pcrr7tn-">os.getcwd </span>returns the name of the current directory:
<a 
 id="dx1-17008"></a>
<a 
 id="dx1-17009"></a>

<div class="verbatim" id="verbatim-410">
&#x003E;&#x003E;&#x003E;&#x00A0;import&#x00A0;os
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;cwd&#x00A0;=&#x00A0;os.getcwd()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;cwd
&#x00A0;<br />/Users/csev</div>
<!--l. 4538--><p class="nopar" ><span 
class="pcrr7tn-">cwd </span>stands for <span 
class="ptmb7t-">current working directory</span>. The result in this example is <span 
class="pcrr7tn-">/Users/csev</span>, which is the
home directory of a user named <span 
class="pcrr7tn-">csev</span>.
<a 
 id="dx1-17010"></a>
<a 
 id="dx1-17011"></a>
<!--l. 4548--><p class="noindent" >A string like <span 
class="pcrr7tn-">cwd </span>that identifies a file is called a path. A <span 
class="ptmb7t-">relative path </span>starts from the current directory;
an <span 
class="ptmb7t-">absolute path </span>starts from the topmost directory in the file system.
<a 
 id="dx1-17012"></a>
<a 
 id="dx1-17013"></a>
<a 
 id="dx1-17014"></a>
<a 
 id="dx1-17015"></a>
<!--l. 4558--><p class="noindent" >The paths we have seen so far are simple file names, so they are relative to the current directory. To
find the absolute path to a file, you can use <span 
class="pcrr7tn-">os.path.abspath</span>:

<div class="verbatim" id="verbatim-411">
&#x003E;&#x003E;&#x003E;&#x00A0;os.path.abspath(&#8217;memo.txt&#8217;)
&#x00A0;<br />&#8217;/Users/csev/memo.txt&#8217;</div>
<!--l. 4566--><p class="nopar" ><span 
class="pcrr7tn-">os.path.exists </span>checks whether a file or directory exists:
<a 
 id="dx1-17016"></a>
<a 
 id="dx1-17017"></a>

<div class="verbatim" id="verbatim-412">
&#x003E;&#x003E;&#x003E;&#x00A0;os.path.exists(&#8217;memo.txt&#8217;)
&#x00A0;<br />True</div>
<!--l. 4579--><p class="nopar" > If it exists, <span 
class="pcrr7tn-">os.path.isdir </span>checks whether it&#8217;s a directory:

<div class="verbatim" id="verbatim-413">
&#x003E;&#x003E;&#x003E;&#x00A0;os.path.isdir(&#8217;memo.txt&#8217;)
&#x00A0;<br />False
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;os.path.isdir(&#8217;music&#8217;)
&#x00A0;<br />True</div>
<!--l. 4590--><p class="nopar" > Similarly, <span 
class="pcrr7tn-">os.path.isfile </span>checks whether it&#8217;s a file.
<!--l. 4595--><p class="noindent" ><span 
class="pcrr7tn-">os.listdir </span>returns a list of the files (and other directories) in the given directory:

<div class="verbatim" id="verbatim-414">
&#x003E;&#x003E;&#x003E;&#x00A0;os.listdir(cwd)
&#x00A0;<br />[&#8217;music&#8217;,&#x00A0;&#8217;photos&#8217;,&#x00A0;&#8217;memo.txt&#8217;]</div>
<!--l. 4602--><p class="nopar" >
<!--l. 4607--><p class="noindent" >
<a 
 id="x1-17018r2"></a>
<!--l. 4607--><p class="noindent" ><span 
class="ptmb7t-x-x-144">15.2</span>   <span 
class="ptmb7t-x-x-144">Example: Cleaning up a photo directory</span>
<a 
 id="Q1-1-186"></a>
<!--l. 4609--><p class="noindent" >Some time ago, I built a bit of Flickr-like software that received photos from my cell phone and stored
those photos on my server. I wrote this before Flickr existed and kept using it after Flickr existed
because I wanted to keep original copies of my images forever.
<!--l. 4615--><p class="noindent" >I would also send a simple one-line text description in the MMS message or the subject line of the
e-mail message. I stored these messages in a text file in the same directory as the image file. I
came up with a directory structure based on the month, year, day and time the photo was
taken. The following would be an example of the naming for one photo and its existing
description:

<div class="verbatim" id="verbatim-415">
./2006/03/24-03-06_2018002.jpg
&#x00A0;<br />./2006/03/24-03-06_2018002.txt</div>
<!--l. 4626--><p class="nopar" > After seven years, I had a lot of photos and captions. Over the years as I switched cell phones,
sometimes my code to extract the caption from the message would break and add a bunch of useless
data on my server instead of a caption.
<!--l. 4633--><p class="noindent" >I wanted to go through these files and figure out which of the text files were really captions and which
were junk and then delete the bad files. The first thing to do was to get a simple inventory of how many
text files I had in of the sub-folders using the following program:

<div class="verbatim" id="verbatim-416">
import&#x00A0;os
&#x00A0;<br />count&#x00A0;=&#x00A0;0
&#x00A0;<br />for&#x00A0;(dirname,&#x00A0;dirs,&#x00A0;files)&#x00A0;in&#x00A0;os.walk(&#8217;.&#8217;):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;for&#x00A0;filename&#x00A0;in&#x00A0;files:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;filename.endswith(&#8217;.txt&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;count&#x00A0;=&#x00A0;count&#x00A0;+&#x00A0;1
&#x00A0;<br />print&#x00A0;&#8217;Files:&#8217;,&#x00A0;count
&#x00A0;<br />
&#x00A0;<br />python&#x00A0;txtcount.py
&#x00A0;<br />Files:&#x00A0;1917</div>
<!--l. 4651--><p class="nopar" > The key bit of code that makes this possible is the <span 
class="pcrr7tn-">os.walk </span>library in Python. When we call
<span 
class="pcrr7tn-">os.walk </span>and give it a starting directory, it will &#8220;walk&#8221; through all of the directories and
sub-directories recursively. The string &#8220;.&#8221; indicates to start in the current directory and walk
downward. As it encounters each directory, we get three values in a tuple in the body of
the <span 
class="pcrr7tn-">for </span>loop. The first value is the current directory name, the second value is the list of
sub-directories in the current directory, and the third value is a list of files in the current
directory.
<!--l. 4666--><p class="noindent" >We do not have to explicitly look into each of the sub-directories because we can count on <span 
class="pcrr7tn-">os.walk </span>to
visit every folder eventually. But we do want to look at each file, so we write a simple <span 
class="pcrr7tn-">for </span>loop to
examine each of the files in the current directory. We check each file to see if it ends with &#8220;.txt&#8221; and
then count the number of files through the whole directory tree that end with the suffix
&#8220;.txt&#8221;.
<!--l. 4675--><p class="noindent" >Once we have a sense of how many files end with &#8220;.txt&#8221;, the next thing to do is try to automatically
determine in Python which files are bad and which files are good. So we write a simple program to
print out the files and the size of each file:

<div class="verbatim" id="verbatim-417">
import&#x00A0;os
&#x00A0;<br />from&#x00A0;os.path&#x00A0;import&#x00A0;join
&#x00A0;<br />for&#x00A0;(dirname,&#x00A0;dirs,&#x00A0;files)&#x00A0;in&#x00A0;os.walk(&#8217;.&#8217;):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;for&#x00A0;filename&#x00A0;in&#x00A0;files:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;filename.endswith(&#8217;.txt&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;thefile&#x00A0;=&#x00A0;os.path.join(dirname,filename)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;os.path.getsize(thefile),&#x00A0;thefile</div>
<!--l. 4690--><p class="nopar" > Now instead of just counting the files, we create a file name by concatenating the directory name with
the name of the file within the directory using <span 
class="pcrr7tn-">os.path.join</span>. It is important to use <span 
class="pcrr7tn-">os.path.join</span>
instead of string concatenation because on Windows we use a backslash (<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">\</span></span></span>) to construct file paths and
on Linux or Apple we use a forward slash (<span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">/</span></span></span>) to construct file paths. The <span 
class="pcrr7tn-">os.path.join </span>knows these
differences and knows what system we are running on and it does the proper concatenation
depending on the system. So the same Python code runs on either Windows or UNIX-style
systems.
<!--l. 4707--><p class="noindent" >Once we have the full file name with directory path, we use the <span 
class="pcrr7tn-">os.path.getsize </span>utility to get the
size and print it out, producing the following output:

<div class="verbatim" id="verbatim-418">
python&#x00A0;txtsize.py
&#x00A0;<br />...
&#x00A0;<br />18&#x00A0;./2006/03/24-03-06_2303002.txt
&#x00A0;<br />22&#x00A0;./2006/03/25-03-06_1340001.txt
&#x00A0;<br />22&#x00A0;./2006/03/25-03-06_2034001.txt
&#x00A0;<br />...
&#x00A0;<br />2565&#x00A0;./2005/09/28-09-05_1043004.txt
&#x00A0;<br />2565&#x00A0;./2005/09/28-09-05_1141002.txt
&#x00A0;<br />...
&#x00A0;<br />2578&#x00A0;./2006/03/27-03-06_1618001.txt
&#x00A0;<br />2578&#x00A0;./2006/03/28-03-06_2109001.txt
&#x00A0;<br />2578&#x00A0;./2006/03/29-03-06_1355001.txt
&#x00A0;<br />...</div>
<!--l. 4727--><p class="nopar" > Scanning the output, we notice that some files are pretty short and a lot of the files are pretty large and
the same size (2578 and 2565). When we take a look at a few of these larger files by hand, it looks like
the large files are nothing but a generic bit of identical HTML that came in from mail sent to my
system from my T-Mobile phone:

<div class="verbatim" id="verbatim-419">
&#x003C;html&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;head&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;title&#x003E;T-Mobile&#x003C;/title&#x003E;
&#x00A0;<br />...</div>
<!--l. 4743--><p class="nopar" > Skimming through the file, it looks like there is no good information in these files so we can probably
delete them.
<!--l. 4749--><p class="noindent" >But before we delete the files, we will write a program to look for files that are more than one line long
and show the contents of the file. We will not bother showing ourselves those files that
are exactly 2578 or 2565 characters long since we know that these files have no useful
information.
<!--l. 4755--><p class="noindent" >So we write the following program:

<div class="verbatim" id="verbatim-420">
import&#x00A0;os
&#x00A0;<br />from&#x00A0;os.path&#x00A0;import&#x00A0;join
&#x00A0;<br />for&#x00A0;(dirname,&#x00A0;dirs,&#x00A0;files)&#x00A0;in&#x00A0;os.walk(&#8217;.&#8217;):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;for&#x00A0;filename&#x00A0;in&#x00A0;files:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;filename.endswith(&#8217;.txt&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;thefile&#x00A0;=&#x00A0;os.path.join(dirname,filename)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;size&#x00A0;=&#x00A0;os.path.getsize(thefile)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;size&#x00A0;==&#x00A0;2578&#x00A0;or&#x00A0;size&#x00A0;==&#x00A0;2565:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand&#x00A0;=&#x00A0;open(thefile,&#8217;r&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lines&#x00A0;=&#x00A0;list()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lines.append(line)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand.close()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(lines)&#x00A0;&#x003E;&#x00A0;1:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;len(lines),&#x00A0;thefile
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;lines[:4]</div>
<!--l. 4775--><p class="nopar" > We use a <span 
class="pcrr7tn-">continue </span>to skip files with the two &#8220;bad sizes&#8221;, then open the rest of the files and read the
lines of the file into a Python list and if the file has more than one line we print out how many lines are
in the file and print out the first three lines.
<!--l. 4785--><p class="noindent" >It looks like filtering out those two bad file sizes, and assuming that all one-line files are correct, we are
down to some pretty clean data:

<div class="verbatim" id="verbatim-421">
python&#x00A0;txtcheck.py
&#x00A0;<br />3&#x00A0;./2004/03/22-03-04_2015.txt
&#x00A0;<br />[&#8217;Little&#x00A0;horse&#x00A0;rider\r\n&#8217;,&#x00A0;&#8217;\r\n&#8217;,&#x00A0;&#8217;\r&#8217;]
&#x00A0;<br />2&#x00A0;./2004/11/30-11-04_1834001.txt
&#x00A0;<br />[&#8217;Testing&#x00A0;123.\n&#8217;,&#x00A0;&#8217;\n&#8217;]
&#x00A0;<br />3&#x00A0;./2007/09/15-09-07_074202_03.txt
&#x00A0;<br />[&#8217;\r\n&#8217;,&#x00A0;&#8217;\r\n&#8217;,&#x00A0;&#8217;Sent&#x00A0;from&#x00A0;my&#x00A0;iPhone\r\n&#8217;]
&#x00A0;<br />3&#x00A0;./2007/09/19-09-07_124857_01.txt
&#x00A0;<br />[&#8217;\r\n&#8217;,&#x00A0;&#8217;\r\n&#8217;,&#x00A0;&#8217;Sent&#x00A0;from&#x00A0;my&#x00A0;iPhone\r\n&#8217;]
&#x00A0;<br />3&#x00A0;./2007/09/20-09-07_115617_01.txt
&#x00A0;<br />...</div>
<!--l. 4802--><p class="nopar" > But there is one more annoying pattern of files: there are some three-line files that consist
of two blank lines followed by a line that says &#8220;Sent from my iPhone&#8221; that have slipped
into my data. So we make the following change to the program to deal with these files as
well.

<div class="verbatim" id="verbatim-422">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lines&#x00A0;=&#x00A0;list()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lines.append(line)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(lines)&#x00A0;==&#x00A0;3&#x00A0;and&#x00A0;lines[2].startswith(&#8217;Sent&#x00A0;from&#x00A0;my&#x00A0;iPhone&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(lines)&#x00A0;&#x003E;&#x00A0;1:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;len(lines),&#x00A0;thefile
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;lines[:4]</div>
<!--l. 4822--><p class="nopar" > We simply check if we have a three-line file, and if the third line starts with the specified text, we skip
it.
<!--l. 4828--><p class="noindent" >Now when we run the program, we only see four remaining multi-line files and all of those files look
pretty reasonable:

<div class="verbatim" id="verbatim-423">
python&#x00A0;txtcheck2.py
&#x00A0;<br />3&#x00A0;./2004/03/22-03-04_2015.txt
&#x00A0;<br />[&#8217;Little&#x00A0;horse&#x00A0;rider\r\n&#8217;,&#x00A0;&#8217;\r\n&#8217;,&#x00A0;&#8217;\r&#8217;]
&#x00A0;<br />2&#x00A0;./2004/11/30-11-04_1834001.txt
&#x00A0;<br />[&#8217;Testing&#x00A0;123.\n&#8217;,&#x00A0;&#8217;\n&#8217;]
&#x00A0;<br />2&#x00A0;./2006/03/17-03-06_1806001.txt
&#x00A0;<br />[&#8217;On&#x00A0;the&#x00A0;road&#x00A0;again...\r\n&#8217;,&#x00A0;&#8217;\r\n&#8217;]
&#x00A0;<br />2&#x00A0;./2006/03/24-03-06_1740001.txt
&#x00A0;<br />[&#8217;On&#x00A0;the&#x00A0;road&#x00A0;again...\r\n&#8217;,&#x00A0;&#8217;\r\n&#8217;]</div>
<!--l. 4841--><p class="nopar" > If you look at the overall pattern of this program, we have successively refined how we accept or reject
files and once we found a pattern that was &#8220;bad&#8221; we used <span 
class="pcrr7tn-">continue </span>to skip the bad files so we could
refine our code to find more file patterns that were bad.
<!--l. 4850--><p class="noindent" >Now we are getting ready to delete the files, so we are going to flip the logic and instead of printing
out the remaining good files, we will print out the &#8220;bad&#8221; files that we are about to delete.

<div class="verbatim" id="verbatim-424">
import&#x00A0;os
&#x00A0;<br />from&#x00A0;os.path&#x00A0;import&#x00A0;join
&#x00A0;<br />for&#x00A0;(dirname,&#x00A0;dirs,&#x00A0;files)&#x00A0;in&#x00A0;os.walk(&#8217;.&#8217;):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;for&#x00A0;filename&#x00A0;in&#x00A0;files:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;filename.endswith(&#8217;.txt&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;thefile&#x00A0;=&#x00A0;os.path.join(dirname,filename)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;size&#x00A0;=&#x00A0;os.path.getsize(thefile)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;size&#x00A0;==&#x00A0;2578&#x00A0;or&#x00A0;size&#x00A0;==&#x00A0;2565:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;T-Mobile:&#8217;,thefile
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand&#x00A0;=&#x00A0;open(thefile,&#8217;r&#8217;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lines&#x00A0;=&#x00A0;list()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;for&#x00A0;line&#x00A0;in&#x00A0;fhand:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lines.append(line)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand.close()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(lines)&#x00A0;==&#x00A0;3&#x00A0;and&#x00A0;lines[2].startswith(&#8217;Sent&#x00A0;from&#x00A0;my&#x00A0;iPhone&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;iPhone:&#8217;,&#x00A0;thefile
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue</div>
<!--l. 4874--><p class="nopar" > We can now see a list of candidate files that we are about to delete and why these files are up for
deleting. The program produces the following output:

<div class="verbatim" id="verbatim-425">
python&#x00A0;txtcheck3.py
&#x00A0;<br />...
&#x00A0;<br />T-Mobile:&#x00A0;./2006/05/31-05-06_1540001.txt
&#x00A0;<br />T-Mobile:&#x00A0;./2006/05/31-05-06_1648001.txt
&#x00A0;<br />iPhone:&#x00A0;./2007/09/15-09-07_074202_03.txt
&#x00A0;<br />iPhone:&#x00A0;./2007/09/15-09-07_144641_01.txt
&#x00A0;<br />iPhone:&#x00A0;./2007/09/19-09-07_124857_01.txt
&#x00A0;<br />...</div>
<!--l. 4890--><p class="nopar" > We can spot-check these files to make sure that we did not inadvertently end up introducing a bug in
our program or perhaps our logic caught some files we did not want to catch.
<!--l. 4897--><p class="noindent" >Once we are satisfied that this is the list of files we want to delete, we make the following change to the
program:

<div class="verbatim" id="verbatim-426">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;size&#x00A0;==&#x00A0;2578&#x00A0;or&#x00A0;size&#x00A0;==&#x00A0;2565:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;T-Mobile:&#8217;,thefile
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;os.remove(thefile)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue
&#x00A0;<br />...
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;len(lines)&#x00A0;==&#x00A0;3&#x00A0;and&#x00A0;lines[2].startswith(&#8217;Sent&#x00A0;from&#x00A0;my&#x00A0;iPhone&#8217;)&#x00A0;:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;iPhone:&#8217;,&#x00A0;thefile
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;os.remove(thefile)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;continue</div>
<!--l. 4910--><p class="nopar" > In this version of the program, we will both print the file out and remove the bad files using
<span 
class="pcrr7tn-">os.remove</span>.

<div class="verbatim" id="verbatim-427">
python&#x00A0;txtdelete.py
&#x00A0;<br />T-Mobile:&#x00A0;./2005/01/02-01-05_1356001.txt
&#x00A0;<br />T-Mobile:&#x00A0;./2005/01/02-01-05_1858001.txt
&#x00A0;<br />...</div>
<!--l. 4923--><p class="nopar" > Just for fun, run the program a second time and it will produce no output since the bad files are already
gone.
<!--l. 4929--><p class="noindent" >If we rerun <span 
class="pcrr7tn-">txtcount.py </span>we can see that we have removed 899 bad files:

<div class="verbatim" id="verbatim-428">
python&#x00A0;txtcount.py
&#x00A0;<br />Files:&#x00A0;1018</div>
<!--l. 4935--><p class="nopar" > In this section, we have followed a sequence where we use Python to first look through directories and
files seeking patterns. We slowly use Python to help determine what we want to do to clean up our
directories. Once we figure out which files are good and which files are not useful, we use Python to
delete the files and perform the cleanup.
<!--l. 4946--><p class="noindent" >The problem you may need to solve can either be quite simple and might only depend on looking at the
names of files, or perhaps you need to read every single file and look for patterns within the files.
Sometimes you will need to read all the files and make a change to some of the files. All of these are
pretty straightforward once you understand how <span 
class="pcrr7tn-">os.walk </span>and the other <span 
class="pcrr7tn-">os </span>utilities can be
used.
<!--l. 4955--><p class="noindent" >
<a 
 id="x1-17019r3"></a>
<!--l. 4955--><p class="noindent" ><span 
class="ptmb7t-x-x-144">15.3</span>   <span 
class="ptmb7t-x-x-144">Command line arguments</span>
<a 
 id="Q1-1-187"></a>
<a 
 id="dx1-17020"></a>
<!--l. 4959--><p class="noindent" >In earlier chapters, we had a number of programs that prompted for a file name using <span class="obeylines-h"><span class="verb"><span 
class="pcrr7tn-">raw_input</span></span></span> and
then read data from the file and processed the data as follows:

<div class="verbatim" id="verbatim-429">
name&#x00A0;=&#x00A0;raw_input(&#8217;Enter&#x00A0;file:&#8217;)
&#x00A0;<br />handle&#x00A0;=&#x00A0;open(name,&#x00A0;&#8217;r&#8217;)
&#x00A0;<br />text&#x00A0;=&#x00A0;handle.read()
&#x00A0;<br />...</div>
<!--l. 4969--><p class="nopar" > We can simplify this program a bit by taking the file name from the command line when we start
Python. Up to now, we simply run our Python programs and respond to the prompts as as
follows:

<div class="verbatim" id="verbatim-430">
python&#x00A0;words.py
&#x00A0;<br />Enter&#x00A0;file:&#x00A0;mbox-short.txt
&#x00A0;<br />...</div>
<!--l. 4982--><p class="nopar" > We can place additional strings after the Python file and access those <span 
class="ptmb7t-">command line arguments </span>in
our Python program. Here is a simple program that demonstrates reading arguments from the
command line:

<div class="verbatim" id="verbatim-431">
import&#x00A0;sys
&#x00A0;<br />print&#x00A0;&#8217;Count:&#8217;,&#x00A0;len(sys.argv)
&#x00A0;<br />print&#x00A0;&#8217;Type:&#8217;,&#x00A0;type(sys.argv)
&#x00A0;<br />for&#x00A0;arg&#x00A0;in&#x00A0;sys.argv:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;print&#x00A0;&#8217;Argument:&#8217;,&#x00A0;arg</div>
<!--l. 4996--><p class="nopar" > The contents of <span 
class="pcrr7tn-">sys.argv </span>are a list of strings where the first string is the name of the Python
program and the remaining strings are the arguments on the command line after the Python
file.
<!--l. 5003--><p class="noindent" >The following shows our program reading several command line arguments from the command
line:

<div class="verbatim" id="verbatim-432">
python&#x00A0;argtest.py&#x00A0;hello&#x00A0;there
&#x00A0;<br />Count:&#x00A0;3
&#x00A0;<br />Type:&#x00A0;&#x003C;type&#x00A0;&#8217;list&#8217;&#x003E;
&#x00A0;<br />Argument:&#x00A0;argtest.py
&#x00A0;<br />Argument:&#x00A0;hello
&#x00A0;<br />Argument:&#x00A0;there</div>
<!--l. 5014--><p class="nopar" > There are three arguments are passed into our program as a three-element list. The first element of the
list is the file name (argtest.py) and the others are the two command line arguments after the file
name.
<!--l. 5021--><p class="noindent" >We can rewrite our program to read the file, taking the file name from the command line argument as
follows:

<div class="verbatim" id="verbatim-433">
import&#x00A0;sys
&#x00A0;<br />
&#x00A0;<br />name&#x00A0;=&#x00A0;sys.argv[1]
&#x00A0;<br />handle&#x00A0;=&#x00A0;open(name,&#x00A0;&#8217;r&#8217;)
&#x00A0;<br />text&#x00A0;=&#x00A0;handle.read()
&#x00A0;<br />print&#x00A0;name,&#x00A0;&#8217;is&#8217;,&#x00A0;len(text),&#x00A0;&#8217;bytes&#8217;</div>
<!--l. 5031--><p class="nopar" > We take the second command line argument as the name of the file (skipping past the program name
in the <span 
class="pcrr7tn-">[0] </span>entry). We open the file and read the contents as follows:

<div class="verbatim" id="verbatim-434">
python&#x00A0;argfile.py&#x00A0;mbox-short.txt
&#x00A0;<br />mbox-short.txt&#x00A0;is&#x00A0;94626&#x00A0;bytes</div>
<!--l. 5042--><p class="nopar" > Using command line arguments as input can make it easier to reuse your Python programs especially
when you only need to input one or two strings.
<!--l. 5048--><p class="noindent" >
<a 
 id="x1-17021r4"></a>
<!--l. 5048--><p class="noindent" ><span 
class="ptmb7t-x-x-144">15.4</span>   <span 
class="ptmb7t-x-x-144">Pipes</span>
<a 
 id="Q1-1-188"></a>
<a 
 id="dx1-17022"></a>
<a 
 id="dx1-17023"></a>
<!--l. 5053--><p class="noindent" >Most operating systems provide a command-line interface, also known as a <span 
class="ptmb7t-">shell</span>. Shells usually
provide commands to navigate the file system and launch applications. For example, in Unix, you can
change directories with <span 
class="pcrr7tn-">cd</span>, display the contents of a directory with <span 
class="pcrr7tn-">ls</span>, and launch a web browser by
typing (for example) <span 
class="pcrr7tn-">firefox</span>.
<a 
 id="dx1-17024"></a>
<a 
 id="dx1-17025"></a>
<!--l. 5063--><p class="noindent" >Any program that you can launch from the shell can also be launched from Python using a <span 
class="ptmb7t-">pipe</span>. A
pipe is an object that represents a running process.
<!--l. 5067--><p class="noindent" >For example, the Unix command<span class="footnote-mark"><a 
href="cfbook14.html#fn1x16"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-17026f1"></a>
<span 
class="pcrr7tn-">ls -l </span>normally displays the contents of the current directory (in long format). You can launch <span 
class="pcrr7tn-">ls </span>with
<span 
class="pcrr7tn-">os.popen</span>:
<a 
 id="dx1-17027"></a>
<a 
 id="dx1-17028"></a>

<div class="verbatim" id="verbatim-435">
&#x003E;&#x003E;&#x003E;&#x00A0;cmd&#x00A0;=&#x00A0;&#8217;ls&#x00A0;-l&#8217;
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;fp&#x00A0;=&#x00A0;os.popen(cmd)</div>
<!--l. 5082--><p class="nopar" > The argument is a string that contains a shell command. The return value is a file pointer that behaves
just like an open file. You can read the output from the <span 
class="pcrr7tn-">ls </span>process one line at a time with <span 
class="pcrr7tn-">readline </span>or
get the whole thing at once with <span 
class="pcrr7tn-">read</span>:
<a 
 id="dx1-17029"></a>
<a 
 id="dx1-17030"></a>
<a 
 id="dx1-17031"></a>
<a 
 id="dx1-17032"></a>

<div class="verbatim" id="verbatim-436">
&#x003E;&#x003E;&#x003E;&#x00A0;res&#x00A0;=&#x00A0;fp.read()</div>
<!--l. 5099--><p class="nopar" > When you are done, you close the pipe like a file:
<a 
 id="dx1-17033"></a>
<a 
 id="dx1-17034"></a>

<div class="verbatim" id="verbatim-437">
&#x003E;&#x003E;&#x003E;&#x00A0;stat&#x00A0;=&#x00A0;fp.close()
&#x00A0;<br />&#x003E;&#x003E;&#x003E;&#x00A0;print&#x00A0;stat
&#x00A0;<br />None</div>
<!--l. 5112--><p class="nopar" > The return value is the final status of the <span 
class="pcrr7tn-">ls </span>process; <span 
class="pcrr7tn-">None </span>means that it ended normally (with no
errors).
<a 
 id="x1-17035r5"></a>
<!--l. 5118--><p class="noindent" ><span 
class="ptmb7t-x-x-144">15.5</span>   <span 
class="ptmb7t-x-x-144">Glossary</span>
<a 
 id="Q1-1-189"></a>
     <dl class="description"><dt class="description">
<span 
class="ptmb7t-">absolute path:</span> </dt><dd 
class="description">A string that describes where a file or directory is stored that starts at the &#8220;top
     of the tree of directories&#8221; so that it can be used to access the file or directory, regardless
     of the current working directory. <a 
 id="dx1-17036"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">checksum:</span> </dt><dd 
class="description">See also <span 
class="ptmb7t-">hashing</span>. The term &#8220;checksum&#8221; comes from the need to verify if data was
     garbled as it was sent across a network or written to a backup medium and then read back
     in. When the data is written or sent, the sending system computes a checksum and also
     sends the checksum. When the data is read or received, the receiving system re-computes
     the checksum from the received data and compares it to the received checksum. If the
     checksums do not match, we must assume that the data was garbled as it was transferred.
     <a 
 id="dx1-17037"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">command line argument:</span> </dt><dd 
class="description">Parameters on the command line after the Python file name.
     </dd><dt class="description">
<span 
class="ptmb7t-">current working directory:</span> </dt><dd 
class="description">The  current  directory  that  you  are  &#8220;in&#8221;.  You  can  change  your
     working  directory  using  the  <span 
class="pcrr7tn-">cd </span>command  on  most  systems  in  their  command-line
     interfaces.  When  you  open  a  file  in  Python  using  just  the  file  name  with  no  path
     information the file must be in the current working directory where you are running the
     program. <a 
 id="dx1-17038"></a><a 
 id="dx1-17039"></a> <a 
 id="dx1-17040"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">hashing:</span> </dt><dd 
class="description">Reading through a potentially large amount of data and producing a unique checksum
     for the data. The best hash functions produce very few &#8220;collisions&#8221; where you can give
     two different streams of data to the hash function and get back the same hash. MD5,
     SHA1, and SHA256 are examples of commonly used hash functions. <a 
 id="dx1-17041"></a>

     </dd><dt class="description">
<span 
class="ptmb7t-">pipe:</span> </dt><dd 
class="description">A pipe is a connection to a running program. Using a pipe, you can write a program
     to send data to another program or receive data from that program. A pipe is similar to
     a <span 
class="ptmb7t-">socket </span>except that a pipe can only be used to connect programs running on the same
     computer (i.e. not across a network). <a 
 id="dx1-17042"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">relative path:</span> </dt><dd 
class="description">A string that describes where a file or directory is stored relative to the current
     working directory. <a 
 id="dx1-17043"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">shell:</span> </dt><dd 
class="description">A command-line interface to an operating system. Also called a &#8220;terminal program&#8221; in
     some systems. In this interface you type a command and parameters on a line and press
     &#8220;enter&#8221; to execute the command. <a 
 id="dx1-17044"></a>
     </dd><dt class="description">
<span 
class="ptmb7t-">walk:</span> </dt><dd 
class="description">A  term  we  use  to  describe  the  notion  of  visiting  the  entire  tree  of  directories,
     sub-directories, sub-sub-directories, until we have visited the all of the directories. We
     call this &#8220;walking the directory tree&#8221;. <a 
 id="dx1-17045"></a>
     </dd></dl>
<!--l. 5187--><p class="noindent" >
<a 
 id="x1-17046r6"></a>
<!--l. 5187--><p class="noindent" ><span 
class="ptmb7t-x-x-144">15.6</span>   <span 
class="ptmb7t-x-x-144">Exercises</span>
<a 
 id="Q1-1-190"></a>
<div class="newtheorem">
<!--l. 5189--><p class="noindent" ><span class="head">
<a 
 id="x1-17047r1"></a>
<span 
class="ptmb7t-">Exercise 15.1</span>  </span>
<a 
 id="dx1-17048"></a>
<!--l. 5194--><p class="noindent" >In a large collection of MP3 files there may be more than one copy of the same song, stored in
different directories or with different file names. The goal of this exercise is to search for these
duplicates.
<!--l. 5199--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-17050x1">Write a program that walks a directory and all of its sub-directories for all files with a
     given suffix (like <span 
class="pcrr7tn-">.mp3</span>) and lists pairs of files with that are the same size. Hint: Use a

     dictionary where the key of the dictionary is the size of the file from <span 
class="pcrr7tn-">os.path.getsize</span>
     and the value in the dictionary is the path name concatenated with the file name. As you
     encounter each file check to see if you already have a file that has the same size as the
     current file. If so, you have a duplicate size file and print out the file size and the two files
     names (one from the hash and the other file you are looking at).
<a 
 id="dx1-17051"></a>
<a 
 id="dx1-17052"></a>
<a 
 id="dx1-17053"></a>
<a 
 id="dx1-17054"></a>
     </li>
     <li 
  class="enumerate" id="x1-17056x2">Adapt the previous program to look for files that have duplicate content using a hashing
     or  <span 
class="ptmb7t-">checksum  </span>algorithm.  For  example,  MD5  (Message-Digest  algorithm  5)  takes  an
     arbitrarily-long  &#8220;message&#8221;  and  returns  a  128-bit  &#8220;checksum.&#8221;  The  probability  is  very
     small that two files with different contents will return the same checksum.
     <!--l. 5226--><p class="noindent" >You  can  read  about  MD5  at  <a 
href="wikipedia.org/wiki/Md5" class="url" ><span 
class="pcrr7tn-">wikipedia.org/wiki/Md5</span></a>.  The  following  code  snippet
     opens a file, reads it and computes its checksum.

     <div class="verbatim" id="verbatim-438">
     import&#x00A0;hashlib
     &#x00A0;<br />...
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand&#x00A0;=&#x00A0;open(thefile,&#8217;r&#8217;)
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;data&#x00A0;=&#x00A0;fhand.read()
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;fhand.close()
     &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;checksum&#x00A0;=&#x00A0;hashlib.md5(data).hexdigest()
</div>
     <!--l. 5238--><p class="nopar" > You should create a dictionary where the checksum is the key and the file name is the
     value. When you compute a checksum and it is already in the dictionary as a key, you
     have two files with duplicate content so print out the file in the dictionary and the
     file you just read. Here is some sample output from a run in a folder of image files:

     <div class="verbatim" id="verbatim-439">
     ./2004/11/15-11-04_0923001.jpg&#x00A0;./2004/11/15-11-04_1016001.jpg
     &#x00A0;<br />./2005/06/28-06-05_1500001.jpg&#x00A0;./2005/06/28-06-05_1502001.jpg
     &#x00A0;<br />./2006/08/11-08-06_205948_01.jpg&#x00A0;./2006/08/12-08-06_155318_02.jpg
     &#x00A0;<br />./2006/09/28-09-06_225657_01.jpg&#x00A0;./2006/09-50-years/28-09-06_225657_01.jpg
     &#x00A0;<br />./2006/09/29-09-06_002312_01.jpg&#x00A0;./2006/09-50-years/29-09-06_002312_01.jpg
</div>
     <!--l. 5254--><p class="nopar" > Apparently I sometimes sent the same photo more than once or made a copy of a photo from
     time to time without deleting the original.
     </li></ol>
</div>

<!--l. 5267--><p class="noindent" >

<a 
 id="x1-17057r184"></a>
<h2 class="appendixHead"><span class="titlemark">Appendix&#x00A0;A</span><br /><a 
 id="x1-18000A"></a>Python Programming on Windows</h2>
<!--l. 5269--><p class="noindent" >In this appendix, we walk through a series of steps so you can run Python on Windows. There
are many different approaches you can take, and this is just one approach to keep things
simple.
<!--l. 5274--><p class="noindent" >First, you need to install a programmer editor. You do not want to use Notepad or Microsoft Word to
edit Python programs. Programs must be in &#8221;flat-text&#8221; files and so you need an editor that is good at
editing text files.
<!--l. 5280--><p class="noindent" >Our recommended editor for Windows is NotePad++ which can be downloaded and installed
from:
<!--l. 5283--><p class="noindent" ><a 
href="http://sourceforge.net/projects/notepad-plus/files/" class="url" ><span 
class="pcrr7tn-">http://sourceforge.net/projects/notepad-plus/files/</span></a>
<!--l. 5285--><p class="noindent" >Then download a recent version of Python 2 from the <a 
href="www.python.org" class="url" ><span 
class="pcrr7tn-">www.python.org</span></a> web site.
<!--l. 5288--><p class="noindent" ><a 
href="http://www.python.org/download/releases/2.5.4/" class="url" ><span 
class="pcrr7tn-">http://www.python.org/download/releases/2.5.4/</span></a>
<!--l. 5290--><p class="noindent" >Once you have installed Python, you should have a new folder on your computer like <span 
class="pcrr7tn-">C:</span><span 
class="cmsy-10">\</span><span 
class="pcrr7tn-">Python25</span>.
<!--l. 5293--><p class="noindent" >To create a Python program, run NotePad++ from the Start Menu and save the file with a suffix of
&#8220;.py&#8221;. For this exercise, put a folder on your Desktop named <span 
class="pcrr7tn-">py4inf</span>. It is best to keep your folder
names short and not to have any spaces in your folder or file name.
<!--l. 5299--><p class="noindent" >Lets make our first Python program be:

<div class="verbatim" id="verbatim-440">
print&#x00A0;&#8217;Hello&#x00A0;Chuck&#8217;</div>
<!--l. 5304--><p class="nopar" > Except that you should change it to be your name. Lets save the file into <span 
class="pcrr7tn-">Desktop</span><span 
class="cmsy-10">\</span><span 
class="pcrr7tn-">py4inf</span><span 
class="cmsy-10">\</span><span 
class="pcrr7tn-">prog1.py</span>.
<!--l. 5310--><p class="noindent" >The run the command line. Different versions of Windows do this differently:
     <ul class="itemize1">
     <li class="itemize">Windows Vista and Windows-7: Press <span 
class="ptmb7t-">Start </span>and then in the command search window
     enter the word <span 
class="pcrr7tn-">command </span>and press enter.
     </li>
     <li class="itemize">Windows-XP: Press <span 
class="ptmb7t-">Start</span>, then <span 
class="ptmb7t-">Run</span>, and then enter <span 
class="pcrr7tn-">cmd </span>in the dialog box and press <span 
class="ptmb7t-">OK</span>.</li></ul>
<!--l. 5322--><p class="noindent" >You will find yourself in a text window with a prompt that tells you what folder you are currently
&#8220;in&#8221;.
<!--l. 5325--><p class="noindent" >Windows Vista and Windows-7: <span 
class="pcrr7tn-">C:</span><span 
class="cmsy-10">\</span><span 
class="pcrr7tn-">Users</span><span 
class="cmsy-10">\</span><span 
class="pcrr7tn-">csev</span><br 
class="newline" />Windows XP: <span 
class="pcrr7tn-">C:</span><span 
class="cmsy-10">\</span><span 
class="pcrr7tn-">Documents and Settings</span><span 
class="cmsy-10">\</span><span 
class="pcrr7tn-">csev</span>
<!--l. 5328--><p class="noindent" >This is your &#8220;home directory&#8221;. Now we need to move into the folder where you have saved your
Python program using the following commands:

<div class="verbatim" id="verbatim-441">
C:\Users\csev\&#x003E;&#x00A0;cd&#x00A0;Desktop
&#x00A0;<br />C:\Users\csev\Desktop&#x003E;&#x00A0;cd&#x00A0;py4inf</div>
<!--l. 5336--><p class="nopar" > Then type

<div class="verbatim" id="verbatim-442">
C:\Users\csev\Desktop\py4inf&#x003E;&#x00A0;dir</div>
<!--l. 5344--><p class="nopar" > To list your files. You should see the <span 
class="pcrr7tn-">prog1.py </span>when you type the <span 
class="pcrr7tn-">dir </span>command.
<!--l. 5350--><p class="noindent" >To run your program, simply type the name of your file at the command prompt and press
enter.

<div class="verbatim" id="verbatim-443">
C:\Users\csev\Desktop\py4inf&#x003E;&#x00A0;prog1.py
&#x00A0;<br />Hello&#x00A0;Chuck
&#x00A0;<br />C:\Users\csev\Desktop\py4inf&#x003E;</div>
<!--l. 5358--><p class="nopar" > You can edit the file in NotePad++, save it and then switch back to the command line and execute the
program again by typing the file name again at the command line prompt.
<!--l. 5365--><p class="noindent" >If you get confused in the command line window - just close it and start a new one.
<!--l. 5368--><p class="noindent" >Hint: You can also press the &#8220;up-arrow&#8221; in the command line to scroll back and run a previously
entered command again.
<!--l. 5371--><p class="noindent" >You should also look in the preferences for NotePad++ and set it to expand tab characters to be four
spaces. It will save you lots of effort looking for indentation errors.
<!--l. 5375--><p class="noindent" >You can also find further information on editing and running Python programs at <a 
href="www.py4inf.com" class="url" ><span 
class="pcrr7tn-">www.py4inf.com</span></a>.

<!--l. 5378--><p class="noindent" >

<a 
 id="x1-18001r184"></a>
<h2 class="appendixHead"><span class="titlemark">Appendix&#x00A0;B</span><br /><a 
 id="x1-19000B"></a>Python Programming on Macintosh</h2>
<!--l. 5380--><p class="noindent" >In this appendix, we walk through a series of steps so you can run Python on Macintosh. Since Python
is already included in the Macintosh Operating system, we need to learn how to edit Python files and
run Python programs in the terminal window.
<!--l. 5386--><p class="noindent" >There approaches you can take to editing and running Python programs, and this is just one approach
we have found to be very simple.
<!--l. 5390--><p class="noindent" >First, you need to install a programmer editor. You do not want to use TextEdit or Microsoft Word to
edit Python programs. Programs must be in &#8221;flat-text&#8221; files and so you need an editor that is good at
editing text files.
<!--l. 5396--><p class="noindent" >Our recommended editor for Macintosh is TextWrangler which can be downloaded and installed
from:
<!--l. 5399--><p class="noindent" ><a 
href="http://www.barebones.com/products/TextWrangler/" class="url" ><span 
class="pcrr7tn-">http://www.barebones.com/products/TextWrangler/</span></a>
<!--l. 5401--><p class="noindent" >To create a Python program, run from <span 
class="ptmb7t-">TextWrangler </span>from your <span 
class="ptmb7t-">Applications </span>folder.
<!--l. 5404--><p class="noindent" >Lets make our first Python program be:

<div class="verbatim" id="verbatim-444">
print&#x00A0;&#8217;Hello&#x00A0;Chuck&#8217;</div>
<!--l. 5409--><p class="nopar" > Except that you should change it to be your name. Lets save the file in a folder on your Desktop
named <span 
class="pcrr7tn-">py4inf</span>. It is best to keep your folder names short and not to have any spaces in your folder or
file name. Once you have made the folder, save the file into <span 
class="pcrr7tn-">Desktop</span><span 
class="cmsy-10">\</span><span 
class="pcrr7tn-">py4inf</span><span 
class="cmsy-10">\</span><span 
class="pcrr7tn-">prog1.py</span>.
<!--l. 5419--><p class="noindent" >The run the <span 
class="ptmb7t-">Terminal </span>program. The easiest way is to press the Spotlight icon (the magnifying glass) in
the upper right of your screen and enter &#8220;terminal&#8221; and launch the application that comes
up.
<!--l. 5424--><p class="noindent" >You start in your &#8220;home directory&#8221;. You can see the current directory by typing the <span 
class="pcrr7tn-">pwd </span>command in
the terminal window.

<div class="verbatim" id="verbatim-445">
67-194-80-15:~&#x00A0;csev$&#x00A0;pwd
&#x00A0;<br />/Users/csev
&#x00A0;<br />67-194-80-15:~&#x00A0;csev$</div>
<!--l. 5432--><p class="nopar" > We must be in the folder that contains your Python program to run the program. We user
the <span 
class="pcrr7tn-">cd </span>command to move to a new folder and then the <span 
class="pcrr7tn-">ls </span>command to list the files in the
folder.

<div class="verbatim" id="verbatim-446">
67-194-80-15:~&#x00A0;csev$&#x00A0;cd&#x00A0;Desktop
&#x00A0;<br />67-194-80-15:Desktop&#x00A0;csev$&#x00A0;cd&#x00A0;py4inf
&#x00A0;<br />67-194-80-15:py4inf&#x00A0;csev$&#x00A0;ls
&#x00A0;<br />prog1.py
&#x00A0;<br />67-194-80-15:py4inf&#x00A0;csev$</div>
<!--l. 5447--><p class="nopar" > To run your program, simply type the <span 
class="pcrr7tn-">python </span>command followed by the name of your file at the
command prompt and press enter.

<div class="verbatim" id="verbatim-447">
67-194-80-15:py4inf&#x00A0;csev$&#x00A0;python&#x00A0;prog1.py
&#x00A0;<br />Hello&#x00A0;Chuck
&#x00A0;<br />67-194-80-15:py4inf&#x00A0;csev$</div>
<!--l. 5459--><p class="nopar" > You can edit the file in TextWrangler, save it and then switch back to the command line and execute
the program again by typing the file name again at the command line prompt.
<!--l. 5466--><p class="noindent" >If you get confused in the command line window - just close it and start a new one.
<!--l. 5469--><p class="noindent" >Hint: You can also press the &#8220;up-arrow&#8221; in the command line to scroll back and run a previously
entered command again.
<!--l. 5472--><p class="noindent" >You should also look in the preferences for TextWrangler and set it to expand tab characters to be four
spaces. It will save you lots of effort looking for indentation errors.
<!--l. 5476--><p class="noindent" >You can also find further information on editing and running Python programs at <a 
href="www.py4inf.com" class="url" ><span 
class="pcrr7tn-">www.py4inf.com</span></a>.

<!--l. 5481--><p class="noindent" >

<a 
 id="x1-19001r184"></a>
<h2 class="appendixHead"><span class="titlemark">Appendix&#x00A0;C</span><br /><a 
 id="x1-20000C"></a>Contributor List</h2>
<span 
class="ptmb7t-x-x-144">Contributor List for &#8220;Python for Informatics&#8221;</span>
<!--l. 5484--><p class="noindent" >Bruce Shields for copy editing early drafts, Sarah Hegge, Steven Cherry, Sarah Kathleen Barbarow,
Andrea Parker, Radaphat Chongthammakun, Megan Hixon, Kirby Urner, Sarah Kathleen Barbrow,
Katie Kujala, Noah Botimer, Emily Alinder, Mark Thompson-Kular, James Perry, Eric Hofer, Eytan
Adar, Peter Robinson, Deborah J. Nelson, Jonathan C. Anthony, Eden Rassette, Jeannette Schroeder,
Justin Feezell, Chuanqi Li, Gerald Gordinier, Gavin Thomas Strassel, Ryan Clement, Alissa Talley,
Caitlin Holman, Yong-Mi Kim, Karen Stover, Cherie Edmonds, Maria Seiferle, Romer Kristi D.
Aranas (RK),
<!--l. 5520--><p class="noindent" >
<!--l. 5520--><p class="noindent" ><span 
class="ptmb7t-x-x-144">Contributor List for &#8220;Think Python&#8221;</span>
<a 
 id="dx1-20001"></a>
<!--l. 5524--><p class="noindent" >(Allen B. Downey)
<!--l. 5526--><p class="noindent" >More than 100 sharp-eyed and thoughtful readers have sent in suggestions and corrections over
the past few years. Their contributions, and enthusiasm for this project, have been a huge
help.
<!--l. 5531--><p class="noindent" >For the detail on the nature of each of the contributions from these individuals, see the &#8220;Think Python&#8221;
text.
<!--l. 5534--><p class="noindent" >Lloyd Hugh Allen, Yvon Boulianne, Fred Bremmer, Jonah Cohen, Michael Conlon, Benoit Girard,
Courtney Gleason and Katherine Smith, Lee Harr, James Kaylin, David Kershaw, Eddie Lam,
Man-Yong Lee, David Mayo, Chris McAloon, Matthew J. Moelter, Simon Dicon Montford, John
Ouzts, Kevin Parks, David Pool, Michael Schmitt, Robin Shaw, Paul Sleigh, Craig T. Snydal, Ian
Thomas, Keith Verheyden, Peter Winstanley, Chris Wrobel, Moshe Zadka, Christoph Zwerschke,
James Mayer, Hayden McAfee, Angel Arnal, Tauhidul Hoque and Lex Berezhny, Dr. Michele Alzetta,
Andy Mitchell, Kalin Harvey, Christopher P. Smith, David Hutchins, Gregor Lingl, Julie Peters, Florin
Oprina, D.&#x00A0;J.&#x00A0;Webre, Ken, Ivo Wever, Curtis Yanko, Ben Logan, Jason Armstrong, Louis Cordier,
Brian Cain, Rob Black, Jean-Philippe Rey at Ecole Centrale Paris, Jason Mader at George Washington
University made a number Jan Gundtofte-Bruun, Abel David and Alexis Dinno, Charles Thayer,
Roger Sperberg, Sam Bull, Andrew Cheung, C. Corey Capel, Alessandra, Wim Champagne,
Douglas Wright, Jared Spindor, Lin Peiheng, Ray Hagtvedt, Torsten Hübsch, Inga Petuhhov,
Arne Babenhauserheide, Mark E. Casida, Scott Tyler, Gordon Shephard, Andrew Turner,
Adam Hobart, Daryl Hammond and Sarah Zimmerman, George Sass, Brian Bingham, Leah
Engelbert-Fenton, Joe Funke, Chao-chao Chen, Jeff Paine, Lubos Pintes, Gregg Lind and Abigail
Heithoff, Max Hailperin, Chotipat Pornavalai, Stanislaw Antol, Eric Pashman, Miguel
Azevedo, Jianhua Liu, Nick King, Martin Zuther, Adam Zimmerman, Ratnakar Tiwari, Anurag
Goel, Kelli Kratzer, Mark Griffiths, Roydan Ongie, Patryk Wolowiec, Mark Chonofsky,

Russell Coleman, Wei Huang, Karen Barber, Nam Nguyen, Stéphane Morin, and Paul
Stoop.

 
</body></html> 



